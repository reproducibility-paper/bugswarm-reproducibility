travis_fold:start:system_info[0K[33;1mBuild system information[0m
Build language: java
Build group: stable
Build dist: trusty
Build id: ''
Job id: ''
[34m[1mBuild image provisioning date and time[0m
Tue Aug 29 02:50:02 UTC 2017
[34m[1mOperating System Details[0m
Distributor ID:	Ubuntu
Description:	Ubuntu 14.04.5 LTS
Release:	14.04
Codename:	trusty
[34m[1mCookbooks Version[0m
4642454 https://github.com/travis-ci/travis-cookbooks/tree/4642454
[34m[1mgit version[0m
git version 2.14.1
[34m[1mbash version[0m
GNU bash, version 4.3.11(1)-release (x86_64-pc-linux-gnu)
[34m[1mgcc version[0m
gcc (Ubuntu 4.8.4-2ubuntu1~14.04.3) 4.8.4
Copyright (C) 2013 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

[34m[1mdocker version[0m
Client:
 Version:      17.03.1-ce
 API version:  1.27
 Go version:   go1.7.5
 Git commit:   c6d412e
 Built:        Mon Mar 27 16:58:30 2017
 OS/Arch:      linux/amd64
[34m[1mclang version[0m
clang version 3.9.0 (tags/RELEASE_390/final)
Target: x86_64-unknown-linux-gnu
Thread model: posix
InstalledDir: /usr/local/clang-3.9.0/bin
[34m[1mjq version[0m
jq-1.5
[34m[1mbats version[0m
Bats 0.4.0
[34m[1mshellcheck version[0m
0.4.6
[34m[1mshfmt version[0m
v1.3.1
[34m[1mccache version[0m
ccache version 3.1.9

Copyright (C) 2002-2007 Andrew Tridgell
Copyright (C) 2009-2011 Joel Rosdahl

This program is free software; you can redistribute it and/or modify it under
the terms of the GNU General Public License as published by the Free Software
Foundation; either version 3 of the License, or (at your option) any later
version.
[34m[1mcmake version[0m
cmake version 3.2.2

CMake suite maintained and supported by Kitware (kitware.com/cmake).
[34m[1mheroku version[0m
heroku-cli/6.13.19-6cd27b3 (linux-x64) node-v8.3.0
[34m[1mimagemagick version[0m
Version: ImageMagick 6.7.7-10 2017-07-31 Q16 http://www.imagemagick.org
[34m[1mmd5deep version[0m
4.2
[34m[1mmercurial version[0m
Mercurial Distributed SCM (version 4.2.2)
(see https://mercurial-scm.org for more information)

Copyright (C) 2005-2017 Matt Mackall and others
This is free software; see the source for copying conditions. There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
[34m[1mmysql version[0m
mysql  Ver 14.14 Distrib 5.6.33, for debian-linux-gnu (x86_64) using  EditLine wrapper
[34m[1mopenssl version[0m
OpenSSL 1.0.1f 6 Jan 2014
[34m[1mpacker version[0m
Packer v1.0.2

Your version of Packer is out of date! The latest version
is 1.0.4. You can update by downloading from www.packer.io
[34m[1mpostgresql client version[0m
psql (PostgreSQL) 9.6.4
[34m[1mragel version[0m
Ragel State Machine Compiler version 6.8 Feb 2013
Copyright (c) 2001-2009 by Adrian Thurston
[34m[1msubversion version[0m
svn, version 1.8.8 (r1568071)
   compiled Aug 10 2017, 17:20:39 on x86_64-pc-linux-gnu

Copyright (C) 2013 The Apache Software Foundation.
This software consists of contributions made by many people;
see the NOTICE file for more information.
Subversion is open source software, see http://subversion.apache.org/

The following repository access (RA) modules are available:

* ra_svn : Module for accessing a repository using the svn network protocol.
  - with Cyrus SASL authentication
  - handles 'svn' scheme
* ra_local : Module for accessing a repository on local disk.
  - handles 'file' scheme
* ra_serf : Module for accessing a repository via WebDAV protocol using serf.
  - using serf 1.3.3
  - handles 'http' scheme
  - handles 'https' scheme

[34m[1msudo version[0m
Sudo version 1.8.9p5
Configure options: --prefix=/usr -v --with-all-insults --with-pam --with-fqdn --with-logging=syslog --with-logfac=authpriv --with-env-editor --with-editor=/usr/bin/editor --with-timeout=15 --with-password-timeout=0 --with-passprompt=[sudo] password for %p:  --without-lecture --with-tty-tickets --disable-root-mailer --enable-admin-flag --with-sendmail=/usr/sbin/sendmail --with-timedir=/var/lib/sudo --mandir=/usr/share/man --libexecdir=/usr/lib/sudo --with-sssd --with-sssd-lib=/usr/lib/x86_64-linux-gnu --with-selinux
Sudoers policy plugin version 1.8.9p5
Sudoers file grammar version 43

Sudoers path: /etc/sudoers
Authentication methods: 'pam'
Syslog facility if syslog is being used for logging: authpriv
Syslog priority to use when user authenticates successfully: notice
Syslog priority to use when user authenticates unsuccessfully: alert
Send mail if the user is not in sudoers
Use a separate timestamp for each user/tty combo
Lecture user the first time they run sudo
Root may run sudo
Allow some information gathering to give useful error messages
Require fully-qualified hostnames in the sudoers file
Visudo will honor the EDITOR environment variable
Set the LOGNAME and USER environment variables
Length at which to wrap log file lines (0 for no wrap): 80
Authentication timestamp timeout: 15.0 minutes
Password prompt timeout: 0.0 minutes
Number of tries to enter a password: 3
Umask to use or 0777 to use user's: 022
Path to mail program: /usr/sbin/sendmail
Flags for mail program: -t
Address to send mail to: root
Subject line for mail messages: *** SECURITY information for %h ***
Incorrect password message: Sorry, try again.
Path to authentication timestamp dir: /var/lib/sudo
Default password prompt: [sudo] password for %p: 
Default user to run commands as: root
Value to override user's $PATH with: /usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/snap/bin
Path to the editor for use by visudo: /usr/bin/editor
When to require a password for 'list' pseudocommand: any
When to require a password for 'verify' pseudocommand: all
File descriptors >= 3 will be closed before executing a command
Environment variables to check for sanity:
	TZ
	TERM
	LINGUAS
	LC_*
	LANGUAGE
	LANG
	COLORTERM
Environment variables to remove:
	RUBYOPT
	RUBYLIB
	PYTHONUSERBASE
	PYTHONINSPECT
	PYTHONPATH
	PYTHONHOME
	TMPPREFIX
	ZDOTDIR
	READNULLCMD
	NULLCMD
	FPATH
	PERL5DB
	PERL5OPT
	PERL5LIB
	PERLLIB
	PERLIO_DEBUG 
	JAVA_TOOL_OPTIONS
	SHELLOPTS
	GLOBIGNORE
	PS4
	BASH_ENV
	ENV
	TERMCAP
	TERMPATH
	TERMINFO_DIRS
	TERMINFO
	_RLD*
	LD_*
	PATH_LOCALE
	NLSPATH
	HOSTALIASES
	RES_OPTIONS
	LOCALDOMAIN
	CDPATH
	IFS
Environment variables to preserve:
	JAVA_HOME
	TRAVIS
	CI
	DEBIAN_FRONTEND
	XAUTHORIZATION
	XAUTHORITY
	PS2
	PS1
	PATH
	LS_COLORS
	KRB5CCNAME
	HOSTNAME
	HOME
	DISPLAY
	COLORS
Locale to use while parsing sudoers: C
Directory in which to store input/output logs: /var/log/sudo-io
File in which to store the input/output log: %{seq}
Add an entry to the utmp/utmpx file when allocating a pty
PAM service name to use
PAM service name to use for login shells
Create a new PAM session for the command to run in
Maximum I/O log sequence number: 0

Local IP address and netmask pairs:
	172.17.0.2/255.255.0.0

Sudoers I/O plugin version 1.8.9p5
[34m[1mgzip version[0m
gzip 1.6
Copyright (C) 2007, 2010, 2011 Free Software Foundation, Inc.
Copyright (C) 1993 Jean-loup Gailly.
This is free software.  You may redistribute copies of it under the terms of
the GNU General Public License <http://www.gnu.org/licenses/gpl.html>.
There is NO WARRANTY, to the extent permitted by law.

Written by Jean-loup Gailly.
[34m[1mzip version[0m
Copyright (c) 1990-2008 Info-ZIP - Type 'zip "-L"' for software license.
This is Zip 3.0 (July 5th 2008), by Info-ZIP.
Currently maintained by E. Gordon.  Please send bug reports to
the authors using the web page at www.info-zip.org; see README for details.

Latest sources and executables are at ftp://ftp.info-zip.org/pub/infozip,
as of above date; see http://www.info-zip.org/ for other sites.

Compiled with gcc 4.8.2 for Unix (Linux ELF) on Oct 21 2013.

Zip special compilation options:
	USE_EF_UT_TIME       (store Universal Time)
	BZIP2_SUPPORT        (bzip2 library version 1.0.6, 6-Sept-2010)
	    bzip2 code and library copyright (c) Julian R Seward
	    (See the bzip2 license for terms of use)
	SYMLINK_SUPPORT      (symbolic links supported)
	LARGE_FILE_SUPPORT   (can read and write large files on file system)
	ZIP64_SUPPORT        (use Zip64 to store large files in archives)
	UNICODE_SUPPORT      (store and read UTF-8 Unicode paths)
	STORE_UNIX_UIDs_GIDs (store UID/GID sizes/values using new extra field)
	UIDGID_NOT_16BIT     (old Unix 16-bit UID/GID extra field not used)
	[encryption, version 2.91 of 05 Jan 2007] (modified for Zip 3)

Encryption notice:
	The encryption code of this program is not copyrighted and is
	put in the public domain.  It was originally written in Europe
	and, to the best of our knowledge, can be freely distributed
	in both source and object forms from any country, including
	the USA under License Exception TSU of the U.S. Export
	Administration Regulations (section 740.13(e)) of 6 June 2002.

Zip environment options:
             ZIP:  [none]
          ZIPOPT:  [none]
[34m[1mvim version[0m
VIM - Vi IMproved 7.4 (2013 Aug 10, compiled Nov 24 2016 16:43:18)
Included patches: 1-52
Extra patches: 8.0.0056
Modified by pkg-vim-maintainers@lists.alioth.debian.org
Compiled by buildd@
Huge version without GUI.  Features included (+) or not (-):
+acl             +farsi           +mouse_netterm   +syntax
+arabic          +file_in_path    +mouse_sgr       +tag_binary
+autocmd         +find_in_path    -mouse_sysmouse  +tag_old_static
-balloon_eval    +float           +mouse_urxvt     -tag_any_white
-browse          +folding         +mouse_xterm     -tcl
++builtin_terms  -footer          +multi_byte      +terminfo
+byte_offset     +fork()          +multi_lang      +termresponse
+cindent         +gettext         -mzscheme        +textobjects
-clientserver    -hangul_input    +netbeans_intg   +title
-clipboard       +iconv           +path_extra      -toolbar
+cmdline_compl   +insert_expand   -perl            +user_commands
+cmdline_hist    +jumplist        +persistent_undo +vertsplit
+cmdline_info    +keymap          +postscript      +virtualedit
+comments        +langmap         +printer         +visual
+conceal         +libcall         +profile         +visualextra
+cryptv          +linebreak       +python          +viminfo
+cscope          +lispindent      -python3         +vreplace
+cursorbind      +listcmds        +quickfix        +wildignore
+cursorshape     +localmap        +reltime         +wildmenu
+dialog_con      -lua             +rightleft       +windows
+diff            +menu            -ruby            +writebackup
+digraphs        +mksession       +scrollbind      -X11
-dnd             +modify_fname    +signs           -xfontset
-ebcdic          +mouse           +smartindent     -xim
+emacs_tags      -mouseshape      -sniff           -xsmp
+eval            +mouse_dec       +startuptime     -xterm_clipboard
+ex_extra        +mouse_gpm       +statusline      -xterm_save
+extra_search    -mouse_jsbterm   -sun_workshop    -xpm
   system vimrc file: "$VIM/vimrc"
     user vimrc file: "$HOME/.vimrc"
 2nd user vimrc file: "~/.vim/vimrc"
      user exrc file: "$HOME/.exrc"
  fall-back for $VIM: "/usr/share/vim"
Compilation: gcc -c -I. -Iproto -DHAVE_CONFIG_H     -g -O2 -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -U_FORTIFY_SOURCE -D_FORTIFY_SOURCE=1      
Linking: gcc   -Wl,-Bsymbolic-functions -Wl,-z,relro -Wl,--as-needed -o vim        -lm -ltinfo -lnsl  -lselinux  -lacl -lattr -lgpm -ldl    -L/usr/lib/python2.7/config-x86_64-linux-gnu -lpython2.7 -lpthread -ldl -lutil -lm -Xlinker -export-dynamic -Wl,-O1 -Wl,-Bsymbolic-functions      
[34m[1miptables version[0m
iptables v1.4.21
[34m[1mcurl version[0m
curl 7.35.0 (x86_64-pc-linux-gnu) libcurl/7.35.0 OpenSSL/1.0.1f zlib/1.2.8 libidn/1.28 librtmp/2.3
[34m[1mwget version[0m
GNU Wget 1.15 built on linux-gnu.
[34m[1mrsync version[0m
rsync  version 3.1.0  protocol version 31
[34m[1mgimme version[0m
v1.2.0
[34m[1mnvm version[0m
0.33.2
[34m[1mperlbrew version[0m
/home/travis/perl5/perlbrew/bin/perlbrew  - App::perlbrew/0.80
[34m[1mphpenv version[0m
rbenv 1.1.1-4-g4ebd1bd
[34m[1mrvm version[0m
rvm 1.29.2 (latest) by Michal Papis, Piotr Kuczynski, Wayne E. Seguin [https://rvm.io/]
[34m[1mdefault ruby version[0m
ruby 2.4.1p111 (2017-03-22 revision 58053) [x86_64-linux]
[34m[1mCouchDB version[0m
couchdb 1.6.1
[34m[1mElasticSearch version[0m
5.5.0
[34m[1mInstalled Firefox version[0m
firefox 55.0.2
[34m[1mMongoDB version[0m
MongoDB 3.2.16
[34m[1mPre-installed PostgreSQL versions[0m
9.2.22
9.3.18
9.4.13
9.5.8
9.6.4
[34m[1mRabbitMQ Version[0m
3.6.11
[34m[1mRedis version[0m
redis-server 4.0.1
[34m[1mriak version[0m
2.2.3
[34m[1mPre-installed Go versions[0m
1.7.4
[34m[1mant version[0m
Apache Ant(TM) version 1.9.3 compiled on April 8 2014
[34m[1mmvn version[0m
Apache Maven 3.5.0 (ff8f5e7444045639af65f6095c62210b5713f426; 2017-04-03T19:39:06Z)
Maven home: /usr/local/maven-3.5.0
Java version: 1.8.0_144, vendor: Oracle Corporation
Java home: /usr/lib/jvm/java-8-oracle/jre
Default locale: en_US, platform encoding: UTF-8
OS name: "linux", version: "4.4.0-92-generic", arch: "amd64", family: "unix"
[34m[1mgradle version[0m

------------------------------------------------------------
Gradle 4.0.1
------------------------------------------------------------

Build time:   2017-07-07 14:02:41 UTC
Revision:     38e5dc0f772daecca1d2681885d3d85414eb6826

Groovy:       2.4.11
Ant:          Apache Ant(TM) version 1.9.6 compiled on June 29 2015
JVM:          1.8.0_144 (Oracle Corporation 25.144-b01)
OS:           Linux 4.4.0-92-generic amd64

[34m[1mlein version[0m
WARNING: You're currently running as root; probably by accident.
Press control-C to abort or Enter to continue as root.
Set LEIN_ROOT to disable this warning.
Leiningen 2.7.1 on Java 1.8.0_144 Java HotSpot(TM) 64-Bit Server VM
[34m[1mPre-installed Node.js versions[0m
v4.8.4
v6.11.2
v6.9.4
v7.4.0
v8.4
[34m[1mphpenv versions[0m
  system
  5.6
* 5.6.31 (set by /home/travis/.phpenv/version)
  7.0
  7.0.22
  hhvm
  hhvm-stable
[34m[1mcomposer --version[0m
Composer version 1.4.2 2017-05-17 08:17:52
[34m[1mPre-installed Ruby versions[0m
ruby-2.2.7
ruby-2.3.4
ruby-2.4.1
travis_fold:end:system_info[0K
W: GPG error: http://dl.hhvm.com/ubuntu trusty InRelease: The following signatures couldn't be verified because the public key is not available: NO_PUBKEY B4112585D386EB94
W: The repository 'http://dl.hhvm.com/ubuntu trusty InRelease' is not signed.
W: There is no public key available for the following key IDs:
B4112585D386EB94  
W: GPG error: http://dl.google.com/linux/chrome/deb stable InRelease: The following signatures couldn't be verified because the public key is not available: NO_PUBKEY 78BD65473CB3BD13
W: The repository 'http://dl.google.com/linux/chrome/deb stable InRelease' is not signed.
W: There is no public key available for the following key IDs:
78BD65473CB3BD13  
W: The repository 'http://www.apache.org/dist/cassandra/debian 39x Release' does not have a Release file.
W: GPG error: http://repo.mongodb.org/apt/ubuntu trusty/mongodb-org/3.2 Release: The following signatures were invalid: KEYEXPIRED 1507497109
W: The repository 'http://repo.mongodb.org/apt/ubuntu trusty/mongodb-org/3.2 Release' is not signed.
W: The repository 'http://apt.postgresql.org/pub/repos/apt trusty-pgdg Release' does not have a Release file.
W: GPG error: https://packagecloud.io/github/git-lfs/ubuntu trusty InRelease: The following signatures couldn't be verified because the public key is not available: NO_PUBKEY 6B05F25D762E3157
W: The repository 'https://packagecloud.io/github/git-lfs/ubuntu trusty InRelease' is not signed.
W: There is no public key available for the following key IDs:
6B05F25D762E3157  
W: The repository 'https://packagecloud.io/basho/riak/ubuntu trusty Release' does not have a Release file.
W: GPG error: https://packagecloud.io/rabbitmq/rabbitmq-server/ubuntu trusty InRelease: The following signatures couldn't be verified because the public key is not available: NO_PUBKEY F6609E60DC62814E
W: The repository 'https://packagecloud.io/rabbitmq/rabbitmq-server/ubuntu trusty InRelease' is not signed.
W: There is no public key available for the following key IDs:
F6609E60DC62814E  
W: http://ppa.launchpad.net/couchdb/stable/ubuntu/dists/trusty/Release.gpg: Signature by key 15866BAFD9BCC4F3C1E0DFC7D69548E1C17EAB57 uses weak digest algorithm (SHA1)
E: Failed to fetch https://www.apache.org/dist/cassandra/debian/dists/39x/main/binary-amd64/Packages  gnutls_handshake() failed: Handshake failed
E: Failed to fetch https://www.apache.org/dist/cassandra/debian/dists/39x/main/binary-i386/Packages  gnutls_handshake() failed: Handshake failed
E: Failed to fetch http://apt.postgresql.org/pub/repos/apt/dists/trusty-pgdg/main/binary-amd64/Packages  404  Not Found [IP: 72.32.157.246 80]
E: Failed to fetch http://apt.postgresql.org/pub/repos/apt/dists/trusty-pgdg/main/binary-i386/Packages  404  Not Found [IP: 72.32.157.246 80]
E: Failed to fetch https://packagecloud.io/basho/riak/ubuntu/dists/trusty/main/source/Sources  HttpError402
E: Failed to fetch https://packagecloud.io/basho/riak/ubuntu/dists/trusty/main/binary-amd64/Packages  HttpError402
E: Failed to fetch https://packagecloud.io/basho/riak/ubuntu/dists/trusty/main/binary-i386/Packages  HttpError402
E: Some index files failed to download. They have been ignored, or old ones used instead.
sed: cannot rename /etc/hosts: Device or resource busy
sed: cannot rename /etc/hosts: Device or resource busy
$ jdk_switcher use oraclejdk8
Switching to Oracle JDK8 (java-8-oracle), JAVA_HOME will be set to /usr/lib/jvm/java-8-oracle
$ cd passed/petergeneric/stdlib

[33;1mSetting environment variables from .travis.yml[0m
$ export COVERITY_SCAN_TOKEN=[secure]

travis_fold:start:cache.1[0KSetting up build cache
$ export CASHER_DIR=$HOME/.casher
travis_time:start:2f52f3f5[0K
travis_time:end:2f52f3f5:start=1639243349515285537,finish=1639243349525652506,duration=10366969[0Ktravis_time:start:018853be[0K/home/travis/.casher/bin/casher:213:in `cache_archive_name': undefined method `[]' for nil:NilClass (NoMethodError)
	from /home/travis/.casher/bin/casher:65:in `block in fetch'
	from /home/travis/.casher/bin/casher:64:in `each'
	from /home/travis/.casher/bin/casher:64:in `fetch'
	from /home/travis/.casher/bin/casher:53:in `block in run'
	from /home/travis/.rvm/rubies/ruby-2.2.7/lib/ruby/2.2.0/timeout.rb:88:in `block in timeout'
	from /home/travis/.rvm/rubies/ruby-2.2.7/lib/ruby/2.2.0/timeout.rb:32:in `block in catch'
	from /home/travis/.rvm/rubies/ruby-2.2.7/lib/ruby/2.2.0/timeout.rb:32:in `catch'
	from /home/travis/.rvm/rubies/ruby-2.2.7/lib/ruby/2.2.0/timeout.rb:32:in `catch'
	from /home/travis/.rvm/rubies/ruby-2.2.7/lib/ruby/2.2.0/timeout.rb:103:in `timeout'
	from /home/travis/.casher/bin/casher:53:in `run'
	from /home/travis/.casher/bin/casher:263:in `<main>'
[32;1mattempting to download cache archive[0m

travis_time:end:018853be:start=1639243349538488649,finish=1639243350479472020,duration=940983371[0Ktravis_time:start:1df841a6[0K
travis_time:end:1df841a6:start=1639243350493384814,finish=1639243350504966602,duration=11581788[0Ktravis_time:start:020b7730[0K[32;1madding /home/travis/.m2 to cache[0m

travis_time:end:020b7730:start=1639243350519236387,finish=1639243351567908541,duration=1048672154[0Ktravis_fold:end:cache.1[0K$ java -Xmx32m -version
Picked up _JAVA_OPTIONS: -Xmx2048m -Xms512m
java version "1.8.0_144"
Java(TM) SE Runtime Environment (build 1.8.0_144-b01)
Java HotSpot(TM) 64-Bit Server VM (build 25.144-b01, mixed mode)
$ javac -J-Xmx32m -version
Picked up _JAVA_OPTIONS: -Xmx2048m -Xms512m
javac 1.8.0_144
travis_fold:start:install[0Ktravis_time:start:18bea5fc[0K$ mvn -o install -Dhttps.protocols=TLSv1.2 -Dhttps.protocols=TLSv1.2 -DskipTests=true -Dmaven.javadoc.skip=true -B -V
Picked up _JAVA_OPTIONS: -Xmx2048m -Xms512m
Apache Maven 3.5.0 (ff8f5e7444045639af65f6095c62210b5713f426; 2017-04-03T19:39:06Z)
Maven home: /usr/local/maven-3.5.0
Java version: 1.8.0_144, vendor: Oracle Corporation
Java home: /usr/lib/jvm/java-8-oracle/jre
Default locale: en_US, platform encoding: UTF-8
OS name: "linux", version: "4.15.0-109-generic", arch: "amd64", family: "unix"
[INFO] Scanning for projects...
[INFO] Inspecting build with total of 22 modules...
[INFO] Installing Nexus Staging features:
[INFO]   ... total of 22 executions of maven-deploy-plugin replaced with nexus-staging-maven-plugin
[INFO] ------------------------------------------------------------------------
[INFO] Reactor Build Order:
[INFO] 
[INFO] application framework parent
[INFO] stdlib
[INFO] application framework guice modules parent
[INFO] stdlib guice common
[INFO] user-manager
[INFO] user manager rest api
[INFO] stdlib guice webapp
[INFO] stdlib guice metrics
[INFO] stdlib guice freemarker webapp
[INFO] stdlib guice testing support
[INFO] stdlib guice hibernate
[INFO] stdlib guice hibernate testing support
[INFO] stdlib guice liquibase support
[INFO] carbon client
[INFO] service-manager
[INFO] Configuration Service
[INFO] Service Manager API
[INFO] stdlib-rules
[INFO] stdlib-azure
[INFO] Service Manager Main
[INFO] Host Agent
[INFO] user manager service
[INFO] 
[INFO] ------------------------------------------------------------------------
[INFO] Building application framework parent 9.5.4-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-enforcer-plugin:1.0:enforce (enforce-maven) @ stdlib-parent ---
[INFO] 
[INFO] --- buildnumber-maven-plugin:1.3:create (default) @ stdlib-parent ---
[INFO] maven is executed in offline mode, Updating project files from SCM: skipped.
[INFO] Executing: /bin/sh -c cd /home/travis/build/passed/petergeneric/stdlib && git rev-parse --verify HEAD
[INFO] Working directory: /home/travis/build/passed/petergeneric/stdlib
[INFO] Storing buildNumber: ad9cf5497382d96ec2d2c14e5a36ee683a6bb108 at timestamp: 1639243355113
[INFO] Storing buildScmBranch: master
[INFO] 
[INFO] --- maven-install-plugin:2.4:install (default-install) @ stdlib-parent ---
[INFO] Installing /home/travis/build/passed/petergeneric/stdlib/pom.xml to /home/travis/.m2/passed/com/peterphi/std/stdlib-parent/9.5.4-SNAPSHOT/stdlib-parent-9.5.4-SNAPSHOT.pom
[INFO] 
[INFO] ------------------------------------------------------------------------
[INFO] Building stdlib 9.5.4-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-enforcer-plugin:1.0:enforce (enforce-maven) @ stdlib ---
[INFO] 
[INFO] --- buildnumber-maven-plugin:1.3:create (default) @ stdlib ---
[INFO] 
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ stdlib ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /home/travis/build/passed/petergeneric/stdlib/stdlib/src/main/resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:compile (default-compile) @ stdlib ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ stdlib ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /home/travis/build/passed/petergeneric/stdlib/stdlib/src/test/resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:testCompile (default-testCompile) @ stdlib ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-surefire-plugin:2.19:test (default-test) @ stdlib ---
[INFO] Tests are skipped.
[INFO] 
[INFO] --- maven-jar-plugin:2.6:jar (default-jar) @ stdlib ---
[INFO] 
[INFO] --- maven-install-plugin:2.4:install (default-install) @ stdlib ---
[INFO] Installing /home/travis/build/passed/petergeneric/stdlib/stdlib/target/stdlib-9.5.4-SNAPSHOT.jar to /home/travis/.m2/passed/com/peterphi/std/stdlib/9.5.4-SNAPSHOT/stdlib-9.5.4-SNAPSHOT.jar
[INFO] Installing /home/travis/build/passed/petergeneric/stdlib/stdlib/pom.xml to /home/travis/.m2/passed/com/peterphi/std/stdlib/9.5.4-SNAPSHOT/stdlib-9.5.4-SNAPSHOT.pom
[INFO] 
[INFO] ------------------------------------------------------------------------
[INFO] Building application framework guice modules parent 9.5.4-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-enforcer-plugin:1.0:enforce (enforce-maven) @ stdlib-guice-parent ---
[INFO] 
[INFO] --- buildnumber-maven-plugin:1.3:create (default) @ stdlib-guice-parent ---
[INFO] 
[INFO] --- maven-install-plugin:2.4:install (default-install) @ stdlib-guice-parent ---
[INFO] Installing /home/travis/build/passed/petergeneric/stdlib/guice/pom.xml to /home/travis/.m2/passed/com/peterphi/std/guice/stdlib-guice-parent/9.5.4-SNAPSHOT/stdlib-guice-parent-9.5.4-SNAPSHOT.pom
[INFO] 
[INFO] ------------------------------------------------------------------------
[INFO] Building stdlib guice common 9.5.4-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[WARNING] The artifact xml-apis:xml-apis:jar:2.0.2 has been relocated to xml-apis:xml-apis:jar:1.0.b2
[INFO] 
[INFO] --- maven-enforcer-plugin:1.0:enforce (enforce-maven) @ stdlib-guice-common ---
[INFO] 
[INFO] --- buildnumber-maven-plugin:1.3:create (default) @ stdlib-guice-common ---
[INFO] 
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ stdlib-guice-common ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 1 resource
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:compile (default-compile) @ stdlib-guice-common ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ stdlib-guice-common ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 2 resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:testCompile (default-testCompile) @ stdlib-guice-common ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-surefire-plugin:2.19:test (default-test) @ stdlib-guice-common ---
[INFO] Tests are skipped.
[INFO] 
[INFO] --- maven-jar-plugin:2.6:jar (default-jar) @ stdlib-guice-common ---
[INFO] 
[INFO] --- maven-install-plugin:2.4:install (default-install) @ stdlib-guice-common ---
[INFO] Installing /home/travis/build/passed/petergeneric/stdlib/guice/common/target/stdlib-guice-common-9.5.4-SNAPSHOT.jar to /home/travis/.m2/passed/com/peterphi/std/guice/stdlib-guice-common/9.5.4-SNAPSHOT/stdlib-guice-common-9.5.4-SNAPSHOT.jar
[INFO] Installing /home/travis/build/passed/petergeneric/stdlib/guice/common/pom.xml to /home/travis/.m2/passed/com/peterphi/std/guice/stdlib-guice-common/9.5.4-SNAPSHOT/stdlib-guice-common-9.5.4-SNAPSHOT.pom
[INFO] 
[INFO] ------------------------------------------------------------------------
[INFO] Building user-manager 9.5.4-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-enforcer-plugin:1.0:enforce (enforce-maven) @ user-manager-parent ---
[INFO] 
[INFO] --- buildnumber-maven-plugin:1.3:create (default) @ user-manager-parent ---
[INFO] 
[INFO] --- maven-install-plugin:2.4:install (default-install) @ user-manager-parent ---
[INFO] Installing /home/travis/build/passed/petergeneric/stdlib/user-manager/pom.xml to /home/travis/.m2/passed/com/peterphi/user-manager/user-manager-parent/9.5.4-SNAPSHOT/user-manager-parent-9.5.4-SNAPSHOT.pom
[INFO] 
[INFO] ------------------------------------------------------------------------
[INFO] Building user manager rest api 9.5.4-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-enforcer-plugin:1.0:enforce (enforce-maven) @ user-manager-api ---
[INFO] 
[INFO] --- buildnumber-maven-plugin:1.3:create (default) @ user-manager-api ---
[INFO] 
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ user-manager-api ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /home/travis/build/passed/petergeneric/stdlib/user-manager/api/src/main/resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:compile (default-compile) @ user-manager-api ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ user-manager-api ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /home/travis/build/passed/petergeneric/stdlib/user-manager/api/src/test/resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:testCompile (default-testCompile) @ user-manager-api ---
[INFO] No sources to compile
[INFO] 
[INFO] --- maven-surefire-plugin:2.19:test (default-test) @ user-manager-api ---
[INFO] Tests are skipped.
[INFO] 
[INFO] --- maven-jar-plugin:2.6:jar (default-jar) @ user-manager-api ---
[INFO] 
[INFO] --- maven-install-plugin:2.4:install (default-install) @ user-manager-api ---
[INFO] Installing /home/travis/build/passed/petergeneric/stdlib/user-manager/api/target/user-manager-api-9.5.4-SNAPSHOT.jar to /home/travis/.m2/passed/com/peterphi/user-manager/user-manager-api/9.5.4-SNAPSHOT/user-manager-api-9.5.4-SNAPSHOT.jar
[INFO] Installing /home/travis/build/passed/petergeneric/stdlib/user-manager/api/pom.xml to /home/travis/.m2/passed/com/peterphi/user-manager/user-manager-api/9.5.4-SNAPSHOT/user-manager-api-9.5.4-SNAPSHOT.pom
[INFO] 
[INFO] ------------------------------------------------------------------------
[INFO] Building stdlib guice webapp 9.5.4-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[WARNING] The artifact xml-apis:xml-apis:jar:2.0.2 has been relocated to xml-apis:xml-apis:jar:1.0.b2
[INFO] 
[INFO] --- maven-enforcer-plugin:1.0:enforce (enforce-maven) @ stdlib-guice-webapp ---
[INFO] 
[INFO] --- buildnumber-maven-plugin:1.3:create (default) @ stdlib-guice-webapp ---
[INFO] 
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ stdlib-guice-webapp ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 9 resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:compile (default-compile) @ stdlib-guice-webapp ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ stdlib-guice-webapp ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /home/travis/build/passed/petergeneric/stdlib/guice/webapp/src/test/resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:testCompile (default-testCompile) @ stdlib-guice-webapp ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-surefire-plugin:2.19:test (default-test) @ stdlib-guice-webapp ---
[INFO] Tests are skipped.
[INFO] 
[INFO] --- maven-jar-plugin:2.6:jar (default-jar) @ stdlib-guice-webapp ---
[INFO] 
[INFO] --- maven-install-plugin:2.4:install (default-install) @ stdlib-guice-webapp ---
[INFO] Installing /home/travis/build/passed/petergeneric/stdlib/guice/webapp/target/stdlib-guice-webapp-9.5.4-SNAPSHOT.jar to /home/travis/.m2/passed/com/peterphi/std/guice/stdlib-guice-webapp/9.5.4-SNAPSHOT/stdlib-guice-webapp-9.5.4-SNAPSHOT.jar
[INFO] Installing /home/travis/build/passed/petergeneric/stdlib/guice/webapp/pom.xml to /home/travis/.m2/passed/com/peterphi/std/guice/stdlib-guice-webapp/9.5.4-SNAPSHOT/stdlib-guice-webapp-9.5.4-SNAPSHOT.pom
[INFO] 
[INFO] ------------------------------------------------------------------------
[INFO] Building stdlib guice metrics 9.5.4-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-enforcer-plugin:1.0:enforce (enforce-maven) @ stdlib-guice-metrics ---
[INFO] 
[INFO] --- buildnumber-maven-plugin:1.3:create (default) @ stdlib-guice-metrics ---
[INFO] 
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ stdlib-guice-metrics ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 3 resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:compile (default-compile) @ stdlib-guice-metrics ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ stdlib-guice-metrics ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /home/travis/build/passed/petergeneric/stdlib/guice/metrics/src/test/resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:testCompile (default-testCompile) @ stdlib-guice-metrics ---
[INFO] No sources to compile
[INFO] 
[INFO] --- maven-surefire-plugin:2.19:test (default-test) @ stdlib-guice-metrics ---
[INFO] Tests are skipped.
[INFO] 
[INFO] --- maven-jar-plugin:2.6:jar (default-jar) @ stdlib-guice-metrics ---
[INFO] 
[INFO] --- maven-install-plugin:2.4:install (default-install) @ stdlib-guice-metrics ---
[INFO] Installing /home/travis/build/passed/petergeneric/stdlib/guice/metrics/target/stdlib-guice-metrics-9.5.4-SNAPSHOT.jar to /home/travis/.m2/passed/com/peterphi/std/guice/stdlib-guice-metrics/9.5.4-SNAPSHOT/stdlib-guice-metrics-9.5.4-SNAPSHOT.jar
[INFO] Installing /home/travis/build/passed/petergeneric/stdlib/guice/metrics/pom.xml to /home/travis/.m2/passed/com/peterphi/std/guice/stdlib-guice-metrics/9.5.4-SNAPSHOT/stdlib-guice-metrics-9.5.4-SNAPSHOT.pom
[INFO] 
[INFO] ------------------------------------------------------------------------
[INFO] Building stdlib guice freemarker webapp 9.5.4-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-enforcer-plugin:1.0:enforce (enforce-maven) @ stdlib-guice-freemarker ---
[INFO] 
[INFO] --- buildnumber-maven-plugin:1.3:create (default) @ stdlib-guice-freemarker ---
[INFO] 
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ stdlib-guice-freemarker ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /home/travis/build/passed/petergeneric/stdlib/guice/freemarker/src/main/resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:compile (default-compile) @ stdlib-guice-freemarker ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ stdlib-guice-freemarker ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /home/travis/build/passed/petergeneric/stdlib/guice/freemarker/src/test/resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:testCompile (default-testCompile) @ stdlib-guice-freemarker ---
[INFO] No sources to compile
[INFO] 
[INFO] --- maven-surefire-plugin:2.19:test (default-test) @ stdlib-guice-freemarker ---
[INFO] Tests are skipped.
[INFO] 
[INFO] --- maven-jar-plugin:2.6:jar (default-jar) @ stdlib-guice-freemarker ---
[INFO] 
[INFO] --- maven-install-plugin:2.4:install (default-install) @ stdlib-guice-freemarker ---
[INFO] Installing /home/travis/build/passed/petergeneric/stdlib/guice/freemarker/target/stdlib-guice-freemarker-9.5.4-SNAPSHOT.jar to /home/travis/.m2/passed/com/peterphi/std/guice/stdlib-guice-freemarker/9.5.4-SNAPSHOT/stdlib-guice-freemarker-9.5.4-SNAPSHOT.jar
[INFO] Installing /home/travis/build/passed/petergeneric/stdlib/guice/freemarker/pom.xml to /home/travis/.m2/passed/com/peterphi/std/guice/stdlib-guice-freemarker/9.5.4-SNAPSHOT/stdlib-guice-freemarker-9.5.4-SNAPSHOT.pom
[INFO] 
[INFO] ------------------------------------------------------------------------
[INFO] Building stdlib guice testing support 9.5.4-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-enforcer-plugin:1.0:enforce (enforce-maven) @ stdlib-guice-testing ---
[INFO] 
[INFO] --- buildnumber-maven-plugin:1.3:create (default) @ stdlib-guice-testing ---
[INFO] 
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ stdlib-guice-testing ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /home/travis/build/passed/petergeneric/stdlib/guice/testing/src/main/resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:compile (default-compile) @ stdlib-guice-testing ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ stdlib-guice-testing ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /home/travis/build/passed/petergeneric/stdlib/guice/testing/src/test/resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:testCompile (default-testCompile) @ stdlib-guice-testing ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-surefire-plugin:2.19:test (default-test) @ stdlib-guice-testing ---
[INFO] Tests are skipped.
[INFO] 
[INFO] --- maven-jar-plugin:2.6:jar (default-jar) @ stdlib-guice-testing ---
[INFO] 
[INFO] --- maven-install-plugin:2.4:install (default-install) @ stdlib-guice-testing ---
[INFO] Installing /home/travis/build/passed/petergeneric/stdlib/guice/testing/target/stdlib-guice-testing-9.5.4-SNAPSHOT.jar to /home/travis/.m2/passed/com/peterphi/std/guice/stdlib-guice-testing/9.5.4-SNAPSHOT/stdlib-guice-testing-9.5.4-SNAPSHOT.jar
[INFO] Installing /home/travis/build/passed/petergeneric/stdlib/guice/testing/pom.xml to /home/travis/.m2/passed/com/peterphi/std/guice/stdlib-guice-testing/9.5.4-SNAPSHOT/stdlib-guice-testing-9.5.4-SNAPSHOT.pom
[INFO] 
[INFO] ------------------------------------------------------------------------
[INFO] Building stdlib guice hibernate 9.5.4-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-enforcer-plugin:1.0:enforce (enforce-maven) @ stdlib-guice-hibernate ---
[INFO] 
[INFO] --- buildnumber-maven-plugin:1.3:create (default) @ stdlib-guice-hibernate ---
[INFO] 
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ stdlib-guice-hibernate ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 1 resource
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:compile (default-compile) @ stdlib-guice-hibernate ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ stdlib-guice-hibernate ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 2 resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:testCompile (default-testCompile) @ stdlib-guice-hibernate ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-surefire-plugin:2.19:test (default-test) @ stdlib-guice-hibernate ---
[INFO] Tests are skipped.
[INFO] 
[INFO] --- maven-jar-plugin:2.6:jar (default-jar) @ stdlib-guice-hibernate ---
[INFO] 
[INFO] --- maven-install-plugin:2.4:install (default-install) @ stdlib-guice-hibernate ---
[INFO] Installing /home/travis/build/passed/petergeneric/stdlib/guice/hibernate/target/stdlib-guice-hibernate-9.5.4-SNAPSHOT.jar to /home/travis/.m2/passed/com/peterphi/std/guice/stdlib-guice-hibernate/9.5.4-SNAPSHOT/stdlib-guice-hibernate-9.5.4-SNAPSHOT.jar
[INFO] Installing /home/travis/build/passed/petergeneric/stdlib/guice/hibernate/pom.xml to /home/travis/.m2/passed/com/peterphi/std/guice/stdlib-guice-hibernate/9.5.4-SNAPSHOT/stdlib-guice-hibernate-9.5.4-SNAPSHOT.pom
[INFO] 
[INFO] ------------------------------------------------------------------------
[INFO] Building stdlib guice hibernate testing support 9.5.4-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-enforcer-plugin:1.0:enforce (enforce-maven) @ stdlib-guice-hibernate-testing ---
[INFO] 
[INFO] --- buildnumber-maven-plugin:1.3:create (default) @ stdlib-guice-hibernate-testing ---
[INFO] 
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ stdlib-guice-hibernate-testing ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 2 resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:compile (default-compile) @ stdlib-guice-hibernate-testing ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ stdlib-guice-hibernate-testing ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 1 resource
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:testCompile (default-testCompile) @ stdlib-guice-hibernate-testing ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-surefire-plugin:2.19:test (default-test) @ stdlib-guice-hibernate-testing ---
[INFO] Tests are skipped.
[INFO] 
[INFO] --- maven-jar-plugin:2.6:jar (default-jar) @ stdlib-guice-hibernate-testing ---
[INFO] 
[INFO] --- maven-install-plugin:2.4:install (default-install) @ stdlib-guice-hibernate-testing ---
[INFO] Installing /home/travis/build/passed/petergeneric/stdlib/guice/hibernate-testing/target/stdlib-guice-hibernate-testing-9.5.4-SNAPSHOT.jar to /home/travis/.m2/passed/com/peterphi/std/guice/stdlib-guice-hibernate-testing/9.5.4-SNAPSHOT/stdlib-guice-hibernate-testing-9.5.4-SNAPSHOT.jar
[INFO] Installing /home/travis/build/passed/petergeneric/stdlib/guice/hibernate-testing/pom.xml to /home/travis/.m2/passed/com/peterphi/std/guice/stdlib-guice-hibernate-testing/9.5.4-SNAPSHOT/stdlib-guice-hibernate-testing-9.5.4-SNAPSHOT.pom
[INFO] 
[INFO] ------------------------------------------------------------------------
[INFO] Building stdlib guice liquibase support 9.5.4-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-enforcer-plugin:1.0:enforce (enforce-maven) @ stdlib-guice-liquibase ---
[INFO] 
[INFO] --- buildnumber-maven-plugin:1.3:create (default) @ stdlib-guice-liquibase ---
[INFO] 
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ stdlib-guice-liquibase ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 1 resource
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:compile (default-compile) @ stdlib-guice-liquibase ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ stdlib-guice-liquibase ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 4 resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:testCompile (default-testCompile) @ stdlib-guice-liquibase ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-surefire-plugin:2.19:test (default-test) @ stdlib-guice-liquibase ---
[INFO] Tests are skipped.
[INFO] 
[INFO] --- maven-jar-plugin:2.6:jar (default-jar) @ stdlib-guice-liquibase ---
[INFO] 
[INFO] --- maven-install-plugin:2.4:install (default-install) @ stdlib-guice-liquibase ---
[INFO] Installing /home/travis/build/passed/petergeneric/stdlib/guice/liquibase/target/stdlib-guice-liquibase-9.5.4-SNAPSHOT.jar to /home/travis/.m2/passed/com/peterphi/std/guice/stdlib-guice-liquibase/9.5.4-SNAPSHOT/stdlib-guice-liquibase-9.5.4-SNAPSHOT.jar
[INFO] Installing /home/travis/build/passed/petergeneric/stdlib/guice/liquibase/pom.xml to /home/travis/.m2/passed/com/peterphi/std/guice/stdlib-guice-liquibase/9.5.4-SNAPSHOT/stdlib-guice-liquibase-9.5.4-SNAPSHOT.pom
[INFO] 
[INFO] ------------------------------------------------------------------------
[INFO] Building carbon client 9.5.4-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-enforcer-plugin:1.0:enforce (enforce-maven) @ carbon-client ---
[INFO] 
[INFO] --- buildnumber-maven-plugin:1.3:create (default) @ carbon-client ---
[INFO] 
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ carbon-client ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 1 resource
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:compile (default-compile) @ carbon-client ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ carbon-client ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 3 resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:testCompile (default-testCompile) @ carbon-client ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-surefire-plugin:2.19:test (default-test) @ carbon-client ---
[INFO] Tests are skipped.
[INFO] 
[INFO] --- maven-jar-plugin:2.6:jar (default-jar) @ carbon-client ---
[INFO] 
[INFO] --- maven-install-plugin:2.4:install (default-install) @ carbon-client ---
[INFO] Installing /home/travis/build/passed/petergeneric/stdlib/util/carbon-client/target/carbon-client-9.5.4-SNAPSHOT.jar to /home/travis/.m2/passed/com/peterphi/std/util/carbon/carbon-client/9.5.4-SNAPSHOT/carbon-client-9.5.4-SNAPSHOT.jar
[INFO] Installing /home/travis/build/passed/petergeneric/stdlib/util/carbon-client/pom.xml to /home/travis/.m2/passed/com/peterphi/std/util/carbon/carbon-client/9.5.4-SNAPSHOT/carbon-client-9.5.4-SNAPSHOT.pom
[INFO] 
[INFO] ------------------------------------------------------------------------
[INFO] Building service-manager 9.5.4-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-enforcer-plugin:1.0:enforce (enforce-maven) @ service-manager-parent ---
[INFO] 
[INFO] --- buildnumber-maven-plugin:1.3:create (default) @ service-manager-parent ---
[INFO] 
[INFO] --- maven-install-plugin:2.4:install (default-install) @ service-manager-parent ---
[INFO] Installing /home/travis/build/passed/petergeneric/stdlib/service-manager/pom.xml to /home/travis/.m2/passed/com/peterphi/std/config/service-manager-parent/9.5.4-SNAPSHOT/service-manager-parent-9.5.4-SNAPSHOT.pom
[INFO] 
[INFO] ------------------------------------------------------------------------
[INFO] Building Configuration Service 9.5.4-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-enforcer-plugin:1.0:enforce (enforce-maven) @ configuration ---
[INFO] 
[INFO] --- buildnumber-maven-plugin:1.3:create (default) @ configuration ---
[INFO] 
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ configuration ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 5 resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:compile (default-compile) @ configuration ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ configuration ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 1 resource
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:testCompile (default-testCompile) @ configuration ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-surefire-plugin:2.19:test (default-test) @ configuration ---
[INFO] Tests are skipped.
[INFO] 
[INFO] --- maven-war-plugin:2.6:war (default-war) @ configuration ---
[INFO] Packaging webapp
[INFO] Assembling webapp [configuration] in [/home/travis/build/passed/petergeneric/stdlib/service-manager/configuration/target/configuration-9.5.4-SNAPSHOT]
[INFO] Processing war project
[INFO] Copying webapp resources [/home/travis/build/passed/petergeneric/stdlib/service-manager/configuration/src/main/webapp]
[INFO] Webapp assembled in [625 msecs]
[INFO] Building war: /home/travis/build/passed/petergeneric/stdlib/service-manager/configuration/target/configuration-9.5.4-SNAPSHOT.war
[INFO] 
[INFO] --- maven-install-plugin:2.4:install (default-install) @ configuration ---
[INFO] Installing /home/travis/build/passed/petergeneric/stdlib/service-manager/configuration/target/configuration-9.5.4-SNAPSHOT.war to /home/travis/.m2/passed/com/peterphi/std/config/configuration/9.5.4-SNAPSHOT/configuration-9.5.4-SNAPSHOT.war
[INFO] Installing /home/travis/build/passed/petergeneric/stdlib/service-manager/configuration/pom.xml to /home/travis/.m2/passed/com/peterphi/std/config/configuration/9.5.4-SNAPSHOT/configuration-9.5.4-SNAPSHOT.pom
[INFO] 
[INFO] ------------------------------------------------------------------------
[INFO] Building Service Manager API 9.5.4-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-enforcer-plugin:1.0:enforce (enforce-maven) @ service-manager-api ---
[INFO] 
[INFO] --- buildnumber-maven-plugin:1.3:create (default) @ service-manager-api ---
[INFO] 
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ service-manager-api ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /home/travis/build/passed/petergeneric/stdlib/service-manager/service-manager-api/src/main/resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:compile (default-compile) @ service-manager-api ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ service-manager-api ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /home/travis/build/passed/petergeneric/stdlib/service-manager/service-manager-api/src/test/resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:testCompile (default-testCompile) @ service-manager-api ---
[INFO] No sources to compile
[INFO] 
[INFO] --- maven-surefire-plugin:2.19:test (default-test) @ service-manager-api ---
[INFO] Tests are skipped.
[INFO] 
[INFO] --- maven-jar-plugin:2.6:jar (default-jar) @ service-manager-api ---
[INFO] 
[INFO] --- maven-install-plugin:2.4:install (default-install) @ service-manager-api ---
[INFO] Installing /home/travis/build/passed/petergeneric/stdlib/service-manager/service-manager-api/target/service-manager-api-9.5.4-SNAPSHOT.jar to /home/travis/.m2/passed/com/peterphi/std/config/service-manager-api/9.5.4-SNAPSHOT/service-manager-api-9.5.4-SNAPSHOT.jar
[INFO] Installing /home/travis/build/passed/petergeneric/stdlib/service-manager/service-manager-api/pom.xml to /home/travis/.m2/passed/com/peterphi/std/config/service-manager-api/9.5.4-SNAPSHOT/service-manager-api-9.5.4-SNAPSHOT.pom
[INFO] 
[INFO] ------------------------------------------------------------------------
[INFO] Building stdlib-rules 9.5.4-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-enforcer-plugin:1.0:enforce (enforce-maven) @ stdlib-rules ---
[INFO] 
[INFO] --- buildnumber-maven-plugin:1.3:create (default) @ stdlib-rules ---
[INFO] 
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ stdlib-rules ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /home/travis/build/passed/petergeneric/stdlib/rules/src/main/resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:compile (default-compile) @ stdlib-rules ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ stdlib-rules ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 3 resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:testCompile (default-testCompile) @ stdlib-rules ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-surefire-plugin:2.19:test (default-test) @ stdlib-rules ---
[INFO] Tests are skipped.
[INFO] 
[INFO] --- maven-jar-plugin:2.6:jar (default-jar) @ stdlib-rules ---
[INFO] 
[INFO] --- maven-install-plugin:2.4:install (default-install) @ stdlib-rules ---
[INFO] Installing /home/travis/build/passed/petergeneric/stdlib/rules/target/stdlib-rules-9.5.4-SNAPSHOT.jar to /home/travis/.m2/passed/com/peterphi/std/stdlib-rules/9.5.4-SNAPSHOT/stdlib-rules-9.5.4-SNAPSHOT.jar
[INFO] Installing /home/travis/build/passed/petergeneric/stdlib/rules/pom.xml to /home/travis/.m2/passed/com/peterphi/std/stdlib-rules/9.5.4-SNAPSHOT/stdlib-rules-9.5.4-SNAPSHOT.pom
[INFO] 
[INFO] ------------------------------------------------------------------------
[INFO] Building stdlib-azure 9.5.4-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-enforcer-plugin:1.0:enforce (enforce-maven) @ stdlib-azure ---
[INFO] 
[INFO] --- buildnumber-maven-plugin:1.3:create (default) @ stdlib-azure ---
[INFO] 
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ stdlib-azure ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /home/travis/build/passed/petergeneric/stdlib/azure/src/main/resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:compile (default-compile) @ stdlib-azure ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ stdlib-azure ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 1 resource
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:testCompile (default-testCompile) @ stdlib-azure ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-surefire-plugin:2.19:test (default-test) @ stdlib-azure ---
[INFO] Tests are skipped.
[INFO] 
[INFO] --- maven-jar-plugin:2.6:jar (default-jar) @ stdlib-azure ---
[INFO] 
[INFO] --- maven-install-plugin:2.4:install (default-install) @ stdlib-azure ---
[INFO] Installing /home/travis/build/passed/petergeneric/stdlib/azure/target/stdlib-azure-9.5.4-SNAPSHOT.jar to /home/travis/.m2/passed/com/peterphi/std/stdlib-azure/9.5.4-SNAPSHOT/stdlib-azure-9.5.4-SNAPSHOT.jar
[INFO] Installing /home/travis/build/passed/petergeneric/stdlib/azure/pom.xml to /home/travis/.m2/passed/com/peterphi/std/stdlib-azure/9.5.4-SNAPSHOT/stdlib-azure-9.5.4-SNAPSHOT.pom
[INFO] 
[INFO] ------------------------------------------------------------------------
[INFO] Building Service Manager Main 9.5.4-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-enforcer-plugin:1.0:enforce (enforce-maven) @ service-manager ---
[INFO] 
[INFO] --- buildnumber-maven-plugin:1.3:create (default) @ service-manager ---
[INFO] 
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ service-manager ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 6 resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:compile (default-compile) @ service-manager ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ service-manager ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 1 resource
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:testCompile (default-testCompile) @ service-manager ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-surefire-plugin:2.19:test (default-test) @ service-manager ---
[INFO] Tests are skipped.
[INFO] 
[INFO] --- maven-war-plugin:2.6:war (default-war) @ service-manager ---
[INFO] Packaging webapp
[INFO] Assembling webapp [service-manager] in [/home/travis/build/passed/petergeneric/stdlib/service-manager/service-manager/target/service-manager-9.5.4-SNAPSHOT]
[INFO] Processing war project
[INFO] Copying webapp resources [/home/travis/build/passed/petergeneric/stdlib/service-manager/service-manager/src/main/webapp]
[INFO] Webapp assembled in [707 msecs]
[INFO] Building war: /home/travis/build/passed/petergeneric/stdlib/service-manager/service-manager/target/service-manager-9.5.4-SNAPSHOT.war
[INFO] 
[INFO] --- maven-install-plugin:2.4:install (default-install) @ service-manager ---
[INFO] Installing /home/travis/build/passed/petergeneric/stdlib/service-manager/service-manager/target/service-manager-9.5.4-SNAPSHOT.war to /home/travis/.m2/passed/com/peterphi/std/config/service-manager/9.5.4-SNAPSHOT/service-manager-9.5.4-SNAPSHOT.war
[INFO] Installing /home/travis/build/passed/petergeneric/stdlib/service-manager/service-manager/pom.xml to /home/travis/.m2/passed/com/peterphi/std/config/service-manager/9.5.4-SNAPSHOT/service-manager-9.5.4-SNAPSHOT.pom
[INFO] 
[INFO] ------------------------------------------------------------------------
[INFO] Building Host Agent 9.5.4-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-enforcer-plugin:1.0:enforce (enforce-maven) @ host-agent ---
[INFO] 
[INFO] --- buildnumber-maven-plugin:1.3:create (default) @ host-agent ---
[INFO] 
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ host-agent ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 2 resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:compile (default-compile) @ host-agent ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ host-agent ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /home/travis/build/passed/petergeneric/stdlib/service-manager/host-agent/src/test/resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:testCompile (default-testCompile) @ host-agent ---
[INFO] No sources to compile
[INFO] 
[INFO] --- maven-surefire-plugin:2.19:test (default-test) @ host-agent ---
[INFO] Tests are skipped.
[INFO] 
[INFO] --- maven-war-plugin:2.6:war (default-war) @ host-agent ---
[INFO] Packaging webapp
[INFO] Assembling webapp [host-agent] in [/home/travis/build/passed/petergeneric/stdlib/service-manager/host-agent/target/host-agent-9.5.4-SNAPSHOT]
[INFO] Processing war project
[INFO] Copying webapp resources [/home/travis/build/passed/petergeneric/stdlib/service-manager/host-agent/src/main/webapp]
[INFO] Webapp assembled in [192 msecs]
[INFO] Building war: /home/travis/build/passed/petergeneric/stdlib/service-manager/host-agent/target/host-agent-9.5.4-SNAPSHOT.war
[INFO] 
[INFO] --- maven-install-plugin:2.4:install (default-install) @ host-agent ---
[INFO] Installing /home/travis/build/passed/petergeneric/stdlib/service-manager/host-agent/target/host-agent-9.5.4-SNAPSHOT.war to /home/travis/.m2/passed/com/peterphi/std/config/host-agent/9.5.4-SNAPSHOT/host-agent-9.5.4-SNAPSHOT.war
[INFO] Installing /home/travis/build/passed/petergeneric/stdlib/service-manager/host-agent/pom.xml to /home/travis/.m2/passed/com/peterphi/std/config/host-agent/9.5.4-SNAPSHOT/host-agent-9.5.4-SNAPSHOT.pom
[INFO] 
[INFO] ------------------------------------------------------------------------
[INFO] Building user manager service 9.5.4-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-enforcer-plugin:1.0:enforce (enforce-maven) @ user-manager ---
[INFO] 
[INFO] --- buildnumber-maven-plugin:1.3:create (default) @ user-manager ---
[INFO] 
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ user-manager ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 6 resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:compile (default-compile) @ user-manager ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ user-manager ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 1 resource
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:testCompile (default-testCompile) @ user-manager ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-surefire-plugin:2.19:test (default-test) @ user-manager ---
[INFO] Tests are skipped.
[INFO] 
[INFO] --- maven-war-plugin:2.6:war (default-war) @ user-manager ---
[INFO] Packaging webapp
[INFO] Assembling webapp [user-manager] in [/home/travis/build/passed/petergeneric/stdlib/user-manager/service/target/user-manager-9.5.4-SNAPSHOT]
[INFO] Processing war project
[INFO] Copying webapp resources [/home/travis/build/passed/petergeneric/stdlib/user-manager/service/src/main/webapp]
[INFO] Webapp assembled in [609 msecs]
[INFO] Building war: /home/travis/build/passed/petergeneric/stdlib/user-manager/service/target/user-manager-9.5.4-SNAPSHOT.war
[INFO] 
[INFO] --- maven-install-plugin:2.4:install (default-install) @ user-manager ---
[INFO] Installing /home/travis/build/passed/petergeneric/stdlib/user-manager/service/target/user-manager-9.5.4-SNAPSHOT.war to /home/travis/.m2/passed/com/peterphi/user-manager/user-manager/9.5.4-SNAPSHOT/user-manager-9.5.4-SNAPSHOT.war
[INFO] Installing /home/travis/build/passed/petergeneric/stdlib/user-manager/service/pom.xml to /home/travis/.m2/passed/com/peterphi/user-manager/user-manager/9.5.4-SNAPSHOT/user-manager-9.5.4-SNAPSHOT.pom
[INFO] ------------------------------------------------------------------------
[INFO] Reactor Summary:
[INFO] 
[INFO] application framework parent ....................... SUCCESS [  0.957 s]
[INFO] stdlib ............................................. SUCCESS [  1.338 s]
[INFO] application framework guice modules parent ......... SUCCESS [  0.034 s]
[INFO] stdlib guice common ................................ SUCCESS [  0.672 s]
[INFO] user-manager ....................................... SUCCESS [  0.059 s]
[INFO] user manager rest api .............................. SUCCESS [  0.111 s]
[INFO] stdlib guice webapp ................................ SUCCESS [  0.202 s]
[INFO] stdlib guice metrics ............................... SUCCESS [  0.106 s]
[INFO] stdlib guice freemarker webapp ..................... SUCCESS [  0.068 s]
[INFO] stdlib guice testing support ....................... SUCCESS [  0.163 s]
[INFO] stdlib guice hibernate ............................. SUCCESS [  0.188 s]
[INFO] stdlib guice hibernate testing support ............. SUCCESS [  0.101 s]
[INFO] stdlib guice liquibase support ..................... SUCCESS [  0.146 s]
[INFO] carbon client ...................................... SUCCESS [  0.124 s]
[INFO] service-manager .................................... SUCCESS [  0.011 s]
[INFO] Configuration Service .............................. SUCCESS [  2.162 s]
[INFO] Service Manager API ................................ SUCCESS [  0.152 s]
[INFO] stdlib-rules ....................................... SUCCESS [  0.149 s]
[INFO] stdlib-azure ....................................... SUCCESS [  0.211 s]
[INFO] Service Manager Main ............................... SUCCESS [  3.027 s]
[INFO] Host Agent ......................................... SUCCESS [  1.108 s]
[INFO] user manager service ............................... SUCCESS [  2.138 s]
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 14.893 s
[INFO] Finished at: 2021-12-11T17:22:47Z
[INFO] Final Memory: 31M/785M
[INFO] ------------------------------------------------------------------------

travis_time:end:18bea5fc:start=1639243351858760670,finish=1639243368215525623,duration=16356764953[0Ktravis_fold:end:install[0Ktravis_time:start:3acf0960[0K$ mvn test -Dhttps.protocols=TLSv1.2 -Dhttps.protocols=TLSv1.2 -B
Picked up _JAVA_OPTIONS: -Xmx2048m -Xms512m
[INFO] Scanning for projects...
[INFO] Inspecting build with total of 22 modules...
[INFO] Installing Nexus Staging features:
[INFO]   ... total of 22 executions of maven-deploy-plugin replaced with nexus-staging-maven-plugin
[INFO] ------------------------------------------------------------------------
[INFO] Reactor Build Order:
[INFO] 
[INFO] application framework parent
[INFO] stdlib
[INFO] application framework guice modules parent
[INFO] stdlib guice common
[INFO] user-manager
[INFO] user manager rest api
[INFO] stdlib guice webapp
[INFO] stdlib guice metrics
[INFO] stdlib guice freemarker webapp
[INFO] stdlib guice testing support
[INFO] stdlib guice hibernate
[INFO] stdlib guice hibernate testing support
[INFO] stdlib guice liquibase support
[INFO] carbon client
[INFO] service-manager
[INFO] Configuration Service
[INFO] Service Manager API
[INFO] stdlib-rules
[INFO] stdlib-azure
[INFO] Service Manager Main
[INFO] Host Agent
[INFO] user manager service
[INFO] 
[INFO] ------------------------------------------------------------------------
[INFO] Building application framework parent 9.5.4-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-enforcer-plugin:1.0:enforce (enforce-maven) @ stdlib-parent ---
[INFO] 
[INFO] --- buildnumber-maven-plugin:1.3:create (default) @ stdlib-parent ---
[INFO] Executing: /bin/sh -c cd /home/travis/build/passed/petergeneric/stdlib && git rev-parse --verify HEAD
[INFO] Working directory: /home/travis/build/passed/petergeneric/stdlib
[INFO] Storing buildNumber: ad9cf5497382d96ec2d2c14e5a36ee683a6bb108 at timestamp: 1639243370876
[INFO] Storing buildScmBranch: master
[INFO] 
[INFO] ------------------------------------------------------------------------
[INFO] Building stdlib 9.5.4-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-enforcer-plugin:1.0:enforce (enforce-maven) @ stdlib ---
[INFO] 
[INFO] --- buildnumber-maven-plugin:1.3:create (default) @ stdlib ---
[INFO] 
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ stdlib ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /home/travis/build/passed/petergeneric/stdlib/stdlib/src/main/resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:compile (default-compile) @ stdlib ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ stdlib ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /home/travis/build/passed/petergeneric/stdlib/stdlib/src/test/resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:testCompile (default-testCompile) @ stdlib ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-surefire-plugin:2.19:test (default-test) @ stdlib ---

-------------------------------------------------------
 T E S T S
-------------------------------------------------------
Picked up _JAVA_OPTIONS: -Xmx2048m -Xms512m
Running com.peterphi.std.io.PropertyFileTest
Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.124 sec - in com.peterphi.std.io.PropertyFileTest
Running com.peterphi.std.threading.SettableFutureTest
log4j:WARN No appenders could be found for logger (com.peterphi.std.threading.SettableFuture).
log4j:WARN Please initialize the log4j system properly.
log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.
Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.001 sec - in com.peterphi.std.threading.SettableFutureTest
Running com.peterphi.std.types.TimebaseTest
Tests run: 7, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 sec - in com.peterphi.std.types.TimebaseTest
Running com.peterphi.std.types.TimecodeComparatorTest
Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 sec - in com.peterphi.std.types.TimecodeComparatorTest
Running com.peterphi.std.types.TimecodeRangeTest
Tests run: 10, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.001 sec - in com.peterphi.std.types.TimecodeRangeTest
Running com.peterphi.std.types.TimecodeTest
Tests run: 32, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.009 sec - in com.peterphi.std.types.TimecodeTest
Running com.peterphi.std.util.JDOMUtilsTest
Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.067 sec - in com.peterphi.std.util.JDOMUtilsTest
Running com.peterphi.std.util.ListUtilityTest
Tests run: 15, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.002 sec - in com.peterphi.std.util.ListUtilityTest
Running com.peterphi.std.util.jaxb.MultiXSDGeneratorAndValidatorTest
Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.284 sec - in com.peterphi.std.util.jaxb.MultiXSDGeneratorAndValidatorTest

Results :

Tests run: 81, Failures: 0, Errors: 0, Skipped: 0

[INFO] 
[INFO] ------------------------------------------------------------------------
[INFO] Building application framework guice modules parent 9.5.4-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-enforcer-plugin:1.0:enforce (enforce-maven) @ stdlib-guice-parent ---
[INFO] 
[INFO] --- buildnumber-maven-plugin:1.3:create (default) @ stdlib-guice-parent ---
[INFO] 
[INFO] ------------------------------------------------------------------------
[INFO] Building stdlib guice common 9.5.4-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[WARNING] The artifact xml-apis:xml-apis:jar:2.0.2 has been relocated to xml-apis:xml-apis:jar:1.0.b2
[INFO] 
[INFO] --- maven-enforcer-plugin:1.0:enforce (enforce-maven) @ stdlib-guice-common ---
[INFO] 
[INFO] --- buildnumber-maven-plugin:1.3:create (default) @ stdlib-guice-common ---
[INFO] 
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ stdlib-guice-common ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 1 resource
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:compile (default-compile) @ stdlib-guice-common ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ stdlib-guice-common ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 2 resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:testCompile (default-testCompile) @ stdlib-guice-common ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-surefire-plugin:2.19:test (default-test) @ stdlib-guice-common ---

-------------------------------------------------------
 T E S T S
-------------------------------------------------------
Picked up _JAVA_OPTIONS: -Xmx2048m -Xms512m
Running com.peterphi.std.guice.common.cache.module.CacheMethodInterceptorTest
log4j:WARN No appenders could be found for logger (com.peterphi.std.guice.apploader.impl.GuiceFactory).
log4j:WARN Please initialize the log4j system properly.
log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 2.744 sec - in com.peterphi.std.guice.common.cache.module.CacheMethodInterceptorTest
Running com.peterphi.std.guice.common.lifecycle.GuiceLifecycleModuleTest
Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.134 sec - in com.peterphi.std.guice.common.lifecycle.GuiceLifecycleModuleTest
Running com.peterphi.std.guice.common.retry.module.RetryMethodInterceptorTest
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.225 sec - in com.peterphi.std.guice.common.retry.module.RetryMethodInterceptorTest
Running com.peterphi.std.guice.common.retry.retry.RetryManagerTest
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.019 sec - in com.peterphi.std.guice.common.retry.retry.RetryManagerTest
Running com.peterphi.std.guice.common.retry.retry.backoff.ExponentialBackoffTest
Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.001 sec - in com.peterphi.std.guice.common.retry.retry.backoff.ExponentialBackoffTest
Running com.peterphi.std.guice.common.retry.retry.backoff.NoBackoffStrategyTest
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 sec - in com.peterphi.std.guice.common.retry.retry.backoff.NoBackoffStrategyTest
Running com.peterphi.std.guice.common.serviceprops.ConfigRefTest
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.002 sec - in com.peterphi.std.guice.common.serviceprops.ConfigRefTest
Running com.peterphi.std.guice.common.serviceprops.composite.GuiceConfigTest
Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.114 sec - in com.peterphi.std.guice.common.serviceprops.composite.GuiceConfigTest
Running com.peterphi.std.guice.common.serviceprops.jaxbref.JAXBResourceFactoryTest
Tests run: 7, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.111 sec - in com.peterphi.std.guice.common.serviceprops.jaxbref.JAXBResourceFactoryTest
Running com.peterphi.std.guice.common.serviceprops.typed.TimeoutConverterTest
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.034 sec - in com.peterphi.std.guice.common.serviceprops.typed.TimeoutConverterTest
Running com.peterphi.std.guice.restclient.jaxb.webquery.WQDatesTest
Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.052 sec - in com.peterphi.std.guice.restclient.jaxb.webquery.WQDatesTest

Results :

Tests run: 26, Failures: 0, Errors: 0, Skipped: 0

[INFO] 
[INFO] ------------------------------------------------------------------------
[INFO] Building user-manager 9.5.4-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-enforcer-plugin:1.0:enforce (enforce-maven) @ user-manager-parent ---
[INFO] 
[INFO] --- buildnumber-maven-plugin:1.3:create (default) @ user-manager-parent ---
[INFO] 
[INFO] ------------------------------------------------------------------------
[INFO] Building user manager rest api 9.5.4-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-enforcer-plugin:1.0:enforce (enforce-maven) @ user-manager-api ---
[INFO] 
[INFO] --- buildnumber-maven-plugin:1.3:create (default) @ user-manager-api ---
[INFO] 
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ user-manager-api ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /home/travis/build/passed/petergeneric/stdlib/user-manager/api/src/main/resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:compile (default-compile) @ user-manager-api ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ user-manager-api ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /home/travis/build/passed/petergeneric/stdlib/user-manager/api/src/test/resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:testCompile (default-testCompile) @ user-manager-api ---
[INFO] No sources to compile
[INFO] 
[INFO] --- maven-surefire-plugin:2.19:test (default-test) @ user-manager-api ---
[INFO] No tests to run.
[INFO] 
[INFO] ------------------------------------------------------------------------
[INFO] Building stdlib guice webapp 9.5.4-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[WARNING] The artifact xml-apis:xml-apis:jar:2.0.2 has been relocated to xml-apis:xml-apis:jar:1.0.b2
[INFO] 
[INFO] --- maven-enforcer-plugin:1.0:enforce (enforce-maven) @ stdlib-guice-webapp ---
[INFO] 
[INFO] --- buildnumber-maven-plugin:1.3:create (default) @ stdlib-guice-webapp ---
[INFO] 
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ stdlib-guice-webapp ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 9 resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:compile (default-compile) @ stdlib-guice-webapp ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ stdlib-guice-webapp ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /home/travis/build/passed/petergeneric/stdlib/guice/webapp/src/test/resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:testCompile (default-testCompile) @ stdlib-guice-webapp ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-surefire-plugin:2.19:test (default-test) @ stdlib-guice-webapp ---

-------------------------------------------------------
 T E S T S
-------------------------------------------------------
Picked up _JAVA_OPTIONS: -Xmx2048m -Xms512m
Running com.peterphi.std.guice.web.rest.auth.userprovider.HttpCallJWTUserTest
Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.228 sec - in com.peterphi.std.guice.web.rest.auth.userprovider.HttpCallJWTUserTest
Running com.peterphi.std.guice.web.rest.auth.userprovider.JWTTest
Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.468 sec - in com.peterphi.std.guice.web.rest.auth.userprovider.JWTTest
Running com.peterphi.std.guice.web.rest.util.BootstrapStaticResourcesTest
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.012 sec - in com.peterphi.std.guice.web.rest.util.BootstrapStaticResourcesTest

Results :

Tests run: 6, Failures: 0, Errors: 0, Skipped: 0

[INFO] 
[INFO] ------------------------------------------------------------------------
[INFO] Building stdlib guice metrics 9.5.4-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-enforcer-plugin:1.0:enforce (enforce-maven) @ stdlib-guice-metrics ---
[INFO] 
[INFO] --- buildnumber-maven-plugin:1.3:create (default) @ stdlib-guice-metrics ---
[INFO] 
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ stdlib-guice-metrics ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 3 resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:compile (default-compile) @ stdlib-guice-metrics ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ stdlib-guice-metrics ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /home/travis/build/passed/petergeneric/stdlib/guice/metrics/src/test/resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:testCompile (default-testCompile) @ stdlib-guice-metrics ---
[INFO] No sources to compile
[INFO] 
[INFO] --- maven-surefire-plugin:2.19:test (default-test) @ stdlib-guice-metrics ---
[INFO] No tests to run.
[INFO] 
[INFO] ------------------------------------------------------------------------
[INFO] Building stdlib guice freemarker webapp 9.5.4-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-enforcer-plugin:1.0:enforce (enforce-maven) @ stdlib-guice-freemarker ---
[INFO] 
[INFO] --- buildnumber-maven-plugin:1.3:create (default) @ stdlib-guice-freemarker ---
[INFO] 
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ stdlib-guice-freemarker ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /home/travis/build/passed/petergeneric/stdlib/guice/freemarker/src/main/resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:compile (default-compile) @ stdlib-guice-freemarker ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ stdlib-guice-freemarker ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /home/travis/build/passed/petergeneric/stdlib/guice/freemarker/src/test/resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:testCompile (default-testCompile) @ stdlib-guice-freemarker ---
[INFO] No sources to compile
[INFO] 
[INFO] --- maven-surefire-plugin:2.19:test (default-test) @ stdlib-guice-freemarker ---
[INFO] No tests to run.
[INFO] 
[INFO] ------------------------------------------------------------------------
[INFO] Building stdlib guice testing support 9.5.4-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-enforcer-plugin:1.0:enforce (enforce-maven) @ stdlib-guice-testing ---
[INFO] 
[INFO] --- buildnumber-maven-plugin:1.3:create (default) @ stdlib-guice-testing ---
[INFO] 
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ stdlib-guice-testing ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /home/travis/build/passed/petergeneric/stdlib/guice/testing/src/main/resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:compile (default-compile) @ stdlib-guice-testing ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ stdlib-guice-testing ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /home/travis/build/passed/petergeneric/stdlib/guice/testing/src/test/resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:testCompile (default-testCompile) @ stdlib-guice-testing ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-surefire-plugin:2.19:test (default-test) @ stdlib-guice-testing ---

-------------------------------------------------------
 T E S T S
-------------------------------------------------------
Picked up _JAVA_OPTIONS: -Xmx2048m -Xms512m
Running com.peterphi.std.com.peterphi.std.guice.testing.annotations.AutomockTest
log4j:WARN No appenders could be found for logger (com.peterphi.std.guice.apploader.impl.GuiceRegistry).
log4j:WARN Please initialize the log4j system properly.
log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.076 sec - in com.peterphi.std.com.peterphi.std.guice.testing.annotations.AutomockTest

Results :

Tests run: 1, Failures: 0, Errors: 0, Skipped: 0

[INFO] 
[INFO] ------------------------------------------------------------------------
[INFO] Building stdlib guice hibernate 9.5.4-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-enforcer-plugin:1.0:enforce (enforce-maven) @ stdlib-guice-hibernate ---
[INFO] 
[INFO] --- buildnumber-maven-plugin:1.3:create (default) @ stdlib-guice-hibernate ---
[INFO] 
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ stdlib-guice-hibernate ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 1 resource
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:compile (default-compile) @ stdlib-guice-hibernate ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ stdlib-guice-hibernate ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 2 resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:testCompile (default-testCompile) @ stdlib-guice-hibernate ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-surefire-plugin:2.19:test (default-test) @ stdlib-guice-hibernate ---

-------------------------------------------------------
 T E S T S
-------------------------------------------------------
Picked up _JAVA_OPTIONS: -Xmx2048m -Xms512m
2021-12-11 17:23:02,658 TRACE Search for config files with name: hibernate-tests-in-memory-hsqldb.properties
2021-12-11 17:23:02,659 DEBUG Loading property file: file:/home/travis/build/passed/petergeneric/stdlib/guice/hibernate/target/test-classes/hibernate-tests-in-memory-hsqldb.properties
2021-12-11 17:23:02,687 TRACE Search for config files with name: hibernate-tests-in-memory-hsqldb.properties
2021-12-11 17:23:02,688 DEBUG Loading property file: file:/home/travis/build/passed/petergeneric/stdlib/guice/hibernate/target/test-classes/hibernate-tests-in-memory-hsqldb.properties
2021-12-11 17:23:02,716 TRACE Search for config files with name: hibernate-tests-in-memory-hsqldb.properties
2021-12-11 17:23:02,717 DEBUG Loading property file: file:/home/travis/build/passed/petergeneric/stdlib/guice/hibernate/target/test-classes/hibernate-tests-in-memory-hsqldb.properties
2021-12-11 17:23:02,774 TRACE Search for config files with name: hibernate-tests-in-memory-hsqldb.properties
2021-12-11 17:23:02,774 DEBUG Loading property file: file:/home/travis/build/passed/petergeneric/stdlib/guice/hibernate/target/test-classes/hibernate-tests-in-memory-hsqldb.properties
2021-12-11 17:23:02,776 TRACE Search for config files with name: hibernate-tests-in-memory-hsqldb.properties
2021-12-11 17:23:02,776 DEBUG Loading property file: file:/home/travis/build/passed/petergeneric/stdlib/guice/hibernate/target/test-classes/hibernate-tests-in-memory-hsqldb.properties
2021-12-11 17:23:02,792 TRACE Search for config files with name: hibernate-tests-in-memory-hsqldb.properties
2021-12-11 17:23:02,792 DEBUG Loading property file: file:/home/travis/build/passed/petergeneric/stdlib/guice/hibernate/target/test-classes/hibernate-tests-in-memory-hsqldb.properties
2021-12-11 17:23:02,794 TRACE Search for config files with name: hibernate-tests-in-memory-hsqldb.properties
2021-12-11 17:23:02,794 DEBUG Loading property file: file:/home/travis/build/passed/petergeneric/stdlib/guice/hibernate/target/test-classes/hibernate-tests-in-memory-hsqldb.properties
2021-12-11 17:23:02,796 TRACE Search for config files with name: hibernate-tests-in-memory-hsqldb.properties
2021-12-11 17:23:02,797 DEBUG Loading property file: file:/home/travis/build/passed/petergeneric/stdlib/guice/hibernate/target/test-classes/hibernate-tests-in-memory-hsqldb.properties
Running com.peterphi.std.guice.hibernate.entitycollection.EntityCollectionTest
2021-12-11 17:23:02,820 TRACE Search for config files with name: hibernate-tests-in-memory-hsqldb.properties
2021-12-11 17:23:02,820 DEBUG Loading property file: file:/home/travis/build/passed/petergeneric/stdlib/guice/hibernate/target/test-classes/hibernate-tests-in-memory-hsqldb.properties
2021-12-11 17:23:02,825  INFO Trying to create Guice Injector...
2021-12-11 17:23:02,930 DEBUG Discovered guice role: com.peterphi.std.guice.hibernate.role.HibernateAutoGuiceRole@3cda1055
2021-12-11 17:23:02,931 DEBUG Discovered guice role: com.peterphi.std.guice.common.eagersingleton.BindEagerSingletonRole@7a5d012c
2021-12-11 17:23:02,934 DEBUG Adding requested guice role: com.peterphi.std.guice.apploader.impl.CoreGuiceRole@3fb6a447
2021-12-11 17:23:02,934 DEBUG Adding requested guice role: com.peterphi.std.guice.testing.ModuleAddingGuiceRole@79b4d0f
2021-12-11 17:23:02,934 DEBUG Adding requested guice role: com.peterphi.std.guice.hibernate.role.HibernateAutoGuiceRole@3cda1055
2021-12-11 17:23:02,934 DEBUG Adding requested guice role: com.peterphi.std.guice.common.eagersingleton.BindEagerSingletonRole@7a5d012c
2021-12-11 17:23:02,988 TRACE Search for config files with name: environment.properties
2021-12-11 17:23:02,989 TRACE Search for config files with name: service.properties
2021-12-11 17:23:02,994 DEBUG Using static GuiceSetup: com.peterphi.std.guice.apploader.BasicSetup@475530b9
2021-12-11 17:23:03,073 TRACE Found source: file:/home/travis/build/passed/petergeneric/stdlib/guice/hibernate/target/test-classes/com/peterphi/std/guice/hibernate/entitycollection/
2021-12-11 17:23:03,484 TRACE getAnnotatedClasses interface com.peterphi.std.guice.common.eagersingleton.annotations.EagerSingleton with predicate=null returned in 0 ms
2021-12-11 17:23:03,485 TRACE Creating Injector with modules: [com.peterphi.std.guice.common.shutdown.ShutdownModule@10bbd20a, com.peterphi.std.guice.apploader.impl.GuiceRegistryModule@48503868, com.peterphi.std.guice.common.serviceprops.ServicePropertiesModule@6895a785, com.peterphi.std.guice.common.serviceprops.ConfigurationPropertyRegistryModule@184f6be2, com.peterphi.std.guice.common.lifecycle.GuiceLifecycleModule@56aac163, com.peterphi.std.guice.common.metrics.CoreMetricsModule@1f7030a6, com.peterphi.std.guice.common.cached.module.CacheModule@5a1c0542, com.peterphi.std.guice.common.retry.module.RetryModule@396f6598, com.peterphi.std.guice.common.JAXBModule@394e1a0f, com.peterphi.std.guice.common.logging.Log4JModule@64729b1e, com.peterphi.std.guice.hibernate.role.AutoHibernateModule@27a5f880]
2021-12-11 17:23:03,901 DEBUG Loading log4j configuration from embedded
2021-12-11 17:23:04,887 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.entitycollection.ParentEntity
2021-12-11 17:23:04,888 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.entitycollection.HavingAlternateIdEntity
2021-12-11 17:23:04,888 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.entitycollection.ChildEntity
2021-12-11 17:23:04,888 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.entitycollection.AlternateIdReferencingEntity
2021-12-11 17:23:05,025 TRACE Evaluate HibernateConfigurationValidators. has at least one=false
2021-12-11 17:23:05,151  WARN HHH10001002: Using Hibernate built-in connection pool (not for production use!)
Hibernate: alter table asset_alternate_id drop constraint FKhdag9du7irj5v3sliknkgwm1v
2021-12-11 17:23:06,348  WARN GenerationTarget encountered exception accepting command : Error executing DDL via JDBC Statement
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL via JDBC Statement
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:67)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlString(SchemaDropperImpl.java:375)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlStrings(SchemaDropperImpl.java:359)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:331)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:230)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:154)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:126)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:112)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:144)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:72)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:313)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:452)
	at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:710)
	at com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider.get(HibernateSessionFactoryProvider.java:53)
	at com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider.get(HibernateSessionFactoryProvider.java:20)
	at com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider$$EnhancerByGuice$$e9bc367e.get(<generated>)
	at com.google.inject.internal.ProviderInternalFactory.provision(ProviderInternalFactory.java:81)
	at com.google.inject.internal.BoundProviderFactory.provision(BoundProviderFactory.java:72)
	at com.google.inject.internal.ProviderInternalFactory.circularGet(ProviderInternalFactory.java:61)
	at com.google.inject.internal.BoundProviderFactory.get(BoundProviderFactory.java:62)
	at com.google.inject.internal.ProviderToInternalFactoryAdapter$1.call(ProviderToInternalFactoryAdapter.java:46)
	at com.google.inject.internal.InjectorImpl.callInContext(InjectorImpl.java:1103)
	at com.google.inject.internal.ProviderToInternalFactoryAdapter.get(ProviderToInternalFactoryAdapter.java:40)
	at com.google.inject.internal.SingletonScope$1.get(SingletonScope.java:145)
	at com.google.inject.internal.InternalFactoryToProviderAdapter.get(InternalFactoryToProviderAdapter.java:41)
	at com.google.inject.internal.SingleFieldInjector.inject(SingleFieldInjector.java:54)
	at com.google.inject.internal.MembersInjectorImpl.injectMembers(MembersInjectorImpl.java:132)
	at com.google.inject.internal.ConstructorInjector.provision(ConstructorInjector.java:114)
	at com.google.inject.internal.ConstructorInjector.construct(ConstructorInjector.java:85)
	at com.google.inject.internal.ConstructorBindingImpl$Factory.get(ConstructorBindingImpl.java:267)
	at com.google.inject.internal.SingleFieldInjector.inject(SingleFieldInjector.java:54)
	at com.google.inject.internal.MembersInjectorImpl.injectMembers(MembersInjectorImpl.java:132)
	at com.google.inject.internal.ConstructorInjector.provision(ConstructorInjector.java:114)
	at com.google.inject.internal.ConstructorInjector.construct(ConstructorInjector.java:85)
	at com.google.inject.internal.ConstructorBindingImpl$Factory.get(ConstructorBindingImpl.java:267)
	at com.google.inject.internal.InjectorImpl$2$1.call(InjectorImpl.java:1016)
	at com.google.inject.internal.InjectorImpl.callInContext(InjectorImpl.java:1092)
	at com.google.inject.internal.InjectorImpl$2.get(InjectorImpl.java:1012)
	at com.google.inject.internal.InjectorImpl.getInstance(InjectorImpl.java:1051)
	at com.peterphi.std.guice.testing.GuiceUnit.createTest(GuiceUnit.java:50)
	at org.junit.runners.BlockJUnit4ClassRunner$1.runReflectiveCall(BlockJUnit4ClassRunner.java:266)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.BlockJUnit4ClassRunner.methodBlock(BlockJUnit4ClassRunner.java:263)
	at com.peterphi.std.guice.testing.GuiceUnit.methodBlock(GuiceUnit.java:57)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at com.peterphi.std.guice.testing.GuiceUnit.run(GuiceUnit.java:78)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:344)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:269)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:240)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:184)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:286)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:240)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:121)
Caused by: java.sql.SQLSyntaxErrorException: user lacks privilege or object not found: PUBLIC.ASSET_ALTERNATE_ID
	at org.hsqldb.jdbc.JDBCUtil.sqlException(Unknown Source)
	at org.hsqldb.jdbc.JDBCUtil.sqlException(Unknown Source)
	at org.hsqldb.jdbc.JDBCStatement.fetchResult(Unknown Source)
	at org.hsqldb.jdbc.JDBCStatement.execute(Unknown Source)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:54)
	... 59 more
Caused by: org.hsqldb.HsqlException: user lacks privilege or object not found: PUBLIC.ASSET_ALTERNATE_ID
	at org.hsqldb.error.Error.error(Unknown Source)
	at org.hsqldb.error.Error.error(Unknown Source)
	at org.hsqldb.SchemaManager.getUserTable(Unknown Source)
	at org.hsqldb.ParserDDL.compileAlterTable(Unknown Source)
	at org.hsqldb.ParserDDL.compileAlter(Unknown Source)
	at org.hsqldb.ParserCommand.compilePart(Unknown Source)
	at org.hsqldb.ParserCommand.compileStatements(Unknown Source)
	at org.hsqldb.Session.executeDirectStatement(Unknown Source)
	at org.hsqldb.Session.execute(Unknown Source)
	... 62 more
Hibernate: alter table child_entity drop constraint FK11qr2as1nab8idathnw1hyoep
2021-12-11 17:23:06,352  WARN GenerationTarget encountered exception accepting command : Error executing DDL via JDBC Statement
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL via JDBC Statement
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:67)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlString(SchemaDropperImpl.java:375)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlStrings(SchemaDropperImpl.java:359)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:331)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:230)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:154)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:126)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:112)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:144)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:72)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:313)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:452)
	at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:710)
	at com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider.get(HibernateSessionFactoryProvider.java:53)
	at com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider.get(HibernateSessionFactoryProvider.java:20)
	at com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider$$EnhancerByGuice$$e9bc367e.get(<generated>)
	at com.google.inject.internal.ProviderInternalFactory.provision(ProviderInternalFactory.java:81)
	at com.google.inject.internal.BoundProviderFactory.provision(BoundProviderFactory.java:72)
	at com.google.inject.internal.ProviderInternalFactory.circularGet(ProviderInternalFactory.java:61)
	at com.google.inject.internal.BoundProviderFactory.get(BoundProviderFactory.java:62)
	at com.google.inject.internal.ProviderToInternalFactoryAdapter$1.call(ProviderToInternalFactoryAdapter.java:46)
	at com.google.inject.internal.InjectorImpl.callInContext(InjectorImpl.java:1103)
	at com.google.inject.internal.ProviderToInternalFactoryAdapter.get(ProviderToInternalFactoryAdapter.java:40)
	at com.google.inject.internal.SingletonScope$1.get(SingletonScope.java:145)
	at com.google.inject.internal.InternalFactoryToProviderAdapter.get(InternalFactoryToProviderAdapter.java:41)
	at com.google.inject.internal.SingleFieldInjector.inject(SingleFieldInjector.java:54)
	at com.google.inject.internal.MembersInjectorImpl.injectMembers(MembersInjectorImpl.java:132)
	at com.google.inject.internal.ConstructorInjector.provision(ConstructorInjector.java:114)
	at com.google.inject.internal.ConstructorInjector.construct(ConstructorInjector.java:85)
	at com.google.inject.internal.ConstructorBindingImpl$Factory.get(ConstructorBindingImpl.java:267)
	at com.google.inject.internal.SingleFieldInjector.inject(SingleFieldInjector.java:54)
	at com.google.inject.internal.MembersInjectorImpl.injectMembers(MembersInjectorImpl.java:132)
	at com.google.inject.internal.ConstructorInjector.provision(ConstructorInjector.java:114)
	at com.google.inject.internal.ConstructorInjector.construct(ConstructorInjector.java:85)
	at com.google.inject.internal.ConstructorBindingImpl$Factory.get(ConstructorBindingImpl.java:267)
	at com.google.inject.internal.InjectorImpl$2$1.call(InjectorImpl.java:1016)
	at com.google.inject.internal.InjectorImpl.callInContext(InjectorImpl.java:1092)
	at com.google.inject.internal.InjectorImpl$2.get(InjectorImpl.java:1012)
	at com.google.inject.internal.InjectorImpl.getInstance(InjectorImpl.java:1051)
	at com.peterphi.std.guice.testing.GuiceUnit.createTest(GuiceUnit.java:50)
	at org.junit.runners.BlockJUnit4ClassRunner$1.runReflectiveCall(BlockJUnit4ClassRunner.java:266)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.BlockJUnit4ClassRunner.methodBlock(BlockJUnit4ClassRunner.java:263)
	at com.peterphi.std.guice.testing.GuiceUnit.methodBlock(GuiceUnit.java:57)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at com.peterphi.std.guice.testing.GuiceUnit.run(GuiceUnit.java:78)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:344)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:269)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:240)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:184)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:286)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:240)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:121)
Caused by: java.sql.SQLSyntaxErrorException: user lacks privilege or object not found: PUBLIC.CHILD_ENTITY
	at org.hsqldb.jdbc.JDBCUtil.sqlException(Unknown Source)
	at org.hsqldb.jdbc.JDBCUtil.sqlException(Unknown Source)
	at org.hsqldb.jdbc.JDBCStatement.fetchResult(Unknown Source)
	at org.hsqldb.jdbc.JDBCStatement.execute(Unknown Source)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:54)
	... 59 more
Caused by: org.hsqldb.HsqlException: user lacks privilege or object not found: PUBLIC.CHILD_ENTITY
	at org.hsqldb.error.Error.error(Unknown Source)
	at org.hsqldb.error.Error.error(Unknown Source)
	at org.hsqldb.SchemaManager.getUserTable(Unknown Source)
	at org.hsqldb.ParserDDL.compileAlterTable(Unknown Source)
	at org.hsqldb.ParserDDL.compileAlter(Unknown Source)
	at org.hsqldb.ParserCommand.compilePart(Unknown Source)
	at org.hsqldb.ParserCommand.compileStatements(Unknown Source)
	at org.hsqldb.Session.executeDirectStatement(Unknown Source)
	at org.hsqldb.Session.execute(Unknown Source)
	... 62 more
Hibernate: alter table child_entity drop constraint FK3uwb4qmw23u0rr8gwqltlepc3
2021-12-11 17:23:06,355  WARN GenerationTarget encountered exception accepting command : Error executing DDL via JDBC Statement
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL via JDBC Statement
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:67)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlString(SchemaDropperImpl.java:375)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlStrings(SchemaDropperImpl.java:359)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:331)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:230)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:154)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:126)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:112)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:144)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:72)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:313)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:452)
	at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:710)
	at com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider.get(HibernateSessionFactoryProvider.java:53)
	at com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider.get(HibernateSessionFactoryProvider.java:20)
	at com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider$$EnhancerByGuice$$e9bc367e.get(<generated>)
	at com.google.inject.internal.ProviderInternalFactory.provision(ProviderInternalFactory.java:81)
	at com.google.inject.internal.BoundProviderFactory.provision(BoundProviderFactory.java:72)
	at com.google.inject.internal.ProviderInternalFactory.circularGet(ProviderInternalFactory.java:61)
	at com.google.inject.internal.BoundProviderFactory.get(BoundProviderFactory.java:62)
	at com.google.inject.internal.ProviderToInternalFactoryAdapter$1.call(ProviderToInternalFactoryAdapter.java:46)
	at com.google.inject.internal.InjectorImpl.callInContext(InjectorImpl.java:1103)
	at com.google.inject.internal.ProviderToInternalFactoryAdapter.get(ProviderToInternalFactoryAdapter.java:40)
	at com.google.inject.internal.SingletonScope$1.get(SingletonScope.java:145)
	at com.google.inject.internal.InternalFactoryToProviderAdapter.get(InternalFactoryToProviderAdapter.java:41)
	at com.google.inject.internal.SingleFieldInjector.inject(SingleFieldInjector.java:54)
	at com.google.inject.internal.MembersInjectorImpl.injectMembers(MembersInjectorImpl.java:132)
	at com.google.inject.internal.ConstructorInjector.provision(ConstructorInjector.java:114)
	at com.google.inject.internal.ConstructorInjector.construct(ConstructorInjector.java:85)
	at com.google.inject.internal.ConstructorBindingImpl$Factory.get(ConstructorBindingImpl.java:267)
	at com.google.inject.internal.SingleFieldInjector.inject(SingleFieldInjector.java:54)
	at com.google.inject.internal.MembersInjectorImpl.injectMembers(MembersInjectorImpl.java:132)
	at com.google.inject.internal.ConstructorInjector.provision(ConstructorInjector.java:114)
	at com.google.inject.internal.ConstructorInjector.construct(ConstructorInjector.java:85)
	at com.google.inject.internal.ConstructorBindingImpl$Factory.get(ConstructorBindingImpl.java:267)
	at com.google.inject.internal.InjectorImpl$2$1.call(InjectorImpl.java:1016)
	at com.google.inject.internal.InjectorImpl.callInContext(InjectorImpl.java:1092)
	at com.google.inject.internal.InjectorImpl$2.get(InjectorImpl.java:1012)
	at com.google.inject.internal.InjectorImpl.getInstance(InjectorImpl.java:1051)
	at com.peterphi.std.guice.testing.GuiceUnit.createTest(GuiceUnit.java:50)
	at org.junit.runners.BlockJUnit4ClassRunner$1.runReflectiveCall(BlockJUnit4ClassRunner.java:266)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.BlockJUnit4ClassRunner.methodBlock(BlockJUnit4ClassRunner.java:263)
	at com.peterphi.std.guice.testing.GuiceUnit.methodBlock(GuiceUnit.java:57)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at com.peterphi.std.guice.testing.GuiceUnit.run(GuiceUnit.java:78)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:344)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:269)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:240)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:184)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:286)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:240)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:121)
Caused by: java.sql.SQLSyntaxErrorException: user lacks privilege or object not found: PUBLIC.CHILD_ENTITY
	at org.hsqldb.jdbc.JDBCUtil.sqlException(Unknown Source)
	at org.hsqldb.jdbc.JDBCUtil.sqlException(Unknown Source)
	at org.hsqldb.jdbc.JDBCStatement.fetchResult(Unknown Source)
	at org.hsqldb.jdbc.JDBCStatement.execute(Unknown Source)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:54)
	... 59 more
Caused by: org.hsqldb.HsqlException: user lacks privilege or object not found: PUBLIC.CHILD_ENTITY
	at org.hsqldb.error.Error.error(Unknown Source)
	at org.hsqldb.error.Error.error(Unknown Source)
	at org.hsqldb.SchemaManager.getUserTable(Unknown Source)
	at org.hsqldb.ParserDDL.compileAlterTable(Unknown Source)
	at org.hsqldb.ParserDDL.compileAlter(Unknown Source)
	at org.hsqldb.ParserCommand.compilePart(Unknown Source)
	at org.hsqldb.ParserCommand.compileStatements(Unknown Source)
	at org.hsqldb.Session.executeDirectStatement(Unknown Source)
	at org.hsqldb.Session.execute(Unknown Source)
	... 62 more
Hibernate: alter table refs_having_altid drop constraint FKcrnmosah3i85ud2gvki0qghp5
2021-12-11 17:23:06,357  WARN GenerationTarget encountered exception accepting command : Error executing DDL via JDBC Statement
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL via JDBC Statement
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:67)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlString(SchemaDropperImpl.java:375)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlStrings(SchemaDropperImpl.java:359)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:331)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:230)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:154)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:126)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:112)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:144)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:72)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:313)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:452)
	at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:710)
	at com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider.get(HibernateSessionFactoryProvider.java:53)
	at com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider.get(HibernateSessionFactoryProvider.java:20)
	at com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider$$EnhancerByGuice$$e9bc367e.get(<generated>)
	at com.google.inject.internal.ProviderInternalFactory.provision(ProviderInternalFactory.java:81)
	at com.google.inject.internal.BoundProviderFactory.provision(BoundProviderFactory.java:72)
	at com.google.inject.internal.ProviderInternalFactory.circularGet(ProviderInternalFactory.java:61)
	at com.google.inject.internal.BoundProviderFactory.get(BoundProviderFactory.java:62)
	at com.google.inject.internal.ProviderToInternalFactoryAdapter$1.call(ProviderToInternalFactoryAdapter.java:46)
	at com.google.inject.internal.InjectorImpl.callInContext(InjectorImpl.java:1103)
	at com.google.inject.internal.ProviderToInternalFactoryAdapter.get(ProviderToInternalFactoryAdapter.java:40)
	at com.google.inject.internal.SingletonScope$1.get(SingletonScope.java:145)
	at com.google.inject.internal.InternalFactoryToProviderAdapter.get(InternalFactoryToProviderAdapter.java:41)
	at com.google.inject.internal.SingleFieldInjector.inject(SingleFieldInjector.java:54)
	at com.google.inject.internal.MembersInjectorImpl.injectMembers(MembersInjectorImpl.java:132)
	at com.google.inject.internal.ConstructorInjector.provision(ConstructorInjector.java:114)
	at com.google.inject.internal.ConstructorInjector.construct(ConstructorInjector.java:85)
	at com.google.inject.internal.ConstructorBindingImpl$Factory.get(ConstructorBindingImpl.java:267)
	at com.google.inject.internal.SingleFieldInjector.inject(SingleFieldInjector.java:54)
	at com.google.inject.internal.MembersInjectorImpl.injectMembers(MembersInjectorImpl.java:132)
	at com.google.inject.internal.ConstructorInjector.provision(ConstructorInjector.java:114)
	at com.google.inject.internal.ConstructorInjector.construct(ConstructorInjector.java:85)
	at com.google.inject.internal.ConstructorBindingImpl$Factory.get(ConstructorBindingImpl.java:267)
	at com.google.inject.internal.InjectorImpl$2$1.call(InjectorImpl.java:1016)
	at com.google.inject.internal.InjectorImpl.callInContext(InjectorImpl.java:1092)
	at com.google.inject.internal.InjectorImpl$2.get(InjectorImpl.java:1012)
	at com.google.inject.internal.InjectorImpl.getInstance(InjectorImpl.java:1051)
	at com.peterphi.std.guice.testing.GuiceUnit.createTest(GuiceUnit.java:50)
	at org.junit.runners.BlockJUnit4ClassRunner$1.runReflectiveCall(BlockJUnit4ClassRunner.java:266)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.BlockJUnit4ClassRunner.methodBlock(BlockJUnit4ClassRunner.java:263)
	at com.peterphi.std.guice.testing.GuiceUnit.methodBlock(GuiceUnit.java:57)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at com.peterphi.std.guice.testing.GuiceUnit.run(GuiceUnit.java:78)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:344)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:269)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:240)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:184)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:286)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:240)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:121)
Caused by: java.sql.SQLSyntaxErrorException: user lacks privilege or object not found: PUBLIC.REFS_HAVING_ALTID
	at org.hsqldb.jdbc.JDBCUtil.sqlException(Unknown Source)
	at org.hsqldb.jdbc.JDBCUtil.sqlException(Unknown Source)
	at org.hsqldb.jdbc.JDBCStatement.fetchResult(Unknown Source)
	at org.hsqldb.jdbc.JDBCStatement.execute(Unknown Source)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:54)
	... 59 more
Caused by: org.hsqldb.HsqlException: user lacks privilege or object not found: PUBLIC.REFS_HAVING_ALTID
	at org.hsqldb.error.Error.error(Unknown Source)
	at org.hsqldb.error.Error.error(Unknown Source)
	at org.hsqldb.SchemaManager.getUserTable(Unknown Source)
	at org.hsqldb.ParserDDL.compileAlterTable(Unknown Source)
	at org.hsqldb.ParserDDL.compileAlter(Unknown Source)
	at org.hsqldb.ParserCommand.compilePart(Unknown Source)
	at org.hsqldb.ParserCommand.compileStatements(Unknown Source)
	at org.hsqldb.Session.executeDirectStatement(Unknown Source)
	at org.hsqldb.Session.execute(Unknown Source)
	... 62 more
Hibernate: drop table asset_alternate_id if exists
Hibernate: drop table child_entity if exists
Hibernate: drop table having_altid if exists
Hibernate: drop table parent_entity if exists
Hibernate: drop table refs_having_altid if exists
Hibernate: drop sequence hibernate_sequence if exists
Hibernate: create sequence hibernate_sequence start with 1 increment by 1
Hibernate: create table asset_alternate_id (asset_id bigint not null, id_system varchar(255) not null, id_value varchar(255) not null, primary key (asset_id, id_system, id_value))
Hibernate: create table child_entity (id bigint not null, flag boolean not null, friend_id bigint, parent_id bigint not null, primary key (id))
Hibernate: create table having_altid (id bigint generated by default as identity (start with 1), primary key (id))
Hibernate: create table parent_entity (id bigint not null, capacity integer not null, primary key (id))
Hibernate: create table refs_having_altid (id bigint generated by default as identity (start with 1), referenced_id bigint, primary key (id))
Hibernate: alter table asset_alternate_id add constraint FKhdag9du7irj5v3sliknkgwm1v foreign key (asset_id) references having_altid
Hibernate: alter table child_entity add constraint FK11qr2as1nab8idathnw1hyoep foreign key (friend_id) references parent_entity
Hibernate: alter table child_entity add constraint FK3uwb4qmw23u0rr8gwqltlepc3 foreign key (parent_id) references parent_entity
Hibernate: alter table refs_having_altid add constraint FKcrnmosah3i85ud2gvki0qghp5 foreign key (referenced_id) references having_altid
2021-12-11 17:23:06,379 TRACE Hibernate Setup Complete.
2021-12-11 17:23:06,385 DEBUG Known entities: [parent_entity, child_entity, having_altid, refs_having_altid]
2021-12-11 17:23:06,385 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.entitycollection.ParentEntity
2021-12-11 17:23:06,506 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.entitycollection.ChildEntity
2021-12-11 17:23:06,507 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.entitycollection.ChildEntity
2021-12-11 17:23:06,508 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.entitycollection.ParentEntity
2021-12-11 17:23:06,508 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.entitycollection.HavingAlternateIdEntity
2021-12-11 17:23:06,508 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.entitycollection.AlternateIdEmbeddedEntity from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@288ca5f0
2021-12-11 17:23:06,508 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.entitycollection.AlternateIdEmbeddedEntity from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@288ca5f0
2021-12-11 17:23:06,508 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.entitycollection.HavingAlternateIdEntity
2021-12-11 17:23:06,508 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.entitycollection.AlternateIdReferencingEntity
2021-12-11 17:23:06,509 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.entitycollection.AlternateIdReferencingEntity
2021-12-11 17:23:06,629 TRACE Creating new transaction to call public T com.peterphi.std.guice.hibernate.dao.HibernateDao.getById(ID)
Hibernate: select alternatei0_.id as id1_4_0_, alternatei0_.referenced_id as referenc2_4_0_, havingalte1_.id as id1_2_1_, alternatei2_.asset_id as asset_id1_0_2_, alternatei2_.id_system as id_syste2_0_2_, alternatei2_.id_value as id_value3_0_2_ from refs_having_altid alternatei0_ left outer join having_altid havingalte1_ on alternatei0_.referenced_id=havingalte1_.id left outer join asset_alternate_id alternatei2_ on havingalte1_.id=alternatei2_.asset_id where alternatei0_.id=?
2021-12-11 17:23:06,723 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@75d4a80f
2021-12-11 17:23:06,727  INFO Shut down Hibernate SessionFactory...
2021-12-11 17:23:06,728 TRACE Creating new transaction to call void com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider.runShutDownSQL()
2021-12-11 17:23:06,729 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@77bb48d5
2021-12-11 17:23:06,962 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.entitycollection.ParentEntity
2021-12-11 17:23:06,962 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.entitycollection.HavingAlternateIdEntity
2021-12-11 17:23:06,962 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.entitycollection.ChildEntity
2021-12-11 17:23:06,962 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.entitycollection.AlternateIdReferencingEntity
2021-12-11 17:23:06,963 TRACE Evaluate HibernateConfigurationValidators. has at least one=false
2021-12-11 17:23:06,970  WARN HHH10001002: Using Hibernate built-in connection pool (not for production use!)
Hibernate: alter table asset_alternate_id drop constraint FKhdag9du7irj5v3sliknkgwm1v
Hibernate: alter table child_entity drop constraint FK11qr2as1nab8idathnw1hyoep
Hibernate: alter table child_entity drop constraint FK3uwb4qmw23u0rr8gwqltlepc3
Hibernate: alter table refs_having_altid drop constraint FKcrnmosah3i85ud2gvki0qghp5
Hibernate: drop table asset_alternate_id if exists
Hibernate: drop table child_entity if exists
Hibernate: drop table having_altid if exists
Hibernate: drop table parent_entity if exists
Hibernate: drop table refs_having_altid if exists
Hibernate: drop sequence hibernate_sequence if exists
Hibernate: create sequence hibernate_sequence start with 1 increment by 1
Hibernate: create table asset_alternate_id (asset_id bigint not null, id_system varchar(255) not null, id_value varchar(255) not null, primary key (asset_id, id_system, id_value))
Hibernate: create table child_entity (id bigint not null, flag boolean not null, friend_id bigint, parent_id bigint not null, primary key (id))
Hibernate: create table having_altid (id bigint generated by default as identity (start with 1), primary key (id))
Hibernate: create table parent_entity (id bigint not null, capacity integer not null, primary key (id))
Hibernate: create table refs_having_altid (id bigint generated by default as identity (start with 1), referenced_id bigint, primary key (id))
Hibernate: alter table asset_alternate_id add constraint FKhdag9du7irj5v3sliknkgwm1v foreign key (asset_id) references having_altid
Hibernate: alter table child_entity add constraint FK11qr2as1nab8idathnw1hyoep foreign key (friend_id) references parent_entity
Hibernate: alter table child_entity add constraint FK3uwb4qmw23u0rr8gwqltlepc3 foreign key (parent_id) references parent_entity
Hibernate: alter table refs_having_altid add constraint FKcrnmosah3i85ud2gvki0qghp5 foreign key (referenced_id) references having_altid
2021-12-11 17:23:07,015 TRACE Hibernate Setup Complete.
2021-12-11 17:23:07,016 DEBUG Known entities: [parent_entity, refs_having_altid, having_altid, child_entity]
2021-12-11 17:23:07,016 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.entitycollection.ParentEntity
2021-12-11 17:23:07,016 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.entitycollection.ChildEntity
2021-12-11 17:23:07,016 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.entitycollection.ChildEntity
2021-12-11 17:23:07,016 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.entitycollection.ParentEntity
2021-12-11 17:23:07,016 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.entitycollection.AlternateIdReferencingEntity
2021-12-11 17:23:07,016 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.entitycollection.HavingAlternateIdEntity
2021-12-11 17:23:07,016 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.entitycollection.AlternateIdEmbeddedEntity from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@6be6931f
2021-12-11 17:23:07,016 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.entitycollection.AlternateIdEmbeddedEntity from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@6be6931f
2021-12-11 17:23:07,016 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.entitycollection.HavingAlternateIdEntity
2021-12-11 17:23:07,016 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.entitycollection.AlternateIdReferencingEntity
2021-12-11 17:23:07,017 TRACE Creating new transaction to call public java.util.List<java.lang.Long> com.peterphi.std.guice.hibernate.entitycollection.ParentDao.getIdsByQuery(java.lang.String)
Hibernate: select parententi0_.id as col_0_0_ from parent_entity parententi0_
2021-12-11 17:23:07,133 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@21e45a6f
2021-12-11 17:23:07,134  INFO Shut down Hibernate SessionFactory...
2021-12-11 17:23:07,134 TRACE Creating new transaction to call void com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider.runShutDownSQL()
2021-12-11 17:23:07,135 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@7b53b1ad
2021-12-11 17:23:07,333 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.entitycollection.ParentEntity
2021-12-11 17:23:07,334 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.entitycollection.HavingAlternateIdEntity
2021-12-11 17:23:07,334 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.entitycollection.ChildEntity
2021-12-11 17:23:07,334 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.entitycollection.AlternateIdReferencingEntity
2021-12-11 17:23:07,334 TRACE Evaluate HibernateConfigurationValidators. has at least one=false
2021-12-11 17:23:07,341  WARN HHH10001002: Using Hibernate built-in connection pool (not for production use!)
Hibernate: alter table asset_alternate_id drop constraint FKhdag9du7irj5v3sliknkgwm1v
Hibernate: alter table child_entity drop constraint FK11qr2as1nab8idathnw1hyoep
Hibernate: alter table child_entity drop constraint FK3uwb4qmw23u0rr8gwqltlepc3
Hibernate: alter table refs_having_altid drop constraint FKcrnmosah3i85ud2gvki0qghp5
Hibernate: drop table asset_alternate_id if exists
Hibernate: drop table child_entity if exists
Hibernate: drop table having_altid if exists
Hibernate: drop table parent_entity if exists
Hibernate: drop table refs_having_altid if exists
Hibernate: drop sequence hibernate_sequence if exists
Hibernate: create sequence hibernate_sequence start with 1 increment by 1
Hibernate: create table asset_alternate_id (asset_id bigint not null, id_system varchar(255) not null, id_value varchar(255) not null, primary key (asset_id, id_system, id_value))
Hibernate: create table child_entity (id bigint not null, flag boolean not null, friend_id bigint, parent_id bigint not null, primary key (id))
Hibernate: create table having_altid (id bigint generated by default as identity (start with 1), primary key (id))
Hibernate: create table parent_entity (id bigint not null, capacity integer not null, primary key (id))
Hibernate: create table refs_having_altid (id bigint generated by default as identity (start with 1), referenced_id bigint, primary key (id))
Hibernate: alter table asset_alternate_id add constraint FKhdag9du7irj5v3sliknkgwm1v foreign key (asset_id) references having_altid
Hibernate: alter table child_entity add constraint FK11qr2as1nab8idathnw1hyoep foreign key (friend_id) references parent_entity
Hibernate: alter table child_entity add constraint FK3uwb4qmw23u0rr8gwqltlepc3 foreign key (parent_id) references parent_entity
Hibernate: alter table refs_having_altid add constraint FKcrnmosah3i85ud2gvki0qghp5 foreign key (referenced_id) references having_altid
2021-12-11 17:23:07,400 TRACE Hibernate Setup Complete.
2021-12-11 17:23:07,400 DEBUG Known entities: [parent_entity, refs_having_altid, child_entity, having_altid]
2021-12-11 17:23:07,400 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.entitycollection.ParentEntity
2021-12-11 17:23:07,400 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.entitycollection.ChildEntity
2021-12-11 17:23:07,400 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.entitycollection.ChildEntity
2021-12-11 17:23:07,400 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.entitycollection.ParentEntity
2021-12-11 17:23:07,400 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.entitycollection.AlternateIdReferencingEntity
2021-12-11 17:23:07,400 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.entitycollection.HavingAlternateIdEntity
2021-12-11 17:23:07,400 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.entitycollection.AlternateIdEmbeddedEntity from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@6734ff92
2021-12-11 17:23:07,400 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.entitycollection.AlternateIdEmbeddedEntity from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@6734ff92
2021-12-11 17:23:07,401 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.entitycollection.HavingAlternateIdEntity
2021-12-11 17:23:07,401 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.entitycollection.AlternateIdReferencingEntity
2021-12-11 17:23:07,402 TRACE Creating new transaction to call public java.util.List<java.lang.Long> com.peterphi.std.guice.hibernate.entitycollection.EntityCollectionTest.load()
2021-12-11 17:23:07,404 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:07,431 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:07,433 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:07,433 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:07,434 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:07,434 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:07,435 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:07,435 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:07,436 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@6c6928c
Hibernate: insert into parent_entity (capacity, id) values (?, ?)
Hibernate: insert into child_entity (flag, friend_id, parent_id, id) values (?, ?, ?, ?)
Hibernate: insert into child_entity (flag, friend_id, parent_id, id) values (?, ?, ?, ?)
Hibernate: insert into child_entity (flag, friend_id, parent_id, id) values (?, ?, ?, ?)
Hibernate: insert into parent_entity (capacity, id) values (?, ?)
Hibernate: insert into child_entity (flag, friend_id, parent_id, id) values (?, ?, ?, ?)
Hibernate: insert into child_entity (flag, friend_id, parent_id, id) values (?, ?, ?, ?)
Hibernate: insert into child_entity (flag, friend_id, parent_id, id) values (?, ?, ?, ?)
2021-12-11 17:23:07,548 TRACE Creating new transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
2021-12-11 17:23:07,942 TRACE Hibernate executing SQL: select parententi0_.id as id1_3_0_, children2_.id as id1_1_1_, parententi3_.id as id1_3_2_, parententi0_.capacity as capacity2_3_0_, children2_.flag as flag2_1_1_, children2_.friend_id as friend_i3_1_1_, children2_.parent_id as parent_i4_1_1_, children2_.parent_id as parent_i4_1_0__, children2_.id as id1_1_0__, parententi3_.capacity as capacity2_3_2_ from parent_entity parententi0_ left outer join child_entity children1_ on parententi0_.id=children1_.parent_id left outer join child_entity children2_ on parententi0_.id=children2_.parent_id left outer join parent_entity parententi3_ on children2_.friend_id=parententi3_.id where children1_.flag=?
Hibernate: select parententi0_.id as id1_3_0_, children2_.id as id1_1_1_, parententi3_.id as id1_3_2_, parententi0_.capacity as capacity2_3_0_, children2_.flag as flag2_1_1_, children2_.friend_id as friend_i3_1_1_, children2_.parent_id as parent_i4_1_1_, children2_.parent_id as parent_i4_1_0__, children2_.id as id1_1_0__, parententi3_.capacity as capacity2_3_2_ from parent_entity parententi0_ left outer join child_entity children1_ on parententi0_.id=children1_.parent_id left outer join child_entity children2_ on parententi0_.id=children2_.parent_id left outer join parent_entity parententi3_ on children2_.friend_id=parententi3_.id where children1_.flag=?
2021-12-11 17:23:07,951 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@4e94669c
SQL: select parententi0_.id as id1_3_0_, children2_.id as id1_1_1_, parententi3_.id as id1_3_2_, parententi0_.capacity as capacity2_3_0_, children2_.flag as flag2_1_1_, children2_.friend_id as friend_i3_1_1_, children2_.parent_id as parent_i4_1_1_, children2_.parent_id as parent_i4_1_0__, children2_.id as id1_1_0__, parententi3_.capacity as capacity2_3_2_ from parent_entity parententi0_ left outer join child_entity children1_ on parententi0_.id=children1_.parent_id left outer join child_entity children2_ on parententi0_.id=children2_.parent_id left outer join parent_entity parententi3_ on children2_.friend_id=parententi3_.id where children1_.flag=?
SQL Statements: 1
[ParentEntity{id=1}, ParentEntity{id=5}]
1 - children 3,4,2
5 - children 7,8,6
2021-12-11 17:23:07,957  INFO Shut down Hibernate SessionFactory...
2021-12-11 17:23:07,957 TRACE Creating new transaction to call void com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider.runShutDownSQL()
2021-12-11 17:23:07,957 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@2b682e9
2021-12-11 17:23:08,109 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.entitycollection.ParentEntity
2021-12-11 17:23:08,109 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.entitycollection.HavingAlternateIdEntity
2021-12-11 17:23:08,109 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.entitycollection.ChildEntity
2021-12-11 17:23:08,109 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.entitycollection.AlternateIdReferencingEntity
2021-12-11 17:23:08,109 TRACE Evaluate HibernateConfigurationValidators. has at least one=false
2021-12-11 17:23:08,113  WARN HHH10001002: Using Hibernate built-in connection pool (not for production use!)
Hibernate: alter table asset_alternate_id drop constraint FKhdag9du7irj5v3sliknkgwm1v
Hibernate: alter table child_entity drop constraint FK11qr2as1nab8idathnw1hyoep
Hibernate: alter table child_entity drop constraint FK3uwb4qmw23u0rr8gwqltlepc3
Hibernate: alter table refs_having_altid drop constraint FKcrnmosah3i85ud2gvki0qghp5
Hibernate: drop table asset_alternate_id if exists
Hibernate: drop table child_entity if exists
Hibernate: drop table having_altid if exists
Hibernate: drop table parent_entity if exists
Hibernate: drop table refs_having_altid if exists
Hibernate: drop sequence hibernate_sequence if exists
Hibernate: create sequence hibernate_sequence start with 1 increment by 1
Hibernate: create table asset_alternate_id (asset_id bigint not null, id_system varchar(255) not null, id_value varchar(255) not null, primary key (asset_id, id_system, id_value))
Hibernate: create table child_entity (id bigint not null, flag boolean not null, friend_id bigint, parent_id bigint not null, primary key (id))
Hibernate: create table having_altid (id bigint generated by default as identity (start with 1), primary key (id))
Hibernate: create table parent_entity (id bigint not null, capacity integer not null, primary key (id))
Hibernate: create table refs_having_altid (id bigint generated by default as identity (start with 1), referenced_id bigint, primary key (id))
Hibernate: alter table asset_alternate_id add constraint FKhdag9du7irj5v3sliknkgwm1v foreign key (asset_id) references having_altid
Hibernate: alter table child_entity add constraint FK11qr2as1nab8idathnw1hyoep foreign key (friend_id) references parent_entity
Hibernate: alter table child_entity add constraint FK3uwb4qmw23u0rr8gwqltlepc3 foreign key (parent_id) references parent_entity
Hibernate: alter table refs_having_altid add constraint FKcrnmosah3i85ud2gvki0qghp5 foreign key (referenced_id) references having_altid
2021-12-11 17:23:08,150 TRACE Hibernate Setup Complete.
2021-12-11 17:23:08,150 DEBUG Known entities: [parent_entity, refs_having_altid, child_entity, having_altid]
2021-12-11 17:23:08,150 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.entitycollection.ParentEntity
2021-12-11 17:23:08,150 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.entitycollection.ChildEntity
2021-12-11 17:23:08,150 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.entitycollection.ChildEntity
2021-12-11 17:23:08,150 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.entitycollection.ParentEntity
2021-12-11 17:23:08,150 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.entitycollection.AlternateIdReferencingEntity
2021-12-11 17:23:08,150 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.entitycollection.HavingAlternateIdEntity
2021-12-11 17:23:08,150 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.entitycollection.AlternateIdEmbeddedEntity from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@2e0516a3
2021-12-11 17:23:08,150 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.entitycollection.AlternateIdEmbeddedEntity from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@2e0516a3
2021-12-11 17:23:08,150 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.entitycollection.HavingAlternateIdEntity
2021-12-11 17:23:08,150 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.entitycollection.AlternateIdReferencingEntity
2021-12-11 17:23:08,152 TRACE Creating new transaction to call public java.util.List<java.lang.Long> com.peterphi.std.guice.hibernate.entitycollection.EntityCollectionTest.load()
2021-12-11 17:23:08,152 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:08,153 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:08,153 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:08,154 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:08,154 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:08,155 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:08,155 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:08,155 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:08,156 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@7be7c052
Hibernate: insert into parent_entity (capacity, id) values (?, ?)
Hibernate: insert into child_entity (flag, friend_id, parent_id, id) values (?, ?, ?, ?)
Hibernate: insert into child_entity (flag, friend_id, parent_id, id) values (?, ?, ?, ?)
Hibernate: insert into child_entity (flag, friend_id, parent_id, id) values (?, ?, ?, ?)
Hibernate: insert into parent_entity (capacity, id) values (?, ?)
Hibernate: insert into child_entity (flag, friend_id, parent_id, id) values (?, ?, ?, ?)
Hibernate: insert into child_entity (flag, friend_id, parent_id, id) values (?, ?, ?, ?)
Hibernate: insert into child_entity (flag, friend_id, parent_id, id) values (?, ?, ?, ?)
2021-12-11 17:23:08,161 TRACE Creating new transaction to call public java.util.List<com.peterphi.std.guice.hibernate.entitycollection.ParentEntity> com.peterphi.std.guice.hibernate.entitycollection.ParentDao.getByQuery(java.lang.String)
Hibernate: select distinct parententi0_.id as id1_3_0_, children1_.id as id1_1_1_, parententi0_.capacity as capacity2_3_0_, children1_.flag as flag2_1_1_, children1_.friend_id as friend_i3_1_1_, children1_.parent_id as parent_i4_1_1_, children1_.parent_id as parent_i4_1_0__, children1_.id as id1_1_0__ from parent_entity parententi0_ inner join child_entity children1_ on parententi0_.id=children1_.parent_id inner join child_entity children2_ on parententi0_.id=children2_.parent_id where children2_.flag=true
2021-12-11 17:23:08,171 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@46994f26
1 - children 4,3,2
5 - children 7,8,6
2021-12-11 17:23:08,172  INFO Shut down Hibernate SessionFactory...
2021-12-11 17:23:08,172 TRACE Creating new transaction to call void com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider.runShutDownSQL()
2021-12-11 17:23:08,172 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@7dddfc35
2021-12-11 17:23:08,321 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.entitycollection.ParentEntity
2021-12-11 17:23:08,321 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.entitycollection.HavingAlternateIdEntity
2021-12-11 17:23:08,321 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.entitycollection.ChildEntity
2021-12-11 17:23:08,321 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.entitycollection.AlternateIdReferencingEntity
2021-12-11 17:23:08,321 TRACE Evaluate HibernateConfigurationValidators. has at least one=false
2021-12-11 17:23:08,326  WARN HHH10001002: Using Hibernate built-in connection pool (not for production use!)
Hibernate: alter table asset_alternate_id drop constraint FKhdag9du7irj5v3sliknkgwm1v
Hibernate: alter table child_entity drop constraint FK11qr2as1nab8idathnw1hyoep
Hibernate: alter table child_entity drop constraint FK3uwb4qmw23u0rr8gwqltlepc3
Hibernate: alter table refs_having_altid drop constraint FKcrnmosah3i85ud2gvki0qghp5
Hibernate: drop table asset_alternate_id if exists
Hibernate: drop table child_entity if exists
Hibernate: drop table having_altid if exists
Hibernate: drop table parent_entity if exists
Hibernate: drop table refs_having_altid if exists
Hibernate: drop sequence hibernate_sequence if exists
Hibernate: create sequence hibernate_sequence start with 1 increment by 1
Hibernate: create table asset_alternate_id (asset_id bigint not null, id_system varchar(255) not null, id_value varchar(255) not null, primary key (asset_id, id_system, id_value))
Hibernate: create table child_entity (id bigint not null, flag boolean not null, friend_id bigint, parent_id bigint not null, primary key (id))
Hibernate: create table having_altid (id bigint generated by default as identity (start with 1), primary key (id))
Hibernate: create table parent_entity (id bigint not null, capacity integer not null, primary key (id))
Hibernate: create table refs_having_altid (id bigint generated by default as identity (start with 1), referenced_id bigint, primary key (id))
Hibernate: alter table asset_alternate_id add constraint FKhdag9du7irj5v3sliknkgwm1v foreign key (asset_id) references having_altid
Hibernate: alter table child_entity add constraint FK11qr2as1nab8idathnw1hyoep foreign key (friend_id) references parent_entity
Hibernate: alter table child_entity add constraint FK3uwb4qmw23u0rr8gwqltlepc3 foreign key (parent_id) references parent_entity
Hibernate: alter table refs_having_altid add constraint FKcrnmosah3i85ud2gvki0qghp5 foreign key (referenced_id) references having_altid
2021-12-11 17:23:08,362 TRACE Hibernate Setup Complete.
2021-12-11 17:23:08,362 DEBUG Known entities: [having_altid, parent_entity, refs_having_altid, child_entity]
2021-12-11 17:23:08,362 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.entitycollection.HavingAlternateIdEntity
2021-12-11 17:23:08,362 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.entitycollection.AlternateIdEmbeddedEntity from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@19ce19b7
2021-12-11 17:23:08,362 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.entitycollection.AlternateIdEmbeddedEntity from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@19ce19b7
2021-12-11 17:23:08,362 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.entitycollection.HavingAlternateIdEntity
2021-12-11 17:23:08,362 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.entitycollection.ParentEntity
2021-12-11 17:23:08,362 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.entitycollection.ChildEntity
2021-12-11 17:23:08,362 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.entitycollection.ChildEntity
2021-12-11 17:23:08,363 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.entitycollection.ParentEntity
2021-12-11 17:23:08,363 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.entitycollection.AlternateIdReferencingEntity
2021-12-11 17:23:08,363 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.entitycollection.AlternateIdReferencingEntity
2021-12-11 17:23:08,364 TRACE Creating new transaction to call public java.util.List<java.lang.Long> com.peterphi.std.guice.hibernate.entitycollection.EntityCollectionTest.load()
2021-12-11 17:23:08,364 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:08,365 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:08,366 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:08,366 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:08,367 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:08,367 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:08,368 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:08,368 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:08,368 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@1b10f60e
Hibernate: insert into parent_entity (capacity, id) values (?, ?)
Hibernate: insert into child_entity (flag, friend_id, parent_id, id) values (?, ?, ?, ?)
Hibernate: insert into child_entity (flag, friend_id, parent_id, id) values (?, ?, ?, ?)
Hibernate: insert into child_entity (flag, friend_id, parent_id, id) values (?, ?, ?, ?)
Hibernate: insert into parent_entity (capacity, id) values (?, ?)
Hibernate: insert into child_entity (flag, friend_id, parent_id, id) values (?, ?, ?, ?)
Hibernate: insert into child_entity (flag, friend_id, parent_id, id) values (?, ?, ?, ?)
Hibernate: insert into child_entity (flag, friend_id, parent_id, id) values (?, ?, ?, ?)
2021-12-11 17:23:08,373 TRACE Creating new transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
2021-12-11 17:23:08,381 TRACE Hibernate executing SQL: select distinct parententi0_.id as col_0_0_ from parent_entity parententi0_ left outer join child_entity children1_ on parententi0_.id=children1_.parent_id left outer join parent_entity parententi2_ on children1_.friend_id=parententi2_.id where children1_.flag=? and (parententi2_.id is null or parententi2_.id<>?) limit ?
Hibernate: select distinct parententi0_.id as col_0_0_ from parent_entity parententi0_ left outer join child_entity children1_ on parententi0_.id=children1_.parent_id left outer join parent_entity parententi2_ on children1_.friend_id=parententi2_.id where children1_.flag=? and (parententi2_.id is null or parententi2_.id<>?) limit ?
2021-12-11 17:23:08,395 TRACE Hibernate executing SQL: select parententi0_.id as id1_3_0_, children1_.id as id1_1_1_, parententi2_.id as id1_3_2_, parententi0_.capacity as capacity2_3_0_, children1_.flag as flag2_1_1_, children1_.friend_id as friend_i3_1_1_, children1_.parent_id as parent_i4_1_1_, children1_.parent_id as parent_i4_1_0__, children1_.id as id1_1_0__, parententi2_.capacity as capacity2_3_2_ from parent_entity parententi0_ left outer join child_entity children1_ on parententi0_.id=children1_.parent_id left outer join parent_entity parententi2_ on children1_.friend_id=parententi2_.id where parententi0_.id in (? , ?)
Hibernate: select parententi0_.id as id1_3_0_, children1_.id as id1_1_1_, parententi2_.id as id1_3_2_, parententi0_.capacity as capacity2_3_0_, children1_.flag as flag2_1_1_, children1_.friend_id as friend_i3_1_1_, children1_.parent_id as parent_i4_1_1_, children1_.parent_id as parent_i4_1_0__, children1_.id as id1_1_0__, parententi2_.capacity as capacity2_3_2_ from parent_entity parententi0_ left outer join child_entity children1_ on parententi0_.id=children1_.parent_id left outer join parent_entity parententi2_ on children1_.friend_id=parententi2_.id where parententi0_.id in (? , ?)
2021-12-11 17:23:08,398 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@7112fa5
SQL: select distinct parententi0_.id as col_0_0_ from parent_entity parententi0_ left outer join child_entity children1_ on parententi0_.id=children1_.parent_id left outer join parent_entity parententi2_ on children1_.friend_id=parententi2_.id where children1_.flag=? and (parententi2_.id is null or parententi2_.id<>?) limit ?
select parententi0_.id as id1_3_0_, children1_.id as id1_1_1_, parententi2_.id as id1_3_2_, parententi0_.capacity as capacity2_3_0_, children1_.flag as flag2_1_1_, children1_.friend_id as friend_i3_1_1_, children1_.parent_id as parent_i4_1_1_, children1_.parent_id as parent_i4_1_0__, children1_.id as id1_1_0__, parententi2_.capacity as capacity2_3_2_ from parent_entity parententi0_ left outer join child_entity children1_ on parententi0_.id=children1_.parent_id left outer join parent_entity parententi2_ on children1_.friend_id=parententi2_.id where parententi0_.id in (? , ?)
SQL Statements: 2
2021-12-11 17:23:08,399  INFO Shut down Hibernate SessionFactory...
2021-12-11 17:23:08,399 TRACE Creating new transaction to call void com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider.runShutDownSQL()
2021-12-11 17:23:08,399 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@3a8ead9
2021-12-11 17:23:08,520 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.entitycollection.ParentEntity
2021-12-11 17:23:08,520 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.entitycollection.HavingAlternateIdEntity
2021-12-11 17:23:08,520 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.entitycollection.ChildEntity
2021-12-11 17:23:08,520 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.entitycollection.AlternateIdReferencingEntity
2021-12-11 17:23:08,520 TRACE Evaluate HibernateConfigurationValidators. has at least one=false
2021-12-11 17:23:08,524  WARN HHH10001002: Using Hibernate built-in connection pool (not for production use!)
Hibernate: alter table asset_alternate_id drop constraint FKhdag9du7irj5v3sliknkgwm1v
Hibernate: alter table child_entity drop constraint FK11qr2as1nab8idathnw1hyoep
Hibernate: alter table child_entity drop constraint FK3uwb4qmw23u0rr8gwqltlepc3
Hibernate: alter table refs_having_altid drop constraint FKcrnmosah3i85ud2gvki0qghp5
Hibernate: drop table asset_alternate_id if exists
Hibernate: drop table child_entity if exists
Hibernate: drop table having_altid if exists
Hibernate: drop table parent_entity if exists
Hibernate: drop table refs_having_altid if exists
Hibernate: drop sequence hibernate_sequence if exists
Hibernate: create sequence hibernate_sequence start with 1 increment by 1
Hibernate: create table asset_alternate_id (asset_id bigint not null, id_system varchar(255) not null, id_value varchar(255) not null, primary key (asset_id, id_system, id_value))
Hibernate: create table child_entity (id bigint not null, flag boolean not null, friend_id bigint, parent_id bigint not null, primary key (id))
Hibernate: create table having_altid (id bigint generated by default as identity (start with 1), primary key (id))
Hibernate: create table parent_entity (id bigint not null, capacity integer not null, primary key (id))
Hibernate: create table refs_having_altid (id bigint generated by default as identity (start with 1), referenced_id bigint, primary key (id))
Hibernate: alter table asset_alternate_id add constraint FKhdag9du7irj5v3sliknkgwm1v foreign key (asset_id) references having_altid
Hibernate: alter table child_entity add constraint FK11qr2as1nab8idathnw1hyoep foreign key (friend_id) references parent_entity
Hibernate: alter table child_entity add constraint FK3uwb4qmw23u0rr8gwqltlepc3 foreign key (parent_id) references parent_entity
Hibernate: alter table refs_having_altid add constraint FKcrnmosah3i85ud2gvki0qghp5 foreign key (referenced_id) references having_altid
2021-12-11 17:23:08,557 TRACE Hibernate Setup Complete.
2021-12-11 17:23:08,557 DEBUG Known entities: [child_entity, having_altid, refs_having_altid, parent_entity]
2021-12-11 17:23:08,557 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.entitycollection.ChildEntity
2021-12-11 17:23:08,558 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.entitycollection.ParentEntity
2021-12-11 17:23:08,558 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.entitycollection.ParentEntity
2021-12-11 17:23:08,558 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.entitycollection.ChildEntity
2021-12-11 17:23:08,558 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.entitycollection.HavingAlternateIdEntity
2021-12-11 17:23:08,558 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.entitycollection.AlternateIdEmbeddedEntity from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@794f937a
2021-12-11 17:23:08,558 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.entitycollection.AlternateIdEmbeddedEntity from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@794f937a
2021-12-11 17:23:08,558 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.entitycollection.HavingAlternateIdEntity
2021-12-11 17:23:08,558 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.entitycollection.AlternateIdReferencingEntity
2021-12-11 17:23:08,558 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.entitycollection.AlternateIdReferencingEntity
2021-12-11 17:23:08,559 TRACE Creating new transaction to call public java.util.List<java.lang.Long> com.peterphi.std.guice.hibernate.entitycollection.EntityCollectionTest.load()
2021-12-11 17:23:08,559 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:08,560 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:08,560 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:08,561 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:08,561 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:08,562 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:08,562 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:08,562 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:08,563 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@5dff108c
Hibernate: insert into parent_entity (capacity, id) values (?, ?)
Hibernate: insert into child_entity (flag, friend_id, parent_id, id) values (?, ?, ?, ?)
Hibernate: insert into child_entity (flag, friend_id, parent_id, id) values (?, ?, ?, ?)
Hibernate: insert into child_entity (flag, friend_id, parent_id, id) values (?, ?, ?, ?)
Hibernate: insert into parent_entity (capacity, id) values (?, ?)
Hibernate: insert into child_entity (flag, friend_id, parent_id, id) values (?, ?, ?, ?)
Hibernate: insert into child_entity (flag, friend_id, parent_id, id) values (?, ?, ?, ?)
Hibernate: insert into child_entity (flag, friend_id, parent_id, id) values (?, ?, ?, ?)
2021-12-11 17:23:08,566 TRACE Creating new transaction to call public T com.peterphi.std.guice.hibernate.dao.HibernateDao.getById(ID)
Hibernate: select parententi0_.id as id1_3_0_, parententi0_.capacity as capacity2_3_0_, children1_.parent_id as parent_i4_1_1_, children1_.id as id1_1_1_, children1_.id as id1_1_2_, children1_.flag as flag2_1_2_, children1_.friend_id as friend_i3_1_2_, children1_.parent_id as parent_i4_1_2_, parententi2_.id as id1_3_3_, parententi2_.capacity as capacity2_3_3_ from parent_entity parententi0_ left outer join child_entity children1_ on parententi0_.id=children1_.parent_id left outer join parent_entity parententi2_ on children1_.friend_id=parententi2_.id where parententi0_.id=?
2021-12-11 17:23:08,573 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@29bf90fc
2021-12-11 17:23:08,573  INFO Shut down Hibernate SessionFactory...
2021-12-11 17:23:08,574 TRACE Creating new transaction to call void com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider.runShutDownSQL()
2021-12-11 17:23:08,575 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@6b756a62
2021-12-11 17:23:08,686 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.entitycollection.ParentEntity
2021-12-11 17:23:08,686 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.entitycollection.HavingAlternateIdEntity
2021-12-11 17:23:08,686 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.entitycollection.ChildEntity
2021-12-11 17:23:08,686 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.entitycollection.AlternateIdReferencingEntity
2021-12-11 17:23:08,686 TRACE Evaluate HibernateConfigurationValidators. has at least one=false
2021-12-11 17:23:08,689  WARN HHH10001002: Using Hibernate built-in connection pool (not for production use!)
Hibernate: alter table asset_alternate_id drop constraint FKhdag9du7irj5v3sliknkgwm1v
Hibernate: alter table child_entity drop constraint FK11qr2as1nab8idathnw1hyoep
Hibernate: alter table child_entity drop constraint FK3uwb4qmw23u0rr8gwqltlepc3
Hibernate: alter table refs_having_altid drop constraint FKcrnmosah3i85ud2gvki0qghp5
Hibernate: drop table asset_alternate_id if exists
Hibernate: drop table child_entity if exists
Hibernate: drop table having_altid if exists
Hibernate: drop table parent_entity if exists
Hibernate: drop table refs_having_altid if exists
Hibernate: drop sequence hibernate_sequence if exists
Hibernate: create sequence hibernate_sequence start with 1 increment by 1
Hibernate: create table asset_alternate_id (asset_id bigint not null, id_system varchar(255) not null, id_value varchar(255) not null, primary key (asset_id, id_system, id_value))
Hibernate: create table child_entity (id bigint not null, flag boolean not null, friend_id bigint, parent_id bigint not null, primary key (id))
Hibernate: create table having_altid (id bigint generated by default as identity (start with 1), primary key (id))
Hibernate: create table parent_entity (id bigint not null, capacity integer not null, primary key (id))
Hibernate: create table refs_having_altid (id bigint generated by default as identity (start with 1), referenced_id bigint, primary key (id))
Hibernate: alter table asset_alternate_id add constraint FKhdag9du7irj5v3sliknkgwm1v foreign key (asset_id) references having_altid
Hibernate: alter table child_entity add constraint FK11qr2as1nab8idathnw1hyoep foreign key (friend_id) references parent_entity
Hibernate: alter table child_entity add constraint FK3uwb4qmw23u0rr8gwqltlepc3 foreign key (parent_id) references parent_entity
Hibernate: alter table refs_having_altid add constraint FKcrnmosah3i85ud2gvki0qghp5 foreign key (referenced_id) references having_altid
2021-12-11 17:23:08,718 TRACE Hibernate Setup Complete.
2021-12-11 17:23:08,718 DEBUG Known entities: [child_entity, parent_entity, refs_having_altid, having_altid]
2021-12-11 17:23:08,719 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.entitycollection.ChildEntity
2021-12-11 17:23:08,719 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.entitycollection.ParentEntity
2021-12-11 17:23:08,719 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.entitycollection.ParentEntity
2021-12-11 17:23:08,719 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.entitycollection.ChildEntity
2021-12-11 17:23:08,719 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.entitycollection.AlternateIdReferencingEntity
2021-12-11 17:23:08,719 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.entitycollection.HavingAlternateIdEntity
2021-12-11 17:23:08,719 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.entitycollection.AlternateIdEmbeddedEntity from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@6c056020
2021-12-11 17:23:08,719 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.entitycollection.AlternateIdEmbeddedEntity from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@6c056020
2021-12-11 17:23:08,719 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.entitycollection.HavingAlternateIdEntity
2021-12-11 17:23:08,719 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.entitycollection.AlternateIdReferencingEntity
2021-12-11 17:23:08,720 TRACE Creating new transaction to call public java.util.List<java.lang.Long> com.peterphi.std.guice.hibernate.entitycollection.EntityCollectionTest.load()
2021-12-11 17:23:08,720 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:08,721 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:08,721 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:08,722 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:08,722 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:08,722 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:08,723 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:08,723 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:08,723 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@51b2b3e6
Hibernate: insert into parent_entity (capacity, id) values (?, ?)
Hibernate: insert into child_entity (flag, friend_id, parent_id, id) values (?, ?, ?, ?)
Hibernate: insert into child_entity (flag, friend_id, parent_id, id) values (?, ?, ?, ?)
Hibernate: insert into child_entity (flag, friend_id, parent_id, id) values (?, ?, ?, ?)
Hibernate: insert into parent_entity (capacity, id) values (?, ?)
Hibernate: insert into child_entity (flag, friend_id, parent_id, id) values (?, ?, ?, ?)
Hibernate: insert into child_entity (flag, friend_id, parent_id, id) values (?, ?, ?, ?)
Hibernate: insert into child_entity (flag, friend_id, parent_id, id) values (?, ?, ?, ?)
2021-12-11 17:23:08,726 TRACE Creating new transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
2021-12-11 17:23:08,731 TRACE Hibernate executing SQL: select parententi0_.id as id1_3_0_, children1_.id as id1_1_1_, parententi2_.id as id1_3_2_, parententi0_.capacity as capacity2_3_0_, children1_.flag as flag2_1_1_, children1_.friend_id as friend_i3_1_1_, children1_.parent_id as parent_i4_1_1_, children1_.parent_id as parent_i4_1_0__, children1_.id as id1_1_0__, parententi2_.capacity as capacity2_3_2_ from parent_entity parententi0_ left outer join child_entity children1_ on parententi0_.id=children1_.parent_id left outer join parent_entity parententi2_ on children1_.friend_id=parententi2_.id where 1=1
Hibernate: select parententi0_.id as id1_3_0_, children1_.id as id1_1_1_, parententi2_.id as id1_3_2_, parententi0_.capacity as capacity2_3_0_, children1_.flag as flag2_1_1_, children1_.friend_id as friend_i3_1_1_, children1_.parent_id as parent_i4_1_1_, children1_.parent_id as parent_i4_1_0__, children1_.id as id1_1_0__, parententi2_.capacity as capacity2_3_2_ from parent_entity parententi0_ left outer join child_entity children1_ on parententi0_.id=children1_.parent_id left outer join parent_entity parententi2_ on children1_.friend_id=parententi2_.id where 1=1
2021-12-11 17:23:08,733 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@5466a819
SQL: select parententi0_.id as id1_3_0_, children1_.id as id1_1_1_, parententi2_.id as id1_3_2_, parententi0_.capacity as capacity2_3_0_, children1_.flag as flag2_1_1_, children1_.friend_id as friend_i3_1_1_, children1_.parent_id as parent_i4_1_1_, children1_.parent_id as parent_i4_1_0__, children1_.id as id1_1_0__, parententi2_.capacity as capacity2_3_2_ from parent_entity parententi0_ left outer join child_entity children1_ on parententi0_.id=children1_.parent_id left outer join parent_entity parententi2_ on children1_.friend_id=parententi2_.id where 1=1
SQL Statements: 1
[ParentEntity{id=1}, ParentEntity{id=5}]
1 - children 2,4,3
5 - children 6,7,8
2021-12-11 17:23:08,733  INFO Shut down Hibernate SessionFactory...
2021-12-11 17:23:08,734 TRACE Creating new transaction to call void com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider.runShutDownSQL()
2021-12-11 17:23:08,734 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@3b7b099b
2021-12-11 17:23:08,864 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.entitycollection.ParentEntity
2021-12-11 17:23:08,864 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.entitycollection.HavingAlternateIdEntity
2021-12-11 17:23:08,864 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.entitycollection.ChildEntity
2021-12-11 17:23:08,864 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.entitycollection.AlternateIdReferencingEntity
2021-12-11 17:23:08,864 TRACE Evaluate HibernateConfigurationValidators. has at least one=false
2021-12-11 17:23:08,868  WARN HHH10001002: Using Hibernate built-in connection pool (not for production use!)
Hibernate: alter table asset_alternate_id drop constraint FKhdag9du7irj5v3sliknkgwm1v
Hibernate: alter table child_entity drop constraint FK11qr2as1nab8idathnw1hyoep
Hibernate: alter table child_entity drop constraint FK3uwb4qmw23u0rr8gwqltlepc3
Hibernate: alter table refs_having_altid drop constraint FKcrnmosah3i85ud2gvki0qghp5
Hibernate: drop table asset_alternate_id if exists
Hibernate: drop table child_entity if exists
Hibernate: drop table having_altid if exists
Hibernate: drop table parent_entity if exists
Hibernate: drop table refs_having_altid if exists
Hibernate: drop sequence hibernate_sequence if exists
Hibernate: create sequence hibernate_sequence start with 1 increment by 1
Hibernate: create table asset_alternate_id (asset_id bigint not null, id_system varchar(255) not null, id_value varchar(255) not null, primary key (asset_id, id_system, id_value))
Hibernate: create table child_entity (id bigint not null, flag boolean not null, friend_id bigint, parent_id bigint not null, primary key (id))
Hibernate: create table having_altid (id bigint generated by default as identity (start with 1), primary key (id))
Hibernate: create table parent_entity (id bigint not null, capacity integer not null, primary key (id))
Hibernate: create table refs_having_altid (id bigint generated by default as identity (start with 1), referenced_id bigint, primary key (id))
Hibernate: alter table asset_alternate_id add constraint FKhdag9du7irj5v3sliknkgwm1v foreign key (asset_id) references having_altid
Hibernate: alter table child_entity add constraint FK11qr2as1nab8idathnw1hyoep foreign key (friend_id) references parent_entity
Hibernate: alter table child_entity add constraint FK3uwb4qmw23u0rr8gwqltlepc3 foreign key (parent_id) references parent_entity
Hibernate: alter table refs_having_altid add constraint FKcrnmosah3i85ud2gvki0qghp5 foreign key (referenced_id) references having_altid
2021-12-11 17:23:08,899 TRACE Hibernate Setup Complete.
2021-12-11 17:23:08,899 DEBUG Known entities: [parent_entity, having_altid, refs_having_altid, child_entity]
2021-12-11 17:23:08,899 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.entitycollection.ParentEntity
2021-12-11 17:23:08,899 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.entitycollection.ChildEntity
2021-12-11 17:23:08,899 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.entitycollection.ChildEntity
2021-12-11 17:23:08,899 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.entitycollection.ParentEntity
2021-12-11 17:23:08,899 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.entitycollection.HavingAlternateIdEntity
2021-12-11 17:23:08,899 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.entitycollection.AlternateIdEmbeddedEntity from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@421c057a
2021-12-11 17:23:08,899 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.entitycollection.AlternateIdEmbeddedEntity from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@421c057a
2021-12-11 17:23:08,900 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.entitycollection.HavingAlternateIdEntity
2021-12-11 17:23:08,900 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.entitycollection.AlternateIdReferencingEntity
2021-12-11 17:23:08,900 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.entitycollection.AlternateIdReferencingEntity
2021-12-11 17:23:08,900 TRACE Creating new transaction to call public java.util.List<java.lang.Long> com.peterphi.std.guice.hibernate.entitycollection.EntityCollectionTest.load()
2021-12-11 17:23:08,901 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:08,901 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:08,902 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:08,902 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:08,902 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:08,903 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:08,903 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:08,903 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:08,904 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@6d3c80bf
Hibernate: insert into parent_entity (capacity, id) values (?, ?)
Hibernate: insert into child_entity (flag, friend_id, parent_id, id) values (?, ?, ?, ?)
Hibernate: insert into child_entity (flag, friend_id, parent_id, id) values (?, ?, ?, ?)
Hibernate: insert into child_entity (flag, friend_id, parent_id, id) values (?, ?, ?, ?)
Hibernate: insert into parent_entity (capacity, id) values (?, ?)
Hibernate: insert into child_entity (flag, friend_id, parent_id, id) values (?, ?, ?, ?)
Hibernate: insert into child_entity (flag, friend_id, parent_id, id) values (?, ?, ?, ?)
Hibernate: insert into child_entity (flag, friend_id, parent_id, id) values (?, ?, ?, ?)
2021-12-11 17:23:08,907 TRACE Creating new transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
2021-12-11 17:23:08,910 TRACE Hibernate executing SQL: select childentit0_.id as id1_1_0_, parententi1_.id as id1_3_1_, childentit0_.flag as flag2_1_0_, childentit0_.friend_id as friend_i3_1_0_, childentit0_.parent_id as parent_i4_1_0_, parententi1_.capacity as capacity2_3_1_ from child_entity childentit0_ left outer join parent_entity parententi1_ on childentit0_.friend_id=parententi1_.id where 1=1
Hibernate: select childentit0_.id as id1_1_0_, parententi1_.id as id1_3_1_, childentit0_.flag as flag2_1_0_, childentit0_.friend_id as friend_i3_1_0_, childentit0_.parent_id as parent_i4_1_0_, parententi1_.capacity as capacity2_3_1_ from child_entity childentit0_ left outer join parent_entity parententi1_ on childentit0_.friend_id=parententi1_.id where 1=1
2021-12-11 17:23:08,915 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@34e1c23d
SQL: select childentit0_.id as id1_1_0_, parententi1_.id as id1_3_1_, childentit0_.flag as flag2_1_0_, childentit0_.friend_id as friend_i3_1_0_, childentit0_.parent_id as parent_i4_1_0_, parententi1_.capacity as capacity2_3_1_ from child_entity childentit0_ left outer join parent_entity parententi1_ on childentit0_.friend_id=parententi1_.id where 1=1
2021-12-11 17:23:08,916  INFO Shut down Hibernate SessionFactory...
2021-12-11 17:23:08,916 TRACE Creating new transaction to call void com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider.runShutDownSQL()
2021-12-11 17:23:08,916 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@4fb3c670
2021-12-11 17:23:09,030 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.entitycollection.ParentEntity
2021-12-11 17:23:09,030 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.entitycollection.HavingAlternateIdEntity
2021-12-11 17:23:09,031 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.entitycollection.ChildEntity
2021-12-11 17:23:09,031 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.entitycollection.AlternateIdReferencingEntity
2021-12-11 17:23:09,031 TRACE Evaluate HibernateConfigurationValidators. has at least one=false
2021-12-11 17:23:09,034  WARN HHH10001002: Using Hibernate built-in connection pool (not for production use!)
Hibernate: alter table asset_alternate_id drop constraint FKhdag9du7irj5v3sliknkgwm1v
Hibernate: alter table child_entity drop constraint FK11qr2as1nab8idathnw1hyoep
Hibernate: alter table child_entity drop constraint FK3uwb4qmw23u0rr8gwqltlepc3
Hibernate: alter table refs_having_altid drop constraint FKcrnmosah3i85ud2gvki0qghp5
Hibernate: drop table asset_alternate_id if exists
Hibernate: drop table child_entity if exists
Hibernate: drop table having_altid if exists
Hibernate: drop table parent_entity if exists
Hibernate: drop table refs_having_altid if exists
Hibernate: drop sequence hibernate_sequence if exists
Hibernate: create sequence hibernate_sequence start with 1 increment by 1
Hibernate: create table asset_alternate_id (asset_id bigint not null, id_system varchar(255) not null, id_value varchar(255) not null, primary key (asset_id, id_system, id_value))
Hibernate: create table child_entity (id bigint not null, flag boolean not null, friend_id bigint, parent_id bigint not null, primary key (id))
Hibernate: create table having_altid (id bigint generated by default as identity (start with 1), primary key (id))
Hibernate: create table parent_entity (id bigint not null, capacity integer not null, primary key (id))
Hibernate: create table refs_having_altid (id bigint generated by default as identity (start with 1), referenced_id bigint, primary key (id))
Hibernate: alter table asset_alternate_id add constraint FKhdag9du7irj5v3sliknkgwm1v foreign key (asset_id) references having_altid
Hibernate: alter table child_entity add constraint FK11qr2as1nab8idathnw1hyoep foreign key (friend_id) references parent_entity
Hibernate: alter table child_entity add constraint FK3uwb4qmw23u0rr8gwqltlepc3 foreign key (parent_id) references parent_entity
Hibernate: alter table refs_having_altid add constraint FKcrnmosah3i85ud2gvki0qghp5 foreign key (referenced_id) references having_altid
2021-12-11 17:23:09,062 TRACE Hibernate Setup Complete.
2021-12-11 17:23:09,062 DEBUG Known entities: [parent_entity, refs_having_altid, having_altid, child_entity]
2021-12-11 17:23:09,062 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.entitycollection.ParentEntity
2021-12-11 17:23:09,062 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.entitycollection.ChildEntity
2021-12-11 17:23:09,062 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.entitycollection.ChildEntity
2021-12-11 17:23:09,062 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.entitycollection.ParentEntity
2021-12-11 17:23:09,062 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.entitycollection.AlternateIdReferencingEntity
2021-12-11 17:23:09,062 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.entitycollection.HavingAlternateIdEntity
2021-12-11 17:23:09,062 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.entitycollection.AlternateIdEmbeddedEntity from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@77c4aeb6
2021-12-11 17:23:09,062 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.entitycollection.AlternateIdEmbeddedEntity from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@77c4aeb6
2021-12-11 17:23:09,062 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.entitycollection.HavingAlternateIdEntity
2021-12-11 17:23:09,062 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.entitycollection.AlternateIdReferencingEntity
2021-12-11 17:23:09,063 TRACE Creating new transaction to call public java.util.List<java.lang.Long> com.peterphi.std.guice.hibernate.entitycollection.EntityCollectionTest.load()
2021-12-11 17:23:09,063 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:09,064 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:09,064 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:09,064 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:09,065 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:09,065 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:09,065 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:09,066 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:09,066 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@349504d5
Hibernate: insert into parent_entity (capacity, id) values (?, ?)
Hibernate: insert into child_entity (flag, friend_id, parent_id, id) values (?, ?, ?, ?)
Hibernate: insert into child_entity (flag, friend_id, parent_id, id) values (?, ?, ?, ?)
Hibernate: insert into child_entity (flag, friend_id, parent_id, id) values (?, ?, ?, ?)
Hibernate: insert into parent_entity (capacity, id) values (?, ?)
Hibernate: insert into child_entity (flag, friend_id, parent_id, id) values (?, ?, ?, ?)
Hibernate: insert into child_entity (flag, friend_id, parent_id, id) values (?, ?, ?, ?)
Hibernate: insert into child_entity (flag, friend_id, parent_id, id) values (?, ?, ?, ?)
2021-12-11 17:23:09,068 TRACE Creating new transaction to call public java.util.List<T> com.peterphi.std.guice.hibernate.dao.HibernateDao.getListById(java.util.List<ID>)
Hibernate: select parententi0_.id as id1_3_0_, children1_.id as id1_1_1_, parententi2_.id as id1_3_2_, parententi0_.capacity as capacity2_3_0_, children1_.flag as flag2_1_1_, children1_.friend_id as friend_i3_1_1_, children1_.parent_id as parent_i4_1_1_, children1_.parent_id as parent_i4_1_0__, children1_.id as id1_1_0__, parententi2_.capacity as capacity2_3_2_ from parent_entity parententi0_ left outer join child_entity children1_ on parententi0_.id=children1_.parent_id left outer join parent_entity parententi2_ on children1_.friend_id=parententi2_.id where parententi0_.id=1 or parententi0_.id=5
2021-12-11 17:23:09,182 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@5b5f48d5
2021-12-11 17:23:09,183  INFO Shut down Hibernate SessionFactory...
2021-12-11 17:23:09,183 TRACE Creating new transaction to call void com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider.runShutDownSQL()
2021-12-11 17:23:09,183 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@63236968
2021-12-11 17:23:09,293 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.entitycollection.ParentEntity
2021-12-11 17:23:09,293 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.entitycollection.HavingAlternateIdEntity
2021-12-11 17:23:09,293 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.entitycollection.ChildEntity
2021-12-11 17:23:09,293 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.entitycollection.AlternateIdReferencingEntity
2021-12-11 17:23:09,293 TRACE Evaluate HibernateConfigurationValidators. has at least one=false
2021-12-11 17:23:09,296  WARN HHH10001002: Using Hibernate built-in connection pool (not for production use!)
Hibernate: alter table asset_alternate_id drop constraint FKhdag9du7irj5v3sliknkgwm1v
Hibernate: alter table child_entity drop constraint FK11qr2as1nab8idathnw1hyoep
Hibernate: alter table child_entity drop constraint FK3uwb4qmw23u0rr8gwqltlepc3
Hibernate: alter table refs_having_altid drop constraint FKcrnmosah3i85ud2gvki0qghp5
Hibernate: drop table asset_alternate_id if exists
Hibernate: drop table child_entity if exists
Hibernate: drop table having_altid if exists
Hibernate: drop table parent_entity if exists
Hibernate: drop table refs_having_altid if exists
Hibernate: drop sequence hibernate_sequence if exists
Hibernate: create sequence hibernate_sequence start with 1 increment by 1
Hibernate: create table asset_alternate_id (asset_id bigint not null, id_system varchar(255) not null, id_value varchar(255) not null, primary key (asset_id, id_system, id_value))
Hibernate: create table child_entity (id bigint not null, flag boolean not null, friend_id bigint, parent_id bigint not null, primary key (id))
Hibernate: create table having_altid (id bigint generated by default as identity (start with 1), primary key (id))
Hibernate: create table parent_entity (id bigint not null, capacity integer not null, primary key (id))
Hibernate: create table refs_having_altid (id bigint generated by default as identity (start with 1), referenced_id bigint, primary key (id))
Hibernate: alter table asset_alternate_id add constraint FKhdag9du7irj5v3sliknkgwm1v foreign key (asset_id) references having_altid
Hibernate: alter table child_entity add constraint FK11qr2as1nab8idathnw1hyoep foreign key (friend_id) references parent_entity
Hibernate: alter table child_entity add constraint FK3uwb4qmw23u0rr8gwqltlepc3 foreign key (parent_id) references parent_entity
Hibernate: alter table refs_having_altid add constraint FKcrnmosah3i85ud2gvki0qghp5 foreign key (referenced_id) references having_altid
2021-12-11 17:23:09,319 TRACE Hibernate Setup Complete.
2021-12-11 17:23:09,319 DEBUG Known entities: [child_entity, refs_having_altid, having_altid, parent_entity]
2021-12-11 17:23:09,320 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.entitycollection.ChildEntity
2021-12-11 17:23:09,320 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.entitycollection.ParentEntity
2021-12-11 17:23:09,320 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.entitycollection.ParentEntity
2021-12-11 17:23:09,320 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.entitycollection.ChildEntity
2021-12-11 17:23:09,320 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.entitycollection.AlternateIdReferencingEntity
2021-12-11 17:23:09,320 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.entitycollection.HavingAlternateIdEntity
2021-12-11 17:23:09,320 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.entitycollection.AlternateIdEmbeddedEntity from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@24d998ba
2021-12-11 17:23:09,320 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.entitycollection.AlternateIdEmbeddedEntity from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@24d998ba
2021-12-11 17:23:09,320 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.entitycollection.HavingAlternateIdEntity
2021-12-11 17:23:09,320 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.entitycollection.AlternateIdReferencingEntity
2021-12-11 17:23:09,320 TRACE Creating new transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:09,321 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@5a564a61
Hibernate: insert into parent_entity (capacity, id) values (?, ?)
2021-12-11 17:23:09,322 TRACE Creating new transaction to call public T com.peterphi.std.guice.hibernate.dao.HibernateDao.getById(ID)
Hibernate: select parententi0_.id as id1_3_0_, parententi0_.capacity as capacity2_3_0_, children1_.parent_id as parent_i4_1_1_, children1_.id as id1_1_1_, children1_.id as id1_1_2_, children1_.flag as flag2_1_2_, children1_.friend_id as friend_i3_1_2_, children1_.parent_id as parent_i4_1_2_, parententi2_.id as id1_3_3_, parententi2_.capacity as capacity2_3_3_ from parent_entity parententi0_ left outer join child_entity children1_ on parententi0_.id=children1_.parent_id left outer join parent_entity parententi2_ on children1_.friend_id=parententi2_.id where parententi0_.id=?
2021-12-11 17:23:09,323 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@7eaa52d6
2021-12-11 17:23:09,324 TRACE Creating new transaction to call public java.util.List<java.lang.Long> com.peterphi.std.guice.hibernate.entitycollection.ParentDao.getIdsByQuery(java.lang.String)
Hibernate: select parententi0_.id as col_0_0_ from parent_entity parententi0_ where parententi0_.capacity>(select count(childentit1_.id) from child_entity childentit1_ where childentit1_.parent_id=parententi0_.id and childentit1_.flag=true) and 0<>(select count(childentit2_.id) from child_entity childentit2_ where childentit2_.parent_id=parententi0_.id and childentit2_.flag=false)
2021-12-11 17:23:09,329 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@6a73b74c
2021-12-11 17:23:09,329 TRACE Creating new transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:09,329 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@1320d929
Hibernate: insert into child_entity (flag, friend_id, parent_id, id) values (?, ?, ?, ?)
2021-12-11 17:23:09,330 TRACE Creating new transaction to call public java.util.List<java.lang.Long> com.peterphi.std.guice.hibernate.entitycollection.ParentDao.getIdsByQuery(java.lang.String)
Hibernate: select parententi0_.id as col_0_0_ from parent_entity parententi0_ where parententi0_.capacity>(select count(childentit1_.id) from child_entity childentit1_ where childentit1_.parent_id=parententi0_.id and childentit1_.flag=true) and 0<>(select count(childentit2_.id) from child_entity childentit2_ where childentit2_.parent_id=parententi0_.id and childentit2_.flag=false)
2021-12-11 17:23:09,331 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@72de1d86
2021-12-11 17:23:09,331 TRACE Creating new transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:09,332 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@6d985720
Hibernate: insert into child_entity (flag, friend_id, parent_id, id) values (?, ?, ?, ?)
2021-12-11 17:23:09,332 TRACE Creating new transaction to call public java.util.List<java.lang.Long> com.peterphi.std.guice.hibernate.entitycollection.ParentDao.getIdsByQuery(java.lang.String)
Hibernate: select parententi0_.id as col_0_0_ from parent_entity parententi0_ where parententi0_.capacity>(select count(childentit1_.id) from child_entity childentit1_ where childentit1_.parent_id=parententi0_.id and childentit1_.flag=true) and 0<>(select count(childentit2_.id) from child_entity childentit2_ where childentit2_.parent_id=parententi0_.id and childentit2_.flag=false)
2021-12-11 17:23:09,333 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@432e242d
2021-12-11 17:23:09,333 TRACE Creating new transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:09,334 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@34c31a34
Hibernate: insert into child_entity (flag, friend_id, parent_id, id) values (?, ?, ?, ?)
2021-12-11 17:23:09,334 TRACE Creating new transaction to call public java.util.List<java.lang.Long> com.peterphi.std.guice.hibernate.entitycollection.ParentDao.getIdsByQuery(java.lang.String)
Hibernate: select parententi0_.id as col_0_0_ from parent_entity parententi0_ where parententi0_.capacity>(select count(childentit1_.id) from child_entity childentit1_ where childentit1_.parent_id=parententi0_.id and childentit1_.flag=true) and (select count(childentit2_.id) from child_entity childentit2_ where childentit2_.parent_id=parententi0_.id and childentit2_.flag=false)<>0
2021-12-11 17:23:09,338 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@3520d2db
2021-12-11 17:23:09,338  INFO Shut down Hibernate SessionFactory...
2021-12-11 17:23:09,338 TRACE Creating new transaction to call void com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider.runShutDownSQL()
2021-12-11 17:23:09,338 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@5a36a405
2021-12-11 17:23:09,446 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.entitycollection.ParentEntity
2021-12-11 17:23:09,446 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.entitycollection.HavingAlternateIdEntity
2021-12-11 17:23:09,446 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.entitycollection.ChildEntity
2021-12-11 17:23:09,446 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.entitycollection.AlternateIdReferencingEntity
2021-12-11 17:23:09,446 TRACE Evaluate HibernateConfigurationValidators. has at least one=false
2021-12-11 17:23:09,449  WARN HHH10001002: Using Hibernate built-in connection pool (not for production use!)
Hibernate: alter table asset_alternate_id drop constraint FKhdag9du7irj5v3sliknkgwm1v
Hibernate: alter table child_entity drop constraint FK11qr2as1nab8idathnw1hyoep
Hibernate: alter table child_entity drop constraint FK3uwb4qmw23u0rr8gwqltlepc3
Hibernate: alter table refs_having_altid drop constraint FKcrnmosah3i85ud2gvki0qghp5
Hibernate: drop table asset_alternate_id if exists
Hibernate: drop table child_entity if exists
Hibernate: drop table having_altid if exists
Hibernate: drop table parent_entity if exists
Hibernate: drop table refs_having_altid if exists
Hibernate: drop sequence hibernate_sequence if exists
Hibernate: create sequence hibernate_sequence start with 1 increment by 1
Hibernate: create table asset_alternate_id (asset_id bigint not null, id_system varchar(255) not null, id_value varchar(255) not null, primary key (asset_id, id_system, id_value))
Hibernate: create table child_entity (id bigint not null, flag boolean not null, friend_id bigint, parent_id bigint not null, primary key (id))
Hibernate: create table having_altid (id bigint generated by default as identity (start with 1), primary key (id))
Hibernate: create table parent_entity (id bigint not null, capacity integer not null, primary key (id))
Hibernate: create table refs_having_altid (id bigint generated by default as identity (start with 1), referenced_id bigint, primary key (id))
Hibernate: alter table asset_alternate_id add constraint FKhdag9du7irj5v3sliknkgwm1v foreign key (asset_id) references having_altid
Hibernate: alter table child_entity add constraint FK11qr2as1nab8idathnw1hyoep foreign key (friend_id) references parent_entity
Hibernate: alter table child_entity add constraint FK3uwb4qmw23u0rr8gwqltlepc3 foreign key (parent_id) references parent_entity
Hibernate: alter table refs_having_altid add constraint FKcrnmosah3i85ud2gvki0qghp5 foreign key (referenced_id) references having_altid
2021-12-11 17:23:09,472 TRACE Hibernate Setup Complete.
2021-12-11 17:23:09,472 DEBUG Known entities: [child_entity, having_altid, parent_entity, refs_having_altid]
2021-12-11 17:23:09,472 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.entitycollection.ChildEntity
2021-12-11 17:23:09,472 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.entitycollection.ParentEntity
2021-12-11 17:23:09,472 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.entitycollection.ParentEntity
2021-12-11 17:23:09,472 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.entitycollection.ChildEntity
2021-12-11 17:23:09,472 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.entitycollection.HavingAlternateIdEntity
2021-12-11 17:23:09,472 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.entitycollection.AlternateIdEmbeddedEntity from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@797bbeae
2021-12-11 17:23:09,472 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.entitycollection.AlternateIdEmbeddedEntity from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@797bbeae
2021-12-11 17:23:09,472 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.entitycollection.HavingAlternateIdEntity
2021-12-11 17:23:09,472 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.entitycollection.AlternateIdReferencingEntity
2021-12-11 17:23:09,472 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.entitycollection.AlternateIdReferencingEntity
2021-12-11 17:23:09,473 TRACE Creating new transaction to call public java.util.List<java.lang.Long> com.peterphi.std.guice.hibernate.entitycollection.EntityCollectionTest.load()
2021-12-11 17:23:09,473 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:09,473 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:09,474 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:09,474 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:09,474 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:09,474 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:09,475 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:09,475 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:09,475 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@87f8146
Hibernate: insert into parent_entity (capacity, id) values (?, ?)
Hibernate: insert into child_entity (flag, friend_id, parent_id, id) values (?, ?, ?, ?)
Hibernate: insert into child_entity (flag, friend_id, parent_id, id) values (?, ?, ?, ?)
Hibernate: insert into child_entity (flag, friend_id, parent_id, id) values (?, ?, ?, ?)
Hibernate: insert into parent_entity (capacity, id) values (?, ?)
Hibernate: insert into child_entity (flag, friend_id, parent_id, id) values (?, ?, ?, ?)
Hibernate: insert into child_entity (flag, friend_id, parent_id, id) values (?, ?, ?, ?)
Hibernate: insert into child_entity (flag, friend_id, parent_id, id) values (?, ?, ?, ?)
2021-12-11 17:23:09,478 TRACE Creating new transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
2021-12-11 17:23:09,483 TRACE Hibernate executing SQL: select distinct parententi0_.id as col_0_0_ from parent_entity parententi0_ left outer join child_entity children1_ on parententi0_.id=children1_.parent_id left outer join parent_entity parententi2_ on children1_.friend_id=parententi2_.id where children1_.flag=? and (parententi2_.id is null or parententi2_.id<>?) limit ?
Hibernate: select distinct parententi0_.id as col_0_0_ from parent_entity parententi0_ left outer join child_entity children1_ on parententi0_.id=children1_.parent_id left outer join parent_entity parententi2_ on children1_.friend_id=parententi2_.id where children1_.flag=? and (parententi2_.id is null or parententi2_.id<>?) limit ?
2021-12-11 17:23:09,489 TRACE Hibernate executing SQL: select parententi0_.id as id1_3_0_, children1_.id as id1_1_1_, parententi2_.id as id1_3_2_, parententi0_.capacity as capacity2_3_0_, children1_.flag as flag2_1_1_, children1_.friend_id as friend_i3_1_1_, children1_.parent_id as parent_i4_1_1_, children1_.parent_id as parent_i4_1_0__, children1_.id as id1_1_0__, parententi2_.capacity as capacity2_3_2_ from parent_entity parententi0_ left outer join child_entity children1_ on parententi0_.id=children1_.parent_id left outer join parent_entity parententi2_ on children1_.friend_id=parententi2_.id where parententi0_.id in (? , ?)
Hibernate: select parententi0_.id as id1_3_0_, children1_.id as id1_1_1_, parententi2_.id as id1_3_2_, parententi0_.capacity as capacity2_3_0_, children1_.flag as flag2_1_1_, children1_.friend_id as friend_i3_1_1_, children1_.parent_id as parent_i4_1_1_, children1_.parent_id as parent_i4_1_0__, children1_.id as id1_1_0__, parententi2_.capacity as capacity2_3_2_ from parent_entity parententi0_ left outer join child_entity children1_ on parententi0_.id=children1_.parent_id left outer join parent_entity parententi2_ on children1_.friend_id=parententi2_.id where parententi0_.id in (? , ?)
2021-12-11 17:23:09,491 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@78ae9b9c
SQL: select distinct parententi0_.id as col_0_0_ from parent_entity parententi0_ left outer join child_entity children1_ on parententi0_.id=children1_.parent_id left outer join parent_entity parententi2_ on children1_.friend_id=parententi2_.id where children1_.flag=? and (parententi2_.id is null or parententi2_.id<>?) limit ?
select parententi0_.id as id1_3_0_, children1_.id as id1_1_1_, parententi2_.id as id1_3_2_, parententi0_.capacity as capacity2_3_0_, children1_.flag as flag2_1_1_, children1_.friend_id as friend_i3_1_1_, children1_.parent_id as parent_i4_1_1_, children1_.parent_id as parent_i4_1_0__, children1_.id as id1_1_0__, parententi2_.capacity as capacity2_3_2_ from parent_entity parententi0_ left outer join child_entity children1_ on parententi0_.id=children1_.parent_id left outer join parent_entity parententi2_ on children1_.friend_id=parententi2_.id where parententi0_.id in (? , ?)
SQL Statements: 2
2021-12-11 17:23:09,491  INFO Shut down Hibernate SessionFactory...
2021-12-11 17:23:09,491 TRACE Creating new transaction to call void com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider.runShutDownSQL()
2021-12-11 17:23:09,491 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@418f3cde
2021-12-11 17:23:09,599 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.entitycollection.ParentEntity
2021-12-11 17:23:09,599 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.entitycollection.HavingAlternateIdEntity
2021-12-11 17:23:09,600 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.entitycollection.ChildEntity
2021-12-11 17:23:09,600 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.entitycollection.AlternateIdReferencingEntity
2021-12-11 17:23:09,600 TRACE Evaluate HibernateConfigurationValidators. has at least one=false
2021-12-11 17:23:09,602  WARN HHH10001002: Using Hibernate built-in connection pool (not for production use!)
Hibernate: alter table asset_alternate_id drop constraint FKhdag9du7irj5v3sliknkgwm1v
Hibernate: alter table child_entity drop constraint FK11qr2as1nab8idathnw1hyoep
Hibernate: alter table child_entity drop constraint FK3uwb4qmw23u0rr8gwqltlepc3
Hibernate: alter table refs_having_altid drop constraint FKcrnmosah3i85ud2gvki0qghp5
Hibernate: drop table asset_alternate_id if exists
Hibernate: drop table child_entity if exists
Hibernate: drop table having_altid if exists
Hibernate: drop table parent_entity if exists
Hibernate: drop table refs_having_altid if exists
Hibernate: drop sequence hibernate_sequence if exists
Hibernate: create sequence hibernate_sequence start with 1 increment by 1
Hibernate: create table asset_alternate_id (asset_id bigint not null, id_system varchar(255) not null, id_value varchar(255) not null, primary key (asset_id, id_system, id_value))
Hibernate: create table child_entity (id bigint not null, flag boolean not null, friend_id bigint, parent_id bigint not null, primary key (id))
Hibernate: create table having_altid (id bigint generated by default as identity (start with 1), primary key (id))
Hibernate: create table parent_entity (id bigint not null, capacity integer not null, primary key (id))
Hibernate: create table refs_having_altid (id bigint generated by default as identity (start with 1), referenced_id bigint, primary key (id))
Hibernate: alter table asset_alternate_id add constraint FKhdag9du7irj5v3sliknkgwm1v foreign key (asset_id) references having_altid
Hibernate: alter table child_entity add constraint FK11qr2as1nab8idathnw1hyoep foreign key (friend_id) references parent_entity
Hibernate: alter table child_entity add constraint FK3uwb4qmw23u0rr8gwqltlepc3 foreign key (parent_id) references parent_entity
Hibernate: alter table refs_having_altid add constraint FKcrnmosah3i85ud2gvki0qghp5 foreign key (referenced_id) references having_altid
2021-12-11 17:23:09,624 TRACE Hibernate Setup Complete.
2021-12-11 17:23:09,624 DEBUG Known entities: [having_altid, child_entity, refs_having_altid, parent_entity]
2021-12-11 17:23:09,624 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.entitycollection.HavingAlternateIdEntity
2021-12-11 17:23:09,624 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.entitycollection.AlternateIdEmbeddedEntity from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@65e503a7
2021-12-11 17:23:09,624 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.entitycollection.AlternateIdEmbeddedEntity from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@65e503a7
2021-12-11 17:23:09,624 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.entitycollection.HavingAlternateIdEntity
2021-12-11 17:23:09,624 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.entitycollection.ChildEntity
2021-12-11 17:23:09,624 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.entitycollection.ParentEntity
2021-12-11 17:23:09,624 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.entitycollection.ParentEntity
2021-12-11 17:23:09,624 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.entitycollection.ChildEntity
2021-12-11 17:23:09,624 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.entitycollection.AlternateIdReferencingEntity
2021-12-11 17:23:09,624 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.entitycollection.AlternateIdReferencingEntity
2021-12-11 17:23:09,625 TRACE Creating new transaction to call public java.util.List<java.lang.Long> com.peterphi.std.guice.hibernate.entitycollection.EntityCollectionTest.load()
2021-12-11 17:23:09,625 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:09,626 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:09,626 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:09,626 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:09,627 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:09,627 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:09,627 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:09,627 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:09,627 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@71103416
Hibernate: insert into parent_entity (capacity, id) values (?, ?)
Hibernate: insert into child_entity (flag, friend_id, parent_id, id) values (?, ?, ?, ?)
Hibernate: insert into child_entity (flag, friend_id, parent_id, id) values (?, ?, ?, ?)
Hibernate: insert into child_entity (flag, friend_id, parent_id, id) values (?, ?, ?, ?)
Hibernate: insert into parent_entity (capacity, id) values (?, ?)
Hibernate: insert into child_entity (flag, friend_id, parent_id, id) values (?, ?, ?, ?)
Hibernate: insert into child_entity (flag, friend_id, parent_id, id) values (?, ?, ?, ?)
Hibernate: insert into child_entity (flag, friend_id, parent_id, id) values (?, ?, ?, ?)
2021-12-11 17:23:09,630 TRACE Creating new transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
2021-12-11 17:23:09,636 TRACE Hibernate executing SQL: select distinct parententi0_.id as col_0_0_ from parent_entity parententi0_ left outer join child_entity children1_ on parententi0_.id=children1_.parent_id left outer join child_entity children2_ on parententi0_.id=children2_.parent_id left outer join parent_entity parententi3_ on children2_.friend_id=parententi3_.id where children1_.flag=? and (parententi3_.id is null or parententi3_.id<>?) limit ?
Hibernate: select distinct parententi0_.id as col_0_0_ from parent_entity parententi0_ left outer join child_entity children1_ on parententi0_.id=children1_.parent_id left outer join child_entity children2_ on parententi0_.id=children2_.parent_id left outer join parent_entity parententi3_ on children2_.friend_id=parententi3_.id where children1_.flag=? and (parententi3_.id is null or parententi3_.id<>?) limit ?
2021-12-11 17:23:09,645 TRACE Hibernate executing SQL: select parententi0_.id as id1_3_0_, children1_.id as id1_1_1_, parententi2_.id as id1_3_2_, parententi0_.capacity as capacity2_3_0_, children1_.flag as flag2_1_1_, children1_.friend_id as friend_i3_1_1_, children1_.parent_id as parent_i4_1_1_, children1_.parent_id as parent_i4_1_0__, children1_.id as id1_1_0__, parententi2_.capacity as capacity2_3_2_ from parent_entity parententi0_ left outer join child_entity children1_ on parententi0_.id=children1_.parent_id left outer join parent_entity parententi2_ on children1_.friend_id=parententi2_.id where parententi0_.id in (? , ?)
Hibernate: select parententi0_.id as id1_3_0_, children1_.id as id1_1_1_, parententi2_.id as id1_3_2_, parententi0_.capacity as capacity2_3_0_, children1_.flag as flag2_1_1_, children1_.friend_id as friend_i3_1_1_, children1_.parent_id as parent_i4_1_1_, children1_.parent_id as parent_i4_1_0__, children1_.id as id1_1_0__, parententi2_.capacity as capacity2_3_2_ from parent_entity parententi0_ left outer join child_entity children1_ on parententi0_.id=children1_.parent_id left outer join parent_entity parententi2_ on children1_.friend_id=parententi2_.id where parententi0_.id in (? , ?)
2021-12-11 17:23:09,647 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@50b4e828
SQL: select distinct parententi0_.id as col_0_0_ from parent_entity parententi0_ left outer join child_entity children1_ on parententi0_.id=children1_.parent_id left outer join child_entity children2_ on parententi0_.id=children2_.parent_id left outer join parent_entity parententi3_ on children2_.friend_id=parententi3_.id where children1_.flag=? and (parententi3_.id is null or parententi3_.id<>?) limit ?
select parententi0_.id as id1_3_0_, children1_.id as id1_1_1_, parententi2_.id as id1_3_2_, parententi0_.capacity as capacity2_3_0_, children1_.flag as flag2_1_1_, children1_.friend_id as friend_i3_1_1_, children1_.parent_id as parent_i4_1_1_, children1_.parent_id as parent_i4_1_0__, children1_.id as id1_1_0__, parententi2_.capacity as capacity2_3_2_ from parent_entity parententi0_ left outer join child_entity children1_ on parententi0_.id=children1_.parent_id left outer join parent_entity parententi2_ on children1_.friend_id=parententi2_.id where parententi0_.id in (? , ?)
SQL Statements: 2
2021-12-11 17:23:09,647  INFO Shut down Hibernate SessionFactory...
2021-12-11 17:23:09,647 TRACE Creating new transaction to call void com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider.runShutDownSQL()
2021-12-11 17:23:09,647 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@56c75b4f
2021-12-11 17:23:09,785 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.entitycollection.ParentEntity
2021-12-11 17:23:09,785 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.entitycollection.HavingAlternateIdEntity
2021-12-11 17:23:09,785 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.entitycollection.ChildEntity
2021-12-11 17:23:09,785 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.entitycollection.AlternateIdReferencingEntity
2021-12-11 17:23:09,786 TRACE Evaluate HibernateConfigurationValidators. has at least one=false
2021-12-11 17:23:09,789  WARN HHH10001002: Using Hibernate built-in connection pool (not for production use!)
Hibernate: alter table asset_alternate_id drop constraint FKhdag9du7irj5v3sliknkgwm1v
Hibernate: alter table child_entity drop constraint FK11qr2as1nab8idathnw1hyoep
Hibernate: alter table child_entity drop constraint FK3uwb4qmw23u0rr8gwqltlepc3
Hibernate: alter table refs_having_altid drop constraint FKcrnmosah3i85ud2gvki0qghp5
Hibernate: drop table asset_alternate_id if exists
Hibernate: drop table child_entity if exists
Hibernate: drop table having_altid if exists
Hibernate: drop table parent_entity if exists
Hibernate: drop table refs_having_altid if exists
Hibernate: drop sequence hibernate_sequence if exists
Hibernate: create sequence hibernate_sequence start with 1 increment by 1
Hibernate: create table asset_alternate_id (asset_id bigint not null, id_system varchar(255) not null, id_value varchar(255) not null, primary key (asset_id, id_system, id_value))
Hibernate: create table child_entity (id bigint not null, flag boolean not null, friend_id bigint, parent_id bigint not null, primary key (id))
Hibernate: create table having_altid (id bigint generated by default as identity (start with 1), primary key (id))
Hibernate: create table parent_entity (id bigint not null, capacity integer not null, primary key (id))
Hibernate: create table refs_having_altid (id bigint generated by default as identity (start with 1), referenced_id bigint, primary key (id))
Hibernate: alter table asset_alternate_id add constraint FKhdag9du7irj5v3sliknkgwm1v foreign key (asset_id) references having_altid
Hibernate: alter table child_entity add constraint FK11qr2as1nab8idathnw1hyoep foreign key (friend_id) references parent_entity
Hibernate: alter table child_entity add constraint FK3uwb4qmw23u0rr8gwqltlepc3 foreign key (parent_id) references parent_entity
Hibernate: alter table refs_having_altid add constraint FKcrnmosah3i85ud2gvki0qghp5 foreign key (referenced_id) references having_altid
2021-12-11 17:23:09,817 TRACE Hibernate Setup Complete.
2021-12-11 17:23:09,817 DEBUG Known entities: [having_altid, child_entity, parent_entity, refs_having_altid]
2021-12-11 17:23:09,817 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.entitycollection.HavingAlternateIdEntity
2021-12-11 17:23:09,818 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.entitycollection.AlternateIdEmbeddedEntity from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@109fa8e2
2021-12-11 17:23:09,818 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.entitycollection.AlternateIdEmbeddedEntity from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@109fa8e2
2021-12-11 17:23:09,818 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.entitycollection.HavingAlternateIdEntity
2021-12-11 17:23:09,818 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.entitycollection.ChildEntity
2021-12-11 17:23:09,818 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.entitycollection.ParentEntity
2021-12-11 17:23:09,818 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.entitycollection.ParentEntity
2021-12-11 17:23:09,818 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.entitycollection.ChildEntity
2021-12-11 17:23:09,818 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.entitycollection.AlternateIdReferencingEntity
2021-12-11 17:23:09,818 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.entitycollection.AlternateIdReferencingEntity
2021-12-11 17:23:09,819 TRACE Creating new transaction to call public java.util.List<java.lang.Long> com.peterphi.std.guice.hibernate.entitycollection.EntityCollectionTest.load()
2021-12-11 17:23:09,819 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:09,820 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:09,820 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:09,820 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:09,821 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:09,821 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:09,822 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:09,822 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:09,822 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@113366e7
Hibernate: insert into parent_entity (capacity, id) values (?, ?)
Hibernate: insert into child_entity (flag, friend_id, parent_id, id) values (?, ?, ?, ?)
Hibernate: insert into child_entity (flag, friend_id, parent_id, id) values (?, ?, ?, ?)
Hibernate: insert into child_entity (flag, friend_id, parent_id, id) values (?, ?, ?, ?)
Hibernate: insert into parent_entity (capacity, id) values (?, ?)
Hibernate: insert into child_entity (flag, friend_id, parent_id, id) values (?, ?, ?, ?)
Hibernate: insert into child_entity (flag, friend_id, parent_id, id) values (?, ?, ?, ?)
Hibernate: insert into child_entity (flag, friend_id, parent_id, id) values (?, ?, ?, ?)
2021-12-11 17:23:09,825 TRACE Creating new transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
2021-12-11 17:23:09,828 TRACE Hibernate executing SQL: select distinct parententi0_.id as col_0_0_ from parent_entity parententi0_ left outer join child_entity children1_ on parententi0_.id=children1_.parent_id where children1_.flag=? limit ?
Hibernate: select distinct parententi0_.id as col_0_0_ from parent_entity parententi0_ left outer join child_entity children1_ on parententi0_.id=children1_.parent_id where children1_.flag=? limit ?
2021-12-11 17:23:09,836 TRACE Hibernate executing SQL: select parententi0_.id as id1_3_0_, children1_.id as id1_1_1_, parententi2_.id as id1_3_2_, parententi0_.capacity as capacity2_3_0_, children1_.flag as flag2_1_1_, children1_.friend_id as friend_i3_1_1_, children1_.parent_id as parent_i4_1_1_, children1_.parent_id as parent_i4_1_0__, children1_.id as id1_1_0__, parententi2_.capacity as capacity2_3_2_ from parent_entity parententi0_ left outer join child_entity children1_ on parententi0_.id=children1_.parent_id left outer join parent_entity parententi2_ on children1_.friend_id=parententi2_.id where parententi0_.id in (? , ?)
Hibernate: select parententi0_.id as id1_3_0_, children1_.id as id1_1_1_, parententi2_.id as id1_3_2_, parententi0_.capacity as capacity2_3_0_, children1_.flag as flag2_1_1_, children1_.friend_id as friend_i3_1_1_, children1_.parent_id as parent_i4_1_1_, children1_.parent_id as parent_i4_1_0__, children1_.id as id1_1_0__, parententi2_.capacity as capacity2_3_2_ from parent_entity parententi0_ left outer join child_entity children1_ on parententi0_.id=children1_.parent_id left outer join parent_entity parententi2_ on children1_.friend_id=parententi2_.id where parententi0_.id in (? , ?)
2021-12-11 17:23:09,838 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@43f8f0bc
SQL: select distinct parententi0_.id as col_0_0_ from parent_entity parententi0_ left outer join child_entity children1_ on parententi0_.id=children1_.parent_id where children1_.flag=? limit ?
select parententi0_.id as id1_3_0_, children1_.id as id1_1_1_, parententi2_.id as id1_3_2_, parententi0_.capacity as capacity2_3_0_, children1_.flag as flag2_1_1_, children1_.friend_id as friend_i3_1_1_, children1_.parent_id as parent_i4_1_1_, children1_.parent_id as parent_i4_1_0__, children1_.id as id1_1_0__, parententi2_.capacity as capacity2_3_2_ from parent_entity parententi0_ left outer join child_entity children1_ on parententi0_.id=children1_.parent_id left outer join parent_entity parententi2_ on children1_.friend_id=parententi2_.id where parententi0_.id in (? , ?)
SQL Statements: 2
[ParentEntity{id=1}, ParentEntity{id=5}]
1 - children 3,4,2
5 - children 8,7,6
2021-12-11 17:23:09,840  INFO Shut down Hibernate SessionFactory...
2021-12-11 17:23:09,840 TRACE Creating new transaction to call void com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider.runShutDownSQL()
2021-12-11 17:23:09,840 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@51b274ce
2021-12-11 17:23:09,979 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.entitycollection.ParentEntity
2021-12-11 17:23:09,979 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.entitycollection.HavingAlternateIdEntity
2021-12-11 17:23:09,979 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.entitycollection.ChildEntity
2021-12-11 17:23:09,979 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.entitycollection.AlternateIdReferencingEntity
2021-12-11 17:23:09,979 TRACE Evaluate HibernateConfigurationValidators. has at least one=false
2021-12-11 17:23:09,982  WARN HHH10001002: Using Hibernate built-in connection pool (not for production use!)
Hibernate: alter table asset_alternate_id drop constraint FKhdag9du7irj5v3sliknkgwm1v
Hibernate: alter table child_entity drop constraint FK11qr2as1nab8idathnw1hyoep
Hibernate: alter table child_entity drop constraint FK3uwb4qmw23u0rr8gwqltlepc3
Hibernate: alter table refs_having_altid drop constraint FKcrnmosah3i85ud2gvki0qghp5
Hibernate: drop table asset_alternate_id if exists
Hibernate: drop table child_entity if exists
Hibernate: drop table having_altid if exists
Hibernate: drop table parent_entity if exists
Hibernate: drop table refs_having_altid if exists
Hibernate: drop sequence hibernate_sequence if exists
Hibernate: create sequence hibernate_sequence start with 1 increment by 1
Hibernate: create table asset_alternate_id (asset_id bigint not null, id_system varchar(255) not null, id_value varchar(255) not null, primary key (asset_id, id_system, id_value))
Hibernate: create table child_entity (id bigint not null, flag boolean not null, friend_id bigint, parent_id bigint not null, primary key (id))
Hibernate: create table having_altid (id bigint generated by default as identity (start with 1), primary key (id))
Hibernate: create table parent_entity (id bigint not null, capacity integer not null, primary key (id))
Hibernate: create table refs_having_altid (id bigint generated by default as identity (start with 1), referenced_id bigint, primary key (id))
Hibernate: alter table asset_alternate_id add constraint FKhdag9du7irj5v3sliknkgwm1v foreign key (asset_id) references having_altid
Hibernate: alter table child_entity add constraint FK11qr2as1nab8idathnw1hyoep foreign key (friend_id) references parent_entity
Hibernate: alter table child_entity add constraint FK3uwb4qmw23u0rr8gwqltlepc3 foreign key (parent_id) references parent_entity
Hibernate: alter table refs_having_altid add constraint FKcrnmosah3i85ud2gvki0qghp5 foreign key (referenced_id) references having_altid
2021-12-11 17:23:10,005 TRACE Hibernate Setup Complete.
2021-12-11 17:23:10,005 DEBUG Known entities: [having_altid, parent_entity, refs_having_altid, child_entity]
2021-12-11 17:23:10,005 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.entitycollection.HavingAlternateIdEntity
2021-12-11 17:23:10,005 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.entitycollection.AlternateIdEmbeddedEntity from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@53c7c937
2021-12-11 17:23:10,005 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.entitycollection.AlternateIdEmbeddedEntity from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@53c7c937
2021-12-11 17:23:10,005 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.entitycollection.HavingAlternateIdEntity
2021-12-11 17:23:10,005 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.entitycollection.ParentEntity
2021-12-11 17:23:10,005 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.entitycollection.ChildEntity
2021-12-11 17:23:10,005 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.entitycollection.ChildEntity
2021-12-11 17:23:10,005 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.entitycollection.ParentEntity
2021-12-11 17:23:10,005 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.entitycollection.AlternateIdReferencingEntity
2021-12-11 17:23:10,005 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.entitycollection.AlternateIdReferencingEntity
2021-12-11 17:23:10,006 TRACE Creating new transaction to call public java.util.List<java.lang.Long> com.peterphi.std.guice.hibernate.entitycollection.EntityCollectionTest.load()
2021-12-11 17:23:10,006 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:10,007 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:10,007 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:10,008 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:10,008 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:10,008 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:10,009 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:10,009 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:10,009 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@7bfb46b2
Hibernate: insert into parent_entity (capacity, id) values (?, ?)
Hibernate: insert into child_entity (flag, friend_id, parent_id, id) values (?, ?, ?, ?)
Hibernate: insert into child_entity (flag, friend_id, parent_id, id) values (?, ?, ?, ?)
Hibernate: insert into child_entity (flag, friend_id, parent_id, id) values (?, ?, ?, ?)
Hibernate: insert into parent_entity (capacity, id) values (?, ?)
Hibernate: insert into child_entity (flag, friend_id, parent_id, id) values (?, ?, ?, ?)
Hibernate: insert into child_entity (flag, friend_id, parent_id, id) values (?, ?, ?, ?)
Hibernate: insert into child_entity (flag, friend_id, parent_id, id) values (?, ?, ?, ?)
2021-12-11 17:23:10,012 TRACE Creating new transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
2021-12-11 17:23:10,015 TRACE Hibernate executing SQL: select distinct parententi0_.id as col_0_0_ from parent_entity parententi0_ left outer join child_entity children1_ on parententi0_.id=children1_.parent_id where children1_.flag=? limit ?
Hibernate: select distinct parententi0_.id as col_0_0_ from parent_entity parententi0_ left outer join child_entity children1_ on parententi0_.id=children1_.parent_id where children1_.flag=? limit ?
2021-12-11 17:23:10,022 TRACE Hibernate executing SQL: select parententi0_.id as id1_3_0_, children1_.id as id1_1_1_, parententi2_.id as id1_3_2_, parententi0_.capacity as capacity2_3_0_, children1_.flag as flag2_1_1_, children1_.friend_id as friend_i3_1_1_, children1_.parent_id as parent_i4_1_1_, children1_.parent_id as parent_i4_1_0__, children1_.id as id1_1_0__, parententi2_.capacity as capacity2_3_2_ from parent_entity parententi0_ left outer join child_entity children1_ on parententi0_.id=children1_.parent_id left outer join parent_entity parententi2_ on children1_.friend_id=parententi2_.id where parententi0_.id in (? , ?)
Hibernate: select parententi0_.id as id1_3_0_, children1_.id as id1_1_1_, parententi2_.id as id1_3_2_, parententi0_.capacity as capacity2_3_0_, children1_.flag as flag2_1_1_, children1_.friend_id as friend_i3_1_1_, children1_.parent_id as parent_i4_1_1_, children1_.parent_id as parent_i4_1_0__, children1_.id as id1_1_0__, parententi2_.capacity as capacity2_3_2_ from parent_entity parententi0_ left outer join child_entity children1_ on parententi0_.id=children1_.parent_id left outer join parent_entity parententi2_ on children1_.friend_id=parententi2_.id where parententi0_.id in (? , ?)
2021-12-11 17:23:10,024 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@10990a32
SQL: [select distinct parententi0_.id as col_0_0_ from parent_entity parententi0_ left outer join child_entity children1_ on parententi0_.id=children1_.parent_id where children1_.flag=? limit ?, select parententi0_.id as id1_3_0_, children1_.id as id1_1_1_, parententi2_.id as id1_3_2_, parententi0_.capacity as capacity2_3_0_, children1_.flag as flag2_1_1_, children1_.friend_id as friend_i3_1_1_, children1_.parent_id as parent_i4_1_1_, children1_.parent_id as parent_i4_1_0__, children1_.id as id1_1_0__, parententi2_.capacity as capacity2_3_2_ from parent_entity parententi0_ left outer join child_entity children1_ on parententi0_.id=children1_.parent_id left outer join parent_entity parententi2_ on children1_.friend_id=parententi2_.id where parententi0_.id in (? , ?)]
SQL Statements: 2
[ParentEntity{id=1}, ParentEntity{id=5}]
1 - children 2,3,4
5 - children 7,6,8
2021-12-11 17:23:10,025  INFO Shut down Hibernate SessionFactory...
2021-12-11 17:23:10,025 TRACE Creating new transaction to call void com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider.runShutDownSQL()
2021-12-11 17:23:10,025 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@5ad07f8a
2021-12-11 17:23:10,156 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.entitycollection.ParentEntity
2021-12-11 17:23:10,156 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.entitycollection.HavingAlternateIdEntity
2021-12-11 17:23:10,156 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.entitycollection.ChildEntity
2021-12-11 17:23:10,156 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.entitycollection.AlternateIdReferencingEntity
2021-12-11 17:23:10,156 TRACE Evaluate HibernateConfigurationValidators. has at least one=false
2021-12-11 17:23:10,161  WARN HHH10001002: Using Hibernate built-in connection pool (not for production use!)
Hibernate: alter table asset_alternate_id drop constraint FKhdag9du7irj5v3sliknkgwm1v
Hibernate: alter table child_entity drop constraint FK11qr2as1nab8idathnw1hyoep
Hibernate: alter table child_entity drop constraint FK3uwb4qmw23u0rr8gwqltlepc3
Hibernate: alter table refs_having_altid drop constraint FKcrnmosah3i85ud2gvki0qghp5
Hibernate: drop table asset_alternate_id if exists
Hibernate: drop table child_entity if exists
Hibernate: drop table having_altid if exists
Hibernate: drop table parent_entity if exists
Hibernate: drop table refs_having_altid if exists
Hibernate: drop sequence hibernate_sequence if exists
Hibernate: create sequence hibernate_sequence start with 1 increment by 1
Hibernate: create table asset_alternate_id (asset_id bigint not null, id_system varchar(255) not null, id_value varchar(255) not null, primary key (asset_id, id_system, id_value))
Hibernate: create table child_entity (id bigint not null, flag boolean not null, friend_id bigint, parent_id bigint not null, primary key (id))
Hibernate: create table having_altid (id bigint generated by default as identity (start with 1), primary key (id))
Hibernate: create table parent_entity (id bigint not null, capacity integer not null, primary key (id))
Hibernate: create table refs_having_altid (id bigint generated by default as identity (start with 1), referenced_id bigint, primary key (id))
Hibernate: alter table asset_alternate_id add constraint FKhdag9du7irj5v3sliknkgwm1v foreign key (asset_id) references having_altid
Hibernate: alter table child_entity add constraint FK11qr2as1nab8idathnw1hyoep foreign key (friend_id) references parent_entity
Hibernate: alter table child_entity add constraint FK3uwb4qmw23u0rr8gwqltlepc3 foreign key (parent_id) references parent_entity
Hibernate: alter table refs_having_altid add constraint FKcrnmosah3i85ud2gvki0qghp5 foreign key (referenced_id) references having_altid
2021-12-11 17:23:10,186 TRACE Hibernate Setup Complete.
2021-12-11 17:23:10,186 DEBUG Known entities: [having_altid, child_entity, refs_having_altid, parent_entity]
2021-12-11 17:23:10,186 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.entitycollection.HavingAlternateIdEntity
2021-12-11 17:23:10,186 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.entitycollection.AlternateIdEmbeddedEntity from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@4086dd5f
2021-12-11 17:23:10,186 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.entitycollection.AlternateIdEmbeddedEntity from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@4086dd5f
2021-12-11 17:23:10,186 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.entitycollection.HavingAlternateIdEntity
2021-12-11 17:23:10,186 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.entitycollection.ChildEntity
2021-12-11 17:23:10,186 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.entitycollection.ParentEntity
2021-12-11 17:23:10,186 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.entitycollection.ParentEntity
2021-12-11 17:23:10,186 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.entitycollection.ChildEntity
2021-12-11 17:23:10,186 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.entitycollection.AlternateIdReferencingEntity
2021-12-11 17:23:10,186 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.entitycollection.AlternateIdReferencingEntity
2021-12-11 17:23:10,187 TRACE Creating new transaction to call public java.util.List<java.lang.Long> com.peterphi.std.guice.hibernate.entitycollection.EntityCollectionTest.load()
2021-12-11 17:23:10,187 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:10,188 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:10,188 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:10,189 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:10,189 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:10,189 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:10,190 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:10,190 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:10,190 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@74e33e86
Hibernate: insert into parent_entity (capacity, id) values (?, ?)
Hibernate: insert into child_entity (flag, friend_id, parent_id, id) values (?, ?, ?, ?)
Hibernate: insert into child_entity (flag, friend_id, parent_id, id) values (?, ?, ?, ?)
Hibernate: insert into child_entity (flag, friend_id, parent_id, id) values (?, ?, ?, ?)
Hibernate: insert into parent_entity (capacity, id) values (?, ?)
Hibernate: insert into child_entity (flag, friend_id, parent_id, id) values (?, ?, ?, ?)
Hibernate: insert into child_entity (flag, friend_id, parent_id, id) values (?, ?, ?, ?)
Hibernate: insert into child_entity (flag, friend_id, parent_id, id) values (?, ?, ?, ?)
2021-12-11 17:23:10,193 TRACE Creating new transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
2021-12-11 17:23:10,196 TRACE Hibernate executing SQL: select parententi0_.id as id1_3_, parententi0_.capacity as capacity2_3_ from parent_entity parententi0_ left outer join child_entity children1_ on parententi0_.id=children1_.parent_id where children1_.flag=?
Hibernate: select parententi0_.id as id1_3_, parententi0_.capacity as capacity2_3_ from parent_entity parententi0_ left outer join child_entity children1_ on parententi0_.id=children1_.parent_id where children1_.flag=?
2021-12-11 17:23:10,197 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@5a13b931
SQL: select parententi0_.id as id1_3_, parententi0_.capacity as capacity2_3_ from parent_entity parententi0_ left outer join child_entity children1_ on parententi0_.id=children1_.parent_id where children1_.flag=?
SQL Statements: 1
2021-12-11 17:23:10,198  INFO Shut down Hibernate SessionFactory...
2021-12-11 17:23:10,198 TRACE Creating new transaction to call void com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider.runShutDownSQL()
2021-12-11 17:23:10,198 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@5e9ae46f
Tests run: 15, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 7.382 sec - in com.peterphi.std.guice.hibernate.entitycollection.EntityCollectionTest
Running com.peterphi.std.guice.hibernate.largetable.LargeTableQueryTest
2021-12-11 17:23:10,418 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.largetable.LargeTableSimplePKEntity
2021-12-11 17:23:10,418 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.largetable.LargeTableComplexPKEntity
2021-12-11 17:23:10,418 TRACE Evaluate HibernateConfigurationValidators. has at least one=false
2021-12-11 17:23:10,422  WARN HHH10001002: Using Hibernate built-in connection pool (not for production use!)
Hibernate: drop table complex_pk_entity if exists
Hibernate: drop table simple_pk_entity if exists
Hibernate: drop sequence hibernate_sequence if exists
Hibernate: create sequence hibernate_sequence start with 1 increment by 1
Hibernate: create table complex_pk_entity (id varchar(20) not null, ts bigint not null, name varchar(255) not null, primary key (id, ts))
Hibernate: create table simple_pk_entity (id bigint not null, name varchar(255) not null, primary key (id))
2021-12-11 17:23:10,445 TRACE Hibernate Setup Complete.
2021-12-11 17:23:10,446 DEBUG Known entities: [complex_pk_entity, simple_pk_entity]
2021-12-11 17:23:10,446 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.largetable.LargeTableComplexPKEntity
2021-12-11 17:23:10,446 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.largetable.SomePrimaryKey from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@6c4fee11
2021-12-11 17:23:10,446 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.largetable.SomePrimaryKey from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@6c4fee11
2021-12-11 17:23:10,446 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.largetable.LargeTableComplexPKEntity
2021-12-11 17:23:10,446 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.largetable.LargeTableSimplePKEntity
2021-12-11 17:23:10,446 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.largetable.LargeTableSimplePKEntity
2021-12-11 17:23:10,446 TRACE Creating new transaction to call public void com.peterphi.std.guice.hibernate.largetable.LargeTableQueryTest.testSearchWorks()
2021-12-11 17:23:10,448 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:10,449 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:10,449 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:10,449 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:10,449 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:10,450 TRACE Joining existing transaction to call public long com.peterphi.std.guice.hibernate.largetable.MyTestDaoImpl.countWithAInName()
2021-12-11 17:23:10,454  WARN HHH90000022: Hibernate's legacy org.hibernate.Criteria API is deprecated; use the JPA javax.persistence.criteria.CriteriaQuery instead
2021-12-11 17:23:10,455  WARN HHH90000022: Hibernate's legacy org.hibernate.Criteria API is deprecated; use the JPA javax.persistence.criteria.CriteriaQuery instead
Hibernate: insert into simple_pk_entity (name, id) values (?, ?)
Hibernate: insert into simple_pk_entity (name, id) values (?, ?)
Hibernate: insert into simple_pk_entity (name, id) values (?, ?)
Hibernate: insert into simple_pk_entity (name, id) values (?, ?)
Hibernate: insert into simple_pk_entity (name, id) values (?, ?)
Hibernate: select this_.id as id1_1_0_, this_.name as name2_1_0_ from simple_pk_entity this_ where this_.id in (select this_.id as y0_ from simple_pk_entity this_ where this_.name like ?)
2021-12-11 17:23:10,542 TRACE Joining existing transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select distinct largetable0_.id as col_0_0_ from simple_pk_entity largetable0_ where largetable0_.name like ?
Hibernate: select largetable0_.id as id1_1_, largetable0_.name as name2_1_ from simple_pk_entity largetable0_ where largetable0_.id in (? , ?)
2021-12-11 17:23:10,548 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@4b4eac80
2021-12-11 17:23:10,549  INFO Shut down Hibernate SessionFactory...
2021-12-11 17:23:10,549 TRACE Creating new transaction to call void com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider.runShutDownSQL()
2021-12-11 17:23:10,549 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@30fe1b54
2021-12-11 17:23:10,693 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.largetable.LargeTableSimplePKEntity
2021-12-11 17:23:10,694 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.largetable.LargeTableComplexPKEntity
2021-12-11 17:23:10,694 TRACE Evaluate HibernateConfigurationValidators. has at least one=false
2021-12-11 17:23:10,697  WARN HHH10001002: Using Hibernate built-in connection pool (not for production use!)
Hibernate: drop table complex_pk_entity if exists
Hibernate: drop table simple_pk_entity if exists
Hibernate: drop sequence hibernate_sequence if exists
Hibernate: create sequence hibernate_sequence start with 1 increment by 1
Hibernate: create table complex_pk_entity (id varchar(20) not null, ts bigint not null, name varchar(255) not null, primary key (id, ts))
Hibernate: create table simple_pk_entity (id bigint not null, name varchar(255) not null, primary key (id))
2021-12-11 17:23:10,720 TRACE Hibernate Setup Complete.
2021-12-11 17:23:10,720 DEBUG Known entities: [complex_pk_entity, simple_pk_entity]
2021-12-11 17:23:10,720 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.largetable.LargeTableComplexPKEntity
2021-12-11 17:23:10,720 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.largetable.SomePrimaryKey from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@56961786
2021-12-11 17:23:10,720 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.largetable.SomePrimaryKey from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@56961786
2021-12-11 17:23:10,720 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.largetable.LargeTableComplexPKEntity
2021-12-11 17:23:10,720 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.largetable.LargeTableSimplePKEntity
2021-12-11 17:23:10,720 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.largetable.LargeTableSimplePKEntity
2021-12-11 17:23:10,721 TRACE Creating new transaction to call public void com.peterphi.std.guice.hibernate.largetable.LargeTableQueryTest.testSearchComplexPK()
2021-12-11 17:23:10,851 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
2021-12-11 17:23:10,852 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
2021-12-11 17:23:10,853 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
2021-12-11 17:23:10,853 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
2021-12-11 17:23:10,853 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
2021-12-11 17:23:10,853 TRACE Joining existing transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: insert into complex_pk_entity (name, id, ts) values (?, ?, ?)
Hibernate: insert into complex_pk_entity (name, id, ts) values (?, ?, ?)
Hibernate: insert into complex_pk_entity (name, id, ts) values (?, ?, ?)
Hibernate: insert into complex_pk_entity (name, id, ts) values (?, ?, ?)
Hibernate: insert into complex_pk_entity (name, id, ts) values (?, ?, ?)
Hibernate: select distinct largetable0_.id as col_0_0_, largetable0_.ts as col_0_1_ from complex_pk_entity largetable0_ where largetable0_.name like ?
Hibernate: select largetable0_.id as id1_0_, largetable0_.ts as ts2_0_, largetable0_.name as name3_0_ from complex_pk_entity largetable0_ where largetable0_.id=? and largetable0_.ts=? or largetable0_.id=? and largetable0_.ts=?
2021-12-11 17:23:10,863 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@6aa7c6c6
2021-12-11 17:23:10,863  INFO Shut down Hibernate SessionFactory...
2021-12-11 17:23:10,864 TRACE Creating new transaction to call void com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider.runShutDownSQL()
2021-12-11 17:23:10,864 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@1f41362
2021-12-11 17:23:11,006 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.largetable.LargeTableSimplePKEntity
2021-12-11 17:23:11,006 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.largetable.LargeTableComplexPKEntity
2021-12-11 17:23:11,006 TRACE Evaluate HibernateConfigurationValidators. has at least one=false
2021-12-11 17:23:11,010  WARN HHH10001002: Using Hibernate built-in connection pool (not for production use!)
Hibernate: drop table complex_pk_entity if exists
Hibernate: drop table simple_pk_entity if exists
Hibernate: drop sequence hibernate_sequence if exists
Hibernate: create sequence hibernate_sequence start with 1 increment by 1
Hibernate: create table complex_pk_entity (id varchar(20) not null, ts bigint not null, name varchar(255) not null, primary key (id, ts))
Hibernate: create table simple_pk_entity (id bigint not null, name varchar(255) not null, primary key (id))
2021-12-11 17:23:11,023 TRACE Hibernate Setup Complete.
2021-12-11 17:23:11,023 DEBUG Known entities: [complex_pk_entity, simple_pk_entity]
2021-12-11 17:23:11,023 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.largetable.LargeTableComplexPKEntity
2021-12-11 17:23:11,023 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.largetable.SomePrimaryKey from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@7d4e0b10
2021-12-11 17:23:11,023 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.largetable.SomePrimaryKey from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@7d4e0b10
2021-12-11 17:23:11,023 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.largetable.LargeTableComplexPKEntity
2021-12-11 17:23:11,023 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.largetable.LargeTableSimplePKEntity
2021-12-11 17:23:11,023 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.largetable.LargeTableSimplePKEntity
2021-12-11 17:23:11,024 TRACE Creating new transaction to call public void com.peterphi.std.guice.hibernate.largetable.LargeTableQueryTest.testSearchWorksWithOrder()
2021-12-11 17:23:11,024 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:11,025 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:11,025 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:11,025 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:11,026 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:11,084 TRACE Joining existing transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: insert into simple_pk_entity (name, id) values (?, ?)
Hibernate: insert into simple_pk_entity (name, id) values (?, ?)
Hibernate: insert into simple_pk_entity (name, id) values (?, ?)
Hibernate: insert into simple_pk_entity (name, id) values (?, ?)
Hibernate: insert into simple_pk_entity (name, id) values (?, ?)
Hibernate: select distinct largetable0_.id as col_0_0_, largetable0_.name as col_1_0_ from simple_pk_entity largetable0_ where largetable0_.name like ? order by largetable0_.name desc
Hibernate: select largetable0_.id as id1_1_, largetable0_.name as name2_1_ from simple_pk_entity largetable0_ where largetable0_.id in (? , ?) order by largetable0_.name desc
2021-12-11 17:23:11,103 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@612e1ba2
2021-12-11 17:23:11,104  INFO Shut down Hibernate SessionFactory...
2021-12-11 17:23:11,104 TRACE Creating new transaction to call void com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider.runShutDownSQL()
2021-12-11 17:23:11,105 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@7a7fdd22
2021-12-11 17:23:11,264 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.largetable.LargeTableSimplePKEntity
2021-12-11 17:23:11,265 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.largetable.LargeTableComplexPKEntity
2021-12-11 17:23:11,265 TRACE Evaluate HibernateConfigurationValidators. has at least one=false
2021-12-11 17:23:11,267  WARN HHH10001002: Using Hibernate built-in connection pool (not for production use!)
Hibernate: drop table complex_pk_entity if exists
Hibernate: drop table simple_pk_entity if exists
Hibernate: drop sequence hibernate_sequence if exists
Hibernate: create sequence hibernate_sequence start with 1 increment by 1
Hibernate: create table complex_pk_entity (id varchar(20) not null, ts bigint not null, name varchar(255) not null, primary key (id, ts))
Hibernate: create table simple_pk_entity (id bigint not null, name varchar(255) not null, primary key (id))
2021-12-11 17:23:11,281 TRACE Hibernate Setup Complete.
2021-12-11 17:23:11,281 DEBUG Known entities: [simple_pk_entity, complex_pk_entity]
2021-12-11 17:23:11,281 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.largetable.LargeTableSimplePKEntity
2021-12-11 17:23:11,281 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.largetable.LargeTableSimplePKEntity
2021-12-11 17:23:11,281 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.largetable.LargeTableComplexPKEntity
2021-12-11 17:23:11,281 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.largetable.SomePrimaryKey from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@2b050bc3
2021-12-11 17:23:11,281 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.largetable.SomePrimaryKey from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@2b050bc3
2021-12-11 17:23:11,281 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.largetable.LargeTableComplexPKEntity
2021-12-11 17:23:11,282 TRACE Creating new transaction to call public void com.peterphi.std.guice.hibernate.largetable.LargeTableQueryTest.testSearchComplexPKIDs()
2021-12-11 17:23:11,283 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
2021-12-11 17:23:11,283 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
2021-12-11 17:23:11,284 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
2021-12-11 17:23:11,284 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
2021-12-11 17:23:11,284 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
2021-12-11 17:23:11,284 TRACE Joining existing transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: insert into complex_pk_entity (name, id, ts) values (?, ?, ?)
Hibernate: insert into complex_pk_entity (name, id, ts) values (?, ?, ?)
Hibernate: insert into complex_pk_entity (name, id, ts) values (?, ?, ?)
Hibernate: insert into complex_pk_entity (name, id, ts) values (?, ?, ?)
Hibernate: insert into complex_pk_entity (name, id, ts) values (?, ?, ?)
Hibernate: select distinct largetable0_.id as col_0_0_, largetable0_.ts as col_0_1_ from complex_pk_entity largetable0_ where largetable0_.name like ?
2021-12-11 17:23:11,290 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@1618a359
2021-12-11 17:23:11,291  INFO Shut down Hibernate SessionFactory...
2021-12-11 17:23:11,291 TRACE Creating new transaction to call void com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider.runShutDownSQL()
2021-12-11 17:23:11,291 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@45ee6ac9
2021-12-11 17:23:11,423 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.largetable.LargeTableSimplePKEntity
2021-12-11 17:23:11,424 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.largetable.LargeTableComplexPKEntity
2021-12-11 17:23:11,424 TRACE Evaluate HibernateConfigurationValidators. has at least one=false
2021-12-11 17:23:11,427  WARN HHH10001002: Using Hibernate built-in connection pool (not for production use!)
Hibernate: drop table complex_pk_entity if exists
Hibernate: drop table simple_pk_entity if exists
Hibernate: drop sequence hibernate_sequence if exists
Hibernate: create sequence hibernate_sequence start with 1 increment by 1
Hibernate: create table complex_pk_entity (id varchar(20) not null, ts bigint not null, name varchar(255) not null, primary key (id, ts))
Hibernate: create table simple_pk_entity (id bigint not null, name varchar(255) not null, primary key (id))
2021-12-11 17:23:11,439 TRACE Hibernate Setup Complete.
2021-12-11 17:23:11,439 DEBUG Known entities: [simple_pk_entity, complex_pk_entity]
2021-12-11 17:23:11,439 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.largetable.LargeTableSimplePKEntity
2021-12-11 17:23:11,439 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.largetable.LargeTableSimplePKEntity
2021-12-11 17:23:11,439 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.largetable.LargeTableComplexPKEntity
2021-12-11 17:23:11,439 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.largetable.SomePrimaryKey from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@79781e77
2021-12-11 17:23:11,439 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.largetable.SomePrimaryKey from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@79781e77
2021-12-11 17:23:11,439 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.largetable.LargeTableComplexPKEntity
2021-12-11 17:23:11,439 TRACE Creating new transaction to call public void com.peterphi.std.guice.hibernate.largetable.LargeTableQueryTest.testSearchForPrimaryKeyWorks()
2021-12-11 17:23:11,440 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:11,440 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:11,441 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:11,441 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:11,441 TRACE Joining existing transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:11,441 TRACE Joining existing transaction to call public long com.peterphi.std.guice.hibernate.largetable.MyTestDaoImpl.countWithAInName()
2021-12-11 17:23:11,441  WARN HHH90000022: Hibernate's legacy org.hibernate.Criteria API is deprecated; use the JPA javax.persistence.criteria.CriteriaQuery instead
2021-12-11 17:23:11,441  WARN HHH90000022: Hibernate's legacy org.hibernate.Criteria API is deprecated; use the JPA javax.persistence.criteria.CriteriaQuery instead
Hibernate: insert into simple_pk_entity (name, id) values (?, ?)
Hibernate: insert into simple_pk_entity (name, id) values (?, ?)
Hibernate: insert into simple_pk_entity (name, id) values (?, ?)
Hibernate: insert into simple_pk_entity (name, id) values (?, ?)
Hibernate: insert into simple_pk_entity (name, id) values (?, ?)
Hibernate: select this_.id as id1_1_0_, this_.name as name2_1_0_ from simple_pk_entity this_ where this_.id in (select this_.id as y0_ from simple_pk_entity this_ where this_.name like ?)
2021-12-11 17:23:11,443 TRACE Joining existing transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select distinct largetable0_.id as col_0_0_ from simple_pk_entity largetable0_ where largetable0_.name like ?
Hibernate: select distinct count(largetable0_.id) as col_0_0_ from simple_pk_entity largetable0_ where largetable0_.name like ?
2021-12-11 17:23:11,450 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@66ff37ff
2021-12-11 17:23:11,450  INFO Shut down Hibernate SessionFactory...
2021-12-11 17:23:11,450 TRACE Creating new transaction to call void com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider.runShutDownSQL()
2021-12-11 17:23:11,451 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@6bb59fa4
Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.208 sec - in com.peterphi.std.guice.hibernate.largetable.LargeTableQueryTest
Running com.peterphi.std.guice.hibernate.module.TransactionHelperTest
2021-12-11 17:23:11,844 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.module.TransactionHelperTest$DummyEntity
2021-12-11 17:23:11,844 TRACE Evaluate HibernateConfigurationValidators. has at least one=false
2021-12-11 17:23:11,848  WARN HHH10001002: Using Hibernate built-in connection pool (not for production use!)
Hibernate: drop table Q if exists
Hibernate: drop sequence hibernate_sequence if exists
Hibernate: create sequence hibernate_sequence start with 1 increment by 1
Hibernate: create table Q (id bigint not null, primary key (id))
2021-12-11 17:23:11,858 TRACE Hibernate Setup Complete.
2021-12-11 17:23:11,858 TRACE Creating new transaction to call public void com.peterphi.std.guice.hibernate.module.TransactionHelperTest.doTransaction(boolean)
2021-12-11 17:23:11,864 DEBUG KillTransaction causes rollback
2021-12-11 17:23:11,864  INFO Shut down Hibernate SessionFactory...
2021-12-11 17:23:11,864 TRACE Creating new transaction to call void com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider.runShutDownSQL()
2021-12-11 17:23:11,865 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@43e32f01
2021-12-11 17:23:12,002 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.module.TransactionHelperTest$DummyEntity
2021-12-11 17:23:12,002 TRACE Evaluate HibernateConfigurationValidators. has at least one=false
2021-12-11 17:23:12,005  WARN HHH10001002: Using Hibernate built-in connection pool (not for production use!)
Hibernate: drop table Q if exists
Hibernate: drop sequence hibernate_sequence if exists
Hibernate: create sequence hibernate_sequence start with 1 increment by 1
Hibernate: create table Q (id bigint not null, primary key (id))
2021-12-11 17:23:12,013 TRACE Hibernate Setup Complete.
2021-12-11 17:23:12,014 TRACE Creating new transaction to call public void com.peterphi.std.guice.hibernate.module.TransactionHelperTest.doTransaction(boolean)
2021-12-11 17:23:12,014 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@3ff906e9
2021-12-11 17:23:12,014  INFO Shut down Hibernate SessionFactory...
2021-12-11 17:23:12,015 TRACE Creating new transaction to call void com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider.runShutDownSQL()
2021-12-11 17:23:12,015 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@24112ec4
2021-12-11 17:23:12,149 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.module.TransactionHelperTest$DummyEntity
2021-12-11 17:23:12,149 TRACE Evaluate HibernateConfigurationValidators. has at least one=false
2021-12-11 17:23:12,152  WARN HHH10001002: Using Hibernate built-in connection pool (not for production use!)
Hibernate: drop table Q if exists
Hibernate: drop sequence hibernate_sequence if exists
Hibernate: create sequence hibernate_sequence start with 1 increment by 1
Hibernate: create table Q (id bigint not null, primary key (id))
2021-12-11 17:23:12,161 TRACE Hibernate Setup Complete.
2021-12-11 17:23:12,161  INFO Shut down Hibernate SessionFactory...
2021-12-11 17:23:12,161 TRACE Creating new transaction to call void com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider.runShutDownSQL()
2021-12-11 17:23:12,161 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@e5220bd
Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.709 sec - in com.peterphi.std.guice.hibernate.module.TransactionHelperTest
Running com.peterphi.std.guice.hibernate.usertype.SampleCountUserTypeTest
Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 sec - in com.peterphi.std.guice.hibernate.usertype.SampleCountUserTypeTest
Running com.peterphi.std.guice.hibernate.usertype.TimecodeUserTypeTest
Tests run: 7, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.002 sec - in com.peterphi.std.guice.hibernate.usertype.TimecodeUserTypeTest
Running com.peterphi.std.guice.hibernate.usertype.datetime.DateTimeUserTypeVersionFieldTest
2021-12-11 17:23:12,388 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.usertype.datetime.ObjWithDateTimeVersionField
2021-12-11 17:23:12,388 TRACE Evaluate HibernateConfigurationValidators. has at least one=false
2021-12-11 17:23:12,392  WARN HHH10001002: Using Hibernate built-in connection pool (not for production use!)
Hibernate: drop table test_entity if exists
Hibernate: drop sequence hibernate_sequence if exists
Hibernate: create sequence hibernate_sequence start with 1 increment by 1
Hibernate: create table test_entity (id bigint not null, updated_ts bigint not null, primary key (id))
2021-12-11 17:23:12,406 TRACE Hibernate Setup Complete.
2021-12-11 17:23:12,406 DEBUG Known entities: [test_entity]
2021-12-11 17:23:12,406 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.usertype.datetime.ObjWithDateTimeVersionField
2021-12-11 17:23:12,406 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.usertype.datetime.ObjWithDateTimeVersionField
2021-12-11 17:23:12,407 TRACE Creating new transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:12,407 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@65bbabfc
Hibernate: insert into test_entity (updated_ts, id) values (?, ?)
2021-12-11 17:23:12,408 TRACE Creating new transaction to call public T com.peterphi.std.guice.hibernate.dao.HibernateDao.getById(ID)
Hibernate: select objwithdat0_.id as id1_0_0_, objwithdat0_.updated_ts as updated_2_0_0_ from test_entity objwithdat0_ where objwithdat0_.id=?
2021-12-11 17:23:12,409 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@6d532813
2021-12-11 17:23:12,410 TRACE Creating new transaction to call public void com.peterphi.std.guice.hibernate.dao.HibernateDao.update(T)
2021-12-11 17:23:12,411 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@577953cb
Hibernate: update test_entity set updated_ts=? where id=? and updated_ts=?
2021-12-11 17:23:12,414  INFO Shut down Hibernate SessionFactory...
2021-12-11 17:23:12,414 TRACE Creating new transaction to call void com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider.runShutDownSQL()
2021-12-11 17:23:12,414 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@4480b27
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.246 sec - in com.peterphi.std.guice.hibernate.usertype.datetime.DateTimeUserTypeVersionFieldTest
Running com.peterphi.std.guice.hibernate.usertype.localdate.LocalDateUserTypeTest
2021-12-11 17:23:12,665 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.usertype.localdate.LocalDateEntity
2021-12-11 17:23:12,666 TRACE Evaluate HibernateConfigurationValidators. has at least one=false
2021-12-11 17:23:12,668  WARN HHH10001002: Using Hibernate built-in connection pool (not for production use!)
Hibernate: drop table test_entity if exists
Hibernate: drop sequence hibernate_sequence if exists
Hibernate: create sequence hibernate_sequence start with 1 increment by 1
Hibernate: create table test_entity (id bigint not null, some_date date not null, some_date_nullable date, primary key (id))
2021-12-11 17:23:12,678 TRACE Hibernate Setup Complete.
2021-12-11 17:23:12,678 DEBUG Known entities: [test_entity]
2021-12-11 17:23:12,678 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.usertype.localdate.LocalDateEntity
2021-12-11 17:23:12,678 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.usertype.localdate.LocalDateEntity
2021-12-11 17:23:12,695 TRACE Creating new transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:12,696 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@3f1d358d
Hibernate: insert into test_entity (some_date, some_date_nullable, id) values (?, ?, ?)
2021-12-11 17:23:12,698 TRACE Creating new transaction to call public T com.peterphi.std.guice.hibernate.dao.HibernateDao.getById(ID)
Hibernate: select localdatee0_.id as id1_0_0_, localdatee0_.some_date as some_dat2_0_0_, localdatee0_.some_date_nullable as some_dat3_0_0_ from test_entity localdatee0_ where localdatee0_.id=?
2021-12-11 17:23:12,699 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@279da001
2021-12-11 17:23:12,699 TRACE Creating new transaction to call public void com.peterphi.std.guice.hibernate.dao.HibernateDao.update(T)
2021-12-11 17:23:12,699 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@2e43f0ef
Hibernate: update test_entity set some_date=?, some_date_nullable=? where id=?
2021-12-11 17:23:12,700  INFO Shut down Hibernate SessionFactory...
2021-12-11 17:23:12,700 TRACE Creating new transaction to call void com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider.runShutDownSQL()
2021-12-11 17:23:12,701 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@715059be
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.284 sec - in com.peterphi.std.guice.hibernate.usertype.localdate.LocalDateUserTypeTest
Running com.peterphi.std.guice.hibernate.webquery.DynamicQueryTest
2021-12-11 17:23:13,158 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.embeddedpktest.EmbeddedPkEntity
2021-12-11 17:23:13,158 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject2
2021-12-11 17:23:13,158 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject1
2021-12-11 17:23:13,158 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyBaseObject
2021-12-11 17:23:13,158 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.ParentEntity
2021-12-11 17:23:13,158 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.MappedSuperclassEntity
2021-12-11 17:23:13,158 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.ChildEntity
2021-12-11 17:23:13,158 TRACE Evaluate HibernateConfigurationValidators. has at least one=false
2021-12-11 17:23:13,163  WARN HHH10001002: Using Hibernate built-in connection pool (not for production use!)
Hibernate: alter table ChildEntity drop constraint FKj7t557e8a7axr8jinbltht20y
2021-12-11 17:23:13,215  WARN GenerationTarget encountered exception accepting command : Error executing DDL via JDBC Statement
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL via JDBC Statement
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:67)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlString(SchemaDropperImpl.java:375)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlStrings(SchemaDropperImpl.java:359)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:331)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:230)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:154)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:126)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:112)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:144)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:72)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:313)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:452)
	at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:710)
	at com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider.get(HibernateSessionFactoryProvider.java:53)
	at com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider.get(HibernateSessionFactoryProvider.java:20)
	at com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider$$EnhancerByGuice$$e9bc367e.get(<generated>)
	at com.google.inject.internal.ProviderInternalFactory.provision(ProviderInternalFactory.java:81)
	at com.google.inject.internal.BoundProviderFactory.provision(BoundProviderFactory.java:72)
	at com.google.inject.internal.ProviderInternalFactory.circularGet(ProviderInternalFactory.java:61)
	at com.google.inject.internal.BoundProviderFactory.get(BoundProviderFactory.java:62)
	at com.google.inject.internal.ProviderToInternalFactoryAdapter$1.call(ProviderToInternalFactoryAdapter.java:46)
	at com.google.inject.internal.InjectorImpl.callInContext(InjectorImpl.java:1103)
	at com.google.inject.internal.ProviderToInternalFactoryAdapter.get(ProviderToInternalFactoryAdapter.java:40)
	at com.google.inject.internal.SingletonScope$1.get(SingletonScope.java:145)
	at com.google.inject.internal.InternalFactoryToProviderAdapter.get(InternalFactoryToProviderAdapter.java:41)
	at com.google.inject.internal.SingleFieldInjector.inject(SingleFieldInjector.java:54)
	at com.google.inject.internal.MembersInjectorImpl.injectMembers(MembersInjectorImpl.java:132)
	at com.google.inject.internal.ConstructorInjector.provision(ConstructorInjector.java:114)
	at com.google.inject.internal.ConstructorInjector.construct(ConstructorInjector.java:85)
	at com.google.inject.internal.ConstructorBindingImpl$Factory.get(ConstructorBindingImpl.java:267)
	at com.google.inject.internal.SingleFieldInjector.inject(SingleFieldInjector.java:54)
	at com.google.inject.internal.MembersInjectorImpl.injectMembers(MembersInjectorImpl.java:132)
	at com.google.inject.internal.ConstructorInjector.provision(ConstructorInjector.java:114)
	at com.google.inject.internal.ConstructorInjector.construct(ConstructorInjector.java:85)
	at com.google.inject.internal.ConstructorBindingImpl$Factory.get(ConstructorBindingImpl.java:267)
	at com.google.inject.internal.InjectorImpl$2$1.call(InjectorImpl.java:1016)
	at com.google.inject.internal.InjectorImpl.callInContext(InjectorImpl.java:1092)
	at com.google.inject.internal.InjectorImpl$2.get(InjectorImpl.java:1012)
	at com.google.inject.internal.InjectorImpl.getInstance(InjectorImpl.java:1051)
	at com.peterphi.std.guice.testing.GuiceUnit.createTest(GuiceUnit.java:50)
	at org.junit.runners.BlockJUnit4ClassRunner$1.runReflectiveCall(BlockJUnit4ClassRunner.java:266)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.BlockJUnit4ClassRunner.methodBlock(BlockJUnit4ClassRunner.java:263)
	at com.peterphi.std.guice.testing.GuiceUnit.methodBlock(GuiceUnit.java:57)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at com.peterphi.std.guice.testing.GuiceUnit.run(GuiceUnit.java:78)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:344)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:269)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:240)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:184)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:286)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:240)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:121)
Caused by: java.sql.SQLSyntaxErrorException: user lacks privilege or object not found: PUBLIC.CHILDENTITY
	at org.hsqldb.jdbc.JDBCUtil.sqlException(Unknown Source)
	at org.hsqldb.jdbc.JDBCUtil.sqlException(Unknown Source)
	at org.hsqldb.jdbc.JDBCStatement.fetchResult(Unknown Source)
	at org.hsqldb.jdbc.JDBCStatement.execute(Unknown Source)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:54)
	... 59 more
Caused by: org.hsqldb.HsqlException: user lacks privilege or object not found: PUBLIC.CHILDENTITY
	at org.hsqldb.error.Error.error(Unknown Source)
	at org.hsqldb.error.Error.error(Unknown Source)
	at org.hsqldb.SchemaManager.getUserTable(Unknown Source)
	at org.hsqldb.ParserDDL.compileAlterTable(Unknown Source)
	at org.hsqldb.ParserDDL.compileAlter(Unknown Source)
	at org.hsqldb.ParserCommand.compilePart(Unknown Source)
	at org.hsqldb.ParserCommand.compileStatements(Unknown Source)
	at org.hsqldb.Session.executeDirectStatement(Unknown Source)
	at org.hsqldb.Session.execute(Unknown Source)
	... 62 more
Hibernate: alter table inherit_one drop constraint FKlu6huhy2g08akv8wpudpfvqir
2021-12-11 17:23:13,217  WARN GenerationTarget encountered exception accepting command : Error executing DDL via JDBC Statement
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL via JDBC Statement
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:67)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlString(SchemaDropperImpl.java:375)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlStrings(SchemaDropperImpl.java:359)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:331)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:230)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:154)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:126)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:112)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:144)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:72)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:313)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:452)
	at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:710)
	at com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider.get(HibernateSessionFactoryProvider.java:53)
	at com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider.get(HibernateSessionFactoryProvider.java:20)
	at com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider$$EnhancerByGuice$$e9bc367e.get(<generated>)
	at com.google.inject.internal.ProviderInternalFactory.provision(ProviderInternalFactory.java:81)
	at com.google.inject.internal.BoundProviderFactory.provision(BoundProviderFactory.java:72)
	at com.google.inject.internal.ProviderInternalFactory.circularGet(ProviderInternalFactory.java:61)
	at com.google.inject.internal.BoundProviderFactory.get(BoundProviderFactory.java:62)
	at com.google.inject.internal.ProviderToInternalFactoryAdapter$1.call(ProviderToInternalFactoryAdapter.java:46)
	at com.google.inject.internal.InjectorImpl.callInContext(InjectorImpl.java:1103)
	at com.google.inject.internal.ProviderToInternalFactoryAdapter.get(ProviderToInternalFactoryAdapter.java:40)
	at com.google.inject.internal.SingletonScope$1.get(SingletonScope.java:145)
	at com.google.inject.internal.InternalFactoryToProviderAdapter.get(InternalFactoryToProviderAdapter.java:41)
	at com.google.inject.internal.SingleFieldInjector.inject(SingleFieldInjector.java:54)
	at com.google.inject.internal.MembersInjectorImpl.injectMembers(MembersInjectorImpl.java:132)
	at com.google.inject.internal.ConstructorInjector.provision(ConstructorInjector.java:114)
	at com.google.inject.internal.ConstructorInjector.construct(ConstructorInjector.java:85)
	at com.google.inject.internal.ConstructorBindingImpl$Factory.get(ConstructorBindingImpl.java:267)
	at com.google.inject.internal.SingleFieldInjector.inject(SingleFieldInjector.java:54)
	at com.google.inject.internal.MembersInjectorImpl.injectMembers(MembersInjectorImpl.java:132)
	at com.google.inject.internal.ConstructorInjector.provision(ConstructorInjector.java:114)
	at com.google.inject.internal.ConstructorInjector.construct(ConstructorInjector.java:85)
	at com.google.inject.internal.ConstructorBindingImpl$Factory.get(ConstructorBindingImpl.java:267)
	at com.google.inject.internal.InjectorImpl$2$1.call(InjectorImpl.java:1016)
	at com.google.inject.internal.InjectorImpl.callInContext(InjectorImpl.java:1092)
	at com.google.inject.internal.InjectorImpl$2.get(InjectorImpl.java:1012)
	at com.google.inject.internal.InjectorImpl.getInstance(InjectorImpl.java:1051)
	at com.peterphi.std.guice.testing.GuiceUnit.createTest(GuiceUnit.java:50)
	at org.junit.runners.BlockJUnit4ClassRunner$1.runReflectiveCall(BlockJUnit4ClassRunner.java:266)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.BlockJUnit4ClassRunner.methodBlock(BlockJUnit4ClassRunner.java:263)
	at com.peterphi.std.guice.testing.GuiceUnit.methodBlock(GuiceUnit.java:57)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at com.peterphi.std.guice.testing.GuiceUnit.run(GuiceUnit.java:78)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:344)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:269)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:240)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:184)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:286)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:240)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:121)
Caused by: java.sql.SQLSyntaxErrorException: user lacks privilege or object not found: PUBLIC.INHERIT_ONE
	at org.hsqldb.jdbc.JDBCUtil.sqlException(Unknown Source)
	at org.hsqldb.jdbc.JDBCUtil.sqlException(Unknown Source)
	at org.hsqldb.jdbc.JDBCStatement.fetchResult(Unknown Source)
	at org.hsqldb.jdbc.JDBCStatement.execute(Unknown Source)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:54)
	... 59 more
Caused by: org.hsqldb.HsqlException: user lacks privilege or object not found: PUBLIC.INHERIT_ONE
	at org.hsqldb.error.Error.error(Unknown Source)
	at org.hsqldb.error.Error.error(Unknown Source)
	at org.hsqldb.SchemaManager.getUserTable(Unknown Source)
	at org.hsqldb.ParserDDL.compileAlterTable(Unknown Source)
	at org.hsqldb.ParserDDL.compileAlter(Unknown Source)
	at org.hsqldb.ParserCommand.compilePart(Unknown Source)
	at org.hsqldb.ParserCommand.compileStatements(Unknown Source)
	at org.hsqldb.Session.executeDirectStatement(Unknown Source)
	at org.hsqldb.Session.execute(Unknown Source)
	... 62 more
Hibernate: alter table inherit_two drop constraint FKe5yjuoa6qr80cm4gcilq1gubk
2021-12-11 17:23:13,218  WARN GenerationTarget encountered exception accepting command : Error executing DDL via JDBC Statement
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL via JDBC Statement
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:67)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlString(SchemaDropperImpl.java:375)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlStrings(SchemaDropperImpl.java:359)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:331)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:230)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:154)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:126)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:112)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:144)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:72)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:313)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:452)
	at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:710)
	at com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider.get(HibernateSessionFactoryProvider.java:53)
	at com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider.get(HibernateSessionFactoryProvider.java:20)
	at com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider$$EnhancerByGuice$$e9bc367e.get(<generated>)
	at com.google.inject.internal.ProviderInternalFactory.provision(ProviderInternalFactory.java:81)
	at com.google.inject.internal.BoundProviderFactory.provision(BoundProviderFactory.java:72)
	at com.google.inject.internal.ProviderInternalFactory.circularGet(ProviderInternalFactory.java:61)
	at com.google.inject.internal.BoundProviderFactory.get(BoundProviderFactory.java:62)
	at com.google.inject.internal.ProviderToInternalFactoryAdapter$1.call(ProviderToInternalFactoryAdapter.java:46)
	at com.google.inject.internal.InjectorImpl.callInContext(InjectorImpl.java:1103)
	at com.google.inject.internal.ProviderToInternalFactoryAdapter.get(ProviderToInternalFactoryAdapter.java:40)
	at com.google.inject.internal.SingletonScope$1.get(SingletonScope.java:145)
	at com.google.inject.internal.InternalFactoryToProviderAdapter.get(InternalFactoryToProviderAdapter.java:41)
	at com.google.inject.internal.SingleFieldInjector.inject(SingleFieldInjector.java:54)
	at com.google.inject.internal.MembersInjectorImpl.injectMembers(MembersInjectorImpl.java:132)
	at com.google.inject.internal.ConstructorInjector.provision(ConstructorInjector.java:114)
	at com.google.inject.internal.ConstructorInjector.construct(ConstructorInjector.java:85)
	at com.google.inject.internal.ConstructorBindingImpl$Factory.get(ConstructorBindingImpl.java:267)
	at com.google.inject.internal.SingleFieldInjector.inject(SingleFieldInjector.java:54)
	at com.google.inject.internal.MembersInjectorImpl.injectMembers(MembersInjectorImpl.java:132)
	at com.google.inject.internal.ConstructorInjector.provision(ConstructorInjector.java:114)
	at com.google.inject.internal.ConstructorInjector.construct(ConstructorInjector.java:85)
	at com.google.inject.internal.ConstructorBindingImpl$Factory.get(ConstructorBindingImpl.java:267)
	at com.google.inject.internal.InjectorImpl$2$1.call(InjectorImpl.java:1016)
	at com.google.inject.internal.InjectorImpl.callInContext(InjectorImpl.java:1092)
	at com.google.inject.internal.InjectorImpl$2.get(InjectorImpl.java:1012)
	at com.google.inject.internal.InjectorImpl.getInstance(InjectorImpl.java:1051)
	at com.peterphi.std.guice.testing.GuiceUnit.createTest(GuiceUnit.java:50)
	at org.junit.runners.BlockJUnit4ClassRunner$1.runReflectiveCall(BlockJUnit4ClassRunner.java:266)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.BlockJUnit4ClassRunner.methodBlock(BlockJUnit4ClassRunner.java:263)
	at com.peterphi.std.guice.testing.GuiceUnit.methodBlock(GuiceUnit.java:57)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at com.peterphi.std.guice.testing.GuiceUnit.run(GuiceUnit.java:78)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:344)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:269)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:240)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:184)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:286)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:240)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:121)
Caused by: java.sql.SQLSyntaxErrorException: user lacks privilege or object not found: PUBLIC.INHERIT_TWO
	at org.hsqldb.jdbc.JDBCUtil.sqlException(Unknown Source)
	at org.hsqldb.jdbc.JDBCUtil.sqlException(Unknown Source)
	at org.hsqldb.jdbc.JDBCStatement.fetchResult(Unknown Source)
	at org.hsqldb.jdbc.JDBCStatement.execute(Unknown Source)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:54)
	... 59 more
Caused by: org.hsqldb.HsqlException: user lacks privilege or object not found: PUBLIC.INHERIT_TWO
	at org.hsqldb.error.Error.error(Unknown Source)
	at org.hsqldb.error.Error.error(Unknown Source)
	at org.hsqldb.SchemaManager.getUserTable(Unknown Source)
	at org.hsqldb.ParserDDL.compileAlterTable(Unknown Source)
	at org.hsqldb.ParserDDL.compileAlter(Unknown Source)
	at org.hsqldb.ParserCommand.compilePart(Unknown Source)
	at org.hsqldb.ParserCommand.compileStatements(Unknown Source)
	at org.hsqldb.Session.executeDirectStatement(Unknown Source)
	at org.hsqldb.Session.execute(Unknown Source)
	... 62 more
Hibernate: alter table parent_friends drop constraint FKn858qj6gf7i97mfmurc47k6e8
2021-12-11 17:23:13,219  WARN GenerationTarget encountered exception accepting command : Error executing DDL via JDBC Statement
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL via JDBC Statement
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:67)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlString(SchemaDropperImpl.java:375)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlStrings(SchemaDropperImpl.java:359)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:331)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:230)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:154)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:126)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:112)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:144)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:72)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:313)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:452)
	at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:710)
	at com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider.get(HibernateSessionFactoryProvider.java:53)
	at com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider.get(HibernateSessionFactoryProvider.java:20)
	at com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider$$EnhancerByGuice$$e9bc367e.get(<generated>)
	at com.google.inject.internal.ProviderInternalFactory.provision(ProviderInternalFactory.java:81)
	at com.google.inject.internal.BoundProviderFactory.provision(BoundProviderFactory.java:72)
	at com.google.inject.internal.ProviderInternalFactory.circularGet(ProviderInternalFactory.java:61)
	at com.google.inject.internal.BoundProviderFactory.get(BoundProviderFactory.java:62)
	at com.google.inject.internal.ProviderToInternalFactoryAdapter$1.call(ProviderToInternalFactoryAdapter.java:46)
	at com.google.inject.internal.InjectorImpl.callInContext(InjectorImpl.java:1103)
	at com.google.inject.internal.ProviderToInternalFactoryAdapter.get(ProviderToInternalFactoryAdapter.java:40)
	at com.google.inject.internal.SingletonScope$1.get(SingletonScope.java:145)
	at com.google.inject.internal.InternalFactoryToProviderAdapter.get(InternalFactoryToProviderAdapter.java:41)
	at com.google.inject.internal.SingleFieldInjector.inject(SingleFieldInjector.java:54)
	at com.google.inject.internal.MembersInjectorImpl.injectMembers(MembersInjectorImpl.java:132)
	at com.google.inject.internal.ConstructorInjector.provision(ConstructorInjector.java:114)
	at com.google.inject.internal.ConstructorInjector.construct(ConstructorInjector.java:85)
	at com.google.inject.internal.ConstructorBindingImpl$Factory.get(ConstructorBindingImpl.java:267)
	at com.google.inject.internal.SingleFieldInjector.inject(SingleFieldInjector.java:54)
	at com.google.inject.internal.MembersInjectorImpl.injectMembers(MembersInjectorImpl.java:132)
	at com.google.inject.internal.ConstructorInjector.provision(ConstructorInjector.java:114)
	at com.google.inject.internal.ConstructorInjector.construct(ConstructorInjector.java:85)
	at com.google.inject.internal.ConstructorBindingImpl$Factory.get(ConstructorBindingImpl.java:267)
	at com.google.inject.internal.InjectorImpl$2$1.call(InjectorImpl.java:1016)
	at com.google.inject.internal.InjectorImpl.callInContext(InjectorImpl.java:1092)
	at com.google.inject.internal.InjectorImpl$2.get(InjectorImpl.java:1012)
	at com.google.inject.internal.InjectorImpl.getInstance(InjectorImpl.java:1051)
	at com.peterphi.std.guice.testing.GuiceUnit.createTest(GuiceUnit.java:50)
	at org.junit.runners.BlockJUnit4ClassRunner$1.runReflectiveCall(BlockJUnit4ClassRunner.java:266)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.BlockJUnit4ClassRunner.methodBlock(BlockJUnit4ClassRunner.java:263)
	at com.peterphi.std.guice.testing.GuiceUnit.methodBlock(GuiceUnit.java:57)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at com.peterphi.std.guice.testing.GuiceUnit.run(GuiceUnit.java:78)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:344)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:269)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:240)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:184)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:286)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:240)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:121)
Caused by: java.sql.SQLSyntaxErrorException: user lacks privilege or object not found: PUBLIC.PARENT_FRIENDS
	at org.hsqldb.jdbc.JDBCUtil.sqlException(Unknown Source)
	at org.hsqldb.jdbc.JDBCUtil.sqlException(Unknown Source)
	at org.hsqldb.jdbc.JDBCStatement.fetchResult(Unknown Source)
	at org.hsqldb.jdbc.JDBCStatement.execute(Unknown Source)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:54)
	... 59 more
Caused by: org.hsqldb.HsqlException: user lacks privilege or object not found: PUBLIC.PARENT_FRIENDS
	at org.hsqldb.error.Error.error(Unknown Source)
	at org.hsqldb.error.Error.error(Unknown Source)
	at org.hsqldb.SchemaManager.getUserTable(Unknown Source)
	at org.hsqldb.ParserDDL.compileAlterTable(Unknown Source)
	at org.hsqldb.ParserDDL.compileAlter(Unknown Source)
	at org.hsqldb.ParserCommand.compilePart(Unknown Source)
	at org.hsqldb.ParserCommand.compileStatements(Unknown Source)
	at org.hsqldb.Session.executeDirectStatement(Unknown Source)
	at org.hsqldb.Session.execute(Unknown Source)
	... 62 more
Hibernate: alter table ParentEntity drop constraint FKd0cteits00p7vm083x9iod1lw
2021-12-11 17:23:13,220  WARN GenerationTarget encountered exception accepting command : Error executing DDL via JDBC Statement
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL via JDBC Statement
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:67)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlString(SchemaDropperImpl.java:375)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlStrings(SchemaDropperImpl.java:359)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:331)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:230)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:154)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:126)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:112)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:144)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:72)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:313)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:452)
	at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:710)
	at com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider.get(HibernateSessionFactoryProvider.java:53)
	at com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider.get(HibernateSessionFactoryProvider.java:20)
	at com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider$$EnhancerByGuice$$e9bc367e.get(<generated>)
	at com.google.inject.internal.ProviderInternalFactory.provision(ProviderInternalFactory.java:81)
	at com.google.inject.internal.BoundProviderFactory.provision(BoundProviderFactory.java:72)
	at com.google.inject.internal.ProviderInternalFactory.circularGet(ProviderInternalFactory.java:61)
	at com.google.inject.internal.BoundProviderFactory.get(BoundProviderFactory.java:62)
	at com.google.inject.internal.ProviderToInternalFactoryAdapter$1.call(ProviderToInternalFactoryAdapter.java:46)
	at com.google.inject.internal.InjectorImpl.callInContext(InjectorImpl.java:1103)
	at com.google.inject.internal.ProviderToInternalFactoryAdapter.get(ProviderToInternalFactoryAdapter.java:40)
	at com.google.inject.internal.SingletonScope$1.get(SingletonScope.java:145)
	at com.google.inject.internal.InternalFactoryToProviderAdapter.get(InternalFactoryToProviderAdapter.java:41)
	at com.google.inject.internal.SingleFieldInjector.inject(SingleFieldInjector.java:54)
	at com.google.inject.internal.MembersInjectorImpl.injectMembers(MembersInjectorImpl.java:132)
	at com.google.inject.internal.ConstructorInjector.provision(ConstructorInjector.java:114)
	at com.google.inject.internal.ConstructorInjector.construct(ConstructorInjector.java:85)
	at com.google.inject.internal.ConstructorBindingImpl$Factory.get(ConstructorBindingImpl.java:267)
	at com.google.inject.internal.SingleFieldInjector.inject(SingleFieldInjector.java:54)
	at com.google.inject.internal.MembersInjectorImpl.injectMembers(MembersInjectorImpl.java:132)
	at com.google.inject.internal.ConstructorInjector.provision(ConstructorInjector.java:114)
	at com.google.inject.internal.ConstructorInjector.construct(ConstructorInjector.java:85)
	at com.google.inject.internal.ConstructorBindingImpl$Factory.get(ConstructorBindingImpl.java:267)
	at com.google.inject.internal.InjectorImpl$2$1.call(InjectorImpl.java:1016)
	at com.google.inject.internal.InjectorImpl.callInContext(InjectorImpl.java:1092)
	at com.google.inject.internal.InjectorImpl$2.get(InjectorImpl.java:1012)
	at com.google.inject.internal.InjectorImpl.getInstance(InjectorImpl.java:1051)
	at com.peterphi.std.guice.testing.GuiceUnit.createTest(GuiceUnit.java:50)
	at org.junit.runners.BlockJUnit4ClassRunner$1.runReflectiveCall(BlockJUnit4ClassRunner.java:266)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.BlockJUnit4ClassRunner.methodBlock(BlockJUnit4ClassRunner.java:263)
	at com.peterphi.std.guice.testing.GuiceUnit.methodBlock(GuiceUnit.java:57)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at com.peterphi.std.guice.testing.GuiceUnit.run(GuiceUnit.java:78)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:344)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:269)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:240)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:184)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:286)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:240)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:121)
Caused by: java.sql.SQLSyntaxErrorException: user lacks privilege or object not found: PUBLIC.PARENTENTITY
	at org.hsqldb.jdbc.JDBCUtil.sqlException(Unknown Source)
	at org.hsqldb.jdbc.JDBCUtil.sqlException(Unknown Source)
	at org.hsqldb.jdbc.JDBCStatement.fetchResult(Unknown Source)
	at org.hsqldb.jdbc.JDBCStatement.execute(Unknown Source)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:54)
	... 59 more
Caused by: org.hsqldb.HsqlException: user lacks privilege or object not found: PUBLIC.PARENTENTITY
	at org.hsqldb.error.Error.error(Unknown Source)
	at org.hsqldb.error.Error.error(Unknown Source)
	at org.hsqldb.SchemaManager.getUserTable(Unknown Source)
	at org.hsqldb.ParserDDL.compileAlterTable(Unknown Source)
	at org.hsqldb.ParserDDL.compileAlter(Unknown Source)
	at org.hsqldb.ParserCommand.compilePart(Unknown Source)
	at org.hsqldb.ParserCommand.compileStatements(Unknown Source)
	at org.hsqldb.Session.executeDirectStatement(Unknown Source)
	at org.hsqldb.Session.execute(Unknown Source)
	... 62 more
Hibernate: drop table ChildEntity if exists
Hibernate: drop table EmbeddedPkEntity if exists
Hibernate: drop table inherit_base if exists
Hibernate: drop table inherit_one if exists
Hibernate: drop table inherit_two if exists
Hibernate: drop table mapped_superclass_test_entity if exists
Hibernate: drop table parent_friends if exists
Hibernate: drop table ParentEntity if exists
Hibernate: drop sequence hibernate_sequence if exists
Hibernate: create sequence hibernate_sequence start with 1 increment by 1
Hibernate: create table ChildEntity (id bigint not null, obj_name varchar(255), parent_id bigint, primary key (id))
Hibernate: create table EmbeddedPkEntity (id varchar(255) not null, timestamp bigint not null, some_name varchar(255), primary key (id, timestamp))
Hibernate: create table inherit_base (id bigint not null, primary key (id))
Hibernate: create table inherit_one (someId varchar(255), id bigint not null, primary key (id))
Hibernate: create table inherit_two (id bigint not null, primary key (id))
Hibernate: create table mapped_superclass_test_entity (id bigint not null, created bigint, updated bigint, obj_name varchar(255), primary key (id))
Hibernate: create table parent_friends (parent_id bigint not null, firstName varchar(255), fullName varchar(255), lastName varchar(255), sortName varchar(255))
Hibernate: create table ParentEntity (id bigint not null, deprecated boolean, obj_name varchar(255), someBytes blob(255), other_object_id bigint, primary key (id))
Hibernate: alter table ChildEntity add constraint FKj7t557e8a7axr8jinbltht20y foreign key (parent_id) references ParentEntity
Hibernate: alter table inherit_one add constraint FKlu6huhy2g08akv8wpudpfvqir foreign key (id) references inherit_base
Hibernate: alter table inherit_two add constraint FKe5yjuoa6qr80cm4gcilq1gubk foreign key (id) references inherit_base
Hibernate: alter table parent_friends add constraint FKn858qj6gf7i97mfmurc47k6e8 foreign key (parent_id) references ParentEntity
Hibernate: alter table ParentEntity add constraint FKd0cteits00p7vm083x9iod1lw foreign key (other_object_id) references ChildEntity
2021-12-11 17:23:13,226 TRACE Hibernate Setup Complete.
2021-12-11 17:23:13,226 DEBUG Known entities: [inherit_two, ChildEntity, inherit_base, mapped_superclass_test_entity, ParentEntity, inherit_one, EmbeddedPkEntity]
2021-12-11 17:23:13,226 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject2
2021-12-11 17:23:13,226 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject2
2021-12-11 17:23:13,226 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.ChildEntity
2021-12-11 17:23:13,226 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.ParentEntity
2021-12-11 17:23:13,226 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.HumanEmbeddedEntity from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@416eaa02
2021-12-11 17:23:13,226 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.HumanEmbeddedEntity from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@416eaa02
2021-12-11 17:23:13,227 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.ParentEntity
2021-12-11 17:23:13,227 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.ChildEntity
2021-12-11 17:23:13,227 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.MappedSuperclassEntity
2021-12-11 17:23:13,227 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.MappedSuperclassEntity
2021-12-11 17:23:13,227 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject1
2021-12-11 17:23:13,227 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject1
2021-12-11 17:23:13,227 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.EmbeddedPkEntity
2021-12-11 17:23:13,227 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.SomePrimaryKey from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@76917a4e
2021-12-11 17:23:13,227 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.SomePrimaryKey from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@76917a4e
2021-12-11 17:23:13,227 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.EmbeddedPkEntity
2021-12-11 17:23:13,228 TRACE Creating new transaction to call public void com.peterphi.std.guice.hibernate.webquery.DynamicQueryTest.clearDatabaseBeforeTest()
2021-12-11 17:23:13,230 TRACE Joining existing transaction to call public java.util.List<T> com.peterphi.std.guice.hibernate.dao.HibernateDao.getAll()
2021-12-11 17:23:13,231 TRACE Joining existing transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select childentit0_.id as id1_0_0_, parententi1_.id as id1_7_1_, childentit0_.obj_name as obj_name2_0_0_, childentit0_.parent_id as parent_i3_0_0_, friends2_.parent_id as parent_i1_6_0__, friends2_.firstName as firstNam2_6_0__, friends2_.fullName as fullName3_6_0__, friends2_.lastName as lastName4_6_0__, friends2_.sortName as sortName5_6_0__, parententi1_.deprecated as deprecat2_7_1_, parententi1_.obj_name as obj_name3_7_1_, parententi1_.other_object_id as other_ob5_7_1_, parententi1_.someBytes as someByte4_7_1_, friends2_.parent_id as parent_i1_6_0__, friends2_.firstName as firstNam2_6_0__, friends2_.fullName as fullName3_6_0__, friends2_.lastName as lastName4_6_0__, friends2_.sortName as sortName5_6_0__ from ChildEntity childentit0_ left outer join ParentEntity parententi1_ on childentit0_.parent_id=parententi1_.id left outer join parent_friends friends2_ on parententi1_.id=friends2_.parent_id where 1=1
2021-12-11 17:23:13,236 TRACE Joining existing transaction to call public java.util.List<T> com.peterphi.std.guice.hibernate.dao.HibernateDao.getAll()
2021-12-11 17:23:13,236 TRACE Joining existing transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select parententi0_.id as id1_7_, parententi0_.deprecated as deprecat2_7_, parententi0_.obj_name as obj_name3_7_, parententi0_.other_object_id as other_ob5_7_, parententi0_.someBytes as someByte4_7_, friends1_.parent_id as parent_i1_6_0__, friends1_.firstName as firstNam2_6_0__, friends1_.fullName as fullName3_6_0__, friends1_.lastName as lastName4_6_0__, friends1_.sortName as sortName5_6_0__ from ParentEntity parententi0_ left outer join parent_friends friends1_ on parententi0_.id=friends1_.parent_id where 1=1
2021-12-11 17:23:13,240 TRACE Joining existing transaction to call public java.util.List<T> com.peterphi.std.guice.hibernate.dao.HibernateDao.getAll()
2021-12-11 17:23:13,240 TRACE Joining existing transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select parententi0_.id as id1_7_, parententi0_.deprecated as deprecat2_7_, parententi0_.obj_name as obj_name3_7_, parententi0_.other_object_id as other_ob5_7_, parententi0_.someBytes as someByte4_7_, friends1_.parent_id as parent_i1_6_0__, friends1_.firstName as firstNam2_6_0__, friends1_.fullName as fullName3_6_0__, friends1_.lastName as lastName4_6_0__, friends1_.sortName as sortName5_6_0__ from ParentEntity parententi0_ left outer join parent_friends friends1_ on parententi0_.id=friends1_.parent_id where 1=1
2021-12-11 17:23:13,241 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@4c2d863
2021-12-11 17:23:13,242 TRACE Creating new transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select parententi0_.id as id1_7_, parententi0_.deprecated as deprecat2_7_, parententi0_.obj_name as obj_name3_7_, parententi0_.other_object_id as other_ob5_7_, parententi0_.someBytes as someByte4_7_, friends2_.parent_id as parent_i1_6_0__, friends2_.firstName as firstNam2_6_0__, friends2_.fullName as fullName3_6_0__, friends2_.lastName as lastName4_6_0__, friends2_.sortName as sortName5_6_0__ from ParentEntity parententi0_ left outer join ChildEntity childentit1_ on parententi0_.other_object_id=childentit1_.id left outer join parent_friends friends2_ on parententi0_.id=friends2_.parent_id where 1=1 order by childentit1_.obj_name asc
2021-12-11 17:23:13,246 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@1f7e2395
2021-12-11 17:23:13,246  INFO Shut down Hibernate SessionFactory...
2021-12-11 17:23:13,246 TRACE Creating new transaction to call void com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider.runShutDownSQL()
2021-12-11 17:23:13,246 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@6d645c87
2021-12-11 17:23:13,389 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.embeddedpktest.EmbeddedPkEntity
2021-12-11 17:23:13,389 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject2
2021-12-11 17:23:13,389 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject1
2021-12-11 17:23:13,389 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyBaseObject
2021-12-11 17:23:13,389 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.ParentEntity
2021-12-11 17:23:13,389 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.MappedSuperclassEntity
2021-12-11 17:23:13,390 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.ChildEntity
2021-12-11 17:23:13,390 TRACE Evaluate HibernateConfigurationValidators. has at least one=false
2021-12-11 17:23:13,395  WARN HHH10001002: Using Hibernate built-in connection pool (not for production use!)
Hibernate: alter table ChildEntity drop constraint FKj7t557e8a7axr8jinbltht20y
Hibernate: alter table inherit_one drop constraint FKlu6huhy2g08akv8wpudpfvqir
Hibernate: alter table inherit_two drop constraint FKe5yjuoa6qr80cm4gcilq1gubk
Hibernate: alter table parent_friends drop constraint FKn858qj6gf7i97mfmurc47k6e8
Hibernate: alter table ParentEntity drop constraint FKd0cteits00p7vm083x9iod1lw
Hibernate: drop table ChildEntity if exists
Hibernate: drop table EmbeddedPkEntity if exists
Hibernate: drop table inherit_base if exists
Hibernate: drop table inherit_one if exists
Hibernate: drop table inherit_two if exists
Hibernate: drop table mapped_superclass_test_entity if exists
Hibernate: drop table parent_friends if exists
Hibernate: drop table ParentEntity if exists
Hibernate: drop sequence hibernate_sequence if exists
Hibernate: create sequence hibernate_sequence start with 1 increment by 1
Hibernate: create table ChildEntity (id bigint not null, obj_name varchar(255), parent_id bigint, primary key (id))
Hibernate: create table EmbeddedPkEntity (id varchar(255) not null, timestamp bigint not null, some_name varchar(255), primary key (id, timestamp))
Hibernate: create table inherit_base (id bigint not null, primary key (id))
Hibernate: create table inherit_one (someId varchar(255), id bigint not null, primary key (id))
Hibernate: create table inherit_two (id bigint not null, primary key (id))
Hibernate: create table mapped_superclass_test_entity (id bigint not null, created bigint, updated bigint, obj_name varchar(255), primary key (id))
Hibernate: create table parent_friends (parent_id bigint not null, firstName varchar(255), fullName varchar(255), lastName varchar(255), sortName varchar(255))
Hibernate: create table ParentEntity (id bigint not null, deprecated boolean, obj_name varchar(255), someBytes blob(255), other_object_id bigint, primary key (id))
Hibernate: alter table ChildEntity add constraint FKj7t557e8a7axr8jinbltht20y foreign key (parent_id) references ParentEntity
Hibernate: alter table inherit_one add constraint FKlu6huhy2g08akv8wpudpfvqir foreign key (id) references inherit_base
Hibernate: alter table inherit_two add constraint FKe5yjuoa6qr80cm4gcilq1gubk foreign key (id) references inherit_base
Hibernate: alter table parent_friends add constraint FKn858qj6gf7i97mfmurc47k6e8 foreign key (parent_id) references ParentEntity
Hibernate: alter table ParentEntity add constraint FKd0cteits00p7vm083x9iod1lw foreign key (other_object_id) references ChildEntity
2021-12-11 17:23:13,433 TRACE Hibernate Setup Complete.
2021-12-11 17:23:13,433 DEBUG Known entities: [ParentEntity, mapped_superclass_test_entity, inherit_one, inherit_base, ChildEntity, inherit_two, EmbeddedPkEntity]
2021-12-11 17:23:13,433 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.ParentEntity
2021-12-11 17:23:13,434 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.ChildEntity
2021-12-11 17:23:13,434 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.ChildEntity
2021-12-11 17:23:13,434 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.HumanEmbeddedEntity from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@4c14e4c3
2021-12-11 17:23:13,434 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.HumanEmbeddedEntity from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@4c14e4c3
2021-12-11 17:23:13,434 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.ParentEntity
2021-12-11 17:23:13,434 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.MappedSuperclassEntity
2021-12-11 17:23:13,434 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.MappedSuperclassEntity
2021-12-11 17:23:13,434 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject1
2021-12-11 17:23:13,434 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject1
2021-12-11 17:23:13,434 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject2
2021-12-11 17:23:13,434 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject2
2021-12-11 17:23:13,434 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.EmbeddedPkEntity
2021-12-11 17:23:13,434 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.SomePrimaryKey from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@76a26976
2021-12-11 17:23:13,434 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.SomePrimaryKey from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@76a26976
2021-12-11 17:23:13,434 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.EmbeddedPkEntity
2021-12-11 17:23:13,435 TRACE Creating new transaction to call public void com.peterphi.std.guice.hibernate.webquery.DynamicQueryTest.clearDatabaseBeforeTest()
2021-12-11 17:23:13,435 TRACE Joining existing transaction to call public java.util.List<T> com.peterphi.std.guice.hibernate.dao.HibernateDao.getAll()
2021-12-11 17:23:13,435 TRACE Joining existing transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select childentit0_.id as id1_0_0_, parententi1_.id as id1_7_1_, childentit0_.obj_name as obj_name2_0_0_, childentit0_.parent_id as parent_i3_0_0_, friends2_.parent_id as parent_i1_6_0__, friends2_.firstName as firstNam2_6_0__, friends2_.fullName as fullName3_6_0__, friends2_.lastName as lastName4_6_0__, friends2_.sortName as sortName5_6_0__, parententi1_.deprecated as deprecat2_7_1_, parententi1_.obj_name as obj_name3_7_1_, parententi1_.other_object_id as other_ob5_7_1_, parententi1_.someBytes as someByte4_7_1_, friends2_.parent_id as parent_i1_6_0__, friends2_.firstName as firstNam2_6_0__, friends2_.fullName as fullName3_6_0__, friends2_.lastName as lastName4_6_0__, friends2_.sortName as sortName5_6_0__ from ChildEntity childentit0_ left outer join ParentEntity parententi1_ on childentit0_.parent_id=parententi1_.id left outer join parent_friends friends2_ on parententi1_.id=friends2_.parent_id where 1=1
2021-12-11 17:23:13,441 TRACE Joining existing transaction to call public java.util.List<T> com.peterphi.std.guice.hibernate.dao.HibernateDao.getAll()
2021-12-11 17:23:13,441 TRACE Joining existing transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select parententi0_.id as id1_7_, parententi0_.deprecated as deprecat2_7_, parententi0_.obj_name as obj_name3_7_, parententi0_.other_object_id as other_ob5_7_, parententi0_.someBytes as someByte4_7_, friends1_.parent_id as parent_i1_6_0__, friends1_.firstName as firstNam2_6_0__, friends1_.fullName as fullName3_6_0__, friends1_.lastName as lastName4_6_0__, friends1_.sortName as sortName5_6_0__ from ParentEntity parententi0_ left outer join parent_friends friends1_ on parententi0_.id=friends1_.parent_id where 1=1
2021-12-11 17:23:13,444 TRACE Joining existing transaction to call public java.util.List<T> com.peterphi.std.guice.hibernate.dao.HibernateDao.getAll()
2021-12-11 17:23:13,444 TRACE Joining existing transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select parententi0_.id as id1_7_, parententi0_.deprecated as deprecat2_7_, parententi0_.obj_name as obj_name3_7_, parententi0_.other_object_id as other_ob5_7_, parententi0_.someBytes as someByte4_7_, friends1_.parent_id as parent_i1_6_0__, friends1_.firstName as firstNam2_6_0__, friends1_.fullName as fullName3_6_0__, friends1_.lastName as lastName4_6_0__, friends1_.sortName as sortName5_6_0__ from ParentEntity parententi0_ left outer join parent_friends friends1_ on parententi0_.id=friends1_.parent_id where 1=1
2021-12-11 17:23:13,444 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@7f73d565
2021-12-11 17:23:13,446 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyBaseObject
2021-12-11 17:23:13,446 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyBaseObject
2021-12-11 17:23:13,469  INFO Shut down Hibernate SessionFactory...
2021-12-11 17:23:13,469 TRACE Creating new transaction to call void com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider.runShutDownSQL()
2021-12-11 17:23:13,470 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@a25f849
2021-12-11 17:23:13,626 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.embeddedpktest.EmbeddedPkEntity
2021-12-11 17:23:13,626 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject2
2021-12-11 17:23:13,626 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject1
2021-12-11 17:23:13,626 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyBaseObject
2021-12-11 17:23:13,626 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.ParentEntity
2021-12-11 17:23:13,626 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.MappedSuperclassEntity
2021-12-11 17:23:13,626 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.ChildEntity
2021-12-11 17:23:13,626 TRACE Evaluate HibernateConfigurationValidators. has at least one=false
2021-12-11 17:23:13,629  WARN HHH10001002: Using Hibernate built-in connection pool (not for production use!)
Hibernate: alter table ChildEntity drop constraint FKj7t557e8a7axr8jinbltht20y
Hibernate: alter table inherit_one drop constraint FKlu6huhy2g08akv8wpudpfvqir
Hibernate: alter table inherit_two drop constraint FKe5yjuoa6qr80cm4gcilq1gubk
Hibernate: alter table parent_friends drop constraint FKn858qj6gf7i97mfmurc47k6e8
Hibernate: alter table ParentEntity drop constraint FKd0cteits00p7vm083x9iod1lw
Hibernate: drop table ChildEntity if exists
Hibernate: drop table EmbeddedPkEntity if exists
Hibernate: drop table inherit_base if exists
Hibernate: drop table inherit_one if exists
Hibernate: drop table inherit_two if exists
Hibernate: drop table mapped_superclass_test_entity if exists
Hibernate: drop table parent_friends if exists
Hibernate: drop table ParentEntity if exists
Hibernate: drop sequence hibernate_sequence if exists
Hibernate: create sequence hibernate_sequence start with 1 increment by 1
Hibernate: create table ChildEntity (id bigint not null, obj_name varchar(255), parent_id bigint, primary key (id))
Hibernate: create table EmbeddedPkEntity (id varchar(255) not null, timestamp bigint not null, some_name varchar(255), primary key (id, timestamp))
Hibernate: create table inherit_base (id bigint not null, primary key (id))
Hibernate: create table inherit_one (someId varchar(255), id bigint not null, primary key (id))
Hibernate: create table inherit_two (id bigint not null, primary key (id))
Hibernate: create table mapped_superclass_test_entity (id bigint not null, created bigint, updated bigint, obj_name varchar(255), primary key (id))
Hibernate: create table parent_friends (parent_id bigint not null, firstName varchar(255), fullName varchar(255), lastName varchar(255), sortName varchar(255))
Hibernate: create table ParentEntity (id bigint not null, deprecated boolean, obj_name varchar(255), someBytes blob(255), other_object_id bigint, primary key (id))
Hibernate: alter table ChildEntity add constraint FKj7t557e8a7axr8jinbltht20y foreign key (parent_id) references ParentEntity
Hibernate: alter table inherit_one add constraint FKlu6huhy2g08akv8wpudpfvqir foreign key (id) references inherit_base
Hibernate: alter table inherit_two add constraint FKe5yjuoa6qr80cm4gcilq1gubk foreign key (id) references inherit_base
Hibernate: alter table parent_friends add constraint FKn858qj6gf7i97mfmurc47k6e8 foreign key (parent_id) references ParentEntity
Hibernate: alter table ParentEntity add constraint FKd0cteits00p7vm083x9iod1lw foreign key (other_object_id) references ChildEntity
2021-12-11 17:23:13,663 TRACE Hibernate Setup Complete.
2021-12-11 17:23:13,664 DEBUG Known entities: [EmbeddedPkEntity, ParentEntity, ChildEntity, inherit_two, inherit_base, inherit_one, mapped_superclass_test_entity]
2021-12-11 17:23:13,664 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.EmbeddedPkEntity
2021-12-11 17:23:13,664 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.SomePrimaryKey from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@4f5c72ad
2021-12-11 17:23:13,664 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.SomePrimaryKey from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@4f5c72ad
2021-12-11 17:23:13,664 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.EmbeddedPkEntity
2021-12-11 17:23:13,664 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.ParentEntity
2021-12-11 17:23:13,664 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.ChildEntity
2021-12-11 17:23:13,664 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.ChildEntity
2021-12-11 17:23:13,664 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.HumanEmbeddedEntity from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@4e7a5c30
2021-12-11 17:23:13,664 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.HumanEmbeddedEntity from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@4e7a5c30
2021-12-11 17:23:13,664 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.ParentEntity
2021-12-11 17:23:13,664 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject2
2021-12-11 17:23:13,664 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject2
2021-12-11 17:23:13,664 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject1
2021-12-11 17:23:13,664 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject1
2021-12-11 17:23:13,664 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.MappedSuperclassEntity
2021-12-11 17:23:13,664 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.MappedSuperclassEntity
2021-12-11 17:23:13,665 TRACE Creating new transaction to call public void com.peterphi.std.guice.hibernate.webquery.DynamicQueryTest.clearDatabaseBeforeTest()
2021-12-11 17:23:13,665 TRACE Joining existing transaction to call public java.util.List<T> com.peterphi.std.guice.hibernate.dao.HibernateDao.getAll()
2021-12-11 17:23:13,665 TRACE Joining existing transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select childentit0_.id as id1_0_0_, parententi1_.id as id1_7_1_, childentit0_.obj_name as obj_name2_0_0_, childentit0_.parent_id as parent_i3_0_0_, friends2_.parent_id as parent_i1_6_0__, friends2_.firstName as firstNam2_6_0__, friends2_.fullName as fullName3_6_0__, friends2_.lastName as lastName4_6_0__, friends2_.sortName as sortName5_6_0__, parententi1_.deprecated as deprecat2_7_1_, parententi1_.obj_name as obj_name3_7_1_, parententi1_.other_object_id as other_ob5_7_1_, parententi1_.someBytes as someByte4_7_1_, friends2_.parent_id as parent_i1_6_0__, friends2_.firstName as firstNam2_6_0__, friends2_.fullName as fullName3_6_0__, friends2_.lastName as lastName4_6_0__, friends2_.sortName as sortName5_6_0__ from ChildEntity childentit0_ left outer join ParentEntity parententi1_ on childentit0_.parent_id=parententi1_.id left outer join parent_friends friends2_ on parententi1_.id=friends2_.parent_id where 1=1
2021-12-11 17:23:13,671 TRACE Joining existing transaction to call public java.util.List<T> com.peterphi.std.guice.hibernate.dao.HibernateDao.getAll()
2021-12-11 17:23:13,671 TRACE Joining existing transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select parententi0_.id as id1_7_, parententi0_.deprecated as deprecat2_7_, parententi0_.obj_name as obj_name3_7_, parententi0_.other_object_id as other_ob5_7_, parententi0_.someBytes as someByte4_7_, friends1_.parent_id as parent_i1_6_0__, friends1_.firstName as firstNam2_6_0__, friends1_.fullName as fullName3_6_0__, friends1_.lastName as lastName4_6_0__, friends1_.sortName as sortName5_6_0__ from ParentEntity parententi0_ left outer join parent_friends friends1_ on parententi0_.id=friends1_.parent_id where 1=1
2021-12-11 17:23:13,674 TRACE Joining existing transaction to call public java.util.List<T> com.peterphi.std.guice.hibernate.dao.HibernateDao.getAll()
2021-12-11 17:23:13,674 TRACE Joining existing transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select parententi0_.id as id1_7_, parententi0_.deprecated as deprecat2_7_, parententi0_.obj_name as obj_name3_7_, parententi0_.other_object_id as other_ob5_7_, parententi0_.someBytes as someByte4_7_, friends1_.parent_id as parent_i1_6_0__, friends1_.firstName as firstNam2_6_0__, friends1_.fullName as fullName3_6_0__, friends1_.lastName as lastName4_6_0__, friends1_.sortName as sortName5_6_0__ from ParentEntity parententi0_ left outer join parent_friends friends1_ on parententi0_.id=friends1_.parent_id where 1=1
2021-12-11 17:23:13,674 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@7486c4ae
2021-12-11 17:23:13,675 TRACE Creating new transaction to call public T com.peterphi.std.guice.hibernate.dao.HibernateDao.getByUniqueProperty(java.lang.String,java.lang.Object)
2021-12-11 17:23:13,675 TRACE Joining existing transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select parententi0_.id as id1_7_, parententi0_.deprecated as deprecat2_7_, parententi0_.obj_name as obj_name3_7_, parententi0_.other_object_id as other_ob5_7_, parententi0_.someBytes as someByte4_7_, friends3_.parent_id as parent_i1_6_0__, friends3_.firstName as firstNam2_6_0__, friends3_.fullName as fullName3_6_0__, friends3_.lastName as lastName4_6_0__, friends3_.sortName as sortName5_6_0__ from ParentEntity parententi0_ left outer join ChildEntity childentit1_ on parententi0_.other_object_id=childentit1_.id left outer join ParentEntity parententi2_ on childentit1_.parent_id=parententi2_.id left outer join parent_friends friends3_ on parententi0_.id=friends3_.parent_id where parententi2_.obj_name=?
2021-12-11 17:23:13,680 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@4e692416
2021-12-11 17:23:13,681  INFO Shut down Hibernate SessionFactory...
2021-12-11 17:23:13,681 TRACE Creating new transaction to call void com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider.runShutDownSQL()
2021-12-11 17:23:13,681 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@6c9fee67
2021-12-11 17:23:13,815 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.embeddedpktest.EmbeddedPkEntity
2021-12-11 17:23:13,815 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject2
2021-12-11 17:23:13,815 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject1
2021-12-11 17:23:13,815 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyBaseObject
2021-12-11 17:23:13,815 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.ParentEntity
2021-12-11 17:23:13,815 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.MappedSuperclassEntity
2021-12-11 17:23:13,815 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.ChildEntity
2021-12-11 17:23:13,816 TRACE Evaluate HibernateConfigurationValidators. has at least one=false
2021-12-11 17:23:13,818  WARN HHH10001002: Using Hibernate built-in connection pool (not for production use!)
Hibernate: alter table ChildEntity drop constraint FKj7t557e8a7axr8jinbltht20y
Hibernate: alter table inherit_one drop constraint FKlu6huhy2g08akv8wpudpfvqir
Hibernate: alter table inherit_two drop constraint FKe5yjuoa6qr80cm4gcilq1gubk
Hibernate: alter table parent_friends drop constraint FKn858qj6gf7i97mfmurc47k6e8
Hibernate: alter table ParentEntity drop constraint FKd0cteits00p7vm083x9iod1lw
Hibernate: drop table ChildEntity if exists
Hibernate: drop table EmbeddedPkEntity if exists
Hibernate: drop table inherit_base if exists
Hibernate: drop table inherit_one if exists
Hibernate: drop table inherit_two if exists
Hibernate: drop table mapped_superclass_test_entity if exists
Hibernate: drop table parent_friends if exists
Hibernate: drop table ParentEntity if exists
Hibernate: drop sequence hibernate_sequence if exists
Hibernate: create sequence hibernate_sequence start with 1 increment by 1
Hibernate: create table ChildEntity (id bigint not null, obj_name varchar(255), parent_id bigint, primary key (id))
Hibernate: create table EmbeddedPkEntity (id varchar(255) not null, timestamp bigint not null, some_name varchar(255), primary key (id, timestamp))
Hibernate: create table inherit_base (id bigint not null, primary key (id))
Hibernate: create table inherit_one (someId varchar(255), id bigint not null, primary key (id))
Hibernate: create table inherit_two (id bigint not null, primary key (id))
Hibernate: create table mapped_superclass_test_entity (id bigint not null, created bigint, updated bigint, obj_name varchar(255), primary key (id))
Hibernate: create table parent_friends (parent_id bigint not null, firstName varchar(255), fullName varchar(255), lastName varchar(255), sortName varchar(255))
Hibernate: create table ParentEntity (id bigint not null, deprecated boolean, obj_name varchar(255), someBytes blob(255), other_object_id bigint, primary key (id))
Hibernate: alter table ChildEntity add constraint FKj7t557e8a7axr8jinbltht20y foreign key (parent_id) references ParentEntity
Hibernate: alter table inherit_one add constraint FKlu6huhy2g08akv8wpudpfvqir foreign key (id) references inherit_base
Hibernate: alter table inherit_two add constraint FKe5yjuoa6qr80cm4gcilq1gubk foreign key (id) references inherit_base
Hibernate: alter table parent_friends add constraint FKn858qj6gf7i97mfmurc47k6e8 foreign key (parent_id) references ParentEntity
Hibernate: alter table ParentEntity add constraint FKd0cteits00p7vm083x9iod1lw foreign key (other_object_id) references ChildEntity
2021-12-11 17:23:13,845 TRACE Hibernate Setup Complete.
2021-12-11 17:23:13,845 DEBUG Known entities: [mapped_superclass_test_entity, ParentEntity, inherit_two, inherit_one, EmbeddedPkEntity, inherit_base, ChildEntity]
2021-12-11 17:23:13,845 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.MappedSuperclassEntity
2021-12-11 17:23:13,845 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.MappedSuperclassEntity
2021-12-11 17:23:13,845 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.ParentEntity
2021-12-11 17:23:13,845 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.HumanEmbeddedEntity from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@68a8ac8e
2021-12-11 17:23:13,845 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.HumanEmbeddedEntity from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@68a8ac8e
2021-12-11 17:23:13,845 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.ChildEntity
2021-12-11 17:23:13,845 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.ChildEntity
2021-12-11 17:23:13,845 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.ParentEntity
2021-12-11 17:23:13,845 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject2
2021-12-11 17:23:13,845 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject2
2021-12-11 17:23:13,845 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject1
2021-12-11 17:23:13,845 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject1
2021-12-11 17:23:13,845 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.EmbeddedPkEntity
2021-12-11 17:23:13,846 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.SomePrimaryKey from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@59f08b80
2021-12-11 17:23:13,846 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.SomePrimaryKey from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@59f08b80
2021-12-11 17:23:13,846 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.EmbeddedPkEntity
2021-12-11 17:23:13,846 TRACE Creating new transaction to call public void com.peterphi.std.guice.hibernate.webquery.DynamicQueryTest.clearDatabaseBeforeTest()
2021-12-11 17:23:13,846 TRACE Joining existing transaction to call public java.util.List<T> com.peterphi.std.guice.hibernate.dao.HibernateDao.getAll()
2021-12-11 17:23:13,847 TRACE Joining existing transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select childentit0_.id as id1_0_0_, parententi1_.id as id1_7_1_, childentit0_.obj_name as obj_name2_0_0_, childentit0_.parent_id as parent_i3_0_0_, friends2_.parent_id as parent_i1_6_0__, friends2_.firstName as firstNam2_6_0__, friends2_.fullName as fullName3_6_0__, friends2_.lastName as lastName4_6_0__, friends2_.sortName as sortName5_6_0__, parententi1_.deprecated as deprecat2_7_1_, parententi1_.obj_name as obj_name3_7_1_, parententi1_.other_object_id as other_ob5_7_1_, parententi1_.someBytes as someByte4_7_1_, friends2_.parent_id as parent_i1_6_0__, friends2_.firstName as firstNam2_6_0__, friends2_.fullName as fullName3_6_0__, friends2_.lastName as lastName4_6_0__, friends2_.sortName as sortName5_6_0__ from ChildEntity childentit0_ left outer join ParentEntity parententi1_ on childentit0_.parent_id=parententi1_.id left outer join parent_friends friends2_ on parententi1_.id=friends2_.parent_id where 1=1
2021-12-11 17:23:13,850 TRACE Joining existing transaction to call public java.util.List<T> com.peterphi.std.guice.hibernate.dao.HibernateDao.getAll()
2021-12-11 17:23:13,850 TRACE Joining existing transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select parententi0_.id as id1_7_, parententi0_.deprecated as deprecat2_7_, parententi0_.obj_name as obj_name3_7_, parententi0_.other_object_id as other_ob5_7_, parententi0_.someBytes as someByte4_7_, friends1_.parent_id as parent_i1_6_0__, friends1_.firstName as firstNam2_6_0__, friends1_.fullName as fullName3_6_0__, friends1_.lastName as lastName4_6_0__, friends1_.sortName as sortName5_6_0__ from ParentEntity parententi0_ left outer join parent_friends friends1_ on parententi0_.id=friends1_.parent_id where 1=1
2021-12-11 17:23:13,853 TRACE Joining existing transaction to call public java.util.List<T> com.peterphi.std.guice.hibernate.dao.HibernateDao.getAll()
2021-12-11 17:23:13,853 TRACE Joining existing transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select parententi0_.id as id1_7_, parententi0_.deprecated as deprecat2_7_, parententi0_.obj_name as obj_name3_7_, parententi0_.other_object_id as other_ob5_7_, parententi0_.someBytes as someByte4_7_, friends1_.parent_id as parent_i1_6_0__, friends1_.firstName as firstNam2_6_0__, friends1_.fullName as fullName3_6_0__, friends1_.lastName as lastName4_6_0__, friends1_.sortName as sortName5_6_0__ from ParentEntity parententi0_ left outer join parent_friends friends1_ on parententi0_.id=friends1_.parent_id where 1=1
2021-12-11 17:23:13,853 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@2ebb0be2
2021-12-11 17:23:13,854 TRACE Creating new transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select parententi0_.id as id1_7_, parententi0_.deprecated as deprecat2_7_, parententi0_.obj_name as obj_name3_7_, parententi0_.other_object_id as other_ob5_7_, parententi0_.someBytes as someByte4_7_, friends3_.parent_id as parent_i1_6_0__, friends3_.firstName as firstNam2_6_0__, friends3_.fullName as fullName3_6_0__, friends3_.lastName as lastName4_6_0__, friends3_.sortName as sortName5_6_0__ from ParentEntity parententi0_ left outer join ChildEntity childentit1_ on parententi0_.other_object_id=childentit1_.id left outer join ParentEntity parententi2_ on childentit1_.parent_id=parententi2_.id left outer join parent_friends friends3_ on parententi0_.id=friends3_.parent_id where parententi2_.obj_name=parententi2_.obj_name
2021-12-11 17:23:13,858 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@6b1f930b
2021-12-11 17:23:13,859 TRACE Creating new transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select parententi0_.id as id1_7_, parententi0_.deprecated as deprecat2_7_, parententi0_.obj_name as obj_name3_7_, parententi0_.other_object_id as other_ob5_7_, parententi0_.someBytes as someByte4_7_, friends3_.parent_id as parent_i1_6_0__, friends3_.firstName as firstNam2_6_0__, friends3_.fullName as fullName3_6_0__, friends3_.lastName as lastName4_6_0__, friends3_.sortName as sortName5_6_0__ from ParentEntity parententi0_ left outer join ChildEntity childentit1_ on parententi0_.other_object_id=childentit1_.id left outer join ParentEntity parententi2_ on childentit1_.parent_id=parententi2_.id left outer join parent_friends friends3_ on parententi0_.id=friends3_.parent_id where parententi2_.obj_name<=parententi2_.obj_name
2021-12-11 17:23:13,865 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@5e4b90cf
2021-12-11 17:23:13,865  INFO Shut down Hibernate SessionFactory...
2021-12-11 17:23:13,865 TRACE Creating new transaction to call void com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider.runShutDownSQL()
2021-12-11 17:23:13,865 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@e71f407
2021-12-11 17:23:14,000 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.embeddedpktest.EmbeddedPkEntity
2021-12-11 17:23:14,000 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject2
2021-12-11 17:23:14,000 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject1
2021-12-11 17:23:14,000 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyBaseObject
2021-12-11 17:23:14,000 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.ParentEntity
2021-12-11 17:23:14,000 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.MappedSuperclassEntity
2021-12-11 17:23:14,000 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.ChildEntity
2021-12-11 17:23:14,000 TRACE Evaluate HibernateConfigurationValidators. has at least one=false
2021-12-11 17:23:14,003  WARN HHH10001002: Using Hibernate built-in connection pool (not for production use!)
Hibernate: alter table ChildEntity drop constraint FKj7t557e8a7axr8jinbltht20y
Hibernate: alter table inherit_one drop constraint FKlu6huhy2g08akv8wpudpfvqir
Hibernate: alter table inherit_two drop constraint FKe5yjuoa6qr80cm4gcilq1gubk
Hibernate: alter table parent_friends drop constraint FKn858qj6gf7i97mfmurc47k6e8
Hibernate: alter table ParentEntity drop constraint FKd0cteits00p7vm083x9iod1lw
Hibernate: drop table ChildEntity if exists
Hibernate: drop table EmbeddedPkEntity if exists
Hibernate: drop table inherit_base if exists
Hibernate: drop table inherit_one if exists
Hibernate: drop table inherit_two if exists
Hibernate: drop table mapped_superclass_test_entity if exists
Hibernate: drop table parent_friends if exists
Hibernate: drop table ParentEntity if exists
Hibernate: drop sequence hibernate_sequence if exists
Hibernate: create sequence hibernate_sequence start with 1 increment by 1
Hibernate: create table ChildEntity (id bigint not null, obj_name varchar(255), parent_id bigint, primary key (id))
Hibernate: create table EmbeddedPkEntity (id varchar(255) not null, timestamp bigint not null, some_name varchar(255), primary key (id, timestamp))
Hibernate: create table inherit_base (id bigint not null, primary key (id))
Hibernate: create table inherit_one (someId varchar(255), id bigint not null, primary key (id))
Hibernate: create table inherit_two (id bigint not null, primary key (id))
Hibernate: create table mapped_superclass_test_entity (id bigint not null, created bigint, updated bigint, obj_name varchar(255), primary key (id))
Hibernate: create table parent_friends (parent_id bigint not null, firstName varchar(255), fullName varchar(255), lastName varchar(255), sortName varchar(255))
Hibernate: create table ParentEntity (id bigint not null, deprecated boolean, obj_name varchar(255), someBytes blob(255), other_object_id bigint, primary key (id))
Hibernate: alter table ChildEntity add constraint FKj7t557e8a7axr8jinbltht20y foreign key (parent_id) references ParentEntity
Hibernate: alter table inherit_one add constraint FKlu6huhy2g08akv8wpudpfvqir foreign key (id) references inherit_base
Hibernate: alter table inherit_two add constraint FKe5yjuoa6qr80cm4gcilq1gubk foreign key (id) references inherit_base
Hibernate: alter table parent_friends add constraint FKn858qj6gf7i97mfmurc47k6e8 foreign key (parent_id) references ParentEntity
Hibernate: alter table ParentEntity add constraint FKd0cteits00p7vm083x9iod1lw foreign key (other_object_id) references ChildEntity
2021-12-11 17:23:14,029 TRACE Hibernate Setup Complete.
2021-12-11 17:23:14,029 DEBUG Known entities: [inherit_one, inherit_two, EmbeddedPkEntity, ChildEntity, mapped_superclass_test_entity, ParentEntity, inherit_base]
2021-12-11 17:23:14,029 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject1
2021-12-11 17:23:14,029 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject1
2021-12-11 17:23:14,029 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject2
2021-12-11 17:23:14,030 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject2
2021-12-11 17:23:14,030 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.EmbeddedPkEntity
2021-12-11 17:23:14,030 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.SomePrimaryKey from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@68accff4
2021-12-11 17:23:14,030 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.SomePrimaryKey from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@68accff4
2021-12-11 17:23:14,030 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.EmbeddedPkEntity
2021-12-11 17:23:14,030 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.ChildEntity
2021-12-11 17:23:14,030 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.ParentEntity
2021-12-11 17:23:14,030 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.HumanEmbeddedEntity from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@30f7cf07
2021-12-11 17:23:14,030 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.HumanEmbeddedEntity from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@30f7cf07
2021-12-11 17:23:14,030 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.ParentEntity
2021-12-11 17:23:14,030 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.ChildEntity
2021-12-11 17:23:14,030 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.MappedSuperclassEntity
2021-12-11 17:23:14,030 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.MappedSuperclassEntity
2021-12-11 17:23:14,031 TRACE Creating new transaction to call public void com.peterphi.std.guice.hibernate.webquery.DynamicQueryTest.clearDatabaseBeforeTest()
2021-12-11 17:23:14,031 TRACE Joining existing transaction to call public java.util.List<T> com.peterphi.std.guice.hibernate.dao.HibernateDao.getAll()
2021-12-11 17:23:14,031 TRACE Joining existing transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select childentit0_.id as id1_0_0_, parententi1_.id as id1_7_1_, childentit0_.obj_name as obj_name2_0_0_, childentit0_.parent_id as parent_i3_0_0_, friends2_.parent_id as parent_i1_6_0__, friends2_.firstName as firstNam2_6_0__, friends2_.fullName as fullName3_6_0__, friends2_.lastName as lastName4_6_0__, friends2_.sortName as sortName5_6_0__, parententi1_.deprecated as deprecat2_7_1_, parententi1_.obj_name as obj_name3_7_1_, parententi1_.other_object_id as other_ob5_7_1_, parententi1_.someBytes as someByte4_7_1_, friends2_.parent_id as parent_i1_6_0__, friends2_.firstName as firstNam2_6_0__, friends2_.fullName as fullName3_6_0__, friends2_.lastName as lastName4_6_0__, friends2_.sortName as sortName5_6_0__ from ChildEntity childentit0_ left outer join ParentEntity parententi1_ on childentit0_.parent_id=parententi1_.id left outer join parent_friends friends2_ on parententi1_.id=friends2_.parent_id where 1=1
2021-12-11 17:23:14,035 TRACE Joining existing transaction to call public java.util.List<T> com.peterphi.std.guice.hibernate.dao.HibernateDao.getAll()
2021-12-11 17:23:14,035 TRACE Joining existing transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select parententi0_.id as id1_7_, parententi0_.deprecated as deprecat2_7_, parententi0_.obj_name as obj_name3_7_, parententi0_.other_object_id as other_ob5_7_, parententi0_.someBytes as someByte4_7_, friends1_.parent_id as parent_i1_6_0__, friends1_.firstName as firstNam2_6_0__, friends1_.fullName as fullName3_6_0__, friends1_.lastName as lastName4_6_0__, friends1_.sortName as sortName5_6_0__ from ParentEntity parententi0_ left outer join parent_friends friends1_ on parententi0_.id=friends1_.parent_id where 1=1
2021-12-11 17:23:14,038 TRACE Joining existing transaction to call public java.util.List<T> com.peterphi.std.guice.hibernate.dao.HibernateDao.getAll()
2021-12-11 17:23:14,038 TRACE Joining existing transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select parententi0_.id as id1_7_, parententi0_.deprecated as deprecat2_7_, parententi0_.obj_name as obj_name3_7_, parententi0_.other_object_id as other_ob5_7_, parententi0_.someBytes as someByte4_7_, friends1_.parent_id as parent_i1_6_0__, friends1_.firstName as firstNam2_6_0__, friends1_.fullName as fullName3_6_0__, friends1_.lastName as lastName4_6_0__, friends1_.sortName as sortName5_6_0__ from ParentEntity parententi0_ left outer join parent_friends friends1_ on parententi0_.id=friends1_.parent_id where 1=1
2021-12-11 17:23:14,039 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@6833730d
2021-12-11 17:23:14,039 TRACE Creating new transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:14,040 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@2ce3d4bb
Hibernate: insert into ParentEntity (deprecated, obj_name, other_object_id, someBytes, id) values (?, ?, ?, ?, ?)
2021-12-11 17:23:14,051 TRACE Creating new transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:14,051 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@366bd07b
Hibernate: insert into ParentEntity (deprecated, obj_name, other_object_id, someBytes, id) values (?, ?, ?, ?, ?)
2021-12-11 17:23:14,055 TRACE Creating new transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select parententi0_.id as id1_7_, parententi0_.deprecated as deprecat2_7_, parententi0_.obj_name as obj_name3_7_, parententi0_.other_object_id as other_ob5_7_, parententi0_.someBytes as someByte4_7_, friends1_.parent_id as parent_i1_6_0__, friends1_.firstName as firstNam2_6_0__, friends1_.fullName as fullName3_6_0__, friends1_.lastName as lastName4_6_0__, friends1_.sortName as sortName5_6_0__ from ParentEntity parententi0_ left outer join parent_friends friends1_ on parententi0_.id=friends1_.parent_id where parententi0_.deprecated=?
2021-12-11 17:23:14,063 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@2ffba7c8
2021-12-11 17:23:14,063 TRACE Creating new transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select parententi0_.id as id1_7_, parententi0_.deprecated as deprecat2_7_, parententi0_.obj_name as obj_name3_7_, parententi0_.other_object_id as other_ob5_7_, parententi0_.someBytes as someByte4_7_, friends1_.parent_id as parent_i1_6_0__, friends1_.firstName as firstNam2_6_0__, friends1_.fullName as fullName3_6_0__, friends1_.lastName as lastName4_6_0__, friends1_.sortName as sortName5_6_0__ from ParentEntity parententi0_ left outer join parent_friends friends1_ on parententi0_.id=friends1_.parent_id where parententi0_.deprecated=?
2021-12-11 17:23:14,064 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@456839ee
2021-12-11 17:23:14,065  INFO Shut down Hibernate SessionFactory...
2021-12-11 17:23:14,065 TRACE Creating new transaction to call void com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider.runShutDownSQL()
2021-12-11 17:23:14,065 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@2984ea6
2021-12-11 17:23:14,199 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.embeddedpktest.EmbeddedPkEntity
2021-12-11 17:23:14,199 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject2
2021-12-11 17:23:14,199 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject1
2021-12-11 17:23:14,199 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyBaseObject
2021-12-11 17:23:14,199 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.ParentEntity
2021-12-11 17:23:14,199 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.MappedSuperclassEntity
2021-12-11 17:23:14,199 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.ChildEntity
2021-12-11 17:23:14,199 TRACE Evaluate HibernateConfigurationValidators. has at least one=false
2021-12-11 17:23:14,202  WARN HHH10001002: Using Hibernate built-in connection pool (not for production use!)
Hibernate: alter table ChildEntity drop constraint FKj7t557e8a7axr8jinbltht20y
Hibernate: alter table inherit_one drop constraint FKlu6huhy2g08akv8wpudpfvqir
Hibernate: alter table inherit_two drop constraint FKe5yjuoa6qr80cm4gcilq1gubk
Hibernate: alter table parent_friends drop constraint FKn858qj6gf7i97mfmurc47k6e8
Hibernate: alter table ParentEntity drop constraint FKd0cteits00p7vm083x9iod1lw
Hibernate: drop table ChildEntity if exists
Hibernate: drop table EmbeddedPkEntity if exists
Hibernate: drop table inherit_base if exists
Hibernate: drop table inherit_one if exists
Hibernate: drop table inherit_two if exists
Hibernate: drop table mapped_superclass_test_entity if exists
Hibernate: drop table parent_friends if exists
Hibernate: drop table ParentEntity if exists
Hibernate: drop sequence hibernate_sequence if exists
Hibernate: create sequence hibernate_sequence start with 1 increment by 1
Hibernate: create table ChildEntity (id bigint not null, obj_name varchar(255), parent_id bigint, primary key (id))
Hibernate: create table EmbeddedPkEntity (id varchar(255) not null, timestamp bigint not null, some_name varchar(255), primary key (id, timestamp))
Hibernate: create table inherit_base (id bigint not null, primary key (id))
Hibernate: create table inherit_one (someId varchar(255), id bigint not null, primary key (id))
Hibernate: create table inherit_two (id bigint not null, primary key (id))
Hibernate: create table mapped_superclass_test_entity (id bigint not null, created bigint, updated bigint, obj_name varchar(255), primary key (id))
Hibernate: create table parent_friends (parent_id bigint not null, firstName varchar(255), fullName varchar(255), lastName varchar(255), sortName varchar(255))
Hibernate: create table ParentEntity (id bigint not null, deprecated boolean, obj_name varchar(255), someBytes blob(255), other_object_id bigint, primary key (id))
Hibernate: alter table ChildEntity add constraint FKj7t557e8a7axr8jinbltht20y foreign key (parent_id) references ParentEntity
Hibernate: alter table inherit_one add constraint FKlu6huhy2g08akv8wpudpfvqir foreign key (id) references inherit_base
Hibernate: alter table inherit_two add constraint FKe5yjuoa6qr80cm4gcilq1gubk foreign key (id) references inherit_base
Hibernate: alter table parent_friends add constraint FKn858qj6gf7i97mfmurc47k6e8 foreign key (parent_id) references ParentEntity
Hibernate: alter table ParentEntity add constraint FKd0cteits00p7vm083x9iod1lw foreign key (other_object_id) references ChildEntity
2021-12-11 17:23:14,232 TRACE Hibernate Setup Complete.
2021-12-11 17:23:14,232 DEBUG Known entities: [ChildEntity, inherit_one, inherit_two, mapped_superclass_test_entity, inherit_base, ParentEntity, EmbeddedPkEntity]
2021-12-11 17:23:14,232 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.ChildEntity
2021-12-11 17:23:14,232 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.ParentEntity
2021-12-11 17:23:14,232 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.HumanEmbeddedEntity from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@15825e43
2021-12-11 17:23:14,232 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.HumanEmbeddedEntity from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@15825e43
2021-12-11 17:23:14,232 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.ParentEntity
2021-12-11 17:23:14,232 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.ChildEntity
2021-12-11 17:23:14,232 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject1
2021-12-11 17:23:14,232 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject1
2021-12-11 17:23:14,232 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject2
2021-12-11 17:23:14,232 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject2
2021-12-11 17:23:14,232 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.MappedSuperclassEntity
2021-12-11 17:23:14,232 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.MappedSuperclassEntity
2021-12-11 17:23:14,232 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.EmbeddedPkEntity
2021-12-11 17:23:14,232 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.SomePrimaryKey from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@39d72ede
2021-12-11 17:23:14,232 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.SomePrimaryKey from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@39d72ede
2021-12-11 17:23:14,232 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.EmbeddedPkEntity
2021-12-11 17:23:14,233 TRACE Creating new transaction to call public void com.peterphi.std.guice.hibernate.webquery.DynamicQueryTest.clearDatabaseBeforeTest()
2021-12-11 17:23:14,233 TRACE Joining existing transaction to call public java.util.List<T> com.peterphi.std.guice.hibernate.dao.HibernateDao.getAll()
2021-12-11 17:23:14,233 TRACE Joining existing transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select childentit0_.id as id1_0_0_, parententi1_.id as id1_7_1_, childentit0_.obj_name as obj_name2_0_0_, childentit0_.parent_id as parent_i3_0_0_, friends2_.parent_id as parent_i1_6_0__, friends2_.firstName as firstNam2_6_0__, friends2_.fullName as fullName3_6_0__, friends2_.lastName as lastName4_6_0__, friends2_.sortName as sortName5_6_0__, parententi1_.deprecated as deprecat2_7_1_, parententi1_.obj_name as obj_name3_7_1_, parententi1_.other_object_id as other_ob5_7_1_, parententi1_.someBytes as someByte4_7_1_, friends2_.parent_id as parent_i1_6_0__, friends2_.firstName as firstNam2_6_0__, friends2_.fullName as fullName3_6_0__, friends2_.lastName as lastName4_6_0__, friends2_.sortName as sortName5_6_0__ from ChildEntity childentit0_ left outer join ParentEntity parententi1_ on childentit0_.parent_id=parententi1_.id left outer join parent_friends friends2_ on parententi1_.id=friends2_.parent_id where 1=1
2021-12-11 17:23:14,239 TRACE Joining existing transaction to call public java.util.List<T> com.peterphi.std.guice.hibernate.dao.HibernateDao.getAll()
2021-12-11 17:23:14,239 TRACE Joining existing transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select parententi0_.id as id1_7_, parententi0_.deprecated as deprecat2_7_, parententi0_.obj_name as obj_name3_7_, parententi0_.other_object_id as other_ob5_7_, parententi0_.someBytes as someByte4_7_, friends1_.parent_id as parent_i1_6_0__, friends1_.firstName as firstNam2_6_0__, friends1_.fullName as fullName3_6_0__, friends1_.lastName as lastName4_6_0__, friends1_.sortName as sortName5_6_0__ from ParentEntity parententi0_ left outer join parent_friends friends1_ on parententi0_.id=friends1_.parent_id where 1=1
2021-12-11 17:23:14,242 TRACE Joining existing transaction to call public java.util.List<T> com.peterphi.std.guice.hibernate.dao.HibernateDao.getAll()
2021-12-11 17:23:14,242 TRACE Joining existing transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select parententi0_.id as id1_7_, parententi0_.deprecated as deprecat2_7_, parententi0_.obj_name as obj_name3_7_, parententi0_.other_object_id as other_ob5_7_, parententi0_.someBytes as someByte4_7_, friends1_.parent_id as parent_i1_6_0__, friends1_.firstName as firstNam2_6_0__, friends1_.fullName as fullName3_6_0__, friends1_.lastName as lastName4_6_0__, friends1_.sortName as sortName5_6_0__ from ParentEntity parententi0_ left outer join parent_friends friends1_ on parententi0_.id=friends1_.parent_id where 1=1
2021-12-11 17:23:14,243 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@75c5dc58
2021-12-11 17:23:14,244 TRACE Creating new transaction to call public T com.peterphi.std.guice.hibernate.dao.HibernateDao.getByUniqueProperty(java.lang.String,java.lang.Object)
2021-12-11 17:23:14,244 TRACE Joining existing transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select parententi0_.id as id1_7_, parententi0_.deprecated as deprecat2_7_, parententi0_.obj_name as obj_name3_7_, parententi0_.other_object_id as other_ob5_7_, parententi0_.someBytes as someByte4_7_, friends2_.parent_id as parent_i1_6_0__, friends2_.firstName as firstNam2_6_0__, friends2_.fullName as fullName3_6_0__, friends2_.lastName as lastName4_6_0__, friends2_.sortName as sortName5_6_0__ from ParentEntity parententi0_ left outer join ChildEntity children1_ on parententi0_.id=children1_.parent_id left outer join parent_friends friends2_ on parententi0_.id=friends2_.parent_id where children1_.id=?
2021-12-11 17:23:14,249 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@7b38966a
2021-12-11 17:23:14,249  INFO Shut down Hibernate SessionFactory...
2021-12-11 17:23:14,250 TRACE Creating new transaction to call void com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider.runShutDownSQL()
2021-12-11 17:23:14,250 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@750f8631
2021-12-11 17:23:14,363 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.embeddedpktest.EmbeddedPkEntity
2021-12-11 17:23:14,363 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject2
2021-12-11 17:23:14,363 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject1
2021-12-11 17:23:14,363 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyBaseObject
2021-12-11 17:23:14,363 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.ParentEntity
2021-12-11 17:23:14,363 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.MappedSuperclassEntity
2021-12-11 17:23:14,363 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.ChildEntity
2021-12-11 17:23:14,363 TRACE Evaluate HibernateConfigurationValidators. has at least one=false
2021-12-11 17:23:14,366  WARN HHH10001002: Using Hibernate built-in connection pool (not for production use!)
Hibernate: alter table ChildEntity drop constraint FKj7t557e8a7axr8jinbltht20y
Hibernate: alter table inherit_one drop constraint FKlu6huhy2g08akv8wpudpfvqir
Hibernate: alter table inherit_two drop constraint FKe5yjuoa6qr80cm4gcilq1gubk
Hibernate: alter table parent_friends drop constraint FKn858qj6gf7i97mfmurc47k6e8
Hibernate: alter table ParentEntity drop constraint FKd0cteits00p7vm083x9iod1lw
Hibernate: drop table ChildEntity if exists
Hibernate: drop table EmbeddedPkEntity if exists
Hibernate: drop table inherit_base if exists
Hibernate: drop table inherit_one if exists
Hibernate: drop table inherit_two if exists
Hibernate: drop table mapped_superclass_test_entity if exists
Hibernate: drop table parent_friends if exists
Hibernate: drop table ParentEntity if exists
Hibernate: drop sequence hibernate_sequence if exists
Hibernate: create sequence hibernate_sequence start with 1 increment by 1
Hibernate: create table ChildEntity (id bigint not null, obj_name varchar(255), parent_id bigint, primary key (id))
Hibernate: create table EmbeddedPkEntity (id varchar(255) not null, timestamp bigint not null, some_name varchar(255), primary key (id, timestamp))
Hibernate: create table inherit_base (id bigint not null, primary key (id))
Hibernate: create table inherit_one (someId varchar(255), id bigint not null, primary key (id))
Hibernate: create table inherit_two (id bigint not null, primary key (id))
Hibernate: create table mapped_superclass_test_entity (id bigint not null, created bigint, updated bigint, obj_name varchar(255), primary key (id))
Hibernate: create table parent_friends (parent_id bigint not null, firstName varchar(255), fullName varchar(255), lastName varchar(255), sortName varchar(255))
Hibernate: create table ParentEntity (id bigint not null, deprecated boolean, obj_name varchar(255), someBytes blob(255), other_object_id bigint, primary key (id))
Hibernate: alter table ChildEntity add constraint FKj7t557e8a7axr8jinbltht20y foreign key (parent_id) references ParentEntity
Hibernate: alter table inherit_one add constraint FKlu6huhy2g08akv8wpudpfvqir foreign key (id) references inherit_base
Hibernate: alter table inherit_two add constraint FKe5yjuoa6qr80cm4gcilq1gubk foreign key (id) references inherit_base
Hibernate: alter table parent_friends add constraint FKn858qj6gf7i97mfmurc47k6e8 foreign key (parent_id) references ParentEntity
Hibernate: alter table ParentEntity add constraint FKd0cteits00p7vm083x9iod1lw foreign key (other_object_id) references ChildEntity
2021-12-11 17:23:14,392 TRACE Hibernate Setup Complete.
2021-12-11 17:23:14,392 DEBUG Known entities: [inherit_base, ParentEntity, mapped_superclass_test_entity, ChildEntity, inherit_one, inherit_two, EmbeddedPkEntity]
2021-12-11 17:23:14,392 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.ParentEntity
2021-12-11 17:23:14,392 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.HumanEmbeddedEntity from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@3a47537
2021-12-11 17:23:14,392 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.HumanEmbeddedEntity from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@3a47537
2021-12-11 17:23:14,392 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.ChildEntity
2021-12-11 17:23:14,392 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.ChildEntity
2021-12-11 17:23:14,392 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.ParentEntity
2021-12-11 17:23:14,392 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.MappedSuperclassEntity
2021-12-11 17:23:14,392 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.MappedSuperclassEntity
2021-12-11 17:23:14,392 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject1
2021-12-11 17:23:14,392 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject1
2021-12-11 17:23:14,392 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject2
2021-12-11 17:23:14,392 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject2
2021-12-11 17:23:14,392 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.EmbeddedPkEntity
2021-12-11 17:23:14,392 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.SomePrimaryKey from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@37249389
2021-12-11 17:23:14,392 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.SomePrimaryKey from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@37249389
2021-12-11 17:23:14,392 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.EmbeddedPkEntity
2021-12-11 17:23:14,393 TRACE Creating new transaction to call public void com.peterphi.std.guice.hibernate.webquery.DynamicQueryTest.clearDatabaseBeforeTest()
2021-12-11 17:23:14,393 TRACE Joining existing transaction to call public java.util.List<T> com.peterphi.std.guice.hibernate.dao.HibernateDao.getAll()
2021-12-11 17:23:14,393 TRACE Joining existing transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select childentit0_.id as id1_0_0_, parententi1_.id as id1_7_1_, childentit0_.obj_name as obj_name2_0_0_, childentit0_.parent_id as parent_i3_0_0_, friends2_.parent_id as parent_i1_6_0__, friends2_.firstName as firstNam2_6_0__, friends2_.fullName as fullName3_6_0__, friends2_.lastName as lastName4_6_0__, friends2_.sortName as sortName5_6_0__, parententi1_.deprecated as deprecat2_7_1_, parententi1_.obj_name as obj_name3_7_1_, parententi1_.other_object_id as other_ob5_7_1_, parententi1_.someBytes as someByte4_7_1_, friends2_.parent_id as parent_i1_6_0__, friends2_.firstName as firstNam2_6_0__, friends2_.fullName as fullName3_6_0__, friends2_.lastName as lastName4_6_0__, friends2_.sortName as sortName5_6_0__ from ChildEntity childentit0_ left outer join ParentEntity parententi1_ on childentit0_.parent_id=parententi1_.id left outer join parent_friends friends2_ on parententi1_.id=friends2_.parent_id where 1=1
2021-12-11 17:23:14,396 TRACE Joining existing transaction to call public java.util.List<T> com.peterphi.std.guice.hibernate.dao.HibernateDao.getAll()
2021-12-11 17:23:14,396 TRACE Joining existing transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select parententi0_.id as id1_7_, parententi0_.deprecated as deprecat2_7_, parententi0_.obj_name as obj_name3_7_, parententi0_.other_object_id as other_ob5_7_, parententi0_.someBytes as someByte4_7_, friends1_.parent_id as parent_i1_6_0__, friends1_.firstName as firstNam2_6_0__, friends1_.fullName as fullName3_6_0__, friends1_.lastName as lastName4_6_0__, friends1_.sortName as sortName5_6_0__ from ParentEntity parententi0_ left outer join parent_friends friends1_ on parententi0_.id=friends1_.parent_id where 1=1
2021-12-11 17:23:14,399 TRACE Joining existing transaction to call public java.util.List<T> com.peterphi.std.guice.hibernate.dao.HibernateDao.getAll()
2021-12-11 17:23:14,399 TRACE Joining existing transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select parententi0_.id as id1_7_, parententi0_.deprecated as deprecat2_7_, parententi0_.obj_name as obj_name3_7_, parententi0_.other_object_id as other_ob5_7_, parententi0_.someBytes as someByte4_7_, friends1_.parent_id as parent_i1_6_0__, friends1_.firstName as firstNam2_6_0__, friends1_.fullName as fullName3_6_0__, friends1_.lastName as lastName4_6_0__, friends1_.sortName as sortName5_6_0__ from ParentEntity parententi0_ left outer join parent_friends friends1_ on parententi0_.id=friends1_.parent_id where 1=1
2021-12-11 17:23:14,399 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@5c4fafc5
2021-12-11 17:23:14,400 TRACE Creating new transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:14,400 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@7fab9649
Hibernate: insert into ParentEntity (deprecated, obj_name, other_object_id, someBytes, id) values (?, ?, ?, ?, ?)
2021-12-11 17:23:14,402 TRACE Creating new transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:14,402 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@12ebdfd0
Hibernate: insert into ParentEntity (deprecated, obj_name, other_object_id, someBytes, id) values (?, ?, ?, ?, ?)
2021-12-11 17:23:14,404 TRACE Creating new transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:14,404 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@444ba2d3
Hibernate: insert into ParentEntity (deprecated, obj_name, other_object_id, someBytes, id) values (?, ?, ?, ?, ?)
2021-12-11 17:23:14,406 TRACE Creating new transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
2021-12-11 17:23:14,406 TRACE Encountered fetch friends. This resolves to QRelation{owner=QEntity{clazz=class com.peterphi.std.guice.hibernate.webquery.ParentEntity, name='ParentEntity', properties=[friends:size, deprecated, name, id, someBytes, children:size], relations=[children, friends, otherObject], defaultFetch=[friends]}, name=friends, entity=QEntity{clazz=class com.peterphi.std.guice.hibernate.webquery.HumanEmbeddedEntity, name='null', properties=[lastName, firstName, sortName, fullName], relations=[], defaultFetch=null}, nullable=false, eager=true, collection=true} which is a collection
Hibernate: select distinct parententi0_.id as col_0_0_, parententi0_.obj_name as col_1_0_ from ParentEntity parententi0_ where 1=1 order by parententi0_.obj_name desc limit ?
Hibernate: select parententi0_.id as id1_7_, parententi0_.deprecated as deprecat2_7_, parententi0_.obj_name as obj_name3_7_, parententi0_.other_object_id as other_ob5_7_, parententi0_.someBytes as someByte4_7_, friends1_.parent_id as parent_i1_6_0__, friends1_.firstName as firstNam2_6_0__, friends1_.fullName as fullName3_6_0__, friends1_.lastName as lastName4_6_0__, friends1_.sortName as sortName5_6_0__ from ParentEntity parententi0_ left outer join parent_friends friends1_ on parententi0_.id=friends1_.parent_id where parententi0_.id in (? , ?) order by parententi0_.obj_name desc
2021-12-11 17:23:14,413 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@67552892
2021-12-11 17:23:14,414 TRACE Creating new transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
2021-12-11 17:23:14,414 TRACE Encountered fetch friends. This resolves to QRelation{owner=QEntity{clazz=class com.peterphi.std.guice.hibernate.webquery.ParentEntity, name='ParentEntity', properties=[friends:size, deprecated, name, id, someBytes, children:size], relations=[children, friends, otherObject], defaultFetch=[friends]}, name=friends, entity=QEntity{clazz=class com.peterphi.std.guice.hibernate.webquery.HumanEmbeddedEntity, name='null', properties=[lastName, firstName, sortName, fullName], relations=[], defaultFetch=null}, nullable=false, eager=true, collection=true} which is a collection
Hibernate: select distinct parententi0_.id as col_0_0_, parententi0_.obj_name as col_1_0_ from ParentEntity parententi0_ where 1=1 order by parententi0_.obj_name desc limit ?
Hibernate: select distinct count(parententi0_.id) as col_0_0_ from ParentEntity parententi0_ where 1=1
Hibernate: select parententi0_.id as id1_7_, parententi0_.deprecated as deprecat2_7_, parententi0_.obj_name as obj_name3_7_, parententi0_.other_object_id as other_ob5_7_, parententi0_.someBytes as someByte4_7_, friends1_.parent_id as parent_i1_6_0__, friends1_.firstName as firstNam2_6_0__, friends1_.fullName as fullName3_6_0__, friends1_.lastName as lastName4_6_0__, friends1_.sortName as sortName5_6_0__ from ParentEntity parententi0_ left outer join parent_friends friends1_ on parententi0_.id=friends1_.parent_id where parententi0_.id in (? , ?) order by parententi0_.obj_name desc
2021-12-11 17:23:14,417 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@17171d41
2021-12-11 17:23:14,418  INFO Shut down Hibernate SessionFactory...
2021-12-11 17:23:14,418 TRACE Creating new transaction to call void com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider.runShutDownSQL()
2021-12-11 17:23:14,418 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@6b35d71f
2021-12-11 17:23:14,529 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.embeddedpktest.EmbeddedPkEntity
2021-12-11 17:23:14,529 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject2
2021-12-11 17:23:14,529 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject1
2021-12-11 17:23:14,529 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyBaseObject
2021-12-11 17:23:14,529 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.ParentEntity
2021-12-11 17:23:14,529 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.MappedSuperclassEntity
2021-12-11 17:23:14,529 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.ChildEntity
2021-12-11 17:23:14,529 TRACE Evaluate HibernateConfigurationValidators. has at least one=false
2021-12-11 17:23:14,531  WARN HHH10001002: Using Hibernate built-in connection pool (not for production use!)
Hibernate: alter table ChildEntity drop constraint FKj7t557e8a7axr8jinbltht20y
Hibernate: alter table inherit_one drop constraint FKlu6huhy2g08akv8wpudpfvqir
Hibernate: alter table inherit_two drop constraint FKe5yjuoa6qr80cm4gcilq1gubk
Hibernate: alter table parent_friends drop constraint FKn858qj6gf7i97mfmurc47k6e8
Hibernate: alter table ParentEntity drop constraint FKd0cteits00p7vm083x9iod1lw
Hibernate: drop table ChildEntity if exists
Hibernate: drop table EmbeddedPkEntity if exists
Hibernate: drop table inherit_base if exists
Hibernate: drop table inherit_one if exists
Hibernate: drop table inherit_two if exists
Hibernate: drop table mapped_superclass_test_entity if exists
Hibernate: drop table parent_friends if exists
Hibernate: drop table ParentEntity if exists
Hibernate: drop sequence hibernate_sequence if exists
Hibernate: create sequence hibernate_sequence start with 1 increment by 1
Hibernate: create table ChildEntity (id bigint not null, obj_name varchar(255), parent_id bigint, primary key (id))
Hibernate: create table EmbeddedPkEntity (id varchar(255) not null, timestamp bigint not null, some_name varchar(255), primary key (id, timestamp))
Hibernate: create table inherit_base (id bigint not null, primary key (id))
Hibernate: create table inherit_one (someId varchar(255), id bigint not null, primary key (id))
Hibernate: create table inherit_two (id bigint not null, primary key (id))
Hibernate: create table mapped_superclass_test_entity (id bigint not null, created bigint, updated bigint, obj_name varchar(255), primary key (id))
Hibernate: create table parent_friends (parent_id bigint not null, firstName varchar(255), fullName varchar(255), lastName varchar(255), sortName varchar(255))
Hibernate: create table ParentEntity (id bigint not null, deprecated boolean, obj_name varchar(255), someBytes blob(255), other_object_id bigint, primary key (id))
Hibernate: alter table ChildEntity add constraint FKj7t557e8a7axr8jinbltht20y foreign key (parent_id) references ParentEntity
Hibernate: alter table inherit_one add constraint FKlu6huhy2g08akv8wpudpfvqir foreign key (id) references inherit_base
Hibernate: alter table inherit_two add constraint FKe5yjuoa6qr80cm4gcilq1gubk foreign key (id) references inherit_base
Hibernate: alter table parent_friends add constraint FKn858qj6gf7i97mfmurc47k6e8 foreign key (parent_id) references ParentEntity
Hibernate: alter table ParentEntity add constraint FKd0cteits00p7vm083x9iod1lw foreign key (other_object_id) references ChildEntity
2021-12-11 17:23:14,561 TRACE Hibernate Setup Complete.
2021-12-11 17:23:14,561 DEBUG Known entities: [EmbeddedPkEntity, ParentEntity, inherit_two, inherit_one, mapped_superclass_test_entity, inherit_base, ChildEntity]
2021-12-11 17:23:14,561 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.EmbeddedPkEntity
2021-12-11 17:23:14,561 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.SomePrimaryKey from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@44c80ae9
2021-12-11 17:23:14,561 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.SomePrimaryKey from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@44c80ae9
2021-12-11 17:23:14,561 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.EmbeddedPkEntity
2021-12-11 17:23:14,561 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.ParentEntity
2021-12-11 17:23:14,561 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.ChildEntity
2021-12-11 17:23:14,561 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.ChildEntity
2021-12-11 17:23:14,561 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.HumanEmbeddedEntity from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@713aa287
2021-12-11 17:23:14,561 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.HumanEmbeddedEntity from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@713aa287
2021-12-11 17:23:14,561 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.ParentEntity
2021-12-11 17:23:14,561 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject2
2021-12-11 17:23:14,561 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject2
2021-12-11 17:23:14,561 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject1
2021-12-11 17:23:14,561 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject1
2021-12-11 17:23:14,561 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.MappedSuperclassEntity
2021-12-11 17:23:14,562 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.MappedSuperclassEntity
2021-12-11 17:23:14,562 TRACE Creating new transaction to call public void com.peterphi.std.guice.hibernate.webquery.DynamicQueryTest.clearDatabaseBeforeTest()
2021-12-11 17:23:14,562 TRACE Joining existing transaction to call public java.util.List<T> com.peterphi.std.guice.hibernate.dao.HibernateDao.getAll()
2021-12-11 17:23:14,562 TRACE Joining existing transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select childentit0_.id as id1_0_0_, parententi1_.id as id1_7_1_, childentit0_.obj_name as obj_name2_0_0_, childentit0_.parent_id as parent_i3_0_0_, friends2_.parent_id as parent_i1_6_0__, friends2_.firstName as firstNam2_6_0__, friends2_.fullName as fullName3_6_0__, friends2_.lastName as lastName4_6_0__, friends2_.sortName as sortName5_6_0__, parententi1_.deprecated as deprecat2_7_1_, parententi1_.obj_name as obj_name3_7_1_, parententi1_.other_object_id as other_ob5_7_1_, parententi1_.someBytes as someByte4_7_1_, friends2_.parent_id as parent_i1_6_0__, friends2_.firstName as firstNam2_6_0__, friends2_.fullName as fullName3_6_0__, friends2_.lastName as lastName4_6_0__, friends2_.sortName as sortName5_6_0__ from ChildEntity childentit0_ left outer join ParentEntity parententi1_ on childentit0_.parent_id=parententi1_.id left outer join parent_friends friends2_ on parententi1_.id=friends2_.parent_id where 1=1
2021-12-11 17:23:14,566 TRACE Joining existing transaction to call public java.util.List<T> com.peterphi.std.guice.hibernate.dao.HibernateDao.getAll()
2021-12-11 17:23:14,566 TRACE Joining existing transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select parententi0_.id as id1_7_, parententi0_.deprecated as deprecat2_7_, parententi0_.obj_name as obj_name3_7_, parententi0_.other_object_id as other_ob5_7_, parententi0_.someBytes as someByte4_7_, friends1_.parent_id as parent_i1_6_0__, friends1_.firstName as firstNam2_6_0__, friends1_.fullName as fullName3_6_0__, friends1_.lastName as lastName4_6_0__, friends1_.sortName as sortName5_6_0__ from ParentEntity parententi0_ left outer join parent_friends friends1_ on parententi0_.id=friends1_.parent_id where 1=1
2021-12-11 17:23:14,569 TRACE Joining existing transaction to call public java.util.List<T> com.peterphi.std.guice.hibernate.dao.HibernateDao.getAll()
2021-12-11 17:23:14,569 TRACE Joining existing transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select parententi0_.id as id1_7_, parententi0_.deprecated as deprecat2_7_, parententi0_.obj_name as obj_name3_7_, parententi0_.other_object_id as other_ob5_7_, parententi0_.someBytes as someByte4_7_, friends1_.parent_id as parent_i1_6_0__, friends1_.firstName as firstNam2_6_0__, friends1_.fullName as fullName3_6_0__, friends1_.lastName as lastName4_6_0__, friends1_.sortName as sortName5_6_0__ from ParentEntity parententi0_ left outer join parent_friends friends1_ on parententi0_.id=friends1_.parent_id where 1=1
2021-12-11 17:23:14,570 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@2ea1c01
2021-12-11 17:23:14,570 TRACE Creating new transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:14,571 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@c050e2d
Hibernate: insert into ParentEntity (deprecated, obj_name, other_object_id, someBytes, id) values (?, ?, ?, ?, ?)
2021-12-11 17:23:14,572 TRACE Creating new transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select parententi0_.id as id1_7_, parententi0_.deprecated as deprecat2_7_, parententi0_.obj_name as obj_name3_7_, parententi0_.other_object_id as other_ob5_7_, parententi0_.someBytes as someByte4_7_, friends2_.parent_id as parent_i1_6_0__, friends2_.firstName as firstNam2_6_0__, friends2_.fullName as fullName3_6_0__, friends2_.lastName as lastName4_6_0__, friends2_.sortName as sortName5_6_0__ from ParentEntity parententi0_ left outer join ChildEntity childentit1_ on parententi0_.other_object_id=childentit1_.id left outer join parent_friends friends2_ on parententi0_.id=friends2_.parent_id where childentit1_.id is null
2021-12-11 17:23:14,577 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@7d18bcf8
2021-12-11 17:23:14,577  INFO Shut down Hibernate SessionFactory...
2021-12-11 17:23:14,577 TRACE Creating new transaction to call void com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider.runShutDownSQL()
2021-12-11 17:23:14,577 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@2748ca6f
2021-12-11 17:23:14,690 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.embeddedpktest.EmbeddedPkEntity
2021-12-11 17:23:14,690 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject2
2021-12-11 17:23:14,690 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject1
2021-12-11 17:23:14,690 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyBaseObject
2021-12-11 17:23:14,690 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.ParentEntity
2021-12-11 17:23:14,690 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.MappedSuperclassEntity
2021-12-11 17:23:14,690 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.ChildEntity
2021-12-11 17:23:14,690 TRACE Evaluate HibernateConfigurationValidators. has at least one=false
2021-12-11 17:23:14,692  WARN HHH10001002: Using Hibernate built-in connection pool (not for production use!)
Hibernate: alter table ChildEntity drop constraint FKj7t557e8a7axr8jinbltht20y
Hibernate: alter table inherit_one drop constraint FKlu6huhy2g08akv8wpudpfvqir
Hibernate: alter table inherit_two drop constraint FKe5yjuoa6qr80cm4gcilq1gubk
Hibernate: alter table parent_friends drop constraint FKn858qj6gf7i97mfmurc47k6e8
Hibernate: alter table ParentEntity drop constraint FKd0cteits00p7vm083x9iod1lw
Hibernate: drop table ChildEntity if exists
Hibernate: drop table EmbeddedPkEntity if exists
Hibernate: drop table inherit_base if exists
Hibernate: drop table inherit_one if exists
Hibernate: drop table inherit_two if exists
Hibernate: drop table mapped_superclass_test_entity if exists
Hibernate: drop table parent_friends if exists
Hibernate: drop table ParentEntity if exists
Hibernate: drop sequence hibernate_sequence if exists
Hibernate: create sequence hibernate_sequence start with 1 increment by 1
Hibernate: create table ChildEntity (id bigint not null, obj_name varchar(255), parent_id bigint, primary key (id))
Hibernate: create table EmbeddedPkEntity (id varchar(255) not null, timestamp bigint not null, some_name varchar(255), primary key (id, timestamp))
Hibernate: create table inherit_base (id bigint not null, primary key (id))
Hibernate: create table inherit_one (someId varchar(255), id bigint not null, primary key (id))
Hibernate: create table inherit_two (id bigint not null, primary key (id))
Hibernate: create table mapped_superclass_test_entity (id bigint not null, created bigint, updated bigint, obj_name varchar(255), primary key (id))
Hibernate: create table parent_friends (parent_id bigint not null, firstName varchar(255), fullName varchar(255), lastName varchar(255), sortName varchar(255))
Hibernate: create table ParentEntity (id bigint not null, deprecated boolean, obj_name varchar(255), someBytes blob(255), other_object_id bigint, primary key (id))
Hibernate: alter table ChildEntity add constraint FKj7t557e8a7axr8jinbltht20y foreign key (parent_id) references ParentEntity
Hibernate: alter table inherit_one add constraint FKlu6huhy2g08akv8wpudpfvqir foreign key (id) references inherit_base
Hibernate: alter table inherit_two add constraint FKe5yjuoa6qr80cm4gcilq1gubk foreign key (id) references inherit_base
Hibernate: alter table parent_friends add constraint FKn858qj6gf7i97mfmurc47k6e8 foreign key (parent_id) references ParentEntity
Hibernate: alter table ParentEntity add constraint FKd0cteits00p7vm083x9iod1lw foreign key (other_object_id) references ChildEntity
2021-12-11 17:23:14,717 TRACE Hibernate Setup Complete.
2021-12-11 17:23:14,717 DEBUG Known entities: [inherit_one, inherit_two, ChildEntity, EmbeddedPkEntity, inherit_base, mapped_superclass_test_entity, ParentEntity]
2021-12-11 17:23:14,717 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject1
2021-12-11 17:23:14,717 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject1
2021-12-11 17:23:14,717 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject2
2021-12-11 17:23:14,717 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject2
2021-12-11 17:23:14,717 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.ChildEntity
2021-12-11 17:23:14,717 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.ParentEntity
2021-12-11 17:23:14,717 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.HumanEmbeddedEntity from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@2f48d6d7
2021-12-11 17:23:14,717 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.HumanEmbeddedEntity from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@2f48d6d7
2021-12-11 17:23:14,717 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.ParentEntity
2021-12-11 17:23:14,717 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.ChildEntity
2021-12-11 17:23:14,717 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.EmbeddedPkEntity
2021-12-11 17:23:14,717 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.SomePrimaryKey from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@4d5c7e4
2021-12-11 17:23:14,717 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.SomePrimaryKey from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@4d5c7e4
2021-12-11 17:23:14,717 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.EmbeddedPkEntity
2021-12-11 17:23:14,717 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.MappedSuperclassEntity
2021-12-11 17:23:14,717 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.MappedSuperclassEntity
2021-12-11 17:23:14,718 TRACE Creating new transaction to call public void com.peterphi.std.guice.hibernate.webquery.DynamicQueryTest.clearDatabaseBeforeTest()
2021-12-11 17:23:14,718 TRACE Joining existing transaction to call public java.util.List<T> com.peterphi.std.guice.hibernate.dao.HibernateDao.getAll()
2021-12-11 17:23:14,718 TRACE Joining existing transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select childentit0_.id as id1_0_0_, parententi1_.id as id1_7_1_, childentit0_.obj_name as obj_name2_0_0_, childentit0_.parent_id as parent_i3_0_0_, friends2_.parent_id as parent_i1_6_0__, friends2_.firstName as firstNam2_6_0__, friends2_.fullName as fullName3_6_0__, friends2_.lastName as lastName4_6_0__, friends2_.sortName as sortName5_6_0__, parententi1_.deprecated as deprecat2_7_1_, parententi1_.obj_name as obj_name3_7_1_, parententi1_.other_object_id as other_ob5_7_1_, parententi1_.someBytes as someByte4_7_1_, friends2_.parent_id as parent_i1_6_0__, friends2_.firstName as firstNam2_6_0__, friends2_.fullName as fullName3_6_0__, friends2_.lastName as lastName4_6_0__, friends2_.sortName as sortName5_6_0__ from ChildEntity childentit0_ left outer join ParentEntity parententi1_ on childentit0_.parent_id=parententi1_.id left outer join parent_friends friends2_ on parententi1_.id=friends2_.parent_id where 1=1
2021-12-11 17:23:14,722 TRACE Joining existing transaction to call public java.util.List<T> com.peterphi.std.guice.hibernate.dao.HibernateDao.getAll()
2021-12-11 17:23:14,722 TRACE Joining existing transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select parententi0_.id as id1_7_, parententi0_.deprecated as deprecat2_7_, parententi0_.obj_name as obj_name3_7_, parententi0_.other_object_id as other_ob5_7_, parententi0_.someBytes as someByte4_7_, friends1_.parent_id as parent_i1_6_0__, friends1_.firstName as firstNam2_6_0__, friends1_.fullName as fullName3_6_0__, friends1_.lastName as lastName4_6_0__, friends1_.sortName as sortName5_6_0__ from ParentEntity parententi0_ left outer join parent_friends friends1_ on parententi0_.id=friends1_.parent_id where 1=1
2021-12-11 17:23:14,726 TRACE Joining existing transaction to call public java.util.List<T> com.peterphi.std.guice.hibernate.dao.HibernateDao.getAll()
2021-12-11 17:23:14,726 TRACE Joining existing transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select parententi0_.id as id1_7_, parententi0_.deprecated as deprecat2_7_, parententi0_.obj_name as obj_name3_7_, parententi0_.other_object_id as other_ob5_7_, parententi0_.someBytes as someByte4_7_, friends1_.parent_id as parent_i1_6_0__, friends1_.firstName as firstNam2_6_0__, friends1_.fullName as fullName3_6_0__, friends1_.lastName as lastName4_6_0__, friends1_.sortName as sortName5_6_0__ from ParentEntity parententi0_ left outer join parent_friends friends1_ on parententi0_.id=friends1_.parent_id where 1=1
2021-12-11 17:23:14,727 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@3a1e95a3
2021-12-11 17:23:14,727 TRACE Creating new transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select parententi0_.id as id1_7_, parententi0_.deprecated as deprecat2_7_, parententi0_.obj_name as obj_name3_7_, parententi0_.other_object_id as other_ob5_7_, parententi0_.someBytes as someByte4_7_, friends2_.parent_id as parent_i1_6_0__, friends2_.firstName as firstNam2_6_0__, friends2_.fullName as fullName3_6_0__, friends2_.lastName as lastName4_6_0__, friends2_.sortName as sortName5_6_0__ from ParentEntity parententi0_ left outer join parent_friends friends1_ on parententi0_.id=friends1_.parent_id left outer join parent_friends friends2_ on parententi0_.id=friends2_.parent_id where friends1_.firstName=? and friends1_.lastName=?
2021-12-11 17:23:14,734 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@17c80cf1
2021-12-11 17:23:14,735  INFO Shut down Hibernate SessionFactory...
2021-12-11 17:23:14,735 TRACE Creating new transaction to call void com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider.runShutDownSQL()
2021-12-11 17:23:14,735 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@398ba576
2021-12-11 17:23:14,849 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.embeddedpktest.EmbeddedPkEntity
2021-12-11 17:23:14,849 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject2
2021-12-11 17:23:14,849 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject1
2021-12-11 17:23:14,849 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyBaseObject
2021-12-11 17:23:14,849 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.ParentEntity
2021-12-11 17:23:14,849 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.MappedSuperclassEntity
2021-12-11 17:23:14,849 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.ChildEntity
2021-12-11 17:23:14,849 TRACE Evaluate HibernateConfigurationValidators. has at least one=false
2021-12-11 17:23:14,852  WARN HHH10001002: Using Hibernate built-in connection pool (not for production use!)
Hibernate: alter table ChildEntity drop constraint FKj7t557e8a7axr8jinbltht20y
Hibernate: alter table inherit_one drop constraint FKlu6huhy2g08akv8wpudpfvqir
Hibernate: alter table inherit_two drop constraint FKe5yjuoa6qr80cm4gcilq1gubk
Hibernate: alter table parent_friends drop constraint FKn858qj6gf7i97mfmurc47k6e8
Hibernate: alter table ParentEntity drop constraint FKd0cteits00p7vm083x9iod1lw
Hibernate: drop table ChildEntity if exists
Hibernate: drop table EmbeddedPkEntity if exists
Hibernate: drop table inherit_base if exists
Hibernate: drop table inherit_one if exists
Hibernate: drop table inherit_two if exists
Hibernate: drop table mapped_superclass_test_entity if exists
Hibernate: drop table parent_friends if exists
Hibernate: drop table ParentEntity if exists
Hibernate: drop sequence hibernate_sequence if exists
Hibernate: create sequence hibernate_sequence start with 1 increment by 1
Hibernate: create table ChildEntity (id bigint not null, obj_name varchar(255), parent_id bigint, primary key (id))
Hibernate: create table EmbeddedPkEntity (id varchar(255) not null, timestamp bigint not null, some_name varchar(255), primary key (id, timestamp))
Hibernate: create table inherit_base (id bigint not null, primary key (id))
Hibernate: create table inherit_one (someId varchar(255), id bigint not null, primary key (id))
Hibernate: create table inherit_two (id bigint not null, primary key (id))
Hibernate: create table mapped_superclass_test_entity (id bigint not null, created bigint, updated bigint, obj_name varchar(255), primary key (id))
Hibernate: create table parent_friends (parent_id bigint not null, firstName varchar(255), fullName varchar(255), lastName varchar(255), sortName varchar(255))
Hibernate: create table ParentEntity (id bigint not null, deprecated boolean, obj_name varchar(255), someBytes blob(255), other_object_id bigint, primary key (id))
Hibernate: alter table ChildEntity add constraint FKj7t557e8a7axr8jinbltht20y foreign key (parent_id) references ParentEntity
Hibernate: alter table inherit_one add constraint FKlu6huhy2g08akv8wpudpfvqir foreign key (id) references inherit_base
Hibernate: alter table inherit_two add constraint FKe5yjuoa6qr80cm4gcilq1gubk foreign key (id) references inherit_base
Hibernate: alter table parent_friends add constraint FKn858qj6gf7i97mfmurc47k6e8 foreign key (parent_id) references ParentEntity
Hibernate: alter table ParentEntity add constraint FKd0cteits00p7vm083x9iod1lw foreign key (other_object_id) references ChildEntity
2021-12-11 17:23:14,872 TRACE Hibernate Setup Complete.
2021-12-11 17:23:14,872 DEBUG Known entities: [inherit_base, ChildEntity, inherit_one, EmbeddedPkEntity, ParentEntity, inherit_two, mapped_superclass_test_entity]
2021-12-11 17:23:14,872 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.ChildEntity
2021-12-11 17:23:14,872 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.ParentEntity
2021-12-11 17:23:14,872 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.HumanEmbeddedEntity from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@5f7511eb
2021-12-11 17:23:14,872 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.HumanEmbeddedEntity from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@5f7511eb
2021-12-11 17:23:14,872 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.ParentEntity
2021-12-11 17:23:14,872 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.ChildEntity
2021-12-11 17:23:14,872 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject1
2021-12-11 17:23:14,872 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject1
2021-12-11 17:23:14,872 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.EmbeddedPkEntity
2021-12-11 17:23:14,872 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.SomePrimaryKey from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@45583e3a
2021-12-11 17:23:14,872 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.SomePrimaryKey from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@45583e3a
2021-12-11 17:23:14,872 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.EmbeddedPkEntity
2021-12-11 17:23:14,872 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject2
2021-12-11 17:23:14,872 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject2
2021-12-11 17:23:14,872 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.MappedSuperclassEntity
2021-12-11 17:23:14,872 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.MappedSuperclassEntity
2021-12-11 17:23:14,873 TRACE Creating new transaction to call public void com.peterphi.std.guice.hibernate.webquery.DynamicQueryTest.clearDatabaseBeforeTest()
2021-12-11 17:23:14,873 TRACE Joining existing transaction to call public java.util.List<T> com.peterphi.std.guice.hibernate.dao.HibernateDao.getAll()
2021-12-11 17:23:14,873 TRACE Joining existing transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select childentit0_.id as id1_0_0_, parententi1_.id as id1_7_1_, childentit0_.obj_name as obj_name2_0_0_, childentit0_.parent_id as parent_i3_0_0_, friends2_.parent_id as parent_i1_6_0__, friends2_.firstName as firstNam2_6_0__, friends2_.fullName as fullName3_6_0__, friends2_.lastName as lastName4_6_0__, friends2_.sortName as sortName5_6_0__, parententi1_.deprecated as deprecat2_7_1_, parententi1_.obj_name as obj_name3_7_1_, parententi1_.other_object_id as other_ob5_7_1_, parententi1_.someBytes as someByte4_7_1_, friends2_.parent_id as parent_i1_6_0__, friends2_.firstName as firstNam2_6_0__, friends2_.fullName as fullName3_6_0__, friends2_.lastName as lastName4_6_0__, friends2_.sortName as sortName5_6_0__ from ChildEntity childentit0_ left outer join ParentEntity parententi1_ on childentit0_.parent_id=parententi1_.id left outer join parent_friends friends2_ on parententi1_.id=friends2_.parent_id where 1=1
2021-12-11 17:23:14,877 TRACE Joining existing transaction to call public java.util.List<T> com.peterphi.std.guice.hibernate.dao.HibernateDao.getAll()
2021-12-11 17:23:14,877 TRACE Joining existing transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select parententi0_.id as id1_7_, parententi0_.deprecated as deprecat2_7_, parententi0_.obj_name as obj_name3_7_, parententi0_.other_object_id as other_ob5_7_, parententi0_.someBytes as someByte4_7_, friends1_.parent_id as parent_i1_6_0__, friends1_.firstName as firstNam2_6_0__, friends1_.fullName as fullName3_6_0__, friends1_.lastName as lastName4_6_0__, friends1_.sortName as sortName5_6_0__ from ParentEntity parententi0_ left outer join parent_friends friends1_ on parententi0_.id=friends1_.parent_id where 1=1
2021-12-11 17:23:14,879 TRACE Joining existing transaction to call public java.util.List<T> com.peterphi.std.guice.hibernate.dao.HibernateDao.getAll()
2021-12-11 17:23:14,879 TRACE Joining existing transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select parententi0_.id as id1_7_, parententi0_.deprecated as deprecat2_7_, parententi0_.obj_name as obj_name3_7_, parententi0_.other_object_id as other_ob5_7_, parententi0_.someBytes as someByte4_7_, friends1_.parent_id as parent_i1_6_0__, friends1_.firstName as firstNam2_6_0__, friends1_.fullName as fullName3_6_0__, friends1_.lastName as lastName4_6_0__, friends1_.sortName as sortName5_6_0__ from ParentEntity parententi0_ left outer join parent_friends friends1_ on parententi0_.id=friends1_.parent_id where 1=1
2021-12-11 17:23:14,879 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@9900b79
2021-12-11 17:23:14,880 TRACE Creating new transaction to call public T com.peterphi.std.guice.hibernate.dao.HibernateDao.getByUniqueProperty(java.lang.String,java.lang.Object)
2021-12-11 17:23:14,880 TRACE Joining existing transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select parententi0_.id as id1_7_, parententi0_.deprecated as deprecat2_7_, parententi0_.obj_name as obj_name3_7_, parententi0_.other_object_id as other_ob5_7_, parententi0_.someBytes as someByte4_7_, friends2_.parent_id as parent_i1_6_0__, friends2_.firstName as firstNam2_6_0__, friends2_.fullName as fullName3_6_0__, friends2_.lastName as lastName4_6_0__, friends2_.sortName as sortName5_6_0__ from ParentEntity parententi0_ left outer join ChildEntity children1_ on parententi0_.id=children1_.parent_id left outer join parent_friends friends2_ on parententi0_.id=friends2_.parent_id where children1_.id=?
2021-12-11 17:23:14,883 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@76c6c15
2021-12-11 17:23:14,883  INFO Shut down Hibernate SessionFactory...
2021-12-11 17:23:14,883 TRACE Creating new transaction to call void com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider.runShutDownSQL()
2021-12-11 17:23:14,883 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@36f30b30
2021-12-11 17:23:14,998 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.embeddedpktest.EmbeddedPkEntity
2021-12-11 17:23:14,998 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject2
2021-12-11 17:23:14,998 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject1
2021-12-11 17:23:14,998 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyBaseObject
2021-12-11 17:23:14,998 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.ParentEntity
2021-12-11 17:23:14,998 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.MappedSuperclassEntity
2021-12-11 17:23:14,998 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.ChildEntity
2021-12-11 17:23:14,999 TRACE Evaluate HibernateConfigurationValidators. has at least one=false
2021-12-11 17:23:15,001  WARN HHH10001002: Using Hibernate built-in connection pool (not for production use!)
Hibernate: alter table ChildEntity drop constraint FKj7t557e8a7axr8jinbltht20y
Hibernate: alter table inherit_one drop constraint FKlu6huhy2g08akv8wpudpfvqir
Hibernate: alter table inherit_two drop constraint FKe5yjuoa6qr80cm4gcilq1gubk
Hibernate: alter table parent_friends drop constraint FKn858qj6gf7i97mfmurc47k6e8
Hibernate: alter table ParentEntity drop constraint FKd0cteits00p7vm083x9iod1lw
Hibernate: drop table ChildEntity if exists
Hibernate: drop table EmbeddedPkEntity if exists
Hibernate: drop table inherit_base if exists
Hibernate: drop table inherit_one if exists
Hibernate: drop table inherit_two if exists
Hibernate: drop table mapped_superclass_test_entity if exists
Hibernate: drop table parent_friends if exists
Hibernate: drop table ParentEntity if exists
Hibernate: drop sequence hibernate_sequence if exists
Hibernate: create sequence hibernate_sequence start with 1 increment by 1
Hibernate: create table ChildEntity (id bigint not null, obj_name varchar(255), parent_id bigint, primary key (id))
Hibernate: create table EmbeddedPkEntity (id varchar(255) not null, timestamp bigint not null, some_name varchar(255), primary key (id, timestamp))
Hibernate: create table inherit_base (id bigint not null, primary key (id))
Hibernate: create table inherit_one (someId varchar(255), id bigint not null, primary key (id))
Hibernate: create table inherit_two (id bigint not null, primary key (id))
Hibernate: create table mapped_superclass_test_entity (id bigint not null, created bigint, updated bigint, obj_name varchar(255), primary key (id))
Hibernate: create table parent_friends (parent_id bigint not null, firstName varchar(255), fullName varchar(255), lastName varchar(255), sortName varchar(255))
Hibernate: create table ParentEntity (id bigint not null, deprecated boolean, obj_name varchar(255), someBytes blob(255), other_object_id bigint, primary key (id))
Hibernate: alter table ChildEntity add constraint FKj7t557e8a7axr8jinbltht20y foreign key (parent_id) references ParentEntity
Hibernate: alter table inherit_one add constraint FKlu6huhy2g08akv8wpudpfvqir foreign key (id) references inherit_base
Hibernate: alter table inherit_two add constraint FKe5yjuoa6qr80cm4gcilq1gubk foreign key (id) references inherit_base
Hibernate: alter table parent_friends add constraint FKn858qj6gf7i97mfmurc47k6e8 foreign key (parent_id) references ParentEntity
Hibernate: alter table ParentEntity add constraint FKd0cteits00p7vm083x9iod1lw foreign key (other_object_id) references ChildEntity
2021-12-11 17:23:15,026 TRACE Hibernate Setup Complete.
2021-12-11 17:23:15,026 DEBUG Known entities: [inherit_one, ChildEntity, inherit_base, ParentEntity, mapped_superclass_test_entity, inherit_two, EmbeddedPkEntity]
2021-12-11 17:23:15,026 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject1
2021-12-11 17:23:15,026 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject1
2021-12-11 17:23:15,026 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.ChildEntity
2021-12-11 17:23:15,026 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.ParentEntity
2021-12-11 17:23:15,026 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.HumanEmbeddedEntity from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@5d9120b
2021-12-11 17:23:15,026 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.HumanEmbeddedEntity from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@5d9120b
2021-12-11 17:23:15,026 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.ParentEntity
2021-12-11 17:23:15,026 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.ChildEntity
2021-12-11 17:23:15,026 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.MappedSuperclassEntity
2021-12-11 17:23:15,026 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.MappedSuperclassEntity
2021-12-11 17:23:15,026 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject2
2021-12-11 17:23:15,027 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject2
2021-12-11 17:23:15,027 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.EmbeddedPkEntity
2021-12-11 17:23:15,027 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.SomePrimaryKey from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@4b5a5ce8
2021-12-11 17:23:15,027 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.SomePrimaryKey from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@4b5a5ce8
2021-12-11 17:23:15,027 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.EmbeddedPkEntity
2021-12-11 17:23:15,027 TRACE Creating new transaction to call public void com.peterphi.std.guice.hibernate.webquery.DynamicQueryTest.clearDatabaseBeforeTest()
2021-12-11 17:23:15,027 TRACE Joining existing transaction to call public java.util.List<T> com.peterphi.std.guice.hibernate.dao.HibernateDao.getAll()
2021-12-11 17:23:15,028 TRACE Joining existing transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select childentit0_.id as id1_0_0_, parententi1_.id as id1_7_1_, childentit0_.obj_name as obj_name2_0_0_, childentit0_.parent_id as parent_i3_0_0_, friends2_.parent_id as parent_i1_6_0__, friends2_.firstName as firstNam2_6_0__, friends2_.fullName as fullName3_6_0__, friends2_.lastName as lastName4_6_0__, friends2_.sortName as sortName5_6_0__, parententi1_.deprecated as deprecat2_7_1_, parententi1_.obj_name as obj_name3_7_1_, parententi1_.other_object_id as other_ob5_7_1_, parententi1_.someBytes as someByte4_7_1_, friends2_.parent_id as parent_i1_6_0__, friends2_.firstName as firstNam2_6_0__, friends2_.fullName as fullName3_6_0__, friends2_.lastName as lastName4_6_0__, friends2_.sortName as sortName5_6_0__ from ChildEntity childentit0_ left outer join ParentEntity parententi1_ on childentit0_.parent_id=parententi1_.id left outer join parent_friends friends2_ on parententi1_.id=friends2_.parent_id where 1=1
2021-12-11 17:23:15,032 TRACE Joining existing transaction to call public java.util.List<T> com.peterphi.std.guice.hibernate.dao.HibernateDao.getAll()
2021-12-11 17:23:15,032 TRACE Joining existing transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select parententi0_.id as id1_7_, parententi0_.deprecated as deprecat2_7_, parententi0_.obj_name as obj_name3_7_, parententi0_.other_object_id as other_ob5_7_, parententi0_.someBytes as someByte4_7_, friends1_.parent_id as parent_i1_6_0__, friends1_.firstName as firstNam2_6_0__, friends1_.fullName as fullName3_6_0__, friends1_.lastName as lastName4_6_0__, friends1_.sortName as sortName5_6_0__ from ParentEntity parententi0_ left outer join parent_friends friends1_ on parententi0_.id=friends1_.parent_id where 1=1
2021-12-11 17:23:15,034 TRACE Joining existing transaction to call public java.util.List<T> com.peterphi.std.guice.hibernate.dao.HibernateDao.getAll()
2021-12-11 17:23:15,035 TRACE Joining existing transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select parententi0_.id as id1_7_, parententi0_.deprecated as deprecat2_7_, parententi0_.obj_name as obj_name3_7_, parententi0_.other_object_id as other_ob5_7_, parententi0_.someBytes as someByte4_7_, friends1_.parent_id as parent_i1_6_0__, friends1_.firstName as firstNam2_6_0__, friends1_.fullName as fullName3_6_0__, friends1_.lastName as lastName4_6_0__, friends1_.sortName as sortName5_6_0__ from ParentEntity parententi0_ left outer join parent_friends friends1_ on parententi0_.id=friends1_.parent_id where 1=1
2021-12-11 17:23:15,035 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@6549e2ac
2021-12-11 17:23:15,035 TRACE Creating new transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:15,036 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@6795a0da
Hibernate: insert into ParentEntity (deprecated, obj_name, other_object_id, someBytes, id) values (?, ?, ?, ?, ?)
2021-12-11 17:23:15,037 TRACE Creating new transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:15,038 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@29b6525b
Hibernate: insert into ParentEntity (deprecated, obj_name, other_object_id, someBytes, id) values (?, ?, ?, ?, ?)
2021-12-11 17:23:15,039 TRACE Creating new transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:15,039 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@556efa10
Hibernate: insert into ChildEntity (obj_name, parent_id, id) values (?, ?, ?)
2021-12-11 17:23:15,040 TRACE Creating new transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:15,040 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@35289160
Hibernate: insert into ChildEntity (obj_name, parent_id, id) values (?, ?, ?)
2021-12-11 17:23:15,040 TRACE Creating new transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select parententi0_.id as id1_7_, parententi0_.deprecated as deprecat2_7_, parententi0_.obj_name as obj_name3_7_, parententi0_.other_object_id as other_ob5_7_, parententi0_.someBytes as someByte4_7_, friends1_.parent_id as parent_i1_6_0__, friends1_.firstName as firstNam2_6_0__, friends1_.fullName as fullName3_6_0__, friends1_.lastName as lastName4_6_0__, friends1_.sortName as sortName5_6_0__ from ParentEntity parententi0_ left outer join parent_friends friends1_ on parententi0_.id=friends1_.parent_id where 1=1
2021-12-11 17:23:15,041 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@123ccc65
2021-12-11 17:23:15,041 TRACE Creating new transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select parententi0_.id as id1_7_, parententi0_.deprecated as deprecat2_7_, parententi0_.obj_name as obj_name3_7_, parententi0_.other_object_id as other_ob5_7_, parententi0_.someBytes as someByte4_7_, friends1_.parent_id as parent_i1_6_0__, friends1_.firstName as firstNam2_6_0__, friends1_.fullName as fullName3_6_0__, friends1_.lastName as lastName4_6_0__, friends1_.sortName as sortName5_6_0__ from ParentEntity parententi0_ left outer join parent_friends friends1_ on parententi0_.id=friends1_.parent_id where (select count(children2_.parent_id) from ChildEntity children2_ where parententi0_.id=children2_.parent_id)>=?
2021-12-11 17:23:15,048 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@5847e226
2021-12-11 17:23:15,048 TRACE Creating new transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select parententi0_.id as id1_7_, parententi0_.deprecated as deprecat2_7_, parententi0_.obj_name as obj_name3_7_, parententi0_.other_object_id as other_ob5_7_, parententi0_.someBytes as someByte4_7_, friends1_.parent_id as parent_i1_6_0__, friends1_.firstName as firstNam2_6_0__, friends1_.fullName as fullName3_6_0__, friends1_.lastName as lastName4_6_0__, friends1_.sortName as sortName5_6_0__ from ParentEntity parententi0_ left outer join parent_friends friends1_ on parententi0_.id=friends1_.parent_id where (select count(children2_.parent_id) from ChildEntity children2_ where parententi0_.id=children2_.parent_id)=?
2021-12-11 17:23:15,051 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@7e9d4b02
2021-12-11 17:23:15,051  INFO Shut down Hibernate SessionFactory...
2021-12-11 17:23:15,051 TRACE Creating new transaction to call void com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider.runShutDownSQL()
2021-12-11 17:23:15,051 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@2c606112
2021-12-11 17:23:15,173 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.embeddedpktest.EmbeddedPkEntity
2021-12-11 17:23:15,173 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject2
2021-12-11 17:23:15,173 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject1
2021-12-11 17:23:15,173 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyBaseObject
2021-12-11 17:23:15,173 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.ParentEntity
2021-12-11 17:23:15,173 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.MappedSuperclassEntity
2021-12-11 17:23:15,173 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.ChildEntity
2021-12-11 17:23:15,173 TRACE Evaluate HibernateConfigurationValidators. has at least one=false
2021-12-11 17:23:15,175  WARN HHH10001002: Using Hibernate built-in connection pool (not for production use!)
Hibernate: alter table ChildEntity drop constraint FKj7t557e8a7axr8jinbltht20y
Hibernate: alter table inherit_one drop constraint FKlu6huhy2g08akv8wpudpfvqir
Hibernate: alter table inherit_two drop constraint FKe5yjuoa6qr80cm4gcilq1gubk
Hibernate: alter table parent_friends drop constraint FKn858qj6gf7i97mfmurc47k6e8
Hibernate: alter table ParentEntity drop constraint FKd0cteits00p7vm083x9iod1lw
Hibernate: drop table ChildEntity if exists
Hibernate: drop table EmbeddedPkEntity if exists
Hibernate: drop table inherit_base if exists
Hibernate: drop table inherit_one if exists
Hibernate: drop table inherit_two if exists
Hibernate: drop table mapped_superclass_test_entity if exists
Hibernate: drop table parent_friends if exists
Hibernate: drop table ParentEntity if exists
Hibernate: drop sequence hibernate_sequence if exists
Hibernate: create sequence hibernate_sequence start with 1 increment by 1
Hibernate: create table ChildEntity (id bigint not null, obj_name varchar(255), parent_id bigint, primary key (id))
Hibernate: create table EmbeddedPkEntity (id varchar(255) not null, timestamp bigint not null, some_name varchar(255), primary key (id, timestamp))
Hibernate: create table inherit_base (id bigint not null, primary key (id))
Hibernate: create table inherit_one (someId varchar(255), id bigint not null, primary key (id))
Hibernate: create table inherit_two (id bigint not null, primary key (id))
Hibernate: create table mapped_superclass_test_entity (id bigint not null, created bigint, updated bigint, obj_name varchar(255), primary key (id))
Hibernate: create table parent_friends (parent_id bigint not null, firstName varchar(255), fullName varchar(255), lastName varchar(255), sortName varchar(255))
Hibernate: create table ParentEntity (id bigint not null, deprecated boolean, obj_name varchar(255), someBytes blob(255), other_object_id bigint, primary key (id))
Hibernate: alter table ChildEntity add constraint FKj7t557e8a7axr8jinbltht20y foreign key (parent_id) references ParentEntity
Hibernate: alter table inherit_one add constraint FKlu6huhy2g08akv8wpudpfvqir foreign key (id) references inherit_base
Hibernate: alter table inherit_two add constraint FKe5yjuoa6qr80cm4gcilq1gubk foreign key (id) references inherit_base
Hibernate: alter table parent_friends add constraint FKn858qj6gf7i97mfmurc47k6e8 foreign key (parent_id) references ParentEntity
Hibernate: alter table ParentEntity add constraint FKd0cteits00p7vm083x9iod1lw foreign key (other_object_id) references ChildEntity
2021-12-11 17:23:15,198 TRACE Hibernate Setup Complete.
2021-12-11 17:23:15,198 DEBUG Known entities: [ChildEntity, inherit_one, inherit_two, EmbeddedPkEntity, inherit_base, mapped_superclass_test_entity, ParentEntity]
2021-12-11 17:23:15,198 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.ChildEntity
2021-12-11 17:23:15,198 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.ParentEntity
2021-12-11 17:23:15,198 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.HumanEmbeddedEntity from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@154c6ab3
2021-12-11 17:23:15,198 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.HumanEmbeddedEntity from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@154c6ab3
2021-12-11 17:23:15,198 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.ParentEntity
2021-12-11 17:23:15,198 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.ChildEntity
2021-12-11 17:23:15,199 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject1
2021-12-11 17:23:15,199 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject1
2021-12-11 17:23:15,199 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject2
2021-12-11 17:23:15,199 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject2
2021-12-11 17:23:15,199 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.EmbeddedPkEntity
2021-12-11 17:23:15,199 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.SomePrimaryKey from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@de215f9
2021-12-11 17:23:15,199 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.SomePrimaryKey from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@de215f9
2021-12-11 17:23:15,199 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.EmbeddedPkEntity
2021-12-11 17:23:15,199 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.MappedSuperclassEntity
2021-12-11 17:23:15,199 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.MappedSuperclassEntity
2021-12-11 17:23:15,199 TRACE Creating new transaction to call public void com.peterphi.std.guice.hibernate.webquery.DynamicQueryTest.clearDatabaseBeforeTest()
2021-12-11 17:23:15,199 TRACE Joining existing transaction to call public java.util.List<T> com.peterphi.std.guice.hibernate.dao.HibernateDao.getAll()
2021-12-11 17:23:15,199 TRACE Joining existing transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select childentit0_.id as id1_0_0_, parententi1_.id as id1_7_1_, childentit0_.obj_name as obj_name2_0_0_, childentit0_.parent_id as parent_i3_0_0_, friends2_.parent_id as parent_i1_6_0__, friends2_.firstName as firstNam2_6_0__, friends2_.fullName as fullName3_6_0__, friends2_.lastName as lastName4_6_0__, friends2_.sortName as sortName5_6_0__, parententi1_.deprecated as deprecat2_7_1_, parententi1_.obj_name as obj_name3_7_1_, parententi1_.other_object_id as other_ob5_7_1_, parententi1_.someBytes as someByte4_7_1_, friends2_.parent_id as parent_i1_6_0__, friends2_.firstName as firstNam2_6_0__, friends2_.fullName as fullName3_6_0__, friends2_.lastName as lastName4_6_0__, friends2_.sortName as sortName5_6_0__ from ChildEntity childentit0_ left outer join ParentEntity parententi1_ on childentit0_.parent_id=parententi1_.id left outer join parent_friends friends2_ on parententi1_.id=friends2_.parent_id where 1=1
2021-12-11 17:23:15,203 TRACE Joining existing transaction to call public java.util.List<T> com.peterphi.std.guice.hibernate.dao.HibernateDao.getAll()
2021-12-11 17:23:15,203 TRACE Joining existing transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select parententi0_.id as id1_7_, parententi0_.deprecated as deprecat2_7_, parententi0_.obj_name as obj_name3_7_, parententi0_.other_object_id as other_ob5_7_, parententi0_.someBytes as someByte4_7_, friends1_.parent_id as parent_i1_6_0__, friends1_.firstName as firstNam2_6_0__, friends1_.fullName as fullName3_6_0__, friends1_.lastName as lastName4_6_0__, friends1_.sortName as sortName5_6_0__ from ParentEntity parententi0_ left outer join parent_friends friends1_ on parententi0_.id=friends1_.parent_id where 1=1
2021-12-11 17:23:15,205 TRACE Joining existing transaction to call public java.util.List<T> com.peterphi.std.guice.hibernate.dao.HibernateDao.getAll()
2021-12-11 17:23:15,205 TRACE Joining existing transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select parententi0_.id as id1_7_, parententi0_.deprecated as deprecat2_7_, parententi0_.obj_name as obj_name3_7_, parententi0_.other_object_id as other_ob5_7_, parententi0_.someBytes as someByte4_7_, friends1_.parent_id as parent_i1_6_0__, friends1_.firstName as firstNam2_6_0__, friends1_.fullName as fullName3_6_0__, friends1_.lastName as lastName4_6_0__, friends1_.sortName as sortName5_6_0__ from ParentEntity parententi0_ left outer join parent_friends friends1_ on parententi0_.id=friends1_.parent_id where 1=1
2021-12-11 17:23:15,205 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@9b2910a
2021-12-11 17:23:15,206 TRACE Creating new transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:15,206 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@2e197618
Hibernate: insert into ParentEntity (deprecated, obj_name, other_object_id, someBytes, id) values (?, ?, ?, ?, ?)
2021-12-11 17:23:15,208 TRACE Creating new transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:15,208 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@77bf12c2
Hibernate: insert into ParentEntity (deprecated, obj_name, other_object_id, someBytes, id) values (?, ?, ?, ?, ?)
2021-12-11 17:23:15,210 TRACE Creating new transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select parententi0_.id as id1_7_, parententi0_.deprecated as deprecat2_7_, parententi0_.obj_name as obj_name3_7_, parententi0_.other_object_id as other_ob5_7_, parententi0_.someBytes as someByte4_7_, friends1_.parent_id as parent_i1_6_0__, friends1_.firstName as firstNam2_6_0__, friends1_.fullName as fullName3_6_0__, friends1_.lastName as lastName4_6_0__, friends1_.sortName as sortName5_6_0__ from ParentEntity parententi0_ left outer join parent_friends friends1_ on parententi0_.id=friends1_.parent_id where 1=1 order by parententi0_.id desc
2021-12-11 17:23:15,213 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@248241bf
2021-12-11 17:23:15,213  INFO Shut down Hibernate SessionFactory...
2021-12-11 17:23:15,214 TRACE Creating new transaction to call void com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider.runShutDownSQL()
2021-12-11 17:23:15,214 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@60668590
2021-12-11 17:23:15,335 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.embeddedpktest.EmbeddedPkEntity
2021-12-11 17:23:15,335 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject2
2021-12-11 17:23:15,335 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject1
2021-12-11 17:23:15,335 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyBaseObject
2021-12-11 17:23:15,335 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.ParentEntity
2021-12-11 17:23:15,335 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.MappedSuperclassEntity
2021-12-11 17:23:15,335 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.ChildEntity
2021-12-11 17:23:15,335 TRACE Evaluate HibernateConfigurationValidators. has at least one=false
2021-12-11 17:23:15,337  WARN HHH10001002: Using Hibernate built-in connection pool (not for production use!)
Hibernate: alter table ChildEntity drop constraint FKj7t557e8a7axr8jinbltht20y
Hibernate: alter table inherit_one drop constraint FKlu6huhy2g08akv8wpudpfvqir
Hibernate: alter table inherit_two drop constraint FKe5yjuoa6qr80cm4gcilq1gubk
Hibernate: alter table parent_friends drop constraint FKn858qj6gf7i97mfmurc47k6e8
Hibernate: alter table ParentEntity drop constraint FKd0cteits00p7vm083x9iod1lw
Hibernate: drop table ChildEntity if exists
Hibernate: drop table EmbeddedPkEntity if exists
Hibernate: drop table inherit_base if exists
Hibernate: drop table inherit_one if exists
Hibernate: drop table inherit_two if exists
Hibernate: drop table mapped_superclass_test_entity if exists
Hibernate: drop table parent_friends if exists
Hibernate: drop table ParentEntity if exists
Hibernate: drop sequence hibernate_sequence if exists
Hibernate: create sequence hibernate_sequence start with 1 increment by 1
Hibernate: create table ChildEntity (id bigint not null, obj_name varchar(255), parent_id bigint, primary key (id))
Hibernate: create table EmbeddedPkEntity (id varchar(255) not null, timestamp bigint not null, some_name varchar(255), primary key (id, timestamp))
Hibernate: create table inherit_base (id bigint not null, primary key (id))
Hibernate: create table inherit_one (someId varchar(255), id bigint not null, primary key (id))
Hibernate: create table inherit_two (id bigint not null, primary key (id))
Hibernate: create table mapped_superclass_test_entity (id bigint not null, created bigint, updated bigint, obj_name varchar(255), primary key (id))
Hibernate: create table parent_friends (parent_id bigint not null, firstName varchar(255), fullName varchar(255), lastName varchar(255), sortName varchar(255))
Hibernate: create table ParentEntity (id bigint not null, deprecated boolean, obj_name varchar(255), someBytes blob(255), other_object_id bigint, primary key (id))
Hibernate: alter table ChildEntity add constraint FKj7t557e8a7axr8jinbltht20y foreign key (parent_id) references ParentEntity
Hibernate: alter table inherit_one add constraint FKlu6huhy2g08akv8wpudpfvqir foreign key (id) references inherit_base
Hibernate: alter table inherit_two add constraint FKe5yjuoa6qr80cm4gcilq1gubk foreign key (id) references inherit_base
Hibernate: alter table parent_friends add constraint FKn858qj6gf7i97mfmurc47k6e8 foreign key (parent_id) references ParentEntity
Hibernate: alter table ParentEntity add constraint FKd0cteits00p7vm083x9iod1lw foreign key (other_object_id) references ChildEntity
2021-12-11 17:23:15,368 TRACE Hibernate Setup Complete.
2021-12-11 17:23:15,368 DEBUG Known entities: [inherit_base, ChildEntity, mapped_superclass_test_entity, EmbeddedPkEntity, ParentEntity, inherit_one, inherit_two]
2021-12-11 17:23:15,368 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.ChildEntity
2021-12-11 17:23:15,368 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.ParentEntity
2021-12-11 17:23:15,368 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.HumanEmbeddedEntity from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@36d5f37
2021-12-11 17:23:15,368 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.HumanEmbeddedEntity from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@36d5f37
2021-12-11 17:23:15,368 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.ParentEntity
2021-12-11 17:23:15,368 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.ChildEntity
2021-12-11 17:23:15,368 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.MappedSuperclassEntity
2021-12-11 17:23:15,368 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.MappedSuperclassEntity
2021-12-11 17:23:15,368 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.EmbeddedPkEntity
2021-12-11 17:23:15,368 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.SomePrimaryKey from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@74586649
2021-12-11 17:23:15,368 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.SomePrimaryKey from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@74586649
2021-12-11 17:23:15,368 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.EmbeddedPkEntity
2021-12-11 17:23:15,368 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject1
2021-12-11 17:23:15,368 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject1
2021-12-11 17:23:15,368 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject2
2021-12-11 17:23:15,369 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject2
2021-12-11 17:23:15,369 TRACE Creating new transaction to call public void com.peterphi.std.guice.hibernate.webquery.DynamicQueryTest.clearDatabaseBeforeTest()
2021-12-11 17:23:15,369 TRACE Joining existing transaction to call public java.util.List<T> com.peterphi.std.guice.hibernate.dao.HibernateDao.getAll()
2021-12-11 17:23:15,369 TRACE Joining existing transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select childentit0_.id as id1_0_0_, parententi1_.id as id1_7_1_, childentit0_.obj_name as obj_name2_0_0_, childentit0_.parent_id as parent_i3_0_0_, friends2_.parent_id as parent_i1_6_0__, friends2_.firstName as firstNam2_6_0__, friends2_.fullName as fullName3_6_0__, friends2_.lastName as lastName4_6_0__, friends2_.sortName as sortName5_6_0__, parententi1_.deprecated as deprecat2_7_1_, parententi1_.obj_name as obj_name3_7_1_, parententi1_.other_object_id as other_ob5_7_1_, parententi1_.someBytes as someByte4_7_1_, friends2_.parent_id as parent_i1_6_0__, friends2_.firstName as firstNam2_6_0__, friends2_.fullName as fullName3_6_0__, friends2_.lastName as lastName4_6_0__, friends2_.sortName as sortName5_6_0__ from ChildEntity childentit0_ left outer join ParentEntity parententi1_ on childentit0_.parent_id=parententi1_.id left outer join parent_friends friends2_ on parententi1_.id=friends2_.parent_id where 1=1
2021-12-11 17:23:15,373 TRACE Joining existing transaction to call public java.util.List<T> com.peterphi.std.guice.hibernate.dao.HibernateDao.getAll()
2021-12-11 17:23:15,373 TRACE Joining existing transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select parententi0_.id as id1_7_, parententi0_.deprecated as deprecat2_7_, parententi0_.obj_name as obj_name3_7_, parententi0_.other_object_id as other_ob5_7_, parententi0_.someBytes as someByte4_7_, friends1_.parent_id as parent_i1_6_0__, friends1_.firstName as firstNam2_6_0__, friends1_.fullName as fullName3_6_0__, friends1_.lastName as lastName4_6_0__, friends1_.sortName as sortName5_6_0__ from ParentEntity parententi0_ left outer join parent_friends friends1_ on parententi0_.id=friends1_.parent_id where 1=1
2021-12-11 17:23:15,376 TRACE Joining existing transaction to call public java.util.List<T> com.peterphi.std.guice.hibernate.dao.HibernateDao.getAll()
2021-12-11 17:23:15,376 TRACE Joining existing transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select parententi0_.id as id1_7_, parententi0_.deprecated as deprecat2_7_, parententi0_.obj_name as obj_name3_7_, parententi0_.other_object_id as other_ob5_7_, parententi0_.someBytes as someByte4_7_, friends1_.parent_id as parent_i1_6_0__, friends1_.firstName as firstNam2_6_0__, friends1_.fullName as fullName3_6_0__, friends1_.lastName as lastName4_6_0__, friends1_.sortName as sortName5_6_0__ from ParentEntity parententi0_ left outer join parent_friends friends1_ on parententi0_.id=friends1_.parent_id where 1=1
2021-12-11 17:23:15,376 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@da32ee2
2021-12-11 17:23:15,377 TRACE Creating new transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:15,377 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@5eb82a46
Hibernate: insert into ChildEntity (obj_name, parent_id, id) values (?, ?, ?)
2021-12-11 17:23:15,378 TRACE Creating new transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:15,379 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@3d46ef24
Hibernate: insert into ParentEntity (deprecated, obj_name, other_object_id, someBytes, id) values (?, ?, ?, ?, ?)
2021-12-11 17:23:15,381 TRACE Creating new transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select distinct parententi0_.id as col_0_0_ from ParentEntity parententi0_ where 1=1
2021-12-11 17:23:15,384 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@3cb7e3c0
2021-12-11 17:23:15,384  INFO Shut down Hibernate SessionFactory...
2021-12-11 17:23:15,384 TRACE Creating new transaction to call void com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider.runShutDownSQL()
2021-12-11 17:23:15,384 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@3ff66103
2021-12-11 17:23:15,499 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.embeddedpktest.EmbeddedPkEntity
2021-12-11 17:23:15,499 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject2
2021-12-11 17:23:15,499 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject1
2021-12-11 17:23:15,499 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyBaseObject
2021-12-11 17:23:15,499 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.ParentEntity
2021-12-11 17:23:15,499 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.MappedSuperclassEntity
2021-12-11 17:23:15,499 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.ChildEntity
2021-12-11 17:23:15,499 TRACE Evaluate HibernateConfigurationValidators. has at least one=false
2021-12-11 17:23:15,501  WARN HHH10001002: Using Hibernate built-in connection pool (not for production use!)
Hibernate: alter table ChildEntity drop constraint FKj7t557e8a7axr8jinbltht20y
Hibernate: alter table inherit_one drop constraint FKlu6huhy2g08akv8wpudpfvqir
Hibernate: alter table inherit_two drop constraint FKe5yjuoa6qr80cm4gcilq1gubk
Hibernate: alter table parent_friends drop constraint FKn858qj6gf7i97mfmurc47k6e8
Hibernate: alter table ParentEntity drop constraint FKd0cteits00p7vm083x9iod1lw
Hibernate: drop table ChildEntity if exists
Hibernate: drop table EmbeddedPkEntity if exists
Hibernate: drop table inherit_base if exists
Hibernate: drop table inherit_one if exists
Hibernate: drop table inherit_two if exists
Hibernate: drop table mapped_superclass_test_entity if exists
Hibernate: drop table parent_friends if exists
Hibernate: drop table ParentEntity if exists
Hibernate: drop sequence hibernate_sequence if exists
Hibernate: create sequence hibernate_sequence start with 1 increment by 1
Hibernate: create table ChildEntity (id bigint not null, obj_name varchar(255), parent_id bigint, primary key (id))
Hibernate: create table EmbeddedPkEntity (id varchar(255) not null, timestamp bigint not null, some_name varchar(255), primary key (id, timestamp))
Hibernate: create table inherit_base (id bigint not null, primary key (id))
Hibernate: create table inherit_one (someId varchar(255), id bigint not null, primary key (id))
Hibernate: create table inherit_two (id bigint not null, primary key (id))
Hibernate: create table mapped_superclass_test_entity (id bigint not null, created bigint, updated bigint, obj_name varchar(255), primary key (id))
Hibernate: create table parent_friends (parent_id bigint not null, firstName varchar(255), fullName varchar(255), lastName varchar(255), sortName varchar(255))
Hibernate: create table ParentEntity (id bigint not null, deprecated boolean, obj_name varchar(255), someBytes blob(255), other_object_id bigint, primary key (id))
Hibernate: alter table ChildEntity add constraint FKj7t557e8a7axr8jinbltht20y foreign key (parent_id) references ParentEntity
Hibernate: alter table inherit_one add constraint FKlu6huhy2g08akv8wpudpfvqir foreign key (id) references inherit_base
Hibernate: alter table inherit_two add constraint FKe5yjuoa6qr80cm4gcilq1gubk foreign key (id) references inherit_base
Hibernate: alter table parent_friends add constraint FKn858qj6gf7i97mfmurc47k6e8 foreign key (parent_id) references ParentEntity
Hibernate: alter table ParentEntity add constraint FKd0cteits00p7vm083x9iod1lw foreign key (other_object_id) references ChildEntity
2021-12-11 17:23:15,530 TRACE Hibernate Setup Complete.
2021-12-11 17:23:15,530 DEBUG Known entities: [ChildEntity, EmbeddedPkEntity, inherit_one, inherit_base, ParentEntity, mapped_superclass_test_entity, inherit_two]
2021-12-11 17:23:15,530 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.ChildEntity
2021-12-11 17:23:15,530 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.ParentEntity
2021-12-11 17:23:15,530 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.HumanEmbeddedEntity from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@15b9bed1
2021-12-11 17:23:15,530 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.HumanEmbeddedEntity from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@15b9bed1
2021-12-11 17:23:15,531 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.ParentEntity
2021-12-11 17:23:15,531 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.ChildEntity
2021-12-11 17:23:15,531 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.EmbeddedPkEntity
2021-12-11 17:23:15,531 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.SomePrimaryKey from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@690d27fb
2021-12-11 17:23:15,531 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.SomePrimaryKey from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@690d27fb
2021-12-11 17:23:15,531 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.EmbeddedPkEntity
2021-12-11 17:23:15,531 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject1
2021-12-11 17:23:15,531 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject1
2021-12-11 17:23:15,531 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.MappedSuperclassEntity
2021-12-11 17:23:15,531 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.MappedSuperclassEntity
2021-12-11 17:23:15,531 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject2
2021-12-11 17:23:15,531 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject2
2021-12-11 17:23:15,531 TRACE Creating new transaction to call public void com.peterphi.std.guice.hibernate.webquery.DynamicQueryTest.clearDatabaseBeforeTest()
2021-12-11 17:23:15,532 TRACE Joining existing transaction to call public java.util.List<T> com.peterphi.std.guice.hibernate.dao.HibernateDao.getAll()
2021-12-11 17:23:15,532 TRACE Joining existing transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select childentit0_.id as id1_0_0_, parententi1_.id as id1_7_1_, childentit0_.obj_name as obj_name2_0_0_, childentit0_.parent_id as parent_i3_0_0_, friends2_.parent_id as parent_i1_6_0__, friends2_.firstName as firstNam2_6_0__, friends2_.fullName as fullName3_6_0__, friends2_.lastName as lastName4_6_0__, friends2_.sortName as sortName5_6_0__, parententi1_.deprecated as deprecat2_7_1_, parententi1_.obj_name as obj_name3_7_1_, parententi1_.other_object_id as other_ob5_7_1_, parententi1_.someBytes as someByte4_7_1_, friends2_.parent_id as parent_i1_6_0__, friends2_.firstName as firstNam2_6_0__, friends2_.fullName as fullName3_6_0__, friends2_.lastName as lastName4_6_0__, friends2_.sortName as sortName5_6_0__ from ChildEntity childentit0_ left outer join ParentEntity parententi1_ on childentit0_.parent_id=parententi1_.id left outer join parent_friends friends2_ on parententi1_.id=friends2_.parent_id where 1=1
2021-12-11 17:23:15,536 TRACE Joining existing transaction to call public java.util.List<T> com.peterphi.std.guice.hibernate.dao.HibernateDao.getAll()
2021-12-11 17:23:15,536 TRACE Joining existing transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select parententi0_.id as id1_7_, parententi0_.deprecated as deprecat2_7_, parententi0_.obj_name as obj_name3_7_, parententi0_.other_object_id as other_ob5_7_, parententi0_.someBytes as someByte4_7_, friends1_.parent_id as parent_i1_6_0__, friends1_.firstName as firstNam2_6_0__, friends1_.fullName as fullName3_6_0__, friends1_.lastName as lastName4_6_0__, friends1_.sortName as sortName5_6_0__ from ParentEntity parententi0_ left outer join parent_friends friends1_ on parententi0_.id=friends1_.parent_id where 1=1
2021-12-11 17:23:15,539 TRACE Joining existing transaction to call public java.util.List<T> com.peterphi.std.guice.hibernate.dao.HibernateDao.getAll()
2021-12-11 17:23:15,539 TRACE Joining existing transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select parententi0_.id as id1_7_, parententi0_.deprecated as deprecat2_7_, parententi0_.obj_name as obj_name3_7_, parententi0_.other_object_id as other_ob5_7_, parententi0_.someBytes as someByte4_7_, friends1_.parent_id as parent_i1_6_0__, friends1_.firstName as firstNam2_6_0__, friends1_.fullName as fullName3_6_0__, friends1_.lastName as lastName4_6_0__, friends1_.sortName as sortName5_6_0__ from ParentEntity parententi0_ left outer join parent_friends friends1_ on parententi0_.id=friends1_.parent_id where 1=1
2021-12-11 17:23:15,539 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@20f05edc
2021-12-11 17:23:15,539 TRACE Creating new transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select parententi0_.id as id1_7_, parententi0_.deprecated as deprecat2_7_, parententi0_.obj_name as obj_name3_7_, parententi0_.other_object_id as other_ob5_7_, parententi0_.someBytes as someByte4_7_, friends2_.parent_id as parent_i1_6_0__, friends2_.firstName as firstNam2_6_0__, friends2_.fullName as fullName3_6_0__, friends2_.lastName as lastName4_6_0__, friends2_.sortName as sortName5_6_0__ from ParentEntity parententi0_ left outer join ChildEntity children1_ on parententi0_.id=children1_.parent_id left outer join parent_friends friends2_ on parententi0_.id=friends2_.parent_id where children1_.id is null
2021-12-11 17:23:15,542 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@183e67e1
2021-12-11 17:23:15,543  INFO Shut down Hibernate SessionFactory...
2021-12-11 17:23:15,543 TRACE Creating new transaction to call void com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider.runShutDownSQL()
2021-12-11 17:23:15,543 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@3d112352
2021-12-11 17:23:15,668 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.embeddedpktest.EmbeddedPkEntity
2021-12-11 17:23:15,669 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject2
2021-12-11 17:23:15,669 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject1
2021-12-11 17:23:15,669 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyBaseObject
2021-12-11 17:23:15,669 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.ParentEntity
2021-12-11 17:23:15,669 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.MappedSuperclassEntity
2021-12-11 17:23:15,669 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.ChildEntity
2021-12-11 17:23:15,669 TRACE Evaluate HibernateConfigurationValidators. has at least one=false
2021-12-11 17:23:15,671  WARN HHH10001002: Using Hibernate built-in connection pool (not for production use!)
Hibernate: alter table ChildEntity drop constraint FKj7t557e8a7axr8jinbltht20y
Hibernate: alter table inherit_one drop constraint FKlu6huhy2g08akv8wpudpfvqir
Hibernate: alter table inherit_two drop constraint FKe5yjuoa6qr80cm4gcilq1gubk
Hibernate: alter table parent_friends drop constraint FKn858qj6gf7i97mfmurc47k6e8
Hibernate: alter table ParentEntity drop constraint FKd0cteits00p7vm083x9iod1lw
Hibernate: drop table ChildEntity if exists
Hibernate: drop table EmbeddedPkEntity if exists
Hibernate: drop table inherit_base if exists
Hibernate: drop table inherit_one if exists
Hibernate: drop table inherit_two if exists
Hibernate: drop table mapped_superclass_test_entity if exists
Hibernate: drop table parent_friends if exists
Hibernate: drop table ParentEntity if exists
Hibernate: drop sequence hibernate_sequence if exists
Hibernate: create sequence hibernate_sequence start with 1 increment by 1
Hibernate: create table ChildEntity (id bigint not null, obj_name varchar(255), parent_id bigint, primary key (id))
Hibernate: create table EmbeddedPkEntity (id varchar(255) not null, timestamp bigint not null, some_name varchar(255), primary key (id, timestamp))
Hibernate: create table inherit_base (id bigint not null, primary key (id))
Hibernate: create table inherit_one (someId varchar(255), id bigint not null, primary key (id))
Hibernate: create table inherit_two (id bigint not null, primary key (id))
Hibernate: create table mapped_superclass_test_entity (id bigint not null, created bigint, updated bigint, obj_name varchar(255), primary key (id))
Hibernate: create table parent_friends (parent_id bigint not null, firstName varchar(255), fullName varchar(255), lastName varchar(255), sortName varchar(255))
Hibernate: create table ParentEntity (id bigint not null, deprecated boolean, obj_name varchar(255), someBytes blob(255), other_object_id bigint, primary key (id))
Hibernate: alter table ChildEntity add constraint FKj7t557e8a7axr8jinbltht20y foreign key (parent_id) references ParentEntity
Hibernate: alter table inherit_one add constraint FKlu6huhy2g08akv8wpudpfvqir foreign key (id) references inherit_base
Hibernate: alter table inherit_two add constraint FKe5yjuoa6qr80cm4gcilq1gubk foreign key (id) references inherit_base
Hibernate: alter table parent_friends add constraint FKn858qj6gf7i97mfmurc47k6e8 foreign key (parent_id) references ParentEntity
Hibernate: alter table ParentEntity add constraint FKd0cteits00p7vm083x9iod1lw foreign key (other_object_id) references ChildEntity
2021-12-11 17:23:15,698 TRACE Hibernate Setup Complete.
2021-12-11 17:23:15,699 DEBUG Known entities: [ParentEntity, mapped_superclass_test_entity, inherit_one, inherit_two, EmbeddedPkEntity, ChildEntity, inherit_base]
2021-12-11 17:23:15,699 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.ParentEntity
2021-12-11 17:23:15,699 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.ChildEntity
2021-12-11 17:23:15,699 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.ChildEntity
2021-12-11 17:23:15,699 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.HumanEmbeddedEntity from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@7b38513e
2021-12-11 17:23:15,699 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.HumanEmbeddedEntity from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@7b38513e
2021-12-11 17:23:15,699 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.ParentEntity
2021-12-11 17:23:15,699 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.MappedSuperclassEntity
2021-12-11 17:23:15,699 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.MappedSuperclassEntity
2021-12-11 17:23:15,699 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject1
2021-12-11 17:23:15,699 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject1
2021-12-11 17:23:15,699 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject2
2021-12-11 17:23:15,699 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject2
2021-12-11 17:23:15,699 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.EmbeddedPkEntity
2021-12-11 17:23:15,699 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.SomePrimaryKey from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@298a1e7c
2021-12-11 17:23:15,699 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.SomePrimaryKey from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@298a1e7c
2021-12-11 17:23:15,699 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.EmbeddedPkEntity
2021-12-11 17:23:15,700 TRACE Creating new transaction to call public void com.peterphi.std.guice.hibernate.webquery.DynamicQueryTest.clearDatabaseBeforeTest()
2021-12-11 17:23:15,700 TRACE Joining existing transaction to call public java.util.List<T> com.peterphi.std.guice.hibernate.dao.HibernateDao.getAll()
2021-12-11 17:23:15,700 TRACE Joining existing transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select childentit0_.id as id1_0_0_, parententi1_.id as id1_7_1_, childentit0_.obj_name as obj_name2_0_0_, childentit0_.parent_id as parent_i3_0_0_, friends2_.parent_id as parent_i1_6_0__, friends2_.firstName as firstNam2_6_0__, friends2_.fullName as fullName3_6_0__, friends2_.lastName as lastName4_6_0__, friends2_.sortName as sortName5_6_0__, parententi1_.deprecated as deprecat2_7_1_, parententi1_.obj_name as obj_name3_7_1_, parententi1_.other_object_id as other_ob5_7_1_, parententi1_.someBytes as someByte4_7_1_, friends2_.parent_id as parent_i1_6_0__, friends2_.firstName as firstNam2_6_0__, friends2_.fullName as fullName3_6_0__, friends2_.lastName as lastName4_6_0__, friends2_.sortName as sortName5_6_0__ from ChildEntity childentit0_ left outer join ParentEntity parententi1_ on childentit0_.parent_id=parententi1_.id left outer join parent_friends friends2_ on parententi1_.id=friends2_.parent_id where 1=1
2021-12-11 17:23:15,705 TRACE Joining existing transaction to call public java.util.List<T> com.peterphi.std.guice.hibernate.dao.HibernateDao.getAll()
2021-12-11 17:23:15,705 TRACE Joining existing transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select parententi0_.id as id1_7_, parententi0_.deprecated as deprecat2_7_, parententi0_.obj_name as obj_name3_7_, parententi0_.other_object_id as other_ob5_7_, parententi0_.someBytes as someByte4_7_, friends1_.parent_id as parent_i1_6_0__, friends1_.firstName as firstNam2_6_0__, friends1_.fullName as fullName3_6_0__, friends1_.lastName as lastName4_6_0__, friends1_.sortName as sortName5_6_0__ from ParentEntity parententi0_ left outer join parent_friends friends1_ on parententi0_.id=friends1_.parent_id where 1=1
2021-12-11 17:23:15,708 TRACE Joining existing transaction to call public java.util.List<T> com.peterphi.std.guice.hibernate.dao.HibernateDao.getAll()
2021-12-11 17:23:15,708 TRACE Joining existing transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select parententi0_.id as id1_7_, parententi0_.deprecated as deprecat2_7_, parententi0_.obj_name as obj_name3_7_, parententi0_.other_object_id as other_ob5_7_, parententi0_.someBytes as someByte4_7_, friends1_.parent_id as parent_i1_6_0__, friends1_.firstName as firstNam2_6_0__, friends1_.fullName as fullName3_6_0__, friends1_.lastName as lastName4_6_0__, friends1_.sortName as sortName5_6_0__ from ParentEntity parententi0_ left outer join parent_friends friends1_ on parententi0_.id=friends1_.parent_id where 1=1
2021-12-11 17:23:15,709 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@69adc41
2021-12-11 17:23:15,709 TRACE Creating new transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:15,710 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@14da724f
Hibernate: insert into ChildEntity (obj_name, parent_id, id) values (?, ?, ?)
2021-12-11 17:23:15,711 TRACE Creating new transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:15,712 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@5c3b5304
Hibernate: insert into ParentEntity (deprecated, obj_name, other_object_id, someBytes, id) values (?, ?, ?, ?, ?)
2021-12-11 17:23:15,713 TRACE Creating new transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select parententi0_.id as id1_7_, parententi0_.deprecated as deprecat2_7_, parententi0_.obj_name as obj_name3_7_, parententi0_.other_object_id as other_ob5_7_, parententi0_.someBytes as someByte4_7_, friends2_.parent_id as parent_i1_6_0__, friends2_.firstName as firstNam2_6_0__, friends2_.fullName as fullName3_6_0__, friends2_.lastName as lastName4_6_0__, friends2_.sortName as sortName5_6_0__ from ParentEntity parententi0_ left outer join ChildEntity childentit1_ on parententi0_.other_object_id=childentit1_.id left outer join parent_friends friends2_ on parententi0_.id=friends2_.parent_id where parententi0_.obj_name=childentit1_.obj_name
2021-12-11 17:23:15,719 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@54459384
2021-12-11 17:23:15,719 TRACE Creating new transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select parententi0_.id as id1_7_, parententi0_.deprecated as deprecat2_7_, parententi0_.obj_name as obj_name3_7_, parententi0_.other_object_id as other_ob5_7_, parententi0_.someBytes as someByte4_7_, friends2_.parent_id as parent_i1_6_0__, friends2_.firstName as firstNam2_6_0__, friends2_.fullName as fullName3_6_0__, friends2_.lastName as lastName4_6_0__, friends2_.sortName as sortName5_6_0__ from ParentEntity parententi0_ left outer join ChildEntity childentit1_ on parententi0_.other_object_id=childentit1_.id left outer join parent_friends friends2_ on parententi0_.id=friends2_.parent_id where parententi0_.obj_name<>childentit1_.obj_name
2021-12-11 17:23:15,723 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@447d1150
2021-12-11 17:23:15,723  INFO Shut down Hibernate SessionFactory...
2021-12-11 17:23:15,723 TRACE Creating new transaction to call void com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider.runShutDownSQL()
2021-12-11 17:23:15,723 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@67a273a6
2021-12-11 17:23:15,834 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.embeddedpktest.EmbeddedPkEntity
2021-12-11 17:23:15,835 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject2
2021-12-11 17:23:15,835 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject1
2021-12-11 17:23:15,835 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyBaseObject
2021-12-11 17:23:15,835 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.ParentEntity
2021-12-11 17:23:15,835 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.MappedSuperclassEntity
2021-12-11 17:23:15,835 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.ChildEntity
2021-12-11 17:23:15,835 TRACE Evaluate HibernateConfigurationValidators. has at least one=false
2021-12-11 17:23:15,838  WARN HHH10001002: Using Hibernate built-in connection pool (not for production use!)
Hibernate: alter table ChildEntity drop constraint FKj7t557e8a7axr8jinbltht20y
Hibernate: alter table inherit_one drop constraint FKlu6huhy2g08akv8wpudpfvqir
Hibernate: alter table inherit_two drop constraint FKe5yjuoa6qr80cm4gcilq1gubk
Hibernate: alter table parent_friends drop constraint FKn858qj6gf7i97mfmurc47k6e8
Hibernate: alter table ParentEntity drop constraint FKd0cteits00p7vm083x9iod1lw
Hibernate: drop table ChildEntity if exists
Hibernate: drop table EmbeddedPkEntity if exists
Hibernate: drop table inherit_base if exists
Hibernate: drop table inherit_one if exists
Hibernate: drop table inherit_two if exists
Hibernate: drop table mapped_superclass_test_entity if exists
Hibernate: drop table parent_friends if exists
Hibernate: drop table ParentEntity if exists
Hibernate: drop sequence hibernate_sequence if exists
Hibernate: create sequence hibernate_sequence start with 1 increment by 1
Hibernate: create table ChildEntity (id bigint not null, obj_name varchar(255), parent_id bigint, primary key (id))
Hibernate: create table EmbeddedPkEntity (id varchar(255) not null, timestamp bigint not null, some_name varchar(255), primary key (id, timestamp))
Hibernate: create table inherit_base (id bigint not null, primary key (id))
Hibernate: create table inherit_one (someId varchar(255), id bigint not null, primary key (id))
Hibernate: create table inherit_two (id bigint not null, primary key (id))
Hibernate: create table mapped_superclass_test_entity (id bigint not null, created bigint, updated bigint, obj_name varchar(255), primary key (id))
Hibernate: create table parent_friends (parent_id bigint not null, firstName varchar(255), fullName varchar(255), lastName varchar(255), sortName varchar(255))
Hibernate: create table ParentEntity (id bigint not null, deprecated boolean, obj_name varchar(255), someBytes blob(255), other_object_id bigint, primary key (id))
Hibernate: alter table ChildEntity add constraint FKj7t557e8a7axr8jinbltht20y foreign key (parent_id) references ParentEntity
Hibernate: alter table inherit_one add constraint FKlu6huhy2g08akv8wpudpfvqir foreign key (id) references inherit_base
Hibernate: alter table inherit_two add constraint FKe5yjuoa6qr80cm4gcilq1gubk foreign key (id) references inherit_base
Hibernate: alter table parent_friends add constraint FKn858qj6gf7i97mfmurc47k6e8 foreign key (parent_id) references ParentEntity
Hibernate: alter table ParentEntity add constraint FKd0cteits00p7vm083x9iod1lw foreign key (other_object_id) references ChildEntity
2021-12-11 17:23:15,868 TRACE Hibernate Setup Complete.
2021-12-11 17:23:15,868 DEBUG Known entities: [inherit_one, inherit_two, ParentEntity, mapped_superclass_test_entity, inherit_base, ChildEntity, EmbeddedPkEntity]
2021-12-11 17:23:15,868 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject1
2021-12-11 17:23:15,868 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject1
2021-12-11 17:23:15,868 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject2
2021-12-11 17:23:15,868 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject2
2021-12-11 17:23:15,868 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.ParentEntity
2021-12-11 17:23:15,868 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.ChildEntity
2021-12-11 17:23:15,868 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.ChildEntity
2021-12-11 17:23:15,868 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.HumanEmbeddedEntity from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@40ab0f9c
2021-12-11 17:23:15,868 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.HumanEmbeddedEntity from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@40ab0f9c
2021-12-11 17:23:15,868 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.ParentEntity
2021-12-11 17:23:15,868 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.MappedSuperclassEntity
2021-12-11 17:23:15,868 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.MappedSuperclassEntity
2021-12-11 17:23:15,868 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.EmbeddedPkEntity
2021-12-11 17:23:15,868 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.SomePrimaryKey from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@27f065
2021-12-11 17:23:15,868 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.SomePrimaryKey from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@27f065
2021-12-11 17:23:15,868 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.EmbeddedPkEntity
2021-12-11 17:23:15,869 TRACE Creating new transaction to call public void com.peterphi.std.guice.hibernate.webquery.DynamicQueryTest.clearDatabaseBeforeTest()
2021-12-11 17:23:15,870 TRACE Joining existing transaction to call public java.util.List<T> com.peterphi.std.guice.hibernate.dao.HibernateDao.getAll()
2021-12-11 17:23:15,870 TRACE Joining existing transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select childentit0_.id as id1_0_0_, parententi1_.id as id1_7_1_, childentit0_.obj_name as obj_name2_0_0_, childentit0_.parent_id as parent_i3_0_0_, friends2_.parent_id as parent_i1_6_0__, friends2_.firstName as firstNam2_6_0__, friends2_.fullName as fullName3_6_0__, friends2_.lastName as lastName4_6_0__, friends2_.sortName as sortName5_6_0__, parententi1_.deprecated as deprecat2_7_1_, parententi1_.obj_name as obj_name3_7_1_, parententi1_.other_object_id as other_ob5_7_1_, parententi1_.someBytes as someByte4_7_1_, friends2_.parent_id as parent_i1_6_0__, friends2_.firstName as firstNam2_6_0__, friends2_.fullName as fullName3_6_0__, friends2_.lastName as lastName4_6_0__, friends2_.sortName as sortName5_6_0__ from ChildEntity childentit0_ left outer join ParentEntity parententi1_ on childentit0_.parent_id=parententi1_.id left outer join parent_friends friends2_ on parententi1_.id=friends2_.parent_id where 1=1
2021-12-11 17:23:15,875 TRACE Joining existing transaction to call public java.util.List<T> com.peterphi.std.guice.hibernate.dao.HibernateDao.getAll()
2021-12-11 17:23:15,875 TRACE Joining existing transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select parententi0_.id as id1_7_, parententi0_.deprecated as deprecat2_7_, parententi0_.obj_name as obj_name3_7_, parententi0_.other_object_id as other_ob5_7_, parententi0_.someBytes as someByte4_7_, friends1_.parent_id as parent_i1_6_0__, friends1_.firstName as firstNam2_6_0__, friends1_.fullName as fullName3_6_0__, friends1_.lastName as lastName4_6_0__, friends1_.sortName as sortName5_6_0__ from ParentEntity parententi0_ left outer join parent_friends friends1_ on parententi0_.id=friends1_.parent_id where 1=1
2021-12-11 17:23:15,878 TRACE Joining existing transaction to call public java.util.List<T> com.peterphi.std.guice.hibernate.dao.HibernateDao.getAll()
2021-12-11 17:23:15,878 TRACE Joining existing transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select parententi0_.id as id1_7_, parententi0_.deprecated as deprecat2_7_, parententi0_.obj_name as obj_name3_7_, parententi0_.other_object_id as other_ob5_7_, parententi0_.someBytes as someByte4_7_, friends1_.parent_id as parent_i1_6_0__, friends1_.firstName as firstNam2_6_0__, friends1_.fullName as fullName3_6_0__, friends1_.lastName as lastName4_6_0__, friends1_.sortName as sortName5_6_0__ from ParentEntity parententi0_ left outer join parent_friends friends1_ on parententi0_.id=friends1_.parent_id where 1=1
2021-12-11 17:23:15,879 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@bfc2de
2021-12-11 17:23:15,879 TRACE Creating new transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:15,880 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@69d8c092
Hibernate: insert into ParentEntity (deprecated, obj_name, other_object_id, someBytes, id) values (?, ?, ?, ?, ?)
2021-12-11 17:23:15,881 TRACE Creating new transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:15,882 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@797c16fa
Hibernate: insert into ParentEntity (deprecated, obj_name, other_object_id, someBytes, id) values (?, ?, ?, ?, ?)
2021-12-11 17:23:15,883 TRACE Creating new transaction to call public java.util.List<ID> com.peterphi.std.guice.hibernate.dao.HibernateDao.getIdList(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery)
2021-12-11 17:23:15,884 TRACE Joining existing transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select distinct parententi0_.id as col_0_0_, parententi0_.id as col_1_0_ from ParentEntity parententi0_ where 1=1 order by parententi0_.id asc
2021-12-11 17:23:15,885 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@1eea19d0
2021-12-11 17:23:15,885  INFO Shut down Hibernate SessionFactory...
2021-12-11 17:23:15,885 TRACE Creating new transaction to call void com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider.runShutDownSQL()
2021-12-11 17:23:15,885 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@665fbcbc
2021-12-11 17:23:15,997 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.embeddedpktest.EmbeddedPkEntity
2021-12-11 17:23:15,997 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject2
2021-12-11 17:23:15,997 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject1
2021-12-11 17:23:15,997 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyBaseObject
2021-12-11 17:23:15,997 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.ParentEntity
2021-12-11 17:23:15,997 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.MappedSuperclassEntity
2021-12-11 17:23:15,997 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.ChildEntity
2021-12-11 17:23:15,997 TRACE Evaluate HibernateConfigurationValidators. has at least one=false
2021-12-11 17:23:16,000  WARN HHH10001002: Using Hibernate built-in connection pool (not for production use!)
Hibernate: alter table ChildEntity drop constraint FKj7t557e8a7axr8jinbltht20y
Hibernate: alter table inherit_one drop constraint FKlu6huhy2g08akv8wpudpfvqir
Hibernate: alter table inherit_two drop constraint FKe5yjuoa6qr80cm4gcilq1gubk
Hibernate: alter table parent_friends drop constraint FKn858qj6gf7i97mfmurc47k6e8
Hibernate: alter table ParentEntity drop constraint FKd0cteits00p7vm083x9iod1lw
Hibernate: drop table ChildEntity if exists
Hibernate: drop table EmbeddedPkEntity if exists
Hibernate: drop table inherit_base if exists
Hibernate: drop table inherit_one if exists
Hibernate: drop table inherit_two if exists
Hibernate: drop table mapped_superclass_test_entity if exists
Hibernate: drop table parent_friends if exists
Hibernate: drop table ParentEntity if exists
Hibernate: drop sequence hibernate_sequence if exists
Hibernate: create sequence hibernate_sequence start with 1 increment by 1
Hibernate: create table ChildEntity (id bigint not null, obj_name varchar(255), parent_id bigint, primary key (id))
Hibernate: create table EmbeddedPkEntity (id varchar(255) not null, timestamp bigint not null, some_name varchar(255), primary key (id, timestamp))
Hibernate: create table inherit_base (id bigint not null, primary key (id))
Hibernate: create table inherit_one (someId varchar(255), id bigint not null, primary key (id))
Hibernate: create table inherit_two (id bigint not null, primary key (id))
Hibernate: create table mapped_superclass_test_entity (id bigint not null, created bigint, updated bigint, obj_name varchar(255), primary key (id))
Hibernate: create table parent_friends (parent_id bigint not null, firstName varchar(255), fullName varchar(255), lastName varchar(255), sortName varchar(255))
Hibernate: create table ParentEntity (id bigint not null, deprecated boolean, obj_name varchar(255), someBytes blob(255), other_object_id bigint, primary key (id))
Hibernate: alter table ChildEntity add constraint FKj7t557e8a7axr8jinbltht20y foreign key (parent_id) references ParentEntity
Hibernate: alter table inherit_one add constraint FKlu6huhy2g08akv8wpudpfvqir foreign key (id) references inherit_base
Hibernate: alter table inherit_two add constraint FKe5yjuoa6qr80cm4gcilq1gubk foreign key (id) references inherit_base
Hibernate: alter table parent_friends add constraint FKn858qj6gf7i97mfmurc47k6e8 foreign key (parent_id) references ParentEntity
Hibernate: alter table ParentEntity add constraint FKd0cteits00p7vm083x9iod1lw foreign key (other_object_id) references ChildEntity
2021-12-11 17:23:16,024 TRACE Hibernate Setup Complete.
2021-12-11 17:23:16,024 DEBUG Known entities: [EmbeddedPkEntity, inherit_one, inherit_two, inherit_base, ChildEntity, mapped_superclass_test_entity, ParentEntity]
2021-12-11 17:23:16,024 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.EmbeddedPkEntity
2021-12-11 17:23:16,024 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.SomePrimaryKey from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@1166e5d9
2021-12-11 17:23:16,024 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.SomePrimaryKey from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@1166e5d9
2021-12-11 17:23:16,024 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.EmbeddedPkEntity
2021-12-11 17:23:16,025 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject1
2021-12-11 17:23:16,025 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject1
2021-12-11 17:23:16,025 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject2
2021-12-11 17:23:16,025 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject2
2021-12-11 17:23:16,025 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.ChildEntity
2021-12-11 17:23:16,025 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.ParentEntity
2021-12-11 17:23:16,025 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.HumanEmbeddedEntity from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@21b2258e
2021-12-11 17:23:16,025 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.HumanEmbeddedEntity from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@21b2258e
2021-12-11 17:23:16,025 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.ParentEntity
2021-12-11 17:23:16,025 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.ChildEntity
2021-12-11 17:23:16,025 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.MappedSuperclassEntity
2021-12-11 17:23:16,025 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.MappedSuperclassEntity
2021-12-11 17:23:16,025 TRACE Creating new transaction to call public void com.peterphi.std.guice.hibernate.webquery.DynamicQueryTest.clearDatabaseBeforeTest()
2021-12-11 17:23:16,025 TRACE Joining existing transaction to call public java.util.List<T> com.peterphi.std.guice.hibernate.dao.HibernateDao.getAll()
2021-12-11 17:23:16,026 TRACE Joining existing transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select childentit0_.id as id1_0_0_, parententi1_.id as id1_7_1_, childentit0_.obj_name as obj_name2_0_0_, childentit0_.parent_id as parent_i3_0_0_, friends2_.parent_id as parent_i1_6_0__, friends2_.firstName as firstNam2_6_0__, friends2_.fullName as fullName3_6_0__, friends2_.lastName as lastName4_6_0__, friends2_.sortName as sortName5_6_0__, parententi1_.deprecated as deprecat2_7_1_, parententi1_.obj_name as obj_name3_7_1_, parententi1_.other_object_id as other_ob5_7_1_, parententi1_.someBytes as someByte4_7_1_, friends2_.parent_id as parent_i1_6_0__, friends2_.firstName as firstNam2_6_0__, friends2_.fullName as fullName3_6_0__, friends2_.lastName as lastName4_6_0__, friends2_.sortName as sortName5_6_0__ from ChildEntity childentit0_ left outer join ParentEntity parententi1_ on childentit0_.parent_id=parententi1_.id left outer join parent_friends friends2_ on parententi1_.id=friends2_.parent_id where 1=1
2021-12-11 17:23:16,030 TRACE Joining existing transaction to call public java.util.List<T> com.peterphi.std.guice.hibernate.dao.HibernateDao.getAll()
2021-12-11 17:23:16,030 TRACE Joining existing transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select parententi0_.id as id1_7_, parententi0_.deprecated as deprecat2_7_, parententi0_.obj_name as obj_name3_7_, parententi0_.other_object_id as other_ob5_7_, parententi0_.someBytes as someByte4_7_, friends1_.parent_id as parent_i1_6_0__, friends1_.firstName as firstNam2_6_0__, friends1_.fullName as fullName3_6_0__, friends1_.lastName as lastName4_6_0__, friends1_.sortName as sortName5_6_0__ from ParentEntity parententi0_ left outer join parent_friends friends1_ on parententi0_.id=friends1_.parent_id where 1=1
2021-12-11 17:23:16,034 TRACE Joining existing transaction to call public java.util.List<T> com.peterphi.std.guice.hibernate.dao.HibernateDao.getAll()
2021-12-11 17:23:16,034 TRACE Joining existing transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select parententi0_.id as id1_7_, parententi0_.deprecated as deprecat2_7_, parententi0_.obj_name as obj_name3_7_, parententi0_.other_object_id as other_ob5_7_, parententi0_.someBytes as someByte4_7_, friends1_.parent_id as parent_i1_6_0__, friends1_.firstName as firstNam2_6_0__, friends1_.fullName as fullName3_6_0__, friends1_.lastName as lastName4_6_0__, friends1_.sortName as sortName5_6_0__ from ParentEntity parententi0_ left outer join parent_friends friends1_ on parententi0_.id=friends1_.parent_id where 1=1
2021-12-11 17:23:16,035 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@3f81c657
2021-12-11 17:23:16,035 TRACE Creating new transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select parententi0_.id as id1_7_, parententi0_.deprecated as deprecat2_7_, parententi0_.obj_name as obj_name3_7_, parententi0_.other_object_id as other_ob5_7_, parententi0_.someBytes as someByte4_7_, friends3_.parent_id as parent_i1_6_0__, friends3_.firstName as firstNam2_6_0__, friends3_.fullName as fullName3_6_0__, friends3_.lastName as lastName4_6_0__, friends3_.sortName as sortName5_6_0__ from ParentEntity parententi0_ left outer join ChildEntity childentit1_ on parententi0_.other_object_id=childentit1_.id left outer join ParentEntity parententi2_ on childentit1_.parent_id=parententi2_.id left outer join parent_friends friends3_ on parententi0_.id=friends3_.parent_id where parententi2_.obj_name=?
2021-12-11 17:23:16,040 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@58269959
2021-12-11 17:23:16,041  INFO Shut down Hibernate SessionFactory...
2021-12-11 17:23:16,041 TRACE Creating new transaction to call void com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider.runShutDownSQL()
2021-12-11 17:23:16,041 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@28d1cfa7
2021-12-11 17:23:16,148 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.embeddedpktest.EmbeddedPkEntity
2021-12-11 17:23:16,148 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject2
2021-12-11 17:23:16,148 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject1
2021-12-11 17:23:16,148 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyBaseObject
2021-12-11 17:23:16,148 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.ParentEntity
2021-12-11 17:23:16,148 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.MappedSuperclassEntity
2021-12-11 17:23:16,148 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.ChildEntity
2021-12-11 17:23:16,148 TRACE Evaluate HibernateConfigurationValidators. has at least one=false
2021-12-11 17:23:16,151  WARN HHH10001002: Using Hibernate built-in connection pool (not for production use!)
Hibernate: alter table ChildEntity drop constraint FKj7t557e8a7axr8jinbltht20y
Hibernate: alter table inherit_one drop constraint FKlu6huhy2g08akv8wpudpfvqir
Hibernate: alter table inherit_two drop constraint FKe5yjuoa6qr80cm4gcilq1gubk
Hibernate: alter table parent_friends drop constraint FKn858qj6gf7i97mfmurc47k6e8
Hibernate: alter table ParentEntity drop constraint FKd0cteits00p7vm083x9iod1lw
Hibernate: drop table ChildEntity if exists
Hibernate: drop table EmbeddedPkEntity if exists
Hibernate: drop table inherit_base if exists
Hibernate: drop table inherit_one if exists
Hibernate: drop table inherit_two if exists
Hibernate: drop table mapped_superclass_test_entity if exists
Hibernate: drop table parent_friends if exists
Hibernate: drop table ParentEntity if exists
Hibernate: drop sequence hibernate_sequence if exists
Hibernate: create sequence hibernate_sequence start with 1 increment by 1
Hibernate: create table ChildEntity (id bigint not null, obj_name varchar(255), parent_id bigint, primary key (id))
Hibernate: create table EmbeddedPkEntity (id varchar(255) not null, timestamp bigint not null, some_name varchar(255), primary key (id, timestamp))
Hibernate: create table inherit_base (id bigint not null, primary key (id))
Hibernate: create table inherit_one (someId varchar(255), id bigint not null, primary key (id))
Hibernate: create table inherit_two (id bigint not null, primary key (id))
Hibernate: create table mapped_superclass_test_entity (id bigint not null, created bigint, updated bigint, obj_name varchar(255), primary key (id))
Hibernate: create table parent_friends (parent_id bigint not null, firstName varchar(255), fullName varchar(255), lastName varchar(255), sortName varchar(255))
Hibernate: create table ParentEntity (id bigint not null, deprecated boolean, obj_name varchar(255), someBytes blob(255), other_object_id bigint, primary key (id))
Hibernate: alter table ChildEntity add constraint FKj7t557e8a7axr8jinbltht20y foreign key (parent_id) references ParentEntity
Hibernate: alter table inherit_one add constraint FKlu6huhy2g08akv8wpudpfvqir foreign key (id) references inherit_base
Hibernate: alter table inherit_two add constraint FKe5yjuoa6qr80cm4gcilq1gubk foreign key (id) references inherit_base
Hibernate: alter table parent_friends add constraint FKn858qj6gf7i97mfmurc47k6e8 foreign key (parent_id) references ParentEntity
Hibernate: alter table ParentEntity add constraint FKd0cteits00p7vm083x9iod1lw foreign key (other_object_id) references ChildEntity
2021-12-11 17:23:16,173 TRACE Hibernate Setup Complete.
2021-12-11 17:23:16,173 DEBUG Known entities: [ParentEntity, mapped_superclass_test_entity, inherit_one, ChildEntity, inherit_base, EmbeddedPkEntity, inherit_two]
2021-12-11 17:23:16,173 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.ParentEntity
2021-12-11 17:23:16,173 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.ChildEntity
2021-12-11 17:23:16,173 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.ChildEntity
2021-12-11 17:23:16,173 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.HumanEmbeddedEntity from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@7ab26ad2
2021-12-11 17:23:16,173 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.HumanEmbeddedEntity from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@7ab26ad2
2021-12-11 17:23:16,173 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.ParentEntity
2021-12-11 17:23:16,173 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.MappedSuperclassEntity
2021-12-11 17:23:16,173 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.MappedSuperclassEntity
2021-12-11 17:23:16,173 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject1
2021-12-11 17:23:16,173 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject1
2021-12-11 17:23:16,173 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.EmbeddedPkEntity
2021-12-11 17:23:16,173 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.SomePrimaryKey from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@2c0cd37e
2021-12-11 17:23:16,173 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.SomePrimaryKey from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@2c0cd37e
2021-12-11 17:23:16,173 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.EmbeddedPkEntity
2021-12-11 17:23:16,173 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject2
2021-12-11 17:23:16,173 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject2
2021-12-11 17:23:16,173 TRACE Creating new transaction to call public void com.peterphi.std.guice.hibernate.webquery.DynamicQueryTest.clearDatabaseBeforeTest()
2021-12-11 17:23:16,174 TRACE Joining existing transaction to call public java.util.List<T> com.peterphi.std.guice.hibernate.dao.HibernateDao.getAll()
2021-12-11 17:23:16,174 TRACE Joining existing transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select childentit0_.id as id1_0_0_, parententi1_.id as id1_7_1_, childentit0_.obj_name as obj_name2_0_0_, childentit0_.parent_id as parent_i3_0_0_, friends2_.parent_id as parent_i1_6_0__, friends2_.firstName as firstNam2_6_0__, friends2_.fullName as fullName3_6_0__, friends2_.lastName as lastName4_6_0__, friends2_.sortName as sortName5_6_0__, parententi1_.deprecated as deprecat2_7_1_, parententi1_.obj_name as obj_name3_7_1_, parententi1_.other_object_id as other_ob5_7_1_, parententi1_.someBytes as someByte4_7_1_, friends2_.parent_id as parent_i1_6_0__, friends2_.firstName as firstNam2_6_0__, friends2_.fullName as fullName3_6_0__, friends2_.lastName as lastName4_6_0__, friends2_.sortName as sortName5_6_0__ from ChildEntity childentit0_ left outer join ParentEntity parententi1_ on childentit0_.parent_id=parententi1_.id left outer join parent_friends friends2_ on parententi1_.id=friends2_.parent_id where 1=1
2021-12-11 17:23:16,177 TRACE Joining existing transaction to call public java.util.List<T> com.peterphi.std.guice.hibernate.dao.HibernateDao.getAll()
2021-12-11 17:23:16,177 TRACE Joining existing transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select parententi0_.id as id1_7_, parententi0_.deprecated as deprecat2_7_, parententi0_.obj_name as obj_name3_7_, parententi0_.other_object_id as other_ob5_7_, parententi0_.someBytes as someByte4_7_, friends1_.parent_id as parent_i1_6_0__, friends1_.firstName as firstNam2_6_0__, friends1_.fullName as fullName3_6_0__, friends1_.lastName as lastName4_6_0__, friends1_.sortName as sortName5_6_0__ from ParentEntity parententi0_ left outer join parent_friends friends1_ on parententi0_.id=friends1_.parent_id where 1=1
2021-12-11 17:23:16,179 TRACE Joining existing transaction to call public java.util.List<T> com.peterphi.std.guice.hibernate.dao.HibernateDao.getAll()
2021-12-11 17:23:16,180 TRACE Joining existing transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select parententi0_.id as id1_7_, parententi0_.deprecated as deprecat2_7_, parententi0_.obj_name as obj_name3_7_, parententi0_.other_object_id as other_ob5_7_, parententi0_.someBytes as someByte4_7_, friends1_.parent_id as parent_i1_6_0__, friends1_.firstName as firstNam2_6_0__, friends1_.fullName as fullName3_6_0__, friends1_.lastName as lastName4_6_0__, friends1_.sortName as sortName5_6_0__ from ParentEntity parententi0_ left outer join parent_friends friends1_ on parententi0_.id=friends1_.parent_id where 1=1
2021-12-11 17:23:16,180 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@34ed078b
2021-12-11 17:23:16,181 TRACE Creating new transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:16,181 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@1c32ae3e
Hibernate: insert into ParentEntity (deprecated, obj_name, other_object_id, someBytes, id) values (?, ?, ?, ?, ?)
2021-12-11 17:23:16,183 TRACE Creating new transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:16,183 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@563c243a
Hibernate: insert into ParentEntity (deprecated, obj_name, other_object_id, someBytes, id) values (?, ?, ?, ?, ?)
2021-12-11 17:23:16,184 TRACE Creating new transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
2021-12-11 17:23:16,185 TRACE Encountered fetch friends. This resolves to QRelation{owner=QEntity{clazz=class com.peterphi.std.guice.hibernate.webquery.ParentEntity, name='ParentEntity', properties=[friends:size, deprecated, name, id, someBytes, children:size], relations=[children, friends, otherObject], defaultFetch=[friends]}, name=friends, entity=QEntity{clazz=class com.peterphi.std.guice.hibernate.webquery.HumanEmbeddedEntity, name='null', properties=[lastName, firstName, sortName, fullName], relations=[], defaultFetch=null}, nullable=false, eager=true, collection=true} which is a collection
2021-12-11 17:23:16,186 TRACE Hibernate executing SQL: select distinct parententi0_.id as col_0_0_, parententi0_.id as col_1_0_ from ParentEntity parententi0_ where 1=1 order by parententi0_.id asc limit ?
Hibernate: select distinct parententi0_.id as col_0_0_, parententi0_.id as col_1_0_ from ParentEntity parententi0_ where 1=1 order by parententi0_.id asc limit ?
2021-12-11 17:23:16,191 TRACE Hibernate executing SQL: select parententi0_.id as id1_7_, parententi0_.deprecated as deprecat2_7_, parententi0_.obj_name as obj_name3_7_, parententi0_.other_object_id as other_ob5_7_, parententi0_.someBytes as someByte4_7_, friends1_.parent_id as parent_i1_6_0__, friends1_.firstName as firstNam2_6_0__, friends1_.fullName as fullName3_6_0__, friends1_.lastName as lastName4_6_0__, friends1_.sortName as sortName5_6_0__ from ParentEntity parententi0_ left outer join parent_friends friends1_ on parententi0_.id=friends1_.parent_id where parententi0_.id in (? , ?) order by parententi0_.id asc
Hibernate: select parententi0_.id as id1_7_, parententi0_.deprecated as deprecat2_7_, parententi0_.obj_name as obj_name3_7_, parententi0_.other_object_id as other_ob5_7_, parententi0_.someBytes as someByte4_7_, friends1_.parent_id as parent_i1_6_0__, friends1_.firstName as firstNam2_6_0__, friends1_.fullName as fullName3_6_0__, friends1_.lastName as lastName4_6_0__, friends1_.sortName as sortName5_6_0__ from ParentEntity parententi0_ left outer join parent_friends friends1_ on parententi0_.id=friends1_.parent_id where parententi0_.id in (? , ?) order by parententi0_.id asc
2021-12-11 17:23:16,192 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@1c3cbd6b
[select distinct parententi0_.id as col_0_0_, parententi0_.id as col_1_0_ from ParentEntity parententi0_ where 1=1 order by parententi0_.id asc limit ?, select parententi0_.id as id1_7_, parententi0_.deprecated as deprecat2_7_, parententi0_.obj_name as obj_name3_7_, parententi0_.other_object_id as other_ob5_7_, parententi0_.someBytes as someByte4_7_, friends1_.parent_id as parent_i1_6_0__, friends1_.firstName as firstNam2_6_0__, friends1_.fullName as fullName3_6_0__, friends1_.lastName as lastName4_6_0__, friends1_.sortName as sortName5_6_0__ from ParentEntity parententi0_ left outer join parent_friends friends1_ on parententi0_.id=friends1_.parent_id where parententi0_.id in (? , ?) order by parententi0_.id asc]
2021-12-11 17:23:16,193  INFO Shut down Hibernate SessionFactory...
2021-12-11 17:23:16,193 TRACE Creating new transaction to call void com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider.runShutDownSQL()
2021-12-11 17:23:16,193 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@2c7cb194
2021-12-11 17:23:16,295 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.embeddedpktest.EmbeddedPkEntity
2021-12-11 17:23:16,295 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject2
2021-12-11 17:23:16,295 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject1
2021-12-11 17:23:16,295 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyBaseObject
2021-12-11 17:23:16,295 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.ParentEntity
2021-12-11 17:23:16,295 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.MappedSuperclassEntity
2021-12-11 17:23:16,295 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.ChildEntity
2021-12-11 17:23:16,295 TRACE Evaluate HibernateConfigurationValidators. has at least one=false
2021-12-11 17:23:16,297  WARN HHH10001002: Using Hibernate built-in connection pool (not for production use!)
Hibernate: alter table ChildEntity drop constraint FKj7t557e8a7axr8jinbltht20y
Hibernate: alter table inherit_one drop constraint FKlu6huhy2g08akv8wpudpfvqir
Hibernate: alter table inherit_two drop constraint FKe5yjuoa6qr80cm4gcilq1gubk
Hibernate: alter table parent_friends drop constraint FKn858qj6gf7i97mfmurc47k6e8
Hibernate: alter table ParentEntity drop constraint FKd0cteits00p7vm083x9iod1lw
Hibernate: drop table ChildEntity if exists
Hibernate: drop table EmbeddedPkEntity if exists
Hibernate: drop table inherit_base if exists
Hibernate: drop table inherit_one if exists
Hibernate: drop table inherit_two if exists
Hibernate: drop table mapped_superclass_test_entity if exists
Hibernate: drop table parent_friends if exists
Hibernate: drop table ParentEntity if exists
Hibernate: drop sequence hibernate_sequence if exists
Hibernate: create sequence hibernate_sequence start with 1 increment by 1
Hibernate: create table ChildEntity (id bigint not null, obj_name varchar(255), parent_id bigint, primary key (id))
Hibernate: create table EmbeddedPkEntity (id varchar(255) not null, timestamp bigint not null, some_name varchar(255), primary key (id, timestamp))
Hibernate: create table inherit_base (id bigint not null, primary key (id))
Hibernate: create table inherit_one (someId varchar(255), id bigint not null, primary key (id))
Hibernate: create table inherit_two (id bigint not null, primary key (id))
Hibernate: create table mapped_superclass_test_entity (id bigint not null, created bigint, updated bigint, obj_name varchar(255), primary key (id))
Hibernate: create table parent_friends (parent_id bigint not null, firstName varchar(255), fullName varchar(255), lastName varchar(255), sortName varchar(255))
Hibernate: create table ParentEntity (id bigint not null, deprecated boolean, obj_name varchar(255), someBytes blob(255), other_object_id bigint, primary key (id))
Hibernate: alter table ChildEntity add constraint FKj7t557e8a7axr8jinbltht20y foreign key (parent_id) references ParentEntity
Hibernate: alter table inherit_one add constraint FKlu6huhy2g08akv8wpudpfvqir foreign key (id) references inherit_base
Hibernate: alter table inherit_two add constraint FKe5yjuoa6qr80cm4gcilq1gubk foreign key (id) references inherit_base
Hibernate: alter table parent_friends add constraint FKn858qj6gf7i97mfmurc47k6e8 foreign key (parent_id) references ParentEntity
Hibernate: alter table ParentEntity add constraint FKd0cteits00p7vm083x9iod1lw foreign key (other_object_id) references ChildEntity
2021-12-11 17:23:16,316 TRACE Hibernate Setup Complete.
2021-12-11 17:23:16,316 DEBUG Known entities: [EmbeddedPkEntity, inherit_base, ParentEntity, inherit_two, mapped_superclass_test_entity, ChildEntity, inherit_one]
2021-12-11 17:23:16,316 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.EmbeddedPkEntity
2021-12-11 17:23:16,316 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.SomePrimaryKey from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@441488d9
2021-12-11 17:23:16,317 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.SomePrimaryKey from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@441488d9
2021-12-11 17:23:16,317 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.EmbeddedPkEntity
2021-12-11 17:23:16,317 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.ParentEntity
2021-12-11 17:23:16,317 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.ChildEntity
2021-12-11 17:23:16,317 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.ChildEntity
2021-12-11 17:23:16,317 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.HumanEmbeddedEntity from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@6bfa24b0
2021-12-11 17:23:16,317 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.HumanEmbeddedEntity from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@6bfa24b0
2021-12-11 17:23:16,317 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.ParentEntity
2021-12-11 17:23:16,317 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject2
2021-12-11 17:23:16,317 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject2
2021-12-11 17:23:16,317 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.MappedSuperclassEntity
2021-12-11 17:23:16,317 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.MappedSuperclassEntity
2021-12-11 17:23:16,317 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject1
2021-12-11 17:23:16,317 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject1
2021-12-11 17:23:16,317 TRACE Creating new transaction to call public void com.peterphi.std.guice.hibernate.webquery.DynamicQueryTest.clearDatabaseBeforeTest()
2021-12-11 17:23:16,317 TRACE Joining existing transaction to call public java.util.List<T> com.peterphi.std.guice.hibernate.dao.HibernateDao.getAll()
2021-12-11 17:23:16,317 TRACE Joining existing transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select childentit0_.id as id1_0_0_, parententi1_.id as id1_7_1_, childentit0_.obj_name as obj_name2_0_0_, childentit0_.parent_id as parent_i3_0_0_, friends2_.parent_id as parent_i1_6_0__, friends2_.firstName as firstNam2_6_0__, friends2_.fullName as fullName3_6_0__, friends2_.lastName as lastName4_6_0__, friends2_.sortName as sortName5_6_0__, parententi1_.deprecated as deprecat2_7_1_, parententi1_.obj_name as obj_name3_7_1_, parententi1_.other_object_id as other_ob5_7_1_, parententi1_.someBytes as someByte4_7_1_, friends2_.parent_id as parent_i1_6_0__, friends2_.firstName as firstNam2_6_0__, friends2_.fullName as fullName3_6_0__, friends2_.lastName as lastName4_6_0__, friends2_.sortName as sortName5_6_0__ from ChildEntity childentit0_ left outer join ParentEntity parententi1_ on childentit0_.parent_id=parententi1_.id left outer join parent_friends friends2_ on parententi1_.id=friends2_.parent_id where 1=1
2021-12-11 17:23:16,321 TRACE Joining existing transaction to call public java.util.List<T> com.peterphi.std.guice.hibernate.dao.HibernateDao.getAll()
2021-12-11 17:23:16,321 TRACE Joining existing transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select parententi0_.id as id1_7_, parententi0_.deprecated as deprecat2_7_, parententi0_.obj_name as obj_name3_7_, parententi0_.other_object_id as other_ob5_7_, parententi0_.someBytes as someByte4_7_, friends1_.parent_id as parent_i1_6_0__, friends1_.firstName as firstNam2_6_0__, friends1_.fullName as fullName3_6_0__, friends1_.lastName as lastName4_6_0__, friends1_.sortName as sortName5_6_0__ from ParentEntity parententi0_ left outer join parent_friends friends1_ on parententi0_.id=friends1_.parent_id where 1=1
2021-12-11 17:23:16,323 TRACE Joining existing transaction to call public java.util.List<T> com.peterphi.std.guice.hibernate.dao.HibernateDao.getAll()
2021-12-11 17:23:16,323 TRACE Joining existing transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select parententi0_.id as id1_7_, parententi0_.deprecated as deprecat2_7_, parententi0_.obj_name as obj_name3_7_, parententi0_.other_object_id as other_ob5_7_, parententi0_.someBytes as someByte4_7_, friends1_.parent_id as parent_i1_6_0__, friends1_.firstName as firstNam2_6_0__, friends1_.fullName as fullName3_6_0__, friends1_.lastName as lastName4_6_0__, friends1_.sortName as sortName5_6_0__ from ParentEntity parententi0_ left outer join parent_friends friends1_ on parententi0_.id=friends1_.parent_id where 1=1
2021-12-11 17:23:16,323 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@7f347d0c
2021-12-11 17:23:16,323 TRACE Creating new transaction to call public T com.peterphi.std.guice.hibernate.dao.HibernateDao.getByUniqueProperty(java.lang.String,java.lang.Object)
2021-12-11 17:23:16,324 TRACE Joining existing transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select parententi0_.id as id1_7_, parententi0_.deprecated as deprecat2_7_, parententi0_.obj_name as obj_name3_7_, parententi0_.other_object_id as other_ob5_7_, parententi0_.someBytes as someByte4_7_, friends2_.parent_id as parent_i1_6_0__, friends2_.firstName as firstNam2_6_0__, friends2_.fullName as fullName3_6_0__, friends2_.lastName as lastName4_6_0__, friends2_.sortName as sortName5_6_0__ from ParentEntity parententi0_ left outer join ChildEntity childentit1_ on parententi0_.other_object_id=childentit1_.id left outer join parent_friends friends2_ on parententi0_.id=friends2_.parent_id where childentit1_.id=?
2021-12-11 17:23:16,326 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@2dfcc324
2021-12-11 17:23:16,326  INFO Shut down Hibernate SessionFactory...
2021-12-11 17:23:16,326 TRACE Creating new transaction to call void com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider.runShutDownSQL()
2021-12-11 17:23:16,327 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@2ec8f0c8
2021-12-11 17:23:16,432 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.embeddedpktest.EmbeddedPkEntity
2021-12-11 17:23:16,432 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject2
2021-12-11 17:23:16,432 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject1
2021-12-11 17:23:16,432 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyBaseObject
2021-12-11 17:23:16,432 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.ParentEntity
2021-12-11 17:23:16,432 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.MappedSuperclassEntity
2021-12-11 17:23:16,432 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.ChildEntity
2021-12-11 17:23:16,432 TRACE Evaluate HibernateConfigurationValidators. has at least one=false
2021-12-11 17:23:16,436  WARN HHH10001002: Using Hibernate built-in connection pool (not for production use!)
Hibernate: alter table ChildEntity drop constraint FKj7t557e8a7axr8jinbltht20y
Hibernate: alter table inherit_one drop constraint FKlu6huhy2g08akv8wpudpfvqir
Hibernate: alter table inherit_two drop constraint FKe5yjuoa6qr80cm4gcilq1gubk
Hibernate: alter table parent_friends drop constraint FKn858qj6gf7i97mfmurc47k6e8
Hibernate: alter table ParentEntity drop constraint FKd0cteits00p7vm083x9iod1lw
Hibernate: drop table ChildEntity if exists
Hibernate: drop table EmbeddedPkEntity if exists
Hibernate: drop table inherit_base if exists
Hibernate: drop table inherit_one if exists
Hibernate: drop table inherit_two if exists
Hibernate: drop table mapped_superclass_test_entity if exists
Hibernate: drop table parent_friends if exists
Hibernate: drop table ParentEntity if exists
Hibernate: drop sequence hibernate_sequence if exists
Hibernate: create sequence hibernate_sequence start with 1 increment by 1
Hibernate: create table ChildEntity (id bigint not null, obj_name varchar(255), parent_id bigint, primary key (id))
Hibernate: create table EmbeddedPkEntity (id varchar(255) not null, timestamp bigint not null, some_name varchar(255), primary key (id, timestamp))
Hibernate: create table inherit_base (id bigint not null, primary key (id))
Hibernate: create table inherit_one (someId varchar(255), id bigint not null, primary key (id))
Hibernate: create table inherit_two (id bigint not null, primary key (id))
Hibernate: create table mapped_superclass_test_entity (id bigint not null, created bigint, updated bigint, obj_name varchar(255), primary key (id))
Hibernate: create table parent_friends (parent_id bigint not null, firstName varchar(255), fullName varchar(255), lastName varchar(255), sortName varchar(255))
Hibernate: create table ParentEntity (id bigint not null, deprecated boolean, obj_name varchar(255), someBytes blob(255), other_object_id bigint, primary key (id))
Hibernate: alter table ChildEntity add constraint FKj7t557e8a7axr8jinbltht20y foreign key (parent_id) references ParentEntity
Hibernate: alter table inherit_one add constraint FKlu6huhy2g08akv8wpudpfvqir foreign key (id) references inherit_base
Hibernate: alter table inherit_two add constraint FKe5yjuoa6qr80cm4gcilq1gubk foreign key (id) references inherit_base
Hibernate: alter table parent_friends add constraint FKn858qj6gf7i97mfmurc47k6e8 foreign key (parent_id) references ParentEntity
Hibernate: alter table ParentEntity add constraint FKd0cteits00p7vm083x9iod1lw foreign key (other_object_id) references ChildEntity
2021-12-11 17:23:16,455 TRACE Hibernate Setup Complete.
2021-12-11 17:23:16,455 DEBUG Known entities: [mapped_superclass_test_entity, EmbeddedPkEntity, inherit_two, ChildEntity, inherit_base, inherit_one, ParentEntity]
2021-12-11 17:23:16,455 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.MappedSuperclassEntity
2021-12-11 17:23:16,455 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.MappedSuperclassEntity
2021-12-11 17:23:16,455 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.EmbeddedPkEntity
2021-12-11 17:23:16,455 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.SomePrimaryKey from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@29601d11
2021-12-11 17:23:16,455 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.SomePrimaryKey from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@29601d11
2021-12-11 17:23:16,455 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.EmbeddedPkEntity
2021-12-11 17:23:16,455 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject2
2021-12-11 17:23:16,455 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject2
2021-12-11 17:23:16,455 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.ChildEntity
2021-12-11 17:23:16,455 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.ParentEntity
2021-12-11 17:23:16,455 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.HumanEmbeddedEntity from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@21e75f1b
2021-12-11 17:23:16,455 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.HumanEmbeddedEntity from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@21e75f1b
2021-12-11 17:23:16,455 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.ParentEntity
2021-12-11 17:23:16,455 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.ChildEntity
2021-12-11 17:23:16,455 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject1
2021-12-11 17:23:16,455 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject1
2021-12-11 17:23:16,456 TRACE Creating new transaction to call public void com.peterphi.std.guice.hibernate.webquery.DynamicQueryTest.clearDatabaseBeforeTest()
2021-12-11 17:23:16,456 TRACE Joining existing transaction to call public java.util.List<T> com.peterphi.std.guice.hibernate.dao.HibernateDao.getAll()
2021-12-11 17:23:16,456 TRACE Joining existing transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select childentit0_.id as id1_0_0_, parententi1_.id as id1_7_1_, childentit0_.obj_name as obj_name2_0_0_, childentit0_.parent_id as parent_i3_0_0_, friends2_.parent_id as parent_i1_6_0__, friends2_.firstName as firstNam2_6_0__, friends2_.fullName as fullName3_6_0__, friends2_.lastName as lastName4_6_0__, friends2_.sortName as sortName5_6_0__, parententi1_.deprecated as deprecat2_7_1_, parententi1_.obj_name as obj_name3_7_1_, parententi1_.other_object_id as other_ob5_7_1_, parententi1_.someBytes as someByte4_7_1_, friends2_.parent_id as parent_i1_6_0__, friends2_.firstName as firstNam2_6_0__, friends2_.fullName as fullName3_6_0__, friends2_.lastName as lastName4_6_0__, friends2_.sortName as sortName5_6_0__ from ChildEntity childentit0_ left outer join ParentEntity parententi1_ on childentit0_.parent_id=parententi1_.id left outer join parent_friends friends2_ on parententi1_.id=friends2_.parent_id where 1=1
2021-12-11 17:23:16,459 TRACE Joining existing transaction to call public java.util.List<T> com.peterphi.std.guice.hibernate.dao.HibernateDao.getAll()
2021-12-11 17:23:16,459 TRACE Joining existing transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select parententi0_.id as id1_7_, parententi0_.deprecated as deprecat2_7_, parententi0_.obj_name as obj_name3_7_, parententi0_.other_object_id as other_ob5_7_, parententi0_.someBytes as someByte4_7_, friends1_.parent_id as parent_i1_6_0__, friends1_.firstName as firstNam2_6_0__, friends1_.fullName as fullName3_6_0__, friends1_.lastName as lastName4_6_0__, friends1_.sortName as sortName5_6_0__ from ParentEntity parententi0_ left outer join parent_friends friends1_ on parententi0_.id=friends1_.parent_id where 1=1
2021-12-11 17:23:16,461 TRACE Joining existing transaction to call public java.util.List<T> com.peterphi.std.guice.hibernate.dao.HibernateDao.getAll()
2021-12-11 17:23:16,462 TRACE Joining existing transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select parententi0_.id as id1_7_, parententi0_.deprecated as deprecat2_7_, parententi0_.obj_name as obj_name3_7_, parententi0_.other_object_id as other_ob5_7_, parententi0_.someBytes as someByte4_7_, friends1_.parent_id as parent_i1_6_0__, friends1_.firstName as firstNam2_6_0__, friends1_.fullName as fullName3_6_0__, friends1_.lastName as lastName4_6_0__, friends1_.sortName as sortName5_6_0__ from ParentEntity parententi0_ left outer join parent_friends friends1_ on parententi0_.id=friends1_.parent_id where 1=1
2021-12-11 17:23:16,462 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@34f5851e
2021-12-11 17:23:16,462 TRACE Creating new transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
2021-12-11 17:23:16,463 DEBUG IllegalArgumentException causes rollback
2021-12-11 17:23:16,463  INFO Shut down Hibernate SessionFactory...
2021-12-11 17:23:16,463 TRACE Creating new transaction to call void com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider.runShutDownSQL()
2021-12-11 17:23:16,463 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@72fd82f
2021-12-11 17:23:16,572 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.embeddedpktest.EmbeddedPkEntity
2021-12-11 17:23:16,572 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject2
2021-12-11 17:23:16,572 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject1
2021-12-11 17:23:16,572 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyBaseObject
2021-12-11 17:23:16,572 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.ParentEntity
2021-12-11 17:23:16,572 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.MappedSuperclassEntity
2021-12-11 17:23:16,572 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.ChildEntity
2021-12-11 17:23:16,572 TRACE Evaluate HibernateConfigurationValidators. has at least one=false
2021-12-11 17:23:16,575  WARN HHH10001002: Using Hibernate built-in connection pool (not for production use!)
Hibernate: alter table ChildEntity drop constraint FKj7t557e8a7axr8jinbltht20y
Hibernate: alter table inherit_one drop constraint FKlu6huhy2g08akv8wpudpfvqir
Hibernate: alter table inherit_two drop constraint FKe5yjuoa6qr80cm4gcilq1gubk
Hibernate: alter table parent_friends drop constraint FKn858qj6gf7i97mfmurc47k6e8
Hibernate: alter table ParentEntity drop constraint FKd0cteits00p7vm083x9iod1lw
Hibernate: drop table ChildEntity if exists
Hibernate: drop table EmbeddedPkEntity if exists
Hibernate: drop table inherit_base if exists
Hibernate: drop table inherit_one if exists
Hibernate: drop table inherit_two if exists
Hibernate: drop table mapped_superclass_test_entity if exists
Hibernate: drop table parent_friends if exists
Hibernate: drop table ParentEntity if exists
Hibernate: drop sequence hibernate_sequence if exists
Hibernate: create sequence hibernate_sequence start with 1 increment by 1
Hibernate: create table ChildEntity (id bigint not null, obj_name varchar(255), parent_id bigint, primary key (id))
Hibernate: create table EmbeddedPkEntity (id varchar(255) not null, timestamp bigint not null, some_name varchar(255), primary key (id, timestamp))
Hibernate: create table inherit_base (id bigint not null, primary key (id))
Hibernate: create table inherit_one (someId varchar(255), id bigint not null, primary key (id))
Hibernate: create table inherit_two (id bigint not null, primary key (id))
Hibernate: create table mapped_superclass_test_entity (id bigint not null, created bigint, updated bigint, obj_name varchar(255), primary key (id))
Hibernate: create table parent_friends (parent_id bigint not null, firstName varchar(255), fullName varchar(255), lastName varchar(255), sortName varchar(255))
Hibernate: create table ParentEntity (id bigint not null, deprecated boolean, obj_name varchar(255), someBytes blob(255), other_object_id bigint, primary key (id))
Hibernate: alter table ChildEntity add constraint FKj7t557e8a7axr8jinbltht20y foreign key (parent_id) references ParentEntity
Hibernate: alter table inherit_one add constraint FKlu6huhy2g08akv8wpudpfvqir foreign key (id) references inherit_base
Hibernate: alter table inherit_two add constraint FKe5yjuoa6qr80cm4gcilq1gubk foreign key (id) references inherit_base
Hibernate: alter table parent_friends add constraint FKn858qj6gf7i97mfmurc47k6e8 foreign key (parent_id) references ParentEntity
Hibernate: alter table ParentEntity add constraint FKd0cteits00p7vm083x9iod1lw foreign key (other_object_id) references ChildEntity
2021-12-11 17:23:16,600 TRACE Hibernate Setup Complete.
2021-12-11 17:23:16,600 DEBUG Known entities: [mapped_superclass_test_entity, ChildEntity, inherit_two, inherit_base, ParentEntity, inherit_one, EmbeddedPkEntity]
2021-12-11 17:23:16,600 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.MappedSuperclassEntity
2021-12-11 17:23:16,601 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.MappedSuperclassEntity
2021-12-11 17:23:16,601 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.ChildEntity
2021-12-11 17:23:16,601 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.ParentEntity
2021-12-11 17:23:16,601 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.HumanEmbeddedEntity from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@f83da5a
2021-12-11 17:23:16,601 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.HumanEmbeddedEntity from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@f83da5a
2021-12-11 17:23:16,601 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.ParentEntity
2021-12-11 17:23:16,601 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.ChildEntity
2021-12-11 17:23:16,601 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject2
2021-12-11 17:23:16,601 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject2
2021-12-11 17:23:16,601 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject1
2021-12-11 17:23:16,601 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject1
2021-12-11 17:23:16,601 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.EmbeddedPkEntity
2021-12-11 17:23:16,601 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.SomePrimaryKey from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@cd8a539
2021-12-11 17:23:16,601 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.SomePrimaryKey from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@cd8a539
2021-12-11 17:23:16,601 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.EmbeddedPkEntity
2021-12-11 17:23:16,601 TRACE Creating new transaction to call public void com.peterphi.std.guice.hibernate.webquery.DynamicQueryTest.clearDatabaseBeforeTest()
2021-12-11 17:23:16,602 TRACE Joining existing transaction to call public java.util.List<T> com.peterphi.std.guice.hibernate.dao.HibernateDao.getAll()
2021-12-11 17:23:16,602 TRACE Joining existing transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select childentit0_.id as id1_0_0_, parententi1_.id as id1_7_1_, childentit0_.obj_name as obj_name2_0_0_, childentit0_.parent_id as parent_i3_0_0_, friends2_.parent_id as parent_i1_6_0__, friends2_.firstName as firstNam2_6_0__, friends2_.fullName as fullName3_6_0__, friends2_.lastName as lastName4_6_0__, friends2_.sortName as sortName5_6_0__, parententi1_.deprecated as deprecat2_7_1_, parententi1_.obj_name as obj_name3_7_1_, parententi1_.other_object_id as other_ob5_7_1_, parententi1_.someBytes as someByte4_7_1_, friends2_.parent_id as parent_i1_6_0__, friends2_.firstName as firstNam2_6_0__, friends2_.fullName as fullName3_6_0__, friends2_.lastName as lastName4_6_0__, friends2_.sortName as sortName5_6_0__ from ChildEntity childentit0_ left outer join ParentEntity parententi1_ on childentit0_.parent_id=parententi1_.id left outer join parent_friends friends2_ on parententi1_.id=friends2_.parent_id where 1=1
2021-12-11 17:23:16,606 TRACE Joining existing transaction to call public java.util.List<T> com.peterphi.std.guice.hibernate.dao.HibernateDao.getAll()
2021-12-11 17:23:16,606 TRACE Joining existing transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select parententi0_.id as id1_7_, parententi0_.deprecated as deprecat2_7_, parententi0_.obj_name as obj_name3_7_, parententi0_.other_object_id as other_ob5_7_, parententi0_.someBytes as someByte4_7_, friends1_.parent_id as parent_i1_6_0__, friends1_.firstName as firstNam2_6_0__, friends1_.fullName as fullName3_6_0__, friends1_.lastName as lastName4_6_0__, friends1_.sortName as sortName5_6_0__ from ParentEntity parententi0_ left outer join parent_friends friends1_ on parententi0_.id=friends1_.parent_id where 1=1
2021-12-11 17:23:16,608 TRACE Joining existing transaction to call public java.util.List<T> com.peterphi.std.guice.hibernate.dao.HibernateDao.getAll()
2021-12-11 17:23:16,608 TRACE Joining existing transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select parententi0_.id as id1_7_, parententi0_.deprecated as deprecat2_7_, parententi0_.obj_name as obj_name3_7_, parententi0_.other_object_id as other_ob5_7_, parententi0_.someBytes as someByte4_7_, friends1_.parent_id as parent_i1_6_0__, friends1_.firstName as firstNam2_6_0__, friends1_.fullName as fullName3_6_0__, friends1_.lastName as lastName4_6_0__, friends1_.sortName as sortName5_6_0__ from ParentEntity parententi0_ left outer join parent_friends friends1_ on parententi0_.id=friends1_.parent_id where 1=1
2021-12-11 17:23:16,609 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@4ea23481
2021-12-11 17:23:16,610 TRACE Creating new transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:16,610 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@6ad00689
Hibernate: insert into ParentEntity (deprecated, obj_name, other_object_id, someBytes, id) values (?, ?, ?, ?, ?)
2021-12-11 17:23:16,612 TRACE Creating new transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:16,612 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@2d4f063e
Hibernate: insert into ParentEntity (deprecated, obj_name, other_object_id, someBytes, id) values (?, ?, ?, ?, ?)
2021-12-11 17:23:16,613 TRACE Creating new transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select parententi0_.id as id1_7_, parententi0_.deprecated as deprecat2_7_, parententi0_.obj_name as obj_name3_7_, parententi0_.other_object_id as other_ob5_7_, parententi0_.someBytes as someByte4_7_, friends1_.parent_id as parent_i1_6_0__, friends1_.firstName as firstNam2_6_0__, friends1_.fullName as fullName3_6_0__, friends1_.lastName as lastName4_6_0__, friends1_.sortName as sortName5_6_0__ from ParentEntity parententi0_ left outer join parent_friends friends1_ on parententi0_.id=friends1_.parent_id where 1=1 order by parententi0_.id asc
2021-12-11 17:23:16,617 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@77df7cb6
2021-12-11 17:23:16,617  INFO Shut down Hibernate SessionFactory...
2021-12-11 17:23:16,617 TRACE Creating new transaction to call void com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider.runShutDownSQL()
2021-12-11 17:23:16,617 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@3ac5ecdc
2021-12-11 17:23:16,733 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.embeddedpktest.EmbeddedPkEntity
2021-12-11 17:23:16,733 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject2
2021-12-11 17:23:16,733 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject1
2021-12-11 17:23:16,733 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyBaseObject
2021-12-11 17:23:16,733 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.ParentEntity
2021-12-11 17:23:16,733 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.MappedSuperclassEntity
2021-12-11 17:23:16,733 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.ChildEntity
2021-12-11 17:23:16,733 TRACE Evaluate HibernateConfigurationValidators. has at least one=false
2021-12-11 17:23:16,736  WARN HHH10001002: Using Hibernate built-in connection pool (not for production use!)
Hibernate: alter table ChildEntity drop constraint FKj7t557e8a7axr8jinbltht20y
Hibernate: alter table inherit_one drop constraint FKlu6huhy2g08akv8wpudpfvqir
Hibernate: alter table inherit_two drop constraint FKe5yjuoa6qr80cm4gcilq1gubk
Hibernate: alter table parent_friends drop constraint FKn858qj6gf7i97mfmurc47k6e8
Hibernate: alter table ParentEntity drop constraint FKd0cteits00p7vm083x9iod1lw
Hibernate: drop table ChildEntity if exists
Hibernate: drop table EmbeddedPkEntity if exists
Hibernate: drop table inherit_base if exists
Hibernate: drop table inherit_one if exists
Hibernate: drop table inherit_two if exists
Hibernate: drop table mapped_superclass_test_entity if exists
Hibernate: drop table parent_friends if exists
Hibernate: drop table ParentEntity if exists
Hibernate: drop sequence hibernate_sequence if exists
Hibernate: create sequence hibernate_sequence start with 1 increment by 1
Hibernate: create table ChildEntity (id bigint not null, obj_name varchar(255), parent_id bigint, primary key (id))
Hibernate: create table EmbeddedPkEntity (id varchar(255) not null, timestamp bigint not null, some_name varchar(255), primary key (id, timestamp))
Hibernate: create table inherit_base (id bigint not null, primary key (id))
Hibernate: create table inherit_one (someId varchar(255), id bigint not null, primary key (id))
Hibernate: create table inherit_two (id bigint not null, primary key (id))
Hibernate: create table mapped_superclass_test_entity (id bigint not null, created bigint, updated bigint, obj_name varchar(255), primary key (id))
Hibernate: create table parent_friends (parent_id bigint not null, firstName varchar(255), fullName varchar(255), lastName varchar(255), sortName varchar(255))
Hibernate: create table ParentEntity (id bigint not null, deprecated boolean, obj_name varchar(255), someBytes blob(255), other_object_id bigint, primary key (id))
Hibernate: alter table ChildEntity add constraint FKj7t557e8a7axr8jinbltht20y foreign key (parent_id) references ParentEntity
Hibernate: alter table inherit_one add constraint FKlu6huhy2g08akv8wpudpfvqir foreign key (id) references inherit_base
Hibernate: alter table inherit_two add constraint FKe5yjuoa6qr80cm4gcilq1gubk foreign key (id) references inherit_base
Hibernate: alter table parent_friends add constraint FKn858qj6gf7i97mfmurc47k6e8 foreign key (parent_id) references ParentEntity
Hibernate: alter table ParentEntity add constraint FKd0cteits00p7vm083x9iod1lw foreign key (other_object_id) references ChildEntity
2021-12-11 17:23:16,761 TRACE Hibernate Setup Complete.
2021-12-11 17:23:16,762 DEBUG Known entities: [ParentEntity, inherit_one, inherit_two, mapped_superclass_test_entity, inherit_base, ChildEntity, EmbeddedPkEntity]
2021-12-11 17:23:16,762 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.ParentEntity
2021-12-11 17:23:16,762 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.ChildEntity
2021-12-11 17:23:16,762 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.ChildEntity
2021-12-11 17:23:16,762 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.HumanEmbeddedEntity from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@68301a46
2021-12-11 17:23:16,762 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.HumanEmbeddedEntity from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@68301a46
2021-12-11 17:23:16,762 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.ParentEntity
2021-12-11 17:23:16,762 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject1
2021-12-11 17:23:16,762 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject1
2021-12-11 17:23:16,762 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject2
2021-12-11 17:23:16,762 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject2
2021-12-11 17:23:16,762 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.MappedSuperclassEntity
2021-12-11 17:23:16,762 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.MappedSuperclassEntity
2021-12-11 17:23:16,762 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.EmbeddedPkEntity
2021-12-11 17:23:16,762 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.SomePrimaryKey from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@5b14986a
2021-12-11 17:23:16,762 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.SomePrimaryKey from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@5b14986a
2021-12-11 17:23:16,762 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.EmbeddedPkEntity
2021-12-11 17:23:16,763 TRACE Creating new transaction to call public void com.peterphi.std.guice.hibernate.webquery.DynamicQueryTest.clearDatabaseBeforeTest()
2021-12-11 17:23:16,763 TRACE Joining existing transaction to call public java.util.List<T> com.peterphi.std.guice.hibernate.dao.HibernateDao.getAll()
2021-12-11 17:23:16,763 TRACE Joining existing transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select childentit0_.id as id1_0_0_, parententi1_.id as id1_7_1_, childentit0_.obj_name as obj_name2_0_0_, childentit0_.parent_id as parent_i3_0_0_, friends2_.parent_id as parent_i1_6_0__, friends2_.firstName as firstNam2_6_0__, friends2_.fullName as fullName3_6_0__, friends2_.lastName as lastName4_6_0__, friends2_.sortName as sortName5_6_0__, parententi1_.deprecated as deprecat2_7_1_, parententi1_.obj_name as obj_name3_7_1_, parententi1_.other_object_id as other_ob5_7_1_, parententi1_.someBytes as someByte4_7_1_, friends2_.parent_id as parent_i1_6_0__, friends2_.firstName as firstNam2_6_0__, friends2_.fullName as fullName3_6_0__, friends2_.lastName as lastName4_6_0__, friends2_.sortName as sortName5_6_0__ from ChildEntity childentit0_ left outer join ParentEntity parententi1_ on childentit0_.parent_id=parententi1_.id left outer join parent_friends friends2_ on parententi1_.id=friends2_.parent_id where 1=1
2021-12-11 17:23:16,768 TRACE Joining existing transaction to call public java.util.List<T> com.peterphi.std.guice.hibernate.dao.HibernateDao.getAll()
2021-12-11 17:23:16,768 TRACE Joining existing transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select parententi0_.id as id1_7_, parententi0_.deprecated as deprecat2_7_, parententi0_.obj_name as obj_name3_7_, parententi0_.other_object_id as other_ob5_7_, parententi0_.someBytes as someByte4_7_, friends1_.parent_id as parent_i1_6_0__, friends1_.firstName as firstNam2_6_0__, friends1_.fullName as fullName3_6_0__, friends1_.lastName as lastName4_6_0__, friends1_.sortName as sortName5_6_0__ from ParentEntity parententi0_ left outer join parent_friends friends1_ on parententi0_.id=friends1_.parent_id where 1=1
2021-12-11 17:23:16,771 TRACE Joining existing transaction to call public java.util.List<T> com.peterphi.std.guice.hibernate.dao.HibernateDao.getAll()
2021-12-11 17:23:16,772 TRACE Joining existing transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select parententi0_.id as id1_7_, parententi0_.deprecated as deprecat2_7_, parententi0_.obj_name as obj_name3_7_, parententi0_.other_object_id as other_ob5_7_, parententi0_.someBytes as someByte4_7_, friends1_.parent_id as parent_i1_6_0__, friends1_.firstName as firstNam2_6_0__, friends1_.fullName as fullName3_6_0__, friends1_.lastName as lastName4_6_0__, friends1_.sortName as sortName5_6_0__ from ParentEntity parententi0_ left outer join parent_friends friends1_ on parententi0_.id=friends1_.parent_id where 1=1
2021-12-11 17:23:16,772 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@495dd938
2021-12-11 17:23:16,774 TRACE Creating new transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select mappedsupe0_.id as id1_5_, mappedsupe0_.created as created2_5_, mappedsupe0_.updated as updated3_5_, mappedsupe0_.obj_name as obj_name4_5_ from mapped_superclass_test_entity mappedsupe0_ where mappedsupe0_.id=? and mappedsupe0_.obj_name<>? and mappedsupe0_.created<?
2021-12-11 17:23:16,780 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@4470ff39
2021-12-11 17:23:16,780  INFO Shut down Hibernate SessionFactory...
2021-12-11 17:23:16,781 TRACE Creating new transaction to call void com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider.runShutDownSQL()
2021-12-11 17:23:16,781 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@35dc7aa5
Tests run: 22, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 4.079 sec - in com.peterphi.std.guice.hibernate.webquery.DynamicQueryTest
Running com.peterphi.std.guice.hibernate.webquery.WebQueryTest
Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.263 sec - in com.peterphi.std.guice.hibernate.webquery.WebQueryTest
Running com.peterphi.std.guice.hibernate.webquery.discriminatortest.DiscriminatorDynamicQueryTest
2021-12-11 17:23:17,202 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject2
2021-12-11 17:23:17,202 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject1
2021-12-11 17:23:17,202 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyBaseObject
2021-12-11 17:23:17,203 TRACE Evaluate HibernateConfigurationValidators. has at least one=false
2021-12-11 17:23:17,206  WARN HHH10001002: Using Hibernate built-in connection pool (not for production use!)
Hibernate: alter table inherit_one drop constraint FKlu6huhy2g08akv8wpudpfvqir
Hibernate: alter table inherit_two drop constraint FKe5yjuoa6qr80cm4gcilq1gubk
Hibernate: drop table inherit_base if exists
Hibernate: drop table inherit_one if exists
Hibernate: drop table inherit_two if exists
Hibernate: drop sequence hibernate_sequence if exists
Hibernate: create sequence hibernate_sequence start with 1 increment by 1
Hibernate: create table inherit_base (id bigint not null, primary key (id))
Hibernate: create table inherit_one (someId varchar(255), id bigint not null, primary key (id))
Hibernate: create table inherit_two (id bigint not null, primary key (id))
Hibernate: alter table inherit_one add constraint FKlu6huhy2g08akv8wpudpfvqir foreign key (id) references inherit_base
Hibernate: alter table inherit_two add constraint FKe5yjuoa6qr80cm4gcilq1gubk foreign key (id) references inherit_base
2021-12-11 17:23:17,220 TRACE Hibernate Setup Complete.
2021-12-11 17:23:17,220 DEBUG Known entities: [inherit_one, inherit_base, inherit_two]
2021-12-11 17:23:17,220 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject1
2021-12-11 17:23:17,220 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject1
2021-12-11 17:23:17,220 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject2
2021-12-11 17:23:17,220 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject2
2021-12-11 17:23:17,221 TRACE Creating new transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:17,222 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@38d21e74
Hibernate: insert into inherit_base (id) values (?)
Hibernate: insert into inherit_one (someId, id) values (?, ?)
2021-12-11 17:23:17,223 TRACE Creating new transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:17,223 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@5659f14
Hibernate: insert into inherit_base (id) values (?)
Hibernate: insert into inherit_two (id) values (?)
2021-12-11 17:23:17,224 TRACE Creating new transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
2021-12-11 17:23:17,224 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyBaseObject
2021-12-11 17:23:17,224 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyBaseObject
Hibernate: select mychildobj0_.id as id1_0_, mychildobj0_.someId as someId1_1_ from inherit_one mychildobj0_ inner join inherit_base mychildobj0_1_ on mychildobj0_.id=mychildobj0_1_.id where mychildobj0_.id in (? , ?)
2021-12-11 17:23:17,230 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@56b0a45c
2021-12-11 17:23:17,231  INFO Shut down Hibernate SessionFactory...
2021-12-11 17:23:17,231 TRACE Creating new transaction to call void com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider.runShutDownSQL()
2021-12-11 17:23:17,231 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@625ab2a1
2021-12-11 17:23:17,379 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject2
2021-12-11 17:23:17,379 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject1
2021-12-11 17:23:17,379 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyBaseObject
2021-12-11 17:23:17,379 TRACE Evaluate HibernateConfigurationValidators. has at least one=false
2021-12-11 17:23:17,381  WARN HHH10001002: Using Hibernate built-in connection pool (not for production use!)
Hibernate: alter table inherit_one drop constraint FKlu6huhy2g08akv8wpudpfvqir
Hibernate: alter table inherit_two drop constraint FKe5yjuoa6qr80cm4gcilq1gubk
Hibernate: drop table inherit_base if exists
Hibernate: drop table inherit_one if exists
Hibernate: drop table inherit_two if exists
Hibernate: drop sequence hibernate_sequence if exists
Hibernate: create sequence hibernate_sequence start with 1 increment by 1
Hibernate: create table inherit_base (id bigint not null, primary key (id))
Hibernate: create table inherit_one (someId varchar(255), id bigint not null, primary key (id))
Hibernate: create table inherit_two (id bigint not null, primary key (id))
Hibernate: alter table inherit_one add constraint FKlu6huhy2g08akv8wpudpfvqir foreign key (id) references inherit_base
Hibernate: alter table inherit_two add constraint FKe5yjuoa6qr80cm4gcilq1gubk foreign key (id) references inherit_base
2021-12-11 17:23:17,393 TRACE Hibernate Setup Complete.
2021-12-11 17:23:17,393 DEBUG Known entities: [inherit_base, inherit_two, inherit_one]
2021-12-11 17:23:17,393 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject2
2021-12-11 17:23:17,393 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject2
2021-12-11 17:23:17,393 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject1
2021-12-11 17:23:17,393 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject1
2021-12-11 17:23:17,394 TRACE Creating new transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:17,394 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@114c3c80
Hibernate: insert into inherit_base (id) values (?)
Hibernate: insert into inherit_one (someId, id) values (?, ?)
2021-12-11 17:23:17,395 TRACE Creating new transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:17,395 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@73e307cd
Hibernate: insert into inherit_base (id) values (?)
Hibernate: insert into inherit_two (id) values (?)
2021-12-11 17:23:17,396 TRACE Creating new transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
2021-12-11 17:23:17,396 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyBaseObject
2021-12-11 17:23:17,396 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyBaseObject
Hibernate: select mychildobj0_.id as id1_0_, mychildobj0_.someId as someId1_1_ from inherit_one mychildobj0_ inner join inherit_base mychildobj0_1_ on mychildobj0_.id=mychildobj0_1_.id where mychildobj0_.someId=?
2021-12-11 17:23:17,399 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@60639f24
2021-12-11 17:23:17,399  INFO Shut down Hibernate SessionFactory...
2021-12-11 17:23:17,399 TRACE Creating new transaction to call void com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider.runShutDownSQL()
2021-12-11 17:23:17,399 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@1a660cc8
2021-12-11 17:23:17,528 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject2
2021-12-11 17:23:17,528 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject1
2021-12-11 17:23:17,528 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyBaseObject
2021-12-11 17:23:17,528 TRACE Evaluate HibernateConfigurationValidators. has at least one=false
2021-12-11 17:23:17,531  WARN HHH10001002: Using Hibernate built-in connection pool (not for production use!)
Hibernate: alter table inherit_one drop constraint FKlu6huhy2g08akv8wpudpfvqir
Hibernate: alter table inherit_two drop constraint FKe5yjuoa6qr80cm4gcilq1gubk
Hibernate: drop table inherit_base if exists
Hibernate: drop table inherit_one if exists
Hibernate: drop table inherit_two if exists
Hibernate: drop sequence hibernate_sequence if exists
Hibernate: create sequence hibernate_sequence start with 1 increment by 1
Hibernate: create table inherit_base (id bigint not null, primary key (id))
Hibernate: create table inherit_one (someId varchar(255), id bigint not null, primary key (id))
Hibernate: create table inherit_two (id bigint not null, primary key (id))
Hibernate: alter table inherit_one add constraint FKlu6huhy2g08akv8wpudpfvqir foreign key (id) references inherit_base
Hibernate: alter table inherit_two add constraint FKe5yjuoa6qr80cm4gcilq1gubk foreign key (id) references inherit_base
2021-12-11 17:23:17,547 TRACE Hibernate Setup Complete.
2021-12-11 17:23:17,547 DEBUG Known entities: [inherit_two, inherit_one, inherit_base]
2021-12-11 17:23:17,547 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject2
2021-12-11 17:23:17,547 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject2
2021-12-11 17:23:17,547 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject1
2021-12-11 17:23:17,547 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyChildObject1
2021-12-11 17:23:17,548 TRACE Creating new transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:17,548 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@3495dbb9
Hibernate: insert into inherit_base (id) values (?)
Hibernate: insert into inherit_one (someId, id) values (?, ?)
2021-12-11 17:23:17,549 TRACE Creating new transaction to call public ID com.peterphi.std.guice.hibernate.dao.HibernateDao.save(T)
Hibernate: call next value for hibernate_sequence
2021-12-11 17:23:17,549 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@5e3c1e7a
Hibernate: insert into inherit_base (id) values (?)
Hibernate: insert into inherit_two (id) values (?)
2021-12-11 17:23:17,550 TRACE Creating new transaction to call public T com.peterphi.std.guice.hibernate.dao.HibernateDao.getById(ID)
2021-12-11 17:23:17,550 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyBaseObject
2021-12-11 17:23:17,550 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.discriminatortest.MyBaseObject
Hibernate: select mybaseobje0_.id as id1_0_0_, mybaseobje0_2_.someId as someId1_1_0_, case when mybaseobje0_1_.id is not null then 1 when mybaseobje0_2_.id is not null then 2 when mybaseobje0_.id is not null then 0 end as clazz_0_ from inherit_base mybaseobje0_ left outer join inherit_two mybaseobje0_1_ on mybaseobje0_.id=mybaseobje0_1_.id left outer join inherit_one mybaseobje0_2_ on mybaseobje0_.id=mybaseobje0_2_.id where mybaseobje0_.id=?
2021-12-11 17:23:17,551 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@5dc7be10
2021-12-11 17:23:17,551 TRACE Creating new transaction to call public T com.peterphi.std.guice.hibernate.dao.HibernateDao.getById(ID)
Hibernate: select mybaseobje0_.id as id1_0_0_, mybaseobje0_2_.someId as someId1_1_0_, case when mybaseobje0_1_.id is not null then 1 when mybaseobje0_2_.id is not null then 2 when mybaseobje0_.id is not null then 0 end as clazz_0_ from inherit_base mybaseobje0_ left outer join inherit_two mybaseobje0_1_ on mybaseobje0_.id=mybaseobje0_1_.id left outer join inherit_one mybaseobje0_2_ on mybaseobje0_.id=mybaseobje0_2_.id where mybaseobje0_.id=?
2021-12-11 17:23:17,551 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@250becb7
2021-12-11 17:23:17,552  INFO Shut down Hibernate SessionFactory...
2021-12-11 17:23:17,552 TRACE Creating new transaction to call void com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider.runShutDownSQL()
2021-12-11 17:23:17,552 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@7006c487
Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.503 sec - in com.peterphi.std.guice.hibernate.webquery.discriminatortest.DiscriminatorDynamicQueryTest
Running com.peterphi.std.guice.hibernate.webquery.embeddedpktest.DynamicQueryEmbeddedPkTest
2021-12-11 17:23:17,656 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.embeddedpktest.EmbeddedPkEntity
2021-12-11 17:23:17,656 TRACE Evaluate HibernateConfigurationValidators. has at least one=false
2021-12-11 17:23:17,658  WARN HHH10001002: Using Hibernate built-in connection pool (not for production use!)
Hibernate: drop table EmbeddedPkEntity if exists
Hibernate: create table EmbeddedPkEntity (id varchar(255) not null, timestamp bigint not null, some_name varchar(255), primary key (id, timestamp))
2021-12-11 17:23:17,666 TRACE Hibernate Setup Complete.
2021-12-11 17:23:17,666 DEBUG Known entities: [EmbeddedPkEntity]
2021-12-11 17:23:17,666 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.EmbeddedPkEntity
2021-12-11 17:23:17,666 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.SomePrimaryKey from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@4152dfe
2021-12-11 17:23:17,666 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.SomePrimaryKey from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@4152dfe
2021-12-11 17:23:17,666 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.EmbeddedPkEntity
2021-12-11 17:23:17,666 TRACE Creating new transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select embeddedpk0_.id as id1_0_, embeddedpk0_.timestamp as timestam2_0_, embeddedpk0_.some_name as some_nam3_0_ from EmbeddedPkEntity embeddedpk0_ where embeddedpk0_.id=? and embeddedpk0_.timestamp=?
2021-12-11 17:23:17,668 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@4cc60d09
2021-12-11 17:23:17,668  INFO Shut down Hibernate SessionFactory...
2021-12-11 17:23:17,669 TRACE Creating new transaction to call void com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider.runShutDownSQL()
2021-12-11 17:23:17,669 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@30ac236b
2021-12-11 17:23:17,767 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.embeddedpktest.EmbeddedPkEntity
2021-12-11 17:23:17,767 TRACE Evaluate HibernateConfigurationValidators. has at least one=false
2021-12-11 17:23:17,769  WARN HHH10001002: Using Hibernate built-in connection pool (not for production use!)
Hibernate: drop table EmbeddedPkEntity if exists
Hibernate: create table EmbeddedPkEntity (id varchar(255) not null, timestamp bigint not null, some_name varchar(255), primary key (id, timestamp))
2021-12-11 17:23:17,776 TRACE Hibernate Setup Complete.
2021-12-11 17:23:17,777 DEBUG Known entities: [EmbeddedPkEntity]
2021-12-11 17:23:17,777 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.EmbeddedPkEntity
2021-12-11 17:23:17,777 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.SomePrimaryKey from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@70039795
2021-12-11 17:23:17,777 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.SomePrimaryKey from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@70039795
2021-12-11 17:23:17,777 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.EmbeddedPkEntity
2021-12-11 17:23:17,777 TRACE Creating new transaction to call public <RT> com.peterphi.std.guice.hibernate.webquery.ConstrainedResultSet<RT> com.peterphi.std.guice.hibernate.dao.HibernateDao.find(com.peterphi.std.guice.restclient.jaxb.webquery.WebQuery,com.peterphi.std.guice.hibernate.webquery.impl.jpa.JPASearchStrategy,java.util.function.Function<?, RT>)
Hibernate: select embeddedpk0_.id as id1_0_, embeddedpk0_.timestamp as timestam2_0_, embeddedpk0_.some_name as some_nam3_0_ from EmbeddedPkEntity embeddedpk0_ where embeddedpk0_.timestamp=?
2021-12-11 17:23:17,779 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@21ec6a4e
2021-12-11 17:23:17,779  INFO Shut down Hibernate SessionFactory...
2021-12-11 17:23:17,779 TRACE Creating new transaction to call void com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider.runShutDownSQL()
2021-12-11 17:23:17,779 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@34944e04
2021-12-11 17:23:17,877 TRACE Registering @Entity class with hibernate: com.peterphi.std.guice.hibernate.webquery.embeddedpktest.EmbeddedPkEntity
2021-12-11 17:23:17,877 TRACE Evaluate HibernateConfigurationValidators. has at least one=false
2021-12-11 17:23:17,879  WARN HHH10001002: Using Hibernate built-in connection pool (not for production use!)
Hibernate: drop table EmbeddedPkEntity if exists
Hibernate: create table EmbeddedPkEntity (id varchar(255) not null, timestamp bigint not null, some_name varchar(255), primary key (id, timestamp))
2021-12-11 17:23:17,887 TRACE Hibernate Setup Complete.
2021-12-11 17:23:17,887 DEBUG Known entities: [EmbeddedPkEntity]
2021-12-11 17:23:17,887 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.EmbeddedPkEntity
2021-12-11 17:23:17,887 DEBUG Begin create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.SomePrimaryKey from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@4c0cf35f
2021-12-11 17:23:17,887 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.SomePrimaryKey from EmbeddableType org.hibernate.metamodel.internal.EmbeddableTypeImpl@4c0cf35f
2021-12-11 17:23:17,887 DEBUG End create QEntity class com.peterphi.std.guice.hibernate.webquery.embeddedpktest.EmbeddedPkEntity
2021-12-11 17:23:17,887 TRACE Creating new transaction to call public void com.peterphi.std.guice.hibernate.webquery.embeddedpktest.DynamicQueryEmbeddedPkTest.testCriteriaByTimestamp()
2021-12-11 17:23:17,888  WARN HHH90000022: Hibernate's legacy org.hibernate.Criteria API is deprecated; use the JPA javax.persistence.criteria.CriteriaQuery instead
Hibernate: select this_.id as id1_0_0_, this_.timestamp as timestam2_0_0_, this_.some_name as some_nam3_0_0_ from EmbeddedPkEntity this_ where this_.timestamp=?
2021-12-11 17:23:17,889 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@500171e7
2021-12-11 17:23:17,889  INFO Shut down Hibernate SessionFactory...
2021-12-11 17:23:17,889 TRACE Creating new transaction to call void com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider.runShutDownSQL()
2021-12-11 17:23:17,889 TRACE Complete org.hibernate.engine.transaction.internal.TransactionImpl@d14e3b3
Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.337 sec - in com.peterphi.std.guice.hibernate.webquery.embeddedpktest.DynamicQueryEmbeddedPkTest
Running com.peterphi.std.guice.hibernate.webquery.impl.WQTypeHelperTest
Tests run: 6, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.008 sec - in com.peterphi.std.guice.hibernate.webquery.impl.WQTypeHelperTest
Running com.peterphi.std.guice.hibernate.webquery.impl.jpa.jpafunctions.WQPathSegmentTest
Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.001 sec - in com.peterphi.std.guice.hibernate.webquery.impl.jpa.jpafunctions.WQPathSegmentTest
Running com.peterphi.std.guice.hibernate.webquery.impl.jpa.jpafunctions.WQPathTest
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 sec - in com.peterphi.std.guice.hibernate.webquery.impl.jpa.jpafunctions.WQPathTest

Results :

Tests run: 76, Failures: 0, Errors: 0, Skipped: 0

[INFO] 
[INFO] ------------------------------------------------------------------------
[INFO] Building stdlib guice hibernate testing support 9.5.4-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-enforcer-plugin:1.0:enforce (enforce-maven) @ stdlib-guice-hibernate-testing ---
[INFO] 
[INFO] --- buildnumber-maven-plugin:1.3:create (default) @ stdlib-guice-hibernate-testing ---
[INFO] 
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ stdlib-guice-hibernate-testing ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 2 resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:compile (default-compile) @ stdlib-guice-hibernate-testing ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ stdlib-guice-hibernate-testing ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 1 resource
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:testCompile (default-testCompile) @ stdlib-guice-hibernate-testing ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-surefire-plugin:2.19:test (default-test) @ stdlib-guice-hibernate-testing ---

-------------------------------------------------------
 T E S T S
-------------------------------------------------------
Picked up _JAVA_OPTIONS: -Xmx2048m -Xms512m
log4j:WARN No appenders could be found for logger (com.peterphi.std.guice.apploader.impl.GuiceFactory).
log4j:WARN Please initialize the log4j system properly.
log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.
Running com.peterphi.std.guice.hibernatetest.DbunitModuleTest
2021-12-11 17:23:21,037  WARN HHH10001002: Using Hibernate built-in connection pool (not for production use!)
Hibernate: alter table simple_entity_join_table drop constraint FK53rl5pmmea67udq6p4d6l1jh5
2021-12-11 17:23:21,963  WARN GenerationTarget encountered exception accepting command : Error executing DDL via JDBC Statement
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL via JDBC Statement
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:67)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlString(SchemaDropperImpl.java:375)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlStrings(SchemaDropperImpl.java:359)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:331)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:230)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:154)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:126)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:112)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:144)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:72)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:313)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:452)
	at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:710)
	at com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider.get(HibernateSessionFactoryProvider.java:53)
	at com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider.get(HibernateSessionFactoryProvider.java:20)
	at com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider$$EnhancerByGuice$$e9bc367e.get(<generated>)
	at com.google.inject.internal.ProviderInternalFactory.provision(ProviderInternalFactory.java:81)
	at com.google.inject.internal.BoundProviderFactory.provision(BoundProviderFactory.java:72)
	at com.google.inject.internal.ProviderInternalFactory.circularGet(ProviderInternalFactory.java:61)
	at com.google.inject.internal.BoundProviderFactory.get(BoundProviderFactory.java:62)
	at com.google.inject.internal.ProviderToInternalFactoryAdapter$1.call(ProviderToInternalFactoryAdapter.java:46)
	at com.google.inject.internal.InjectorImpl.callInContext(InjectorImpl.java:1103)
	at com.google.inject.internal.ProviderToInternalFactoryAdapter.get(ProviderToInternalFactoryAdapter.java:40)
	at com.google.inject.internal.SingletonScope$1.get(SingletonScope.java:145)
	at com.google.inject.internal.InternalFactoryToProviderAdapter.get(InternalFactoryToProviderAdapter.java:41)
	at com.google.inject.internal.SingleFieldInjector.inject(SingleFieldInjector.java:54)
	at com.google.inject.internal.MembersInjectorImpl.injectMembers(MembersInjectorImpl.java:132)
	at com.google.inject.internal.ConstructorInjector.provision(ConstructorInjector.java:114)
	at com.google.inject.internal.ConstructorInjector.construct(ConstructorInjector.java:85)
	at com.google.inject.internal.ConstructorBindingImpl$Factory.get(ConstructorBindingImpl.java:267)
	at com.google.inject.internal.SingleFieldInjector.inject(SingleFieldInjector.java:54)
	at com.google.inject.internal.MembersInjectorImpl.injectMembers(MembersInjectorImpl.java:132)
	at com.google.inject.internal.ConstructorInjector.provision(ConstructorInjector.java:114)
	at com.google.inject.internal.ConstructorInjector.construct(ConstructorInjector.java:85)
	at com.google.inject.internal.ConstructorBindingImpl$Factory.get(ConstructorBindingImpl.java:267)
	at com.google.inject.internal.InjectorImpl$2$1.call(InjectorImpl.java:1016)
	at com.google.inject.internal.InjectorImpl.callInContext(InjectorImpl.java:1092)
	at com.google.inject.internal.InjectorImpl$2.get(InjectorImpl.java:1012)
	at com.google.inject.internal.InjectorImpl.getInstance(InjectorImpl.java:1051)
	at com.peterphi.std.guice.testing.GuiceUnit.createTest(GuiceUnit.java:50)
	at org.junit.runners.BlockJUnit4ClassRunner$1.runReflectiveCall(BlockJUnit4ClassRunner.java:266)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.BlockJUnit4ClassRunner.methodBlock(BlockJUnit4ClassRunner.java:263)
	at com.peterphi.std.guice.testing.GuiceUnit.methodBlock(GuiceUnit.java:57)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at com.peterphi.std.guice.testing.GuiceUnit.run(GuiceUnit.java:78)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:344)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:269)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:240)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:184)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:286)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:240)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:121)
Caused by: java.sql.SQLSyntaxErrorException: user lacks privilege or object not found: PUBLIC.SIMPLE_ENTITY_JOIN_TABLE
	at org.hsqldb.jdbc.JDBCUtil.sqlException(Unknown Source)
	at org.hsqldb.jdbc.JDBCUtil.sqlException(Unknown Source)
	at org.hsqldb.jdbc.JDBCStatement.fetchResult(Unknown Source)
	at org.hsqldb.jdbc.JDBCStatement.execute(Unknown Source)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:54)
	... 59 more
Caused by: org.hsqldb.HsqlException: user lacks privilege or object not found: PUBLIC.SIMPLE_ENTITY_JOIN_TABLE
	at org.hsqldb.error.Error.error(Unknown Source)
	at org.hsqldb.error.Error.error(Unknown Source)
	at org.hsqldb.SchemaManager.getUserTable(Unknown Source)
	at org.hsqldb.ParserDDL.compileAlterTable(Unknown Source)
	at org.hsqldb.ParserDDL.compileAlter(Unknown Source)
	at org.hsqldb.ParserCommand.compilePart(Unknown Source)
	at org.hsqldb.ParserCommand.compileStatements(Unknown Source)
	at org.hsqldb.Session.executeDirectStatement(Unknown Source)
	at org.hsqldb.Session.execute(Unknown Source)
	... 62 more
Hibernate: alter table simple_entity_join_table drop constraint FKjuc0c5ldwpol77x76sbildy5h
2021-12-11 17:23:21,967  WARN GenerationTarget encountered exception accepting command : Error executing DDL via JDBC Statement
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL via JDBC Statement
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:67)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlString(SchemaDropperImpl.java:375)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlStrings(SchemaDropperImpl.java:359)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:331)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:230)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:154)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:126)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:112)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:144)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:72)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:313)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:452)
	at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:710)
	at com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider.get(HibernateSessionFactoryProvider.java:53)
	at com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider.get(HibernateSessionFactoryProvider.java:20)
	at com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider$$EnhancerByGuice$$e9bc367e.get(<generated>)
	at com.google.inject.internal.ProviderInternalFactory.provision(ProviderInternalFactory.java:81)
	at com.google.inject.internal.BoundProviderFactory.provision(BoundProviderFactory.java:72)
	at com.google.inject.internal.ProviderInternalFactory.circularGet(ProviderInternalFactory.java:61)
	at com.google.inject.internal.BoundProviderFactory.get(BoundProviderFactory.java:62)
	at com.google.inject.internal.ProviderToInternalFactoryAdapter$1.call(ProviderToInternalFactoryAdapter.java:46)
	at com.google.inject.internal.InjectorImpl.callInContext(InjectorImpl.java:1103)
	at com.google.inject.internal.ProviderToInternalFactoryAdapter.get(ProviderToInternalFactoryAdapter.java:40)
	at com.google.inject.internal.SingletonScope$1.get(SingletonScope.java:145)
	at com.google.inject.internal.InternalFactoryToProviderAdapter.get(InternalFactoryToProviderAdapter.java:41)
	at com.google.inject.internal.SingleFieldInjector.inject(SingleFieldInjector.java:54)
	at com.google.inject.internal.MembersInjectorImpl.injectMembers(MembersInjectorImpl.java:132)
	at com.google.inject.internal.ConstructorInjector.provision(ConstructorInjector.java:114)
	at com.google.inject.internal.ConstructorInjector.construct(ConstructorInjector.java:85)
	at com.google.inject.internal.ConstructorBindingImpl$Factory.get(ConstructorBindingImpl.java:267)
	at com.google.inject.internal.SingleFieldInjector.inject(SingleFieldInjector.java:54)
	at com.google.inject.internal.MembersInjectorImpl.injectMembers(MembersInjectorImpl.java:132)
	at com.google.inject.internal.ConstructorInjector.provision(ConstructorInjector.java:114)
	at com.google.inject.internal.ConstructorInjector.construct(ConstructorInjector.java:85)
	at com.google.inject.internal.ConstructorBindingImpl$Factory.get(ConstructorBindingImpl.java:267)
	at com.google.inject.internal.InjectorImpl$2$1.call(InjectorImpl.java:1016)
	at com.google.inject.internal.InjectorImpl.callInContext(InjectorImpl.java:1092)
	at com.google.inject.internal.InjectorImpl$2.get(InjectorImpl.java:1012)
	at com.google.inject.internal.InjectorImpl.getInstance(InjectorImpl.java:1051)
	at com.peterphi.std.guice.testing.GuiceUnit.createTest(GuiceUnit.java:50)
	at org.junit.runners.BlockJUnit4ClassRunner$1.runReflectiveCall(BlockJUnit4ClassRunner.java:266)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.BlockJUnit4ClassRunner.methodBlock(BlockJUnit4ClassRunner.java:263)
	at com.peterphi.std.guice.testing.GuiceUnit.methodBlock(GuiceUnit.java:57)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at com.peterphi.std.guice.testing.GuiceUnit.run(GuiceUnit.java:78)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:344)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:269)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:240)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:184)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:286)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:240)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:121)
Caused by: java.sql.SQLSyntaxErrorException: user lacks privilege or object not found: PUBLIC.SIMPLE_ENTITY_JOIN_TABLE
	at org.hsqldb.jdbc.JDBCUtil.sqlException(Unknown Source)
	at org.hsqldb.jdbc.JDBCUtil.sqlException(Unknown Source)
	at org.hsqldb.jdbc.JDBCStatement.fetchResult(Unknown Source)
	at org.hsqldb.jdbc.JDBCStatement.execute(Unknown Source)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:54)
	... 59 more
Caused by: org.hsqldb.HsqlException: user lacks privilege or object not found: PUBLIC.SIMPLE_ENTITY_JOIN_TABLE
	at org.hsqldb.error.Error.error(Unknown Source)
	at org.hsqldb.error.Error.error(Unknown Source)
	at org.hsqldb.SchemaManager.getUserTable(Unknown Source)
	at org.hsqldb.ParserDDL.compileAlterTable(Unknown Source)
	at org.hsqldb.ParserDDL.compileAlter(Unknown Source)
	at org.hsqldb.ParserCommand.compilePart(Unknown Source)
	at org.hsqldb.ParserCommand.compileStatements(Unknown Source)
	at org.hsqldb.Session.executeDirectStatement(Unknown Source)
	at org.hsqldb.Session.execute(Unknown Source)
	... 62 more
Hibernate: drop table GroupEntity if exists
Hibernate: drop table simple_entity_join_table if exists
Hibernate: drop table SimpleEntity if exists
Hibernate: create table GroupEntity (id bigint not null, primary key (id))
Hibernate: create table simple_entity_join_table (simple_id bigint not null, group_id bigint not null, primary key (simple_id, group_id))
Hibernate: create table SimpleEntity (id bigint not null, name varchar(255), primary key (id))
Hibernate: alter table simple_entity_join_table add constraint FK53rl5pmmea67udq6p4d6l1jh5 foreign key (group_id) references GroupEntity
Hibernate: alter table simple_entity_join_table add constraint FKjuc0c5ldwpol77x76sbildy5h foreign key (simple_id) references SimpleEntity
Dec 11, 2021 5:23:22 PM org.dbunit.dataset.AbstractTableMetaData getDataTypeFactory
WARNING: Potential problem found: The configured data type factory 'class org.dbunit.dataset.datatype.DefaultDataTypeFactory' might cause problems with the current database 'HSQL Database Engine' (e.g. some datatypes may not be supported properly). In rare cases you might see this message because the list of supported database products is incomplete (list=[derby]). If so please request a java-class update via the forums.If you are using your own IDataTypeFactory extending DefaultDataTypeFactory, ensure that you override getValidDbProducts() to specify the supported database products.
Dec 11, 2021 5:23:22 PM org.dbunit.dataset.AbstractTableMetaData getDataTypeFactory
WARNING: Potential problem found: The configured data type factory 'class org.dbunit.dataset.datatype.DefaultDataTypeFactory' might cause problems with the current database 'HSQL Database Engine' (e.g. some datatypes may not be supported properly). In rare cases you might see this message because the list of supported database products is incomplete (list=[derby]). If so please request a java-class update via the forums.If you are using your own IDataTypeFactory extending DefaultDataTypeFactory, ensure that you override getValidDbProducts() to specify the supported database products.
Dec 11, 2021 5:23:22 PM org.dbunit.dataset.AbstractTableMetaData getDataTypeFactory
WARNING: Potential problem found: The configured data type factory 'class org.dbunit.dataset.datatype.DefaultDataTypeFactory' might cause problems with the current database 'HSQL Database Engine' (e.g. some datatypes may not be supported properly). In rare cases you might see this message because the list of supported database products is incomplete (list=[derby]). If so please request a java-class update via the forums.If you are using your own IDataTypeFactory extending DefaultDataTypeFactory, ensure that you override getValidDbProducts() to specify the supported database products.
Hibernate: select groupentit_.id from GroupEntity groupentit_ where groupentit_.id=?
Hibernate: select groupentit_.id from GroupEntity groupentit_ where groupentit_.id=?
Hibernate: insert into SimpleEntity (name, id) values (?, ?)
Hibernate: insert into GroupEntity (id) values (?)
Hibernate: insert into GroupEntity (id) values (?)
Hibernate: insert into SimpleEntity (name, id) values (?, ?)
Hibernate: insert into SimpleEntity (name, id) values (?, ?)
Hibernate: insert into SimpleEntity (name, id) values (?, ?)
Hibernate: insert into simple_entity_join_table (simple_id, group_id) values (?, ?)
Hibernate: insert into simple_entity_join_table (simple_id, group_id) values (?, ?)
Dec 11, 2021 5:23:22 PM org.dbunit.dataset.AbstractTableMetaData getDataTypeFactory
WARNING: Potential problem found: The configured data type factory 'class org.dbunit.dataset.datatype.DefaultDataTypeFactory' might cause problems with the current database 'HSQL Database Engine' (e.g. some datatypes may not be supported properly). In rare cases you might see this message because the list of supported database products is incomplete (list=[derby]). If so please request a java-class update via the forums.If you are using your own IDataTypeFactory extending DefaultDataTypeFactory, ensure that you override getValidDbProducts() to specify the supported database products.
Dec 11, 2021 5:23:22 PM org.dbunit.dataset.AbstractTableMetaData getDataTypeFactory
WARNING: Potential problem found: The configured data type factory 'class org.dbunit.dataset.datatype.DefaultDataTypeFactory' might cause problems with the current database 'HSQL Database Engine' (e.g. some datatypes may not be supported properly). In rare cases you might see this message because the list of supported database products is incomplete (list=[derby]). If so please request a java-class update via the forums.If you are using your own IDataTypeFactory extending DefaultDataTypeFactory, ensure that you override getValidDbProducts() to specify the supported database products.
Dec 11, 2021 5:23:22 PM org.dbunit.dataset.AbstractTableMetaData getDataTypeFactory
WARNING: Potential problem found: The configured data type factory 'class org.dbunit.dataset.datatype.DefaultDataTypeFactory' might cause problems with the current database 'HSQL Database Engine' (e.g. some datatypes may not be supported properly). In rare cases you might see this message because the list of supported database products is incomplete (list=[derby]). If so please request a java-class update via the forums.If you are using your own IDataTypeFactory extending DefaultDataTypeFactory, ensure that you override getValidDbProducts() to specify the supported database products.
2021-12-11 17:23:22,450 ERROR Connection leak detected: there are 2 unclosed connections upon shutting down pool jdbc:hsqldb:mem:testdb
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 2.945 sec - in com.peterphi.std.guice.hibernatetest.DbunitModuleTest

Results :

Tests run: 1, Failures: 0, Errors: 0, Skipped: 0

[INFO] 
[INFO] ------------------------------------------------------------------------
[INFO] Building stdlib guice liquibase support 9.5.4-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-enforcer-plugin:1.0:enforce (enforce-maven) @ stdlib-guice-liquibase ---
[INFO] 
[INFO] --- buildnumber-maven-plugin:1.3:create (default) @ stdlib-guice-liquibase ---
[INFO] 
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ stdlib-guice-liquibase ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 1 resource
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:compile (default-compile) @ stdlib-guice-liquibase ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ stdlib-guice-liquibase ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 4 resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:testCompile (default-testCompile) @ stdlib-guice-liquibase ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-surefire-plugin:2.19:test (default-test) @ stdlib-guice-liquibase ---

-------------------------------------------------------
 T E S T S
-------------------------------------------------------
Picked up _JAVA_OPTIONS: -Xmx2048m -Xms512m
log4j:WARN No appenders could be found for logger (com.peterphi.std.guice.apploader.impl.GuiceFactory).
log4j:WARN Please initialize the log4j system properly.
log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.
Running com.peterphi.std.guice.liquibase.hibernate.LiquibaseCoreTest
2021-12-11 17:23:27,036  WARN HHH10001002: Using Hibernate built-in connection pool (not for production use!)
Hibernate: select someentity0_.id as id1_0_, someentity0_.name as name2_0_ from something someentity0_ where 1=1
Hibernate: select someentity0_.id as id1_0_0_, someentity0_.name as name2_0_0_ from something someentity0_ where someentity0_.id=?
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 4.428 sec - in com.peterphi.std.guice.liquibase.hibernate.LiquibaseCoreTest
Running com.peterphi.std.guice.web.rest.service.servicedescription.freemarker.RestServiceInfoTest
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.069 sec - in com.peterphi.std.guice.web.rest.service.servicedescription.freemarker.RestServiceInfoTest

Results :

Tests run: 2, Failures: 0, Errors: 0, Skipped: 0

[INFO] 
[INFO] ------------------------------------------------------------------------
[INFO] Building carbon client 9.5.4-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-enforcer-plugin:1.0:enforce (enforce-maven) @ carbon-client ---
[INFO] 
[INFO] --- buildnumber-maven-plugin:1.3:create (default) @ carbon-client ---
[INFO] 
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ carbon-client ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 1 resource
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:compile (default-compile) @ carbon-client ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ carbon-client ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 3 resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:testCompile (default-testCompile) @ carbon-client ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-surefire-plugin:2.19:test (default-test) @ carbon-client ---

-------------------------------------------------------
 T E S T S
-------------------------------------------------------
Picked up _JAVA_OPTIONS: -Xmx2048m -Xms512m
Running com.peterphi.carbon.util.mediainfo.MediaInfoTest
Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.767 sec - in com.peterphi.carbon.util.mediainfo.MediaInfoTest

Results :

Tests run: 4, Failures: 0, Errors: 0, Skipped: 0

[INFO] 
[INFO] ------------------------------------------------------------------------
[INFO] Building service-manager 9.5.4-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-enforcer-plugin:1.0:enforce (enforce-maven) @ service-manager-parent ---
[INFO] 
[INFO] --- buildnumber-maven-plugin:1.3:create (default) @ service-manager-parent ---
[INFO] 
[INFO] ------------------------------------------------------------------------
[INFO] Building Configuration Service 9.5.4-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-enforcer-plugin:1.0:enforce (enforce-maven) @ configuration ---
[INFO] 
[INFO] --- buildnumber-maven-plugin:1.3:create (default) @ configuration ---
[INFO] 
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ configuration ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 5 resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:compile (default-compile) @ configuration ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ configuration ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 1 resource
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:testCompile (default-testCompile) @ configuration ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-surefire-plugin:2.19:test (default-test) @ configuration ---

-------------------------------------------------------
 T E S T S
-------------------------------------------------------
Picked up _JAVA_OPTIONS: -Xmx2048m -Xms512m
Running com.peterphi.configuration.service.git.RepoHelperTest
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.163 sec - in com.peterphi.configuration.service.git.RepoHelperTest

Results :

Tests run: 1, Failures: 0, Errors: 0, Skipped: 0

[INFO] 
[INFO] ------------------------------------------------------------------------
[INFO] Building Service Manager API 9.5.4-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-enforcer-plugin:1.0:enforce (enforce-maven) @ service-manager-api ---
[INFO] 
[INFO] --- buildnumber-maven-plugin:1.3:create (default) @ service-manager-api ---
[INFO] 
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ service-manager-api ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /home/travis/build/passed/petergeneric/stdlib/service-manager/service-manager-api/src/main/resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:compile (default-compile) @ service-manager-api ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ service-manager-api ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /home/travis/build/passed/petergeneric/stdlib/service-manager/service-manager-api/src/test/resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:testCompile (default-testCompile) @ service-manager-api ---
[INFO] No sources to compile
[INFO] 
[INFO] --- maven-surefire-plugin:2.19:test (default-test) @ service-manager-api ---
[INFO] No tests to run.
[INFO] 
[INFO] ------------------------------------------------------------------------
[INFO] Building stdlib-rules 9.5.4-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-enforcer-plugin:1.0:enforce (enforce-maven) @ stdlib-rules ---
[INFO] 
[INFO] --- buildnumber-maven-plugin:1.3:create (default) @ stdlib-rules ---
[INFO] 
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ stdlib-rules ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /home/travis/build/passed/petergeneric/stdlib/rules/src/main/resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:compile (default-compile) @ stdlib-rules ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ stdlib-rules ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 3 resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:testCompile (default-testCompile) @ stdlib-rules ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-surefire-plugin:2.19:test (default-test) @ stdlib-rules ---

-------------------------------------------------------
 T E S T S
-------------------------------------------------------
Picked up _JAVA_OPTIONS: -Xmx2048m -Xms512m
2021-12-11 17:23:32,943 DEBUG Loading property file: file:/home/travis/build/passed/petergeneric/stdlib/rules/target/test-classes/test-config.properties
Running com.peterphi.rules.RuleTest
2021-12-11 17:23:33,076 DEBUG Loading property file: file:/home/travis/build/passed/petergeneric/stdlib/rules/target/test-classes/test-config.properties
2021-12-11 17:23:33,078  INFO Trying to create Guice Injector...
2021-12-11 17:23:33,080 DEBUG Discovered guice role: com.peterphi.std.guice.common.eagersingleton.BindEagerSingletonRole@7e0ea639
2021-12-11 17:23:33,083 DEBUG Adding requested guice role: com.peterphi.std.guice.apploader.impl.CoreGuiceRole@3d24753a
2021-12-11 17:23:33,083 DEBUG Adding requested guice role: com.peterphi.std.guice.testing.ModuleAddingGuiceRole@59a6e353
2021-12-11 17:23:33,083 DEBUG Adding requested guice role: com.peterphi.std.guice.testing.ModuleAddingGuiceRole@7a0ac6e3
2021-12-11 17:23:33,083 DEBUG Adding requested guice role: com.peterphi.std.guice.common.eagersingleton.BindEagerSingletonRole@7e0ea639
2021-12-11 17:23:33,141 DEBUG Using static GuiceSetup: com.peterphi.std.guice.apploader.BasicSetup@58651fd0
2021-12-11 17:23:33,606 DEBUG Leaving logging subsystem to initialise itself
2021-12-11 17:23:33,856 DEBUG Injector for (app) created in 714 ms
2021-12-11 17:23:34,524 DEBUG Assessing input for ruleset : local-object-value-match
2021-12-11 17:23:34,604 DEBUG Assessing input for ruleset : jaxb-value-match
2021-12-11 17:23:34,606 DEBUG Assessing input for ruleset : rest-service-call
2021-12-11 17:23:34,715  INFO Trying to create Guice Injector...
2021-12-11 17:23:34,715 DEBUG Discovered guice role: com.peterphi.std.guice.common.eagersingleton.BindEagerSingletonRole@f74e835
2021-12-11 17:23:34,717 DEBUG Adding requested guice role: com.peterphi.std.guice.apploader.impl.CoreGuiceRole@3d24753a
2021-12-11 17:23:34,717 DEBUG Adding requested guice role: com.peterphi.std.guice.testing.ModuleAddingGuiceRole@59a6e353
2021-12-11 17:23:34,717 DEBUG Adding requested guice role: com.peterphi.std.guice.testing.ModuleAddingGuiceRole@7a0ac6e3
2021-12-11 17:23:34,717 DEBUG Adding requested guice role: com.peterphi.std.guice.common.eagersingleton.BindEagerSingletonRole@f74e835
2021-12-11 17:23:34,718 DEBUG Using static GuiceSetup: com.peterphi.std.guice.apploader.BasicSetup@58651fd0
2021-12-11 17:23:34,864 DEBUG Leaving logging subsystem to initialise itself
2021-12-11 17:23:34,931 DEBUG Injector for (app) created in 213 ms
2021-12-11 17:23:34,964  INFO Trying to create Guice Injector...
2021-12-11 17:23:34,964 DEBUG Discovered guice role: com.peterphi.std.guice.common.eagersingleton.BindEagerSingletonRole@40ee0a22
2021-12-11 17:23:34,965 DEBUG Adding requested guice role: com.peterphi.std.guice.apploader.impl.CoreGuiceRole@3d24753a
2021-12-11 17:23:34,965 DEBUG Adding requested guice role: com.peterphi.std.guice.testing.ModuleAddingGuiceRole@59a6e353
2021-12-11 17:23:34,965 DEBUG Adding requested guice role: com.peterphi.std.guice.testing.ModuleAddingGuiceRole@7a0ac6e3
2021-12-11 17:23:34,966 DEBUG Adding requested guice role: com.peterphi.std.guice.common.eagersingleton.BindEagerSingletonRole@40ee0a22
2021-12-11 17:23:34,966 DEBUG Using static GuiceSetup: com.peterphi.std.guice.apploader.BasicSetup@58651fd0
2021-12-11 17:23:35,106 DEBUG Leaving logging subsystem to initialise itself
2021-12-11 17:23:35,134 DEBUG Injector for (app) created in 168 ms
2021-12-11 17:23:35,174 DEBUG Assessing input for ruleset : local-object-value-match
2021-12-11 17:23:35,175 DEBUG input.equals("n") matches
2021-12-11 17:23:35,175 DEBUG Assessing input for ruleset : jaxb-value-match
2021-12-11 17:23:35,176 DEBUG input.equals("text") matches
2021-12-11 17:23:35,176 DEBUG Assessing input for ruleset : rest-service-call
2021-12-11 17:23:35,176 DEBUG input == "proceed" matches
Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 2.105 sec - in com.peterphi.rules.RuleTest

Results :

Tests run: 3, Failures: 0, Errors: 0, Skipped: 0

[INFO] 
[INFO] ------------------------------------------------------------------------
[INFO] Building stdlib-azure 9.5.4-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-enforcer-plugin:1.0:enforce (enforce-maven) @ stdlib-azure ---
[INFO] 
[INFO] --- buildnumber-maven-plugin:1.3:create (default) @ stdlib-azure ---
[INFO] 
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ stdlib-azure ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /home/travis/build/passed/petergeneric/stdlib/azure/src/main/resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:compile (default-compile) @ stdlib-azure ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ stdlib-azure ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 1 resource
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:testCompile (default-testCompile) @ stdlib-azure ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-surefire-plugin:2.19:test (default-test) @ stdlib-azure ---

-------------------------------------------------------
 T E S T S
-------------------------------------------------------
Picked up _JAVA_OPTIONS: -Xmx2048m -Xms512m
Running com.peterphi.std.azure.AzureTest
Tests run: 1, Failures: 0, Errors: 0, Skipped: 1, Time elapsed: 0.002 sec - in com.peterphi.std.azure.AzureTest

Results :

Tests run: 1, Failures: 0, Errors: 0, Skipped: 1

[INFO] 
[INFO] ------------------------------------------------------------------------
[INFO] Building Service Manager Main 9.5.4-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-enforcer-plugin:1.0:enforce (enforce-maven) @ service-manager ---
[INFO] 
[INFO] --- buildnumber-maven-plugin:1.3:create (default) @ service-manager ---
[INFO] 
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ service-manager ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 6 resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:compile (default-compile) @ service-manager ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ service-manager ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 1 resource
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:testCompile (default-testCompile) @ service-manager ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-surefire-plugin:2.19:test (default-test) @ service-manager ---

-------------------------------------------------------
 T E S T S
-------------------------------------------------------
Picked up _JAVA_OPTIONS: -Xmx2048m -Xms512m
Running com.peterphi.servicemanager.service.db.ServiceManagerDatabaseTest
2021-12-11 17:23:37,428  INFO Trying to create Guice Injector...
2021-12-11 17:23:41,537 DEBUG Injector for (app) created in 3960 ms
2021-12-11 17:23:41,537 DEBUG Class scanner stats: insts=1 cached createTime=3184, scanTime=6
2021-12-11 17:23:41,643 DEBUG Logging Provider: org.jboss.logging.Log4jLoggerProvider
2021-12-11 17:23:41,651 DEBUG Adding Integrator [org.hibernate.cfg.beanvalidation.BeanValidationIntegrator].
2021-12-11 17:23:41,653 DEBUG Adding Integrator [org.hibernate.secure.spi.JaccIntegrator].
2021-12-11 17:23:41,656 DEBUG Adding Integrator [org.hibernate.cache.internal.CollectionCacheInvalidator].
2021-12-11 17:23:41,730  INFO HHH000412: Hibernate Core {5.2.11.Final}
2021-12-11 17:23:41,732  INFO HHH000206: hibernate.properties not found
2021-12-11 17:23:41,757 DEBUG Execute called: UPDATE
2021-12-11 17:23:41,773 DEBUG Create JDBC Connection directly: jdbc:hsqldb:mem:testdb
2021-12-11 17:23:42,312 DEBUG Opening jar:file:/home/travis/build/passed/petergeneric/stdlib/service-manager/service-manager/target/surefire/surefirebooter4402798197414575766.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,313 DEBUG Opening jar:file:/home/travis/.m2/passed/org/apache/maven/surefire/surefire-booter/2.19/surefire-booter-2.19.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,313 DEBUG Opening jar:file:/home/travis/.m2/passed/org/apache/maven/surefire/surefire-api/2.19/surefire-api-2.19.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,314 DEBUG Opening jar:file:/home/travis/.m2/passed/com/microsoft/azure/azure-storage/4.0.0/azure-storage-4.0.0.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,370 DEBUG Opening jar:file:/home/travis/.m2/passed/com/fasterxml/jackson/core/jackson-core/2.6.0/jackson-core-2.6.0.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,371 DEBUG Opening jar:file:/home/travis/.m2/passed/org/apache/commons/commons-lang3/3.4/commons-lang3-3.4.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,371 DEBUG Opening jar:file:/home/travis/.m2/passed/com/microsoft/azure/azure-mgmt-dns/0.9.7/azure-mgmt-dns-0.9.7.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,379 DEBUG Opening jar:file:/home/travis/.m2/passed/com/microsoft/azure/azure-core/0.9.7/azure-core-0.9.7.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,392 DEBUG Opening jar:file:/home/travis/.m2/passed/commons-codec/commons-codec/1.10/commons-codec-1.10.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,393 DEBUG Opening jar:file:/home/travis/.m2/passed/javax/mail/mail/1.4.5/mail-1.4.5.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,393 DEBUG Opening jar:file:/home/travis/.m2/passed/javax/activation/activation/1.1/activation-1.1.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,393 DEBUG Opening jar:file:/home/travis/.m2/passed/com/sun/jersey/jersey-client/1.19/jersey-client-1.19.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,394 DEBUG Opening jar:file:/home/travis/.m2/passed/com/sun/jersey/jersey-core/1.19/jersey-core-1.19.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,394 DEBUG Opening jar:file:/home/travis/.m2/passed/com/sun/jersey/jersey-json/1.19/jersey-json-1.19.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,394 DEBUG Opening jar:file:/home/travis/.m2/passed/org/codehaus/jettison/jettison/1.1/jettison-1.1.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,394 DEBUG Opening jar:file:/home/travis/.m2/passed/com/sun/xml/bind/jaxb-impl/2.2.3-1/jaxb-impl-2.2.3-1.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,395 DEBUG Opening jar:file:/home/travis/.m2/passed/javax/xml/bind/jaxb-api/2.2.2/jaxb-api-2.2.2.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,395 DEBUG Opening jar:file:/home/travis/.m2/passed/javax/xml/stream/stax-api/1.0-2/stax-api-1.0-2.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,395 DEBUG Opening jar:file:/home/travis/.m2/passed/org/codehaus/jackson/jackson-core-asl/1.9.2/jackson-core-asl-1.9.2.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,395 DEBUG Opening jar:file:/home/travis/.m2/passed/org/codehaus/jackson/jackson-mapper-asl/1.9.2/jackson-mapper-asl-1.9.2.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,396 DEBUG Opening jar:file:/home/travis/.m2/passed/org/codehaus/jackson/jackson-xc/1.9.2/jackson-xc-1.9.2.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,396 DEBUG Opening jar:file:/home/travis/.m2/passed/org/apache/httpcomponents/httpclient/4.3.6/httpclient-4.3.6.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,396 DEBUG Opening jar:file:/home/travis/.m2/passed/org/apache/httpcomponents/httpcore/4.3.3/httpcore-4.3.3.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,396 DEBUG Opening jar:file:/home/travis/.m2/passed/commons-io/commons-io/2.4/commons-io-2.4.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,397 DEBUG Opening jar:file:/home/travis/.m2/passed/org/shredzone/acme4j/acme4j-client/0.8/acme4j-client-0.8.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,397 DEBUG Opening jar:file:/home/travis/.m2/passed/org/bitbucket/b_c/jose4j/0.5.2/jose4j-0.5.2.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,397 DEBUG Opening jar:file:/home/travis/.m2/passed/org/shredzone/acme4j/acme4j-utils/0.8/acme4j-utils-0.8.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,397 DEBUG Opening jar:file:/home/travis/.m2/passed/org/bouncycastle/bcpg-jdk15on/1.55/bcpg-jdk15on-1.55.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,423 DEBUG Opening jar:file:/home/travis/.m2/passed/org/bouncycastle/bcmail-jdk15on/1.55/bcmail-jdk15on-1.55.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,436 DEBUG Opening jar:file:/home/travis/.m2/passed/org/bouncycastle/bcpkix-jdk15on/1.55/bcpkix-jdk15on-1.55.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,460 DEBUG Opening jar:file:/home/travis/.m2/passed/org/bouncycastle/bcprov-jdk15on/1.55/bcprov-jdk15on-1.55.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,518 DEBUG Opening jar:file:/home/travis/.m2/passed/log4j/log4j/1.2.17/log4j-1.2.17.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,518 DEBUG Opening jar:file:/home/travis/.m2/passed/ognl/ognl/3.1.10/ognl-3.1.10.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,518 DEBUG Opening jar:file:/home/travis/.m2/passed/org/jboss/resteasy/resteasy-jaxrs/3.1.4.Final/resteasy-jaxrs-3.1.4.Final.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,518 DEBUG Opening jar:file:/home/travis/.m2/passed/org/jboss/spec/javax/ws/rs/jboss-jaxrs-api_2.0_spec/1.0.1.Beta1/jboss-jaxrs-api_2.0_spec-1.0.1.Beta1.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,519 DEBUG Opening jar:file:/home/travis/.m2/passed/org/jboss/resteasy/resteasy-jaxrs-services/3.1.4.Final/resteasy-jaxrs-services-3.1.4.Final.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,519 DEBUG Opening jar:file:/home/travis/.m2/passed/org/jboss/spec/javax/annotation/jboss-annotations-api_1.2_spec/1.0.0.Final/jboss-annotations-api_1.2_spec-1.0.0.Final.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,519 DEBUG Opening jar:file:/home/travis/.m2/passed/net/jcip/jcip-annotations/1.0/jcip-annotations-1.0.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,528 DEBUG Opening jar:file:/home/travis/.m2/passed/org/jboss/resteasy/resteasy-client/3.1.4.Final/resteasy-client-3.1.4.Final.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,529 DEBUG Opening jar:file:/home/travis/.m2/passed/org/jboss/resteasy/resteasy-jaxb-provider/3.1.4.Final/resteasy-jaxb-provider-3.1.4.Final.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,529 DEBUG Opening jar:file:/home/travis/.m2/passed/org/jboss/resteasy/resteasy-jettison-provider/3.1.4.Final/resteasy-jettison-provider-3.1.4.Final.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,529 DEBUG Opening jar:file:/home/travis/.m2/passed/commons-discovery/commons-discovery/0.5/commons-discovery-0.5.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,529 DEBUG Opening jar:file:/home/travis/.m2/passed/xml-apis/xml-apis/1.0.b2/xml-apis-1.0.b2.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,529 DEBUG Opening jar:file:/home/travis/.m2/passed/io/dropwizard/metrics/metrics-core/3.2.3/metrics-core-3.2.3.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,529 DEBUG Opening jar:file:/home/travis/.m2/passed/io/dropwizard/metrics/metrics-healthchecks/3.2.3/metrics-healthchecks-3.2.3.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,529 DEBUG Opening jar:file:/home/travis/.m2/passed/io/dropwizard/metrics/metrics-jvm/3.2.3/metrics-jvm-3.2.3.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,530 DEBUG Opening jar:file:/home/travis/.m2/passed/io/dropwizard/metrics/metrics-log4j/3.2.3/metrics-log4j-3.2.3.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,530 DEBUG Opening jar:file:/home/travis/.m2/passed/commons-lang/commons-lang/2.6/commons-lang-2.6.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,530 DEBUG Opening jar:file:/home/travis/.m2/passed/commons-logging/commons-logging/1.1.1/commons-logging-1.1.1.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,530 DEBUG Opening jar:file:/home/travis/.m2/passed/joda-time/joda-time/2.7/joda-time-2.7.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,530 DEBUG Opening jar:file:/home/travis/.m2/passed/org/eclipse/persistence/org.eclipse.persistence.moxy/2.7.0/org.eclipse.persistence.moxy-2.7.0.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,539 DEBUG Opening jar:file:/home/travis/.m2/passed/org/eclipse/persistence/org.eclipse.persistence.core/2.7.0/org.eclipse.persistence.core-2.7.0.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,572 DEBUG Opening jar:file:/home/travis/.m2/passed/org/eclipse/persistence/org.eclipse.persistence.asm/2.7.0/org.eclipse.persistence.asm-2.7.0.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,579 DEBUG Opening jar:file:/home/travis/.m2/passed/javax/validation/validation-api/1.1.0.Final/validation-api-1.1.0.Final.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,579 DEBUG Opening jar:file:/home/travis/.m2/passed/org/glassfish/javax.json/1.0.4/javax.json-1.0.4.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,580 DEBUG Opening jar:file:/home/travis/.m2/passed/org/hibernate/hibernate-core/5.2.11.Final/hibernate-core-5.2.11.Final.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,580 DEBUG Opening jar:file:/home/travis/.m2/passed/org/jboss/logging/jboss-logging/3.3.0.Final/jboss-logging-3.3.0.Final.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,580 DEBUG Opening jar:file:/home/travis/.m2/passed/org/hibernate/javax/persistence/hibernate-jpa-2.1-api/1.0.0.Final/hibernate-jpa-2.1-api-1.0.0.Final.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,580 DEBUG Opening jar:file:/home/travis/.m2/passed/org/javassist/javassist/3.20.0-GA/javassist-3.20.0-GA.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,581 DEBUG Opening jar:file:/home/travis/.m2/passed/antlr/antlr/2.7.7/antlr-2.7.7.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,581 DEBUG Opening jar:file:/home/travis/.m2/passed/org/jboss/spec/javax/transaction/jboss-transaction-api_1.2_spec/1.0.1.Final/jboss-transaction-api_1.2_spec-1.0.1.Final.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,581 DEBUG Opening jar:file:/home/travis/.m2/passed/org/jboss/jandex/2.0.3.Final/jandex-2.0.3.Final.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,581 DEBUG Opening jar:file:/home/travis/.m2/passed/com/fasterxml/classmate/1.3.0/classmate-1.3.0.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,582 DEBUG Opening jar:file:/home/travis/.m2/passed/dom4j/dom4j/1.6.1/dom4j-1.6.1.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,582 DEBUG Opening jar:file:/home/travis/.m2/passed/org/hibernate/common/hibernate-commons-annotations/5.0.1.Final/hibernate-commons-annotations-5.0.1.Final.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,582 DEBUG Opening jar:file:/home/travis/.m2/passed/org/sonatype/sisu/sisu-guice/3.2.6/sisu-guice-3.2.6.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,582 DEBUG Opening jar:file:/home/travis/.m2/passed/aopalliance/aopalliance/1.0/aopalliance-1.0.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,582 DEBUG Opening jar:file:/home/travis/.m2/passed/com/google/guava/guava/16.0.1/guava-16.0.1.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,582 DEBUG Opening jar:file:/home/travis/.m2/passed/org/sonatype/sisu/inject/guice-multibindings/3.2.6/guice-multibindings-3.2.6.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,583 DEBUG Opening jar:file:/home/travis/.m2/passed/org/apache/xbean/xbean-finder/4.4/xbean-finder-4.4.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,583 DEBUG Opening jar:file:/home/travis/.m2/passed/org/apache/xbean/xbean-bundleutils/4.4/xbean-bundleutils-4.4.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,583 DEBUG Opening jar:file:/home/travis/.m2/passed/org/apache/xbean/xbean-asm-util/4.4/xbean-asm-util-4.4.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,583 DEBUG Opening jar:file:/home/travis/.m2/passed/org/ow2/asm/asm-all/5.0.4/asm-all-5.0.4.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,583 DEBUG Opening jar:file:/home/travis/.m2/passed/org/thymeleaf/thymeleaf/2.1.4.RELEASE/thymeleaf-2.1.4.RELEASE.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,583 DEBUG Opening jar:file:/home/travis/.m2/passed/org/unbescape/unbescape/1.1.0.RELEASE/unbescape-1.1.0.RELEASE.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,584 DEBUG Opening jar:file:/home/travis/.m2/passed/org/liquibase/liquibase-core/3.5.3/liquibase-core-3.5.3.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,584 DEBUG Opening jar:file:/home/travis/.m2/passed/org/yaml/snakeyaml/1.17/snakeyaml-1.17.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,584 DEBUG Opening jar:file:/home/travis/.m2/passed/io/dropwizard/metrics/metrics-json/3.2.3/metrics-json-3.2.3.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,584 DEBUG Opening jar:file:/home/travis/.m2/passed/org/mockito/mockito-core/1.10.19/mockito-core-1.10.19.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,584 DEBUG Opening jar:file:/home/travis/.m2/passed/org/objenesis/objenesis/2.1/objenesis-2.1.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,585 DEBUG Opening jar:file:/home/travis/.m2/passed/com/microsoft/azure/azure/1.0.0-beta2/azure-1.0.0-beta2.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,589 DEBUG Opening jar:file:/home/travis/.m2/passed/com/microsoft/azure/azure-client-runtime/1.0.0-beta2/azure-client-runtime-1.0.0-beta2.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,593 DEBUG Opening jar:file:/home/travis/.m2/passed/com/microsoft/rest/client-runtime/1.0.0-beta2/client-runtime-1.0.0-beta2.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,596 DEBUG Opening jar:file:/home/travis/.m2/passed/com/squareup/retrofit2/retrofit/2.0.2/retrofit-2.0.2.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,596 DEBUG Opening jar:file:/home/travis/.m2/passed/com/squareup/okhttp3/okhttp/3.3.1/okhttp-3.3.1.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,597 DEBUG Opening jar:file:/home/travis/.m2/passed/com/squareup/okio/okio/1.8.0/okio-1.8.0.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,597 DEBUG Opening jar:file:/home/travis/.m2/passed/com/squareup/okhttp3/logging-interceptor/3.3.1/logging-interceptor-3.3.1.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,597 DEBUG Opening jar:file:/home/travis/.m2/passed/com/squareup/okhttp3/okhttp-urlconnection/3.3.1/okhttp-urlconnection-3.3.1.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,597 DEBUG Opening jar:file:/home/travis/.m2/passed/com/squareup/retrofit2/converter-jackson/2.0.2/converter-jackson-2.0.2.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,597 DEBUG Opening jar:file:/home/travis/.m2/passed/com/fasterxml/jackson/core/jackson-databind/2.7.2/jackson-databind-2.7.2.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,597 DEBUG Opening jar:file:/home/travis/.m2/passed/com/fasterxml/jackson/datatype/jackson-datatype-joda/2.7.2/jackson-datatype-joda-2.7.2.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,598 DEBUG Opening jar:file:/home/travis/.m2/passed/com/fasterxml/jackson/core/jackson-annotations/2.7.0/jackson-annotations-2.7.0.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,598 DEBUG Opening jar:file:/home/travis/.m2/passed/com/microsoft/azure/azure-client-authentication/1.0.0-beta2/azure-client-authentication-1.0.0-beta2.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,601 DEBUG Opening jar:file:/home/travis/.m2/passed/com/microsoft/azure/adal4j/1.1.2/adal4j-1.1.2.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,604 DEBUG Opening jar:file:/home/travis/.m2/passed/com/nimbusds/oauth2-oidc-sdk/4.5/oauth2-oidc-sdk-4.5.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,604 DEBUG Opening jar:file:/home/travis/.m2/passed/net/minidev/json-smart/1.1.1/json-smart-1.1.1.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,604 DEBUG Opening jar:file:/home/travis/.m2/passed/com/nimbusds/lang-tag/1.4/lang-tag-1.4.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,604 DEBUG Opening jar:file:/home/travis/.m2/passed/com/nimbusds/nimbus-jose-jwt/3.1.2/nimbus-jose-jwt-3.1.2.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,604 DEBUG Opening jar:file:/home/travis/.m2/passed/com/google/code/gson/gson/2.2.4/gson-2.2.4.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,605 DEBUG Opening jar:file:/home/travis/.m2/passed/com/microsoft/azure/azure-mgmt-resources/1.0.0-beta2/azure-mgmt-resources-1.0.0-beta2.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,612 DEBUG Opening jar:file:/home/travis/.m2/passed/com/microsoft/azure/azure-mgmt-storage/1.0.0-beta2/azure-mgmt-storage-1.0.0-beta2.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,616 DEBUG Opening jar:file:/home/travis/.m2/passed/com/microsoft/azure/azure-mgmt-network/1.0.0-beta2/azure-mgmt-network-1.0.0-beta2.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,628 DEBUG Opening jar:file:/home/travis/.m2/passed/com/microsoft/azure/azure-mgmt-compute/1.0.0-beta2/azure-mgmt-compute-1.0.0-beta2.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,636 DEBUG Opening jar:file:/home/travis/.m2/passed/javax/servlet/servlet-api/2.5/servlet-api-2.5.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,636 DEBUG Opening jar:file:/home/travis/.m2/passed/junit/junit/4.12/junit-4.12.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,636 DEBUG Opening jar:file:/home/travis/.m2/passed/org/hamcrest/hamcrest-core/1.3/hamcrest-core-1.3.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,636 DEBUG Opening jar:file:/home/travis/.m2/passed/org/dbunit/dbunit/2.5.1/dbunit-2.5.1.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,636 DEBUG Opening jar:file:/home/travis/.m2/passed/commons-collections/commons-collections/3.2.1/commons-collections-3.2.1.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,637 DEBUG Opening jar:file:/home/travis/.m2/passed/org/apache/poi/poi-ooxml/3.11/poi-ooxml-3.11.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,637 DEBUG Opening jar:file:/home/travis/.m2/passed/org/apache/poi/poi/3.11/poi-3.11.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,637 DEBUG Opening jar:file:/home/travis/.m2/passed/org/apache/poi/poi-ooxml-schemas/3.11/poi-ooxml-schemas-3.11.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,637 DEBUG Opening jar:file:/home/travis/.m2/passed/org/apache/xmlbeans/xmlbeans/2.6.0/xmlbeans-2.6.0.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,637 DEBUG Opening jar:file:/home/travis/.m2/passed/stax/stax-api/1.0.1/stax-api-1.0.1.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,637 DEBUG Opening jar:file:/home/travis/.m2/passed/org/hsqldb/hsqldb/2.4.0/hsqldb-2.4.0.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,637 DEBUG Opening jar:file:/home/travis/.m2/passed/org/slf4j/slf4j-api/1.7.7/slf4j-api-1.7.7.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,638 DEBUG Opening jar:file:/home/travis/.m2/passed/org/slf4j/slf4j-jdk14/1.7.7/slf4j-jdk14-1.7.7.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:42,638 DEBUG Opening jar:file:/home/travis/.m2/passed/org/apache/maven/surefire/surefire-junit4/2.19/surefire-junit4-2.19.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:43,230 DEBUG Connected to SA@jdbc:hsqldb:mem:testdb
2021-12-11 17:23:43,231 DEBUG Setting auto commit to false from true
2021-12-11 17:23:43,239 DEBUG Execute liquibase action: UPDATE
2021-12-11 17:23:43,296 DEBUG Executing QUERY database command: select count(*) from PUBLIC.DATABASECHANGELOGLOCK
2021-12-11 17:23:43,299 DEBUG Create Database Lock Table
2021-12-11 17:23:43,312 DEBUG Executing EXECUTE database command: CREATE TABLE PUBLIC.DATABASECHANGELOGLOCK (ID INT NOT NULL, LOCKED BOOLEAN NOT NULL, LOCKGRANTED TIMESTAMP, LOCKEDBY VARCHAR(255), CONSTRAINT PK_DATABASECHANGELOGLOCK PRIMARY KEY (ID))
2021-12-11 17:23:43,314 DEBUG Created database lock table with name: PUBLIC.DATABASECHANGELOGLOCK
2021-12-11 17:23:43,314 DEBUG Executing QUERY database command: select count(*) from PUBLIC.DATABASECHANGELOGLOCK
2021-12-11 17:23:43,316 DEBUG Initialize Database Lock Table
2021-12-11 17:23:43,318 DEBUG Executing EXECUTE database command: DELETE FROM PUBLIC.DATABASECHANGELOGLOCK
2021-12-11 17:23:43,321 DEBUG Executing EXECUTE database command: INSERT INTO PUBLIC.DATABASECHANGELOGLOCK (ID, LOCKED) VALUES (1, FALSE)
2021-12-11 17:23:43,323 DEBUG Executing QUERY database command: SELECT LOCKED FROM PUBLIC.DATABASECHANGELOGLOCK WHERE ID=1
2021-12-11 17:23:43,324 DEBUG Lock Database
2021-12-11 17:23:43,330 DEBUG Executing UPDATE database command: UPDATE PUBLIC.DATABASECHANGELOGLOCK SET LOCKED = TRUE, LOCKEDBY = 'ca17b7a9e79c (172.17.0.18)', LOCKGRANTED = '2021-12-11 17:23:43.325' WHERE ID = 1 AND LOCKED = FALSE
2021-12-11 17:23:43,331  INFO Successfully acquired change log lock
2021-12-11 17:23:43,363 DEBUG Opening file:/home/travis/build/passed/petergeneric/stdlib/service-manager/service-manager/target/classes/liquibase/changelog.xml as liquibase/changelog.xml
2021-12-11 17:23:44,105 DEBUG Resolving XML entity name='null', publicId='null', baseURI='null', systemId='http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.3.xsd'
2021-12-11 17:23:44,108 DEBUG Opening jar:file:/home/travis/.m2/passed/org/liquibase/liquibase-core/3.5.3/liquibase-core-3.5.3.jar!/liquibase/parser/core/xml/dbchangelog-3.3.xsd as liquibase/parser/core/xml/dbchangelog-3.3.xsd
2021-12-11 17:23:44,191 DEBUG Opening file:/home/travis/build/passed/petergeneric/stdlib/service-manager/service-manager/target/classes/liquibase/000-Original.xml as liquibase/000-Original.xml
2021-12-11 17:23:44,193 DEBUG Resolving XML entity name='null', publicId='null', baseURI='null', systemId='http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.3.xsd'
2021-12-11 17:23:44,193 DEBUG Opening jar:file:/home/travis/.m2/passed/org/liquibase/liquibase-core/3.5.3/liquibase-core-3.5.3.jar!/liquibase/parser/core/xml/dbchangelog-3.3.xsd as liquibase/parser/core/xml/dbchangelog-3.3.xsd
2021-12-11 17:23:44,246 DEBUG Opening file:/home/travis/build/passed/petergeneric/stdlib/service-manager/service-manager/target/classes/liquibase/001-acme-ca.xml as liquibase/001-acme-ca.xml
2021-12-11 17:23:44,248 DEBUG Resolving XML entity name='null', publicId='null', baseURI='null', systemId='http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.3.xsd'
2021-12-11 17:23:44,248 DEBUG Opening jar:file:/home/travis/.m2/passed/org/liquibase/liquibase-core/3.5.3/liquibase-core-3.5.3.jar!/liquibase/parser/core/xml/dbchangelog-3.3.xsd as liquibase/parser/core/xml/dbchangelog-3.3.xsd
2021-12-11 17:23:44,272 DEBUG Computed checksum for 1639243424271 as 0db4ac4bf7b7a95372552e2379914f4b
2021-12-11 17:23:44,298 DEBUG Create Database Change Log Table
2021-12-11 17:23:44,298  INFO Creating database history table with name: PUBLIC.DATABASECHANGELOG
2021-12-11 17:23:44,300 DEBUG Executing EXECUTE database command: CREATE TABLE PUBLIC.DATABASECHANGELOG (ID VARCHAR(255) NOT NULL, AUTHOR VARCHAR(255) NOT NULL, FILENAME VARCHAR(255) NOT NULL, DATEEXECUTED TIMESTAMP NOT NULL, ORDEREXECUTED INT NOT NULL, EXECTYPE VARCHAR(10) NOT NULL, MD5SUM VARCHAR(35), DESCRIPTION VARCHAR(255), COMMENTS VARCHAR(255), TAG VARCHAR(255), LIQUIBASE VARCHAR(20), CONTEXTS VARCHAR(255), LABELS VARCHAR(255), DEPLOYMENT_ID VARCHAR(10))
2021-12-11 17:23:44,304 DEBUG Executing QUERY database command: select count(*) from PUBLIC.DATABASECHANGELOG
2021-12-11 17:23:44,305  INFO Reading from PUBLIC.DATABASECHANGELOG
2021-12-11 17:23:44,306 DEBUG Executing QUERY database command: SELECT * FROM PUBLIC.DATABASECHANGELOG ORDER BY DATEEXECUTED ASC, ORDEREXECUTED ASC
2021-12-11 17:23:44,307 DEBUG Executing QUERY database command: select count(*) from PUBLIC.DATABASECHANGELOGLOCK
2021-12-11 17:23:44,311 DEBUG Computed checksum for createSequence:[
    sequenceName="hibernate_sequence"
] as 3b59bc60f6cf5c7c76b020ae29954565
2021-12-11 17:23:44,311 DEBUG Computed checksum for 7:3b59bc60f6cf5c7c76b020ae29954565: as afe897bea20bc08d1681087c94d0967d
2021-12-11 17:23:44,315 DEBUG Computed checksum for createTable:[
    columns=[
        [
            [
                primaryKey="true"
                primaryKeyName="PK_service_instance"
            ]
            name="id"
            type="VARCHAR(255)"
        ],
        [
            name="code_revision"
            type="VARCHAR(1024)"
        ],
        [
            name="service_href"
            type="VARCHAR(1024)"
        ],
        [
            name="management_token"
            type="VARCHAR(1024)"
        ],
        [
         ... [truncated in log] as 506f08e3cf6365cc7841d8db806c3827
2021-12-11 17:23:44,315 DEBUG Computed checksum for 7:506f08e3cf6365cc7841d8db806c3827: as 8cc1a1ec1c42a6558ea85dadfa15086c
2021-12-11 17:23:44,318 DEBUG Computed checksum for createTable:[
    columns=[
        [
            [
                primaryKey="true"
                primaryKeyName="PK__resource_template"
            ]
            name="id"
            type="VARCHAR(255)"
        ],
        [
            [
                nullable="false"
            ]
            name="revision_commit"
            type="VARCHAR(255)"
        ],
        [
            [
                nullable="false"
            ]
            name="revision_counter"
            type="INT"
 ... [truncated in log] as 624f3cdb4a94e95f76f033e83464548b
2021-12-11 17:23:44,319 DEBUG Computed checksum for createTable:[
    columns=[
        [
            [
                primaryKey="true"
                primaryKeyName="PK__resource_instance"
            ]
            autoIncrement="true"
            name="id"
            type="INT"
        ],
        [
            [
                nullable="false"
            ]
            name="template_id"
            type="VARCHAR(255)"
        ],
        [
            [
                nullable="false"
            ]
            name="template_revision_comm... [truncated in log] as 05104b3af11fd660cea6b6b837bafb6c
2021-12-11 17:23:44,319 DEBUG Computed checksum for addForeignKeyConstraint:[
    baseColumnNames="template_id"
    baseTableName="resource_instance"
    constraintName="FK__resource_instance__template_id"
    deferrable="false"
    initiallyDeferred="false"
    onDelete="CASCADE"
    onUpdate="NO ACTION"
    referencedColumnNames="id"
    referencedTableName="resource_template"
] as 54e0741c9904c9fef30701d28be86af4
2021-12-11 17:23:44,319 DEBUG Computed checksum for createTable:[
    columns=[
        [
            [
                nullable="false"
            ]
            name="resource_instance_id"
            type="INT"
        ],
        [
            [
                nullable="false"
            ]
            name="meta_name"
            type="VARCHAR(255)"
        ],
        [
            name="meta_val"
            type="VARCHAR(4096)"
        ]
    ]
    tableName="resource_instance_metadata"
] as f77925bfff3dd82ed276e4ae1821807e
2021-12-11 17:23:44,320 DEBUG Computed checksum for addPrimaryKey:[
    columnNames="resource_instance_id, meta_name"
    constraintName="PK__resource_instance_metadata"
    tableName="resource_instance_metadata"
] as 10e15342d434c15210acc8a25e50dbc7
2021-12-11 17:23:44,320 DEBUG Computed checksum for addForeignKeyConstraint:[
    baseColumnNames="resource_instance_id"
    baseTableName="resource_instance_metadata"
    constraintName="FK__resource_instance_metadata__resource_instance_id"
    deferrable="false"
    initiallyDeferred="false"
    onDelete="CASCADE"
    onUpdate="NO ACTION"
    referencedColumnNames="id"
    referencedTableName="resource_instance"
] as a04c680c2bc240699880b6f001ae9368
2021-12-11 17:23:44,320 DEBUG Computed checksum for 7:624f3cdb4a94e95f76f033e83464548b:7:05104b3af11fd660cea6b6b837bafb6c:7:54e0741c9904c9fef30701d28be86af4:7:f77925bfff3dd82ed276e4ae1821807e:7:10e15342d434c15210acc8a25e50dbc7:7:a04c680c2bc240699880b6f001ae9368: as 5bf33fe23a6ce3763a15d5596324a2aa
2021-12-11 17:23:44,327 DEBUG Computed checksum for createTable:[
    columns=[
        [
            [
                primaryKey="true"
                primaryKeyName="PK_acme_ca_account"
            ]
            name="id"
            type="INT"
        ],
        [
            [
                nullable="false"
            ]
            name="keypair_utf8"
            type="BLOB"
        ],
        [
            [
                nullable="false"
            ]
            name="created_ts"
            type="BIGINT"
        ],
        [
      ... [truncated in log] as 21a98f97df0978ce688f86717bf34aa2
2021-12-11 17:23:44,328 DEBUG Computed checksum for createTable:[
    columns=[
        [
            [
                primaryKey="true"
                primaryKeyName="PK_acme_ca_cert"
            ]
            name="id"
            type="VARCHAR(600)"
        ],
        [
            [
                nullable="false"
            ]
            name="keypair_utf8"
            type="BLOB"
        ],
        [
            [
                nullable="false"
            ]
            name="cert_utf8"
            type="BLOB"
        ],
        [
   ... [truncated in log] as 815780b3dd77be5c1886f3ac4c379d3a
2021-12-11 17:23:44,328 DEBUG Computed checksum for 7:21a98f97df0978ce688f86717bf34aa2:7:815780b3dd77be5c1886f3ac4c379d3a: as cfb0ce18d5236754fd1cf60fed2b9335
2021-12-11 17:23:44,331 DEBUG Computed checksum for addColumn:[
    columns=[
        [
            name="mgmt_token"
            type="VARCHAR(32)"
        ]
    ]
    tableName="acme_ca_cert"
] as ede69ef334592b7b872de24704b8f32a
2021-12-11 17:23:44,332 DEBUG Computed checksum for 7:ede69ef334592b7b872de24704b8f32a: as 798668bcb07521f9932e05e816436746
2021-12-11 17:23:44,333 DEBUG Running Changeset:./000-Original.xml::pk_sequence_on_supported_dbs::peter@peterphi.com
2021-12-11 17:23:44,333 DEBUG Changeset ./000-Original.xml::pk_sequence_on_supported_dbs::peter@peterphi.com
2021-12-11 17:23:44,334 DEBUG Reading ChangeSet: ./000-Original.xml::pk_sequence_on_supported_dbs::peter@peterphi.com
2021-12-11 17:23:44,334 DEBUG Executing Statement: liquibase.statement.core.CreateSequenceStatement@750ff7d3
2021-12-11 17:23:44,334 DEBUG Executing EXECUTE database command: CREATE SEQUENCE PUBLIC.hibernate_sequence AS BIGINT
2021-12-11 17:23:44,335  INFO Sequence hibernate_sequence created
2021-12-11 17:23:44,335  INFO ChangeSet ./000-Original.xml::pk_sequence_on_supported_dbs::peter@peterphi.com ran successfully in 2ms
2021-12-11 17:23:44,336 DEBUG Executing QUERY database command: SELECT MAX(ORDEREXECUTED) FROM PUBLIC.DATABASECHANGELOG
2021-12-11 17:23:44,339 DEBUG Executing EXECUTE database command: INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('pk_sequence_on_supported_dbs', 'peter@peterphi.com', './000-Original.xml', NOW, 1, '7:afe897bea20bc08d1681087c94d0967d', 'createSequence sequenceName=hibernate_sequence', '', 'EXECUTED', NULL, NULL, '3.5.3', '9243424308')
2021-12-11 17:23:44,340 DEBUG Running Changeset:./000-Original.xml::create_service_registry_tables::peter@peterphi.com
2021-12-11 17:23:44,340 DEBUG Changeset ./000-Original.xml::create_service_registry_tables::peter@peterphi.com
2021-12-11 17:23:44,340 DEBUG Reading ChangeSet: ./000-Original.xml::create_service_registry_tables::peter@peterphi.com
2021-12-11 17:23:44,341 DEBUG Executing Statement: liquibase.statement.core.CreateTableStatement@10823d72
2021-12-11 17:23:44,341 DEBUG Executing EXECUTE database command: CREATE TABLE PUBLIC.service_instance (id VARCHAR(255) NOT NULL, code_revision VARCHAR(1024), service_href VARCHAR(1024), management_token VARCHAR(1024), created_ts BIGINT NOT NULL, updated_ts BIGINT NOT NULL, CONSTRAINT PK_service_instance PRIMARY KEY (id))
2021-12-11 17:23:44,342  INFO Table service_instance created
2021-12-11 17:23:44,342  INFO ChangeSet ./000-Original.xml::create_service_registry_tables::peter@peterphi.com ran successfully in 2ms
2021-12-11 17:23:44,343 DEBUG Executing EXECUTE database command: INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('create_service_registry_tables', 'peter@peterphi.com', './000-Original.xml', NOW, 2, '7:8cc1a1ec1c42a6558ea85dadfa15086c', 'createTable tableName=service_instance', '', 'EXECUTED', NULL, NULL, '3.5.3', '9243424308')
2021-12-11 17:23:44,344 DEBUG Running Changeset:./000-Original.xml::create_resource_tables::peter@peterphi.com
2021-12-11 17:23:44,344 DEBUG Changeset ./000-Original.xml::create_resource_tables::peter@peterphi.com
2021-12-11 17:23:44,344 DEBUG Reading ChangeSet: ./000-Original.xml::create_resource_tables::peter@peterphi.com
2021-12-11 17:23:44,345 DEBUG Executing Statement: liquibase.statement.core.CreateTableStatement@73010765
2021-12-11 17:23:44,346 DEBUG Executing EXECUTE database command: CREATE TABLE PUBLIC.resource_template (id VARCHAR(255) NOT NULL, revision_commit VARCHAR(255) NOT NULL, revision_counter INT NOT NULL, created_ts BIGINT NOT NULL, updated_ts BIGINT NOT NULL, CONSTRAINT PK__resource_template PRIMARY KEY (id))
2021-12-11 17:23:44,347  INFO Table resource_template created
2021-12-11 17:23:44,347 DEBUG Executing Statement: liquibase.statement.core.CreateTableStatement@7eae3764
2021-12-11 17:23:44,348 DEBUG Executing EXECUTE database command: CREATE TABLE PUBLIC.resource_instance (id INT GENERATED BY DEFAULT AS IDENTITY NOT NULL, template_id VARCHAR(255) NOT NULL, template_revision_commit VARCHAR(255) NOT NULL, template_revision_counter INT NOT NULL, resource_state TINYINT NOT NULL, provider_name VARCHAR(255) NOT NULL, provider_instance_id VARCHAR(1024), created_ts BIGINT NOT NULL, updated_ts BIGINT NOT NULL, CONSTRAINT PK__resource_instance PRIMARY KEY (id))
2021-12-11 17:23:44,349  INFO Table resource_instance created
2021-12-11 17:23:44,350 DEBUG Executing Statement: liquibase.statement.core.AddForeignKeyConstraintStatement@64b3b1ce
2021-12-11 17:23:44,351 DEBUG Executing EXECUTE database command: ALTER TABLE PUBLIC.resource_instance ADD CONSTRAINT FK__resource_instance__template_id FOREIGN KEY (template_id) REFERENCES PUBLIC.resource_template (id) ON UPDATE NO ACTION ON DELETE CASCADE
2021-12-11 17:23:44,354  INFO Foreign key constraint added to resource_instance (template_id)
2021-12-11 17:23:44,354 DEBUG Executing Statement: liquibase.statement.core.CreateTableStatement@70cccd8f
2021-12-11 17:23:44,355 DEBUG Executing EXECUTE database command: CREATE TABLE PUBLIC.resource_instance_metadata (resource_instance_id INT NOT NULL, meta_name VARCHAR(255) NOT NULL, meta_val VARCHAR(4096))
2021-12-11 17:23:44,355  INFO Table resource_instance_metadata created
2021-12-11 17:23:44,355 DEBUG Executing Statement: liquibase.statement.core.AddPrimaryKeyStatement@67efd2c2
2021-12-11 17:23:44,356 DEBUG Executing EXECUTE database command: ALTER TABLE PUBLIC.resource_instance_metadata ADD CONSTRAINT PK__resource_instance_metadata PRIMARY KEY (resource_instance_id, meta_name)
2021-12-11 17:23:44,357  INFO Primary key added to resource_instance_metadata (resource_instance_id, meta_name)
2021-12-11 17:23:44,357 DEBUG Executing Statement: liquibase.statement.core.AddForeignKeyConstraintStatement@36bf84e
2021-12-11 17:23:44,357 DEBUG Executing EXECUTE database command: ALTER TABLE PUBLIC.resource_instance_metadata ADD CONSTRAINT FK__resource_instance_metadata__resource_instance_id FOREIGN KEY (resource_instance_id) REFERENCES PUBLIC.resource_instance (id) ON UPDATE NO ACTION ON DELETE CASCADE
2021-12-11 17:23:44,358  INFO Foreign key constraint added to resource_instance_metadata (resource_instance_id)
2021-12-11 17:23:44,358  INFO ChangeSet ./000-Original.xml::create_resource_tables::peter@peterphi.com ran successfully in 14ms
2021-12-11 17:23:44,360 DEBUG Executing EXECUTE database command: INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('create_resource_tables', 'peter@peterphi.com', './000-Original.xml', NOW, 3, '7:5bf33fe23a6ce3763a15d5596324a2aa', 'createTable tableName=resource_template; createTable tableName=resource_instance; addForeignKeyConstraint baseTableName=resource_instance, constraintName=FK__resource_instance__template_id, referencedTableName=resource_template; createTable tableN...', '', 'EXECUTED', NULL, NULL, '3.5.3', '9243424308')
2021-12-11 17:23:44,361 DEBUG Running Changeset:./001-acme-ca.xml::create_acme_ca_tables::peter@peterphi.com
2021-12-11 17:23:44,361 DEBUG Changeset ./001-acme-ca.xml::create_acme_ca_tables::peter@peterphi.com
2021-12-11 17:23:44,361 DEBUG Reading ChangeSet: ./001-acme-ca.xml::create_acme_ca_tables::peter@peterphi.com
2021-12-11 17:23:44,362 DEBUG Executing Statement: liquibase.statement.core.CreateTableStatement@6f1a80fb
2021-12-11 17:23:44,362 DEBUG Executing EXECUTE database command: CREATE TABLE PUBLIC.acme_ca_account (id INT NOT NULL, keypair_utf8 BLOB NOT NULL, created_ts BIGINT NOT NULL, updated_ts BIGINT NOT NULL, CONSTRAINT PK_acme_ca_account PRIMARY KEY (id))
2021-12-11 17:23:44,363  INFO Table acme_ca_account created
2021-12-11 17:23:44,363 DEBUG Executing Statement: liquibase.statement.core.CreateTableStatement@10fda3d0
2021-12-11 17:23:44,364 DEBUG Executing EXECUTE database command: CREATE TABLE PUBLIC.acme_ca_cert (id VARCHAR(600) NOT NULL, keypair_utf8 BLOB NOT NULL, cert_utf8 BLOB NOT NULL, chain_utf8 BLOB NOT NULL, expires_ts BIGINT NOT NULL, created_ts BIGINT NOT NULL, updated_ts BIGINT NOT NULL, CONSTRAINT PK_acme_ca_cert PRIMARY KEY (id))
2021-12-11 17:23:44,365  INFO Table acme_ca_cert created
2021-12-11 17:23:44,365  INFO ChangeSet ./001-acme-ca.xml::create_acme_ca_tables::peter@peterphi.com ran successfully in 4ms
2021-12-11 17:23:44,366 DEBUG Executing EXECUTE database command: INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('create_acme_ca_tables', 'peter@peterphi.com', './001-acme-ca.xml', NOW, 4, '7:cfb0ce18d5236754fd1cf60fed2b9335', 'createTable tableName=acme_ca_account; createTable tableName=acme_ca_cert', '', 'EXECUTED', NULL, NULL, '3.5.3', '9243424308')
2021-12-11 17:23:44,367 DEBUG Running Changeset:./001-acme-ca.xml::add_mgmt_token_to_acme_ca_cert::peter@peterphi.com
2021-12-11 17:23:44,367 DEBUG Changeset ./001-acme-ca.xml::add_mgmt_token_to_acme_ca_cert::peter@peterphi.com
2021-12-11 17:23:44,367 DEBUG Reading ChangeSet: ./001-acme-ca.xml::add_mgmt_token_to_acme_ca_cert::peter@peterphi.com
2021-12-11 17:23:44,367 DEBUG Executing Statement: liquibase.statement.core.AddColumnStatement@6ecdbab8
2021-12-11 17:23:44,368 DEBUG Executing EXECUTE database command: ALTER TABLE PUBLIC.acme_ca_cert ADD mgmt_token VARCHAR(32)
2021-12-11 17:23:44,370  INFO Columns mgmt_token(VARCHAR(32)) added to acme_ca_cert
2021-12-11 17:23:44,370  INFO ChangeSet ./001-acme-ca.xml::add_mgmt_token_to_acme_ca_cert::peter@peterphi.com ran successfully in 3ms
2021-12-11 17:23:44,371 DEBUG Executing EXECUTE database command: INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('add_mgmt_token_to_acme_ca_cert', 'peter@peterphi.com', './001-acme-ca.xml', NOW, 5, '7:798668bcb07521f9932e05e816436746', 'addColumn tableName=acme_ca_cert', '', 'EXECUTED', NULL, NULL, '3.5.3', '9243424308')
2021-12-11 17:23:44,372 DEBUG Release Database Lock
2021-12-11 17:23:44,373 DEBUG Executing UPDATE database command: UPDATE PUBLIC.DATABASECHANGELOGLOCK SET LOCKED = FALSE, LOCKEDBY = NULL, LOCKGRANTED = NULL WHERE ID = 1
2021-12-11 17:23:44,374  INFO Successfully released change log lock
2021-12-11 17:23:44,375 DEBUG Register for shutdown: com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider$$EnhancerByGuice$$e9bc367e@51841ac6
2021-12-11 17:23:44,375 DEBUG Adding Integrator [org.hibernate.cfg.beanvalidation.BeanValidationIntegrator].
2021-12-11 17:23:44,375 DEBUG Adding Integrator [org.hibernate.secure.spi.JaccIntegrator].
2021-12-11 17:23:44,375 DEBUG Adding Integrator [org.hibernate.cache.internal.CollectionCacheInvalidator].
2021-12-11 17:23:44,388 DEBUG Overriding existing service binding [org.hibernate.secure.spi.JaccService]
2021-12-11 17:23:44,388 DEBUG Building session factory using provided StandardServiceRegistry
2021-12-11 17:23:44,406 DEBUG Cache region factory : org.hibernate.cache.internal.NoCachingRegionFactory
2021-12-11 17:23:44,415  INFO HCANN000001: Hibernate Commons Annotations {5.0.1.Final}
2021-12-11 17:23:44,439 DEBUG Adding type registration boolean -> org.hibernate.type.BooleanType@60f70249
2021-12-11 17:23:44,439 DEBUG Adding type registration boolean -> org.hibernate.type.BooleanType@60f70249
2021-12-11 17:23:44,440 DEBUG Adding type registration java.lang.Boolean -> org.hibernate.type.BooleanType@60f70249
2021-12-11 17:23:44,440 DEBUG Adding type registration numeric_boolean -> org.hibernate.type.NumericBooleanType@6920614
2021-12-11 17:23:44,441 DEBUG Adding type registration true_false -> org.hibernate.type.TrueFalseType@7ff35a3f
2021-12-11 17:23:44,442 DEBUG Adding type registration yes_no -> org.hibernate.type.YesNoType@43045f9f
2021-12-11 17:23:44,443 DEBUG Adding type registration byte -> org.hibernate.type.ByteType@3968bc60
2021-12-11 17:23:44,443 DEBUG Adding type registration byte -> org.hibernate.type.ByteType@3968bc60
2021-12-11 17:23:44,443 DEBUG Adding type registration java.lang.Byte -> org.hibernate.type.ByteType@3968bc60
2021-12-11 17:23:44,444 DEBUG Adding type registration character -> org.hibernate.type.CharacterType@70228253
2021-12-11 17:23:44,445 DEBUG Adding type registration char -> org.hibernate.type.CharacterType@70228253
2021-12-11 17:23:44,445 DEBUG Adding type registration java.lang.Character -> org.hibernate.type.CharacterType@70228253
2021-12-11 17:23:44,446 DEBUG Adding type registration short -> org.hibernate.type.ShortType@65b97f47
2021-12-11 17:23:44,446 DEBUG Adding type registration short -> org.hibernate.type.ShortType@65b97f47
2021-12-11 17:23:44,446 DEBUG Adding type registration java.lang.Short -> org.hibernate.type.ShortType@65b97f47
2021-12-11 17:23:44,447 DEBUG Adding type registration integer -> org.hibernate.type.IntegerType@43e9089
2021-12-11 17:23:44,447 DEBUG Adding type registration int -> org.hibernate.type.IntegerType@43e9089
2021-12-11 17:23:44,447 DEBUG Adding type registration java.lang.Integer -> org.hibernate.type.IntegerType@43e9089
2021-12-11 17:23:44,449 DEBUG Adding type registration long -> org.hibernate.type.LongType@122d6c22
2021-12-11 17:23:44,449 DEBUG Adding type registration long -> org.hibernate.type.LongType@122d6c22
2021-12-11 17:23:44,449 DEBUG Adding type registration java.lang.Long -> org.hibernate.type.LongType@122d6c22
2021-12-11 17:23:44,450 DEBUG Adding type registration float -> org.hibernate.type.FloatType@6981f8f3
2021-12-11 17:23:44,450 DEBUG Adding type registration float -> org.hibernate.type.FloatType@6981f8f3
2021-12-11 17:23:44,450 DEBUG Adding type registration java.lang.Float -> org.hibernate.type.FloatType@6981f8f3
2021-12-11 17:23:44,452 DEBUG Adding type registration double -> org.hibernate.type.DoubleType@117525fe
2021-12-11 17:23:44,452 DEBUG Adding type registration double -> org.hibernate.type.DoubleType@117525fe
2021-12-11 17:23:44,452 DEBUG Adding type registration java.lang.Double -> org.hibernate.type.DoubleType@117525fe
2021-12-11 17:23:44,453 DEBUG Adding type registration big_decimal -> org.hibernate.type.BigDecimalType@6dfa915a
2021-12-11 17:23:44,453 DEBUG Adding type registration java.math.BigDecimal -> org.hibernate.type.BigDecimalType@6dfa915a
2021-12-11 17:23:44,454 DEBUG Adding type registration big_integer -> org.hibernate.type.BigIntegerType@561b61ed
2021-12-11 17:23:44,454 DEBUG Adding type registration java.math.BigInteger -> org.hibernate.type.BigIntegerType@561b61ed
2021-12-11 17:23:44,455 DEBUG Adding type registration string -> org.hibernate.type.StringType@1e7ab390
2021-12-11 17:23:44,455 DEBUG Adding type registration java.lang.String -> org.hibernate.type.StringType@1e7ab390
2021-12-11 17:23:44,456 DEBUG Adding type registration nstring -> org.hibernate.type.StringNVarcharType@620c8641
2021-12-11 17:23:44,457 DEBUG Adding type registration ncharacter -> org.hibernate.type.CharacterNCharType@4b200971
2021-12-11 17:23:44,457 DEBUG Adding type registration url -> org.hibernate.type.UrlType@5679e96b
2021-12-11 17:23:44,458 DEBUG Adding type registration java.net.URL -> org.hibernate.type.UrlType@5679e96b
2021-12-11 17:23:44,459 DEBUG Adding type registration Duration -> org.hibernate.type.DurationType@3ee0b4f7
2021-12-11 17:23:44,459 DEBUG Adding type registration java.time.Duration -> org.hibernate.type.DurationType@3ee0b4f7
2021-12-11 17:23:44,476 DEBUG Adding type registration Instant -> org.hibernate.type.InstantType@467b684d
2021-12-11 17:23:44,476 DEBUG Adding type registration java.time.Instant -> org.hibernate.type.InstantType@467b684d
2021-12-11 17:23:44,478 DEBUG Adding type registration LocalDateTime -> org.hibernate.type.LocalDateTimeType@7fe82967
2021-12-11 17:23:44,478 DEBUG Adding type registration java.time.LocalDateTime -> org.hibernate.type.LocalDateTimeType@7fe82967
2021-12-11 17:23:44,480 DEBUG Adding type registration LocalDate -> org.hibernate.type.LocalDateType@1aad0b1
2021-12-11 17:23:44,480 DEBUG Adding type registration java.time.LocalDate -> org.hibernate.type.LocalDateType@1aad0b1
2021-12-11 17:23:44,482 DEBUG Adding type registration LocalTime -> org.hibernate.type.LocalTimeType@44536de4
2021-12-11 17:23:44,482 DEBUG Adding type registration java.time.LocalTime -> org.hibernate.type.LocalTimeType@44536de4
2021-12-11 17:23:44,484 DEBUG Adding type registration OffsetDateTime -> org.hibernate.type.OffsetDateTimeType@5624657a
2021-12-11 17:23:44,484 DEBUG Adding type registration java.time.OffsetDateTime -> org.hibernate.type.OffsetDateTimeType@5624657a
2021-12-11 17:23:44,485 DEBUG Adding type registration OffsetTime -> org.hibernate.type.OffsetTimeType@712cfb63
2021-12-11 17:23:44,485 DEBUG Adding type registration java.time.OffsetTime -> org.hibernate.type.OffsetTimeType@712cfb63
2021-12-11 17:23:44,489 DEBUG Adding type registration ZonedDateTime -> org.hibernate.type.ZonedDateTimeType@10f7c76
2021-12-11 17:23:44,489 DEBUG Adding type registration java.time.ZonedDateTime -> org.hibernate.type.ZonedDateTimeType@10f7c76
2021-12-11 17:23:44,491 DEBUG Adding type registration date -> org.hibernate.type.DateType@5dd903be
2021-12-11 17:23:44,491 DEBUG Adding type registration java.sql.Date -> org.hibernate.type.DateType@5dd903be
2021-12-11 17:23:44,492 DEBUG Adding type registration time -> org.hibernate.type.TimeType@7ecec90d
2021-12-11 17:23:44,492 DEBUG Adding type registration java.sql.Time -> org.hibernate.type.TimeType@7ecec90d
2021-12-11 17:23:44,493 DEBUG Adding type registration timestamp -> org.hibernate.type.TimestampType@53f4c1e6
2021-12-11 17:23:44,493 DEBUG Adding type registration java.sql.Timestamp -> org.hibernate.type.TimestampType@53f4c1e6
2021-12-11 17:23:44,493 DEBUG Adding type registration java.util.Date -> org.hibernate.type.TimestampType@53f4c1e6
2021-12-11 17:23:44,494 DEBUG Adding type registration dbtimestamp -> org.hibernate.type.DbTimestampType@74174a23
2021-12-11 17:23:44,495 DEBUG Adding type registration calendar -> org.hibernate.type.CalendarType@434514d8
2021-12-11 17:23:44,495 DEBUG Adding type registration java.util.Calendar -> org.hibernate.type.CalendarType@434514d8
2021-12-11 17:23:44,495 DEBUG Adding type registration java.util.GregorianCalendar -> org.hibernate.type.CalendarType@434514d8
2021-12-11 17:23:44,496 DEBUG Adding type registration calendar_date -> org.hibernate.type.CalendarDateType@6540cf1d
2021-12-11 17:23:44,496 DEBUG Adding type registration locale -> org.hibernate.type.LocaleType@7efb53af
2021-12-11 17:23:44,497 DEBUG Adding type registration java.util.Locale -> org.hibernate.type.LocaleType@7efb53af
2021-12-11 17:23:44,497 DEBUG Adding type registration currency -> org.hibernate.type.CurrencyType@3cd9aa64
2021-12-11 17:23:44,497 DEBUG Adding type registration java.util.Currency -> org.hibernate.type.CurrencyType@3cd9aa64
2021-12-11 17:23:44,498 DEBUG Adding type registration timezone -> org.hibernate.type.TimeZoneType@53b7ce6
2021-12-11 17:23:44,498 DEBUG Adding type registration java.util.TimeZone -> org.hibernate.type.TimeZoneType@53b7ce6
2021-12-11 17:23:44,499 DEBUG Adding type registration class -> org.hibernate.type.ClassType@378cfecf
2021-12-11 17:23:44,499 DEBUG Adding type registration java.lang.Class -> org.hibernate.type.ClassType@378cfecf
2021-12-11 17:23:44,500 DEBUG Adding type registration uuid-binary -> org.hibernate.type.UUIDBinaryType@7640a5b1
2021-12-11 17:23:44,500 DEBUG Adding type registration java.util.UUID -> org.hibernate.type.UUIDBinaryType@7640a5b1
2021-12-11 17:23:44,501 DEBUG Adding type registration uuid-char -> org.hibernate.type.UUIDCharType@5634d0f4
2021-12-11 17:23:44,502 DEBUG Adding type registration binary -> org.hibernate.type.BinaryType@119aa36
2021-12-11 17:23:44,502 DEBUG Adding type registration byte[] -> org.hibernate.type.BinaryType@119aa36
2021-12-11 17:23:44,502 DEBUG Adding type registration [B -> org.hibernate.type.BinaryType@119aa36
2021-12-11 17:23:44,503 DEBUG Adding type registration wrapper-binary -> org.hibernate.type.WrapperBinaryType@709ed6f3
2021-12-11 17:23:44,503 DEBUG Adding type registration Byte[] -> org.hibernate.type.WrapperBinaryType@709ed6f3
2021-12-11 17:23:44,503 DEBUG Adding type registration [Ljava.lang.Byte; -> org.hibernate.type.WrapperBinaryType@709ed6f3
2021-12-11 17:23:44,504 DEBUG Adding type registration row_version -> org.hibernate.type.RowVersionType@1716e8c5
2021-12-11 17:23:44,504 DEBUG Adding type registration image -> org.hibernate.type.ImageType@437486cd
2021-12-11 17:23:44,505 DEBUG Adding type registration characters -> org.hibernate.type.CharArrayType@715b886f
2021-12-11 17:23:44,505 DEBUG Adding type registration char[] -> org.hibernate.type.CharArrayType@715b886f
2021-12-11 17:23:44,505 DEBUG Adding type registration [C -> org.hibernate.type.CharArrayType@715b886f
2021-12-11 17:23:44,506 DEBUG Adding type registration wrapper-characters -> org.hibernate.type.CharacterArrayType@73844119
2021-12-11 17:23:44,506 DEBUG Adding type registration [Ljava.lang.Character; -> org.hibernate.type.CharacterArrayType@73844119
2021-12-11 17:23:44,506 DEBUG Adding type registration Character[] -> org.hibernate.type.CharacterArrayType@73844119
2021-12-11 17:23:44,507 DEBUG Adding type registration text -> org.hibernate.type.TextType@411c6d44
2021-12-11 17:23:44,507 DEBUG Adding type registration ntext -> org.hibernate.type.NTextType@242b6e1a
2021-12-11 17:23:44,512 DEBUG Adding type registration blob -> org.hibernate.type.BlobType@671d1157
2021-12-11 17:23:44,512 DEBUG Adding type registration java.sql.Blob -> org.hibernate.type.BlobType@671d1157
2021-12-11 17:23:44,512 DEBUG Adding type registration materialized_blob -> org.hibernate.type.MaterializedBlobType@2a369e14
2021-12-11 17:23:44,515 DEBUG Adding type registration clob -> org.hibernate.type.ClobType@2630dbc4
2021-12-11 17:23:44,515 DEBUG Adding type registration java.sql.Clob -> org.hibernate.type.ClobType@2630dbc4
2021-12-11 17:23:44,518 DEBUG Adding type registration nclob -> org.hibernate.type.NClobType@4996c99
2021-12-11 17:23:44,519 DEBUG Adding type registration java.sql.NClob -> org.hibernate.type.NClobType@4996c99
2021-12-11 17:23:44,519 DEBUG Adding type registration materialized_clob -> org.hibernate.type.MaterializedClobType@3a66e67e
2021-12-11 17:23:44,519 DEBUG Adding type registration materialized_nclob -> org.hibernate.type.MaterializedNClobType@ccf91df
2021-12-11 17:23:44,520 DEBUG Adding type registration serializable -> org.hibernate.type.SerializableType@7e53339
2021-12-11 17:23:44,523 DEBUG Adding type registration object -> org.hibernate.type.ObjectType@77bb48d5
2021-12-11 17:23:44,523 DEBUG Adding type registration java.lang.Object -> org.hibernate.type.ObjectType@77bb48d5
2021-12-11 17:23:44,523 DEBUG Adding type registration imm_date -> org.hibernate.type.AdaptedImmutableType@b887730
2021-12-11 17:23:44,523 DEBUG Adding type registration imm_time -> org.hibernate.type.AdaptedImmutableType@26586b74
2021-12-11 17:23:44,523 DEBUG Adding type registration imm_timestamp -> org.hibernate.type.AdaptedImmutableType@52f57666
2021-12-11 17:23:44,523 DEBUG Adding type registration imm_dbtimestamp -> org.hibernate.type.AdaptedImmutableType@6e041285
2021-12-11 17:23:44,523 DEBUG Adding type registration imm_calendar -> org.hibernate.type.AdaptedImmutableType@267dc982
2021-12-11 17:23:44,523 DEBUG Adding type registration imm_calendar_date -> org.hibernate.type.AdaptedImmutableType@439b15f2
2021-12-11 17:23:44,523 DEBUG Adding type registration imm_binary -> org.hibernate.type.AdaptedImmutableType@3aa41da1
2021-12-11 17:23:44,524 DEBUG Adding type registration imm_serializable -> org.hibernate.type.AdaptedImmutableType@74fab04a
2021-12-11 17:23:44,536  WARN HHH10001002: Using Hibernate built-in connection pool (not for production use!)
2021-12-11 17:23:44,537  INFO HHH10001005: using driver [org.hsqldb.jdbcDriver] at URL [jdbc:hsqldb:mem:testdb]
2021-12-11 17:23:44,537  INFO HHH10001001: Connection properties: {user=sa, password=, readOnly=false}
2021-12-11 17:23:44,537  INFO HHH10001003: Autocommit mode: false
2021-12-11 17:23:44,540 DEBUG Initializing Connection pool with 1 Connections
2021-12-11 17:23:44,540  INFO HHH000115: Hibernate connection pool size: 20 (min=1)
2021-12-11 17:23:44,543 DEBUG Database ->
       name : HSQL Database Engine
    version : 2.4.0
      major : 2
      minor : 4
2021-12-11 17:23:44,543 DEBUG Driver ->
       name : HSQL Database Engine Driver
    version : 2.4.0
      major : 2
      minor : 4
2021-12-11 17:23:44,543 DEBUG JDBC version : 4.2
2021-12-11 17:23:44,558  INFO HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2021-12-11 17:23:44,586 DEBUG JDBC driver metadata reported database stores quoted identifiers in neither upper, lower nor mixed case
2021-12-11 17:23:44,601 DEBUG Adding type registration java.util.Date -> org.hibernate.type.CustomType@1f03fba0
2021-12-11 17:23:44,601  INFO HHH000270: Type registration [java.util.Date] overrides previous : org.hibernate.type.TimestampType@53f4c1e6
2021-12-11 17:23:44,601 DEBUG Adding type registration org.joda.time.DateTime -> org.hibernate.type.CustomType@17dd671f
2021-12-11 17:23:44,601 DEBUG Adding type registration com.peterphi.std.types.Timecode -> org.hibernate.type.CustomType@3bbf6abe
2021-12-11 17:23:44,601 DEBUG Adding type registration com.peterphi.std.types.SampleCount -> org.hibernate.type.CustomType@9679750
2021-12-11 17:23:44,601 DEBUG Adding type registration org.joda.time.LocalDate -> org.hibernate.type.CustomType@9b9a327
2021-12-11 17:23:44,630 DEBUG Registering IdentifierGenerator strategy [uuid2] -> [org.hibernate.id.UUIDGenerator]
2021-12-11 17:23:44,630 DEBUG Registering IdentifierGenerator strategy [guid] -> [org.hibernate.id.GUIDGenerator]
2021-12-11 17:23:44,631 DEBUG Registering IdentifierGenerator strategy [uuid] -> [org.hibernate.id.UUIDHexGenerator]
2021-12-11 17:23:44,631 DEBUG Registering IdentifierGenerator strategy [uuid.hex] -> [org.hibernate.id.UUIDHexGenerator]
2021-12-11 17:23:44,631 DEBUG Registering IdentifierGenerator strategy [assigned] -> [org.hibernate.id.Assigned]
2021-12-11 17:23:44,632 DEBUG Registering IdentifierGenerator strategy [identity] -> [org.hibernate.id.IdentityGenerator]
2021-12-11 17:23:44,633 DEBUG Registering IdentifierGenerator strategy [select] -> [org.hibernate.id.SelectGenerator]
2021-12-11 17:23:44,634 DEBUG Registering IdentifierGenerator strategy [sequence] -> [org.hibernate.id.enhanced.SequenceStyleGenerator]
2021-12-11 17:23:44,634 DEBUG Registering IdentifierGenerator strategy [seqhilo] -> [org.hibernate.id.SequenceHiLoGenerator]
2021-12-11 17:23:44,635 DEBUG Registering IdentifierGenerator strategy [increment] -> [org.hibernate.id.IncrementGenerator]
2021-12-11 17:23:44,635 DEBUG Registering IdentifierGenerator strategy [foreign] -> [org.hibernate.id.ForeignGenerator]
2021-12-11 17:23:44,636 DEBUG Registering IdentifierGenerator strategy [sequence-identity] -> [org.hibernate.id.SequenceIdentityGenerator]
2021-12-11 17:23:44,636 DEBUG Registering IdentifierGenerator strategy [enhanced-sequence] -> [org.hibernate.id.enhanced.SequenceStyleGenerator]
2021-12-11 17:23:44,637 DEBUG Registering IdentifierGenerator strategy [enhanced-table] -> [org.hibernate.id.enhanced.TableGenerator]
2021-12-11 17:23:44,674 DEBUG Created database namespace [logicalName=Name{catalog=null, schema=null}, physicalName=Name{catalog=null, schema=null}]
2021-12-11 17:23:44,698 DEBUG Binding entity from annotated class: com.peterphi.servicemanager.service.db.entity.ServiceInstanceEntity
2021-12-11 17:23:44,721 DEBUG Binding column: Ejb3DiscriminatorColumn{logicalColumnName'DTYPE', discriminatorTypeName='string'}
2021-12-11 17:23:44,727 DEBUG Import with entity name service_instance
2021-12-11 17:23:44,735 DEBUG Bind entity com.peterphi.servicemanager.service.db.entity.ServiceInstanceEntity on table service_instance
2021-12-11 17:23:44,758 DEBUG Binding column: Ejb3Column{table=org.hibernate.mapping.Table(service_instance), mappingColumn=id, insertable=true, updatable=true, unique=false}
2021-12-11 17:23:44,762 DEBUG MetadataSourceProcessor property id with lazy=false
2021-12-11 17:23:44,764 DEBUG Attempting to locate auto-apply AttributeConverter for property [com.peterphi.servicemanager.service.db.entity.ServiceInstanceEntity:id]
2021-12-11 17:23:44,765 DEBUG building SimpleValue for id
2021-12-11 17:23:44,768 DEBUG Building property id
2021-12-11 17:23:44,770 DEBUG Binding column: Ejb3Column{table=org.hibernate.mapping.Table(service_instance), mappingColumn=code_revision, insertable=true, updatable=true, unique=false}
2021-12-11 17:23:44,771 DEBUG MetadataSourceProcessor property codeRevision with lazy=false
2021-12-11 17:23:44,771 DEBUG Attempting to locate auto-apply AttributeConverter for property [com.peterphi.servicemanager.service.db.entity.ServiceInstanceEntity:codeRevision]
2021-12-11 17:23:44,771 DEBUG building SimpleValue for codeRevision
2021-12-11 17:23:44,771 DEBUG Building property codeRevision
2021-12-11 17:23:44,771 DEBUG Binding column: Ejb3Column{table=org.hibernate.mapping.Table(service_instance), mappingColumn=created_ts, insertable=true, updatable=true, unique=false}
2021-12-11 17:23:44,771 DEBUG MetadataSourceProcessor property created with lazy=false
2021-12-11 17:23:44,771 DEBUG Attempting to locate auto-apply AttributeConverter for property [com.peterphi.servicemanager.service.db.entity.ServiceInstanceEntity:created]
2021-12-11 17:23:44,771 DEBUG building SimpleValue for created
2021-12-11 17:23:44,771 DEBUG Building property created
2021-12-11 17:23:44,771 DEBUG Binding column: Ejb3Column{table=org.hibernate.mapping.Table(service_instance), mappingColumn=service_href, insertable=true, updatable=true, unique=false}
2021-12-11 17:23:44,771 DEBUG MetadataSourceProcessor property endpoint with lazy=false
2021-12-11 17:23:44,771 DEBUG Attempting to locate auto-apply AttributeConverter for property [com.peterphi.servicemanager.service.db.entity.ServiceInstanceEntity:endpoint]
2021-12-11 17:23:44,771 DEBUG building SimpleValue for endpoint
2021-12-11 17:23:44,771 DEBUG Building property endpoint
2021-12-11 17:23:44,771 DEBUG Binding column: Ejb3Column{table=org.hibernate.mapping.Table(service_instance), mappingColumn=management_token, insertable=true, updatable=true, unique=false}
2021-12-11 17:23:44,772 DEBUG MetadataSourceProcessor property managementToken with lazy=false
2021-12-11 17:23:44,772 DEBUG Attempting to locate auto-apply AttributeConverter for property [com.peterphi.servicemanager.service.db.entity.ServiceInstanceEntity:managementToken]
2021-12-11 17:23:44,772 DEBUG building SimpleValue for managementToken
2021-12-11 17:23:44,772 DEBUG Building property managementToken
2021-12-11 17:23:44,772 DEBUG Binding column: Ejb3Column{table=org.hibernate.mapping.Table(service_instance), mappingColumn=updated_ts, insertable=true, updatable=true, unique=false}
2021-12-11 17:23:44,772 DEBUG MetadataSourceProcessor property updated with lazy=false
2021-12-11 17:23:44,772 DEBUG Attempting to locate auto-apply AttributeConverter for property [com.peterphi.servicemanager.service.db.entity.ServiceInstanceEntity:updated]
2021-12-11 17:23:44,772 DEBUG building SimpleValue for updated
2021-12-11 17:23:44,772 DEBUG Building property updated
2021-12-11 17:23:44,774 DEBUG Binding entity from annotated class: com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity
2021-12-11 17:23:44,774 DEBUG Binding column: Ejb3DiscriminatorColumn{logicalColumnName'DTYPE', discriminatorTypeName='string'}
2021-12-11 17:23:44,774 DEBUG Import with entity name resource_template
2021-12-11 17:23:44,774 DEBUG Bind entity com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity on table resource_template
2021-12-11 17:23:44,781 DEBUG Binding column: Ejb3Column{table=org.hibernate.mapping.Table(resource_template), mappingColumn=id, insertable=true, updatable=true, unique=false}
2021-12-11 17:23:44,781 DEBUG MetadataSourceProcessor property id with lazy=false
2021-12-11 17:23:44,781 DEBUG Attempting to locate auto-apply AttributeConverter for property [com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity:id]
2021-12-11 17:23:44,781 DEBUG building SimpleValue for id
2021-12-11 17:23:44,781 DEBUG Building property id
2021-12-11 17:23:44,782 DEBUG Binding column: Ejb3Column{table=org.hibernate.mapping.Table(resource_template), mappingColumn=created_ts, insertable=true, updatable=true, unique=false}
2021-12-11 17:23:44,782 DEBUG MetadataSourceProcessor property created with lazy=false
2021-12-11 17:23:44,782 DEBUG Attempting to locate auto-apply AttributeConverter for property [com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity:created]
2021-12-11 17:23:44,782 DEBUG building SimpleValue for created
2021-12-11 17:23:44,782 DEBUG Building property created
2021-12-11 17:23:44,784 DEBUG Binding column: Ejb3JoinColumn{logicalColumnName='null', referencedColumn='null', mappedBy='template'}
2021-12-11 17:23:44,785 DEBUG Binding column: Ejb3Column{table=org.hibernate.mapping.Table(resource_template), mappingColumn=instances, insertable=true, updatable=true, unique=false}
2021-12-11 17:23:44,787 DEBUG Binding column: Ejb3Column{table=org.hibernate.mapping.Table(resource_template), mappingColumn=null, insertable=true, updatable=true, unique=false}
2021-12-11 17:23:44,797 DEBUG Binding column: Ejb3Column{table=org.hibernate.mapping.Table(resource_template), mappingColumn=element, insertable=true, updatable=true, unique=false}
2021-12-11 17:23:44,797 DEBUG Binding column: Ejb3Column{table=org.hibernate.mapping.Table(resource_template), mappingColumn=instances_KEY, insertable=true, updatable=true, unique=false}
2021-12-11 17:23:44,798 DEBUG Binding column: Ejb3JoinColumn{logicalColumnName='instances_KEY', referencedColumn='null', mappedBy='null'}
2021-12-11 17:23:44,799 DEBUG Binding column: Ejb3JoinColumn{logicalColumnName='null', referencedColumn='null', mappedBy='template'}
2021-12-11 17:23:44,799 DEBUG Binding column: Ejb3JoinColumn{logicalColumnName='null', referencedColumn='null', mappedBy='template'}
2021-12-11 17:23:44,800 DEBUG Collection role: com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity.instances
2021-12-11 17:23:44,802 DEBUG Building property instances
2021-12-11 17:23:44,803 DEBUG Binding column: Ejb3Column{table=org.hibernate.mapping.Table(resource_template), mappingColumn=revision_commit, insertable=true, updatable=true, unique=false}
2021-12-11 17:23:44,803 DEBUG MetadataSourceProcessor property latestRevision with lazy=false
2021-12-11 17:23:44,803 DEBUG Attempting to locate auto-apply AttributeConverter for property [com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity:latestRevision]
2021-12-11 17:23:44,803 DEBUG building SimpleValue for latestRevision
2021-12-11 17:23:44,803 DEBUG Building property latestRevision
2021-12-11 17:23:44,803 DEBUG Binding column: Ejb3Column{table=org.hibernate.mapping.Table(resource_template), mappingColumn=revision_counter, insertable=true, updatable=true, unique=false}
2021-12-11 17:23:44,803 DEBUG MetadataSourceProcessor property revisions with lazy=false
2021-12-11 17:23:44,803 DEBUG Attempting to locate auto-apply AttributeConverter for property [com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity:revisions]
2021-12-11 17:23:44,803 DEBUG building SimpleValue for revisions
2021-12-11 17:23:44,804 DEBUG Building property revisions
2021-12-11 17:23:44,804 DEBUG Binding column: Ejb3Column{table=org.hibernate.mapping.Table(resource_template), mappingColumn=updated_ts, insertable=true, updatable=true, unique=false}
2021-12-11 17:23:44,804 DEBUG MetadataSourceProcessor property updated with lazy=false
2021-12-11 17:23:44,804 DEBUG Attempting to locate auto-apply AttributeConverter for property [com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity:updated]
2021-12-11 17:23:44,804 DEBUG building SimpleValue for updated
2021-12-11 17:23:44,804 DEBUG Building property updated
2021-12-11 17:23:44,804 DEBUG Binding entity from annotated class: com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity
2021-12-11 17:23:44,804 DEBUG Binding column: Ejb3DiscriminatorColumn{logicalColumnName'DTYPE', discriminatorTypeName='string'}
2021-12-11 17:23:44,804 DEBUG Import with entity name resource_instance
2021-12-11 17:23:44,804 DEBUG Bind entity com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity on table resource_instance
2021-12-11 17:23:44,816 DEBUG Binding column: Ejb3Column{table=org.hibernate.mapping.Table(resource_instance), mappingColumn=id, insertable=true, updatable=true, unique=false}
2021-12-11 17:23:44,816 DEBUG MetadataSourceProcessor property id with lazy=false
2021-12-11 17:23:44,816 DEBUG Attempting to locate auto-apply AttributeConverter for property [com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity:id]
2021-12-11 17:23:44,816 DEBUG building SimpleValue for id
2021-12-11 17:23:44,817 DEBUG Building property id
2021-12-11 17:23:44,818 DEBUG Binding column: Ejb3Column{table=org.hibernate.mapping.Table(resource_instance), mappingColumn=created_ts, insertable=true, updatable=true, unique=false}
2021-12-11 17:23:44,818 DEBUG MetadataSourceProcessor property created with lazy=false
2021-12-11 17:23:44,818 DEBUG Attempting to locate auto-apply AttributeConverter for property [com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity:created]
2021-12-11 17:23:44,818 DEBUG building SimpleValue for created
2021-12-11 17:23:44,818 DEBUG Building property created
2021-12-11 17:23:44,818 DEBUG Binding column: Ejb3Column{table=org.hibernate.mapping.Table(resource_instance), mappingColumn=meta_val, insertable=true, updatable=true, unique=false}
2021-12-11 17:23:44,818 DEBUG Binding column: Ejb3JoinColumn{logicalColumnName='null', referencedColumn='null', mappedBy=''}
2021-12-11 17:23:44,818 DEBUG Binding column: Ejb3Column{table=org.hibernate.mapping.Table(resource_instance), mappingColumn=null, insertable=true, updatable=true, unique=false}
2021-12-11 17:23:44,819 DEBUG Binding column: Ejb3Column{table=org.hibernate.mapping.Table(resource_instance), mappingColumn=meta_val, insertable=true, updatable=true, unique=false}
2021-12-11 17:23:44,820 DEBUG Binding column: Ejb3Column{table=org.hibernate.mapping.Table(resource_instance), mappingColumn=meta_name, insertable=true, updatable=true, unique=false}
2021-12-11 17:23:44,820 DEBUG Binding column: Ejb3JoinColumn{logicalColumnName='metadata_KEY', referencedColumn='null', mappedBy='null'}
2021-12-11 17:23:44,820 DEBUG Binding column: Ejb3JoinColumn{logicalColumnName='resource_instance_id', referencedColumn='', mappedBy=''}
2021-12-11 17:23:44,820 DEBUG Binding column: Ejb3JoinColumn{logicalColumnName='null', referencedColumn='null', mappedBy=''}
2021-12-11 17:23:44,820 DEBUG Collection role: com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity.metadata
2021-12-11 17:23:44,821 DEBUG Building property metadata
2021-12-11 17:23:44,822 DEBUG Binding column: Ejb3Column{table=org.hibernate.mapping.Table(resource_instance), mappingColumn=provider_name, insertable=true, updatable=true, unique=false}
2021-12-11 17:23:44,822 DEBUG MetadataSourceProcessor property provider with lazy=false
2021-12-11 17:23:44,822 DEBUG Attempting to locate auto-apply AttributeConverter for property [com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity:provider]
2021-12-11 17:23:44,822 DEBUG building SimpleValue for provider
2021-12-11 17:23:44,822 DEBUG Building property provider
2021-12-11 17:23:44,822 DEBUG Binding column: Ejb3Column{table=org.hibernate.mapping.Table(resource_instance), mappingColumn=provider_instance_id, insertable=true, updatable=true, unique=false}
2021-12-11 17:23:44,822 DEBUG MetadataSourceProcessor property providerInstanceId with lazy=false
2021-12-11 17:23:44,822 DEBUG Attempting to locate auto-apply AttributeConverter for property [com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity:providerInstanceId]
2021-12-11 17:23:44,822 DEBUG building SimpleValue for providerInstanceId
2021-12-11 17:23:44,822 DEBUG Building property providerInstanceId
2021-12-11 17:23:44,822 DEBUG Binding column: Ejb3Column{table=org.hibernate.mapping.Table(resource_instance), mappingColumn=resource_state, insertable=true, updatable=true, unique=false}
2021-12-11 17:23:44,822 DEBUG MetadataSourceProcessor property state with lazy=false
2021-12-11 17:23:44,822 DEBUG Attempting to locate auto-apply AttributeConverter for property [com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity:state]
2021-12-11 17:23:44,824 DEBUG building SimpleValue for state
2021-12-11 17:23:44,824 DEBUG Building property state
2021-12-11 17:23:44,825 DEBUG Binding column: Ejb3JoinColumn{logicalColumnName='template_id', referencedColumn='', mappedBy=''}
2021-12-11 17:23:44,825 DEBUG Binding column: Ejb3Column{table=org.hibernate.mapping.Table(resource_instance), mappingColumn=template, insertable=true, updatable=true, unique=false}
2021-12-11 17:23:44,827 DEBUG Building property template
2021-12-11 17:23:44,828 DEBUG Binding column: Ejb3Column{table=org.hibernate.mapping.Table(resource_instance), mappingColumn=template_revision_commit, insertable=true, updatable=true, unique=false}
2021-12-11 17:23:44,828 DEBUG MetadataSourceProcessor property templateRevision with lazy=false
2021-12-11 17:23:44,828 DEBUG Attempting to locate auto-apply AttributeConverter for property [com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity:templateRevision]
2021-12-11 17:23:44,828 DEBUG building SimpleValue for templateRevision
2021-12-11 17:23:44,828 DEBUG Building property templateRevision
2021-12-11 17:23:44,828 DEBUG Binding column: Ejb3Column{table=org.hibernate.mapping.Table(resource_instance), mappingColumn=template_revision_counter, insertable=true, updatable=true, unique=false}
2021-12-11 17:23:44,828 DEBUG MetadataSourceProcessor property templateRevisionCounter with lazy=false
2021-12-11 17:23:44,828 DEBUG Attempting to locate auto-apply AttributeConverter for property [com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity:templateRevisionCounter]
2021-12-11 17:23:44,828 DEBUG building SimpleValue for templateRevisionCounter
2021-12-11 17:23:44,828 DEBUG Building property templateRevisionCounter
2021-12-11 17:23:44,828 DEBUG Binding column: Ejb3Column{table=org.hibernate.mapping.Table(resource_instance), mappingColumn=updated_ts, insertable=true, updatable=true, unique=false}
2021-12-11 17:23:44,828 DEBUG MetadataSourceProcessor property updated with lazy=false
2021-12-11 17:23:44,828 DEBUG Attempting to locate auto-apply AttributeConverter for property [com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity:updated]
2021-12-11 17:23:44,828 DEBUG building SimpleValue for updated
2021-12-11 17:23:44,828 DEBUG Building property updated
2021-12-11 17:23:44,828 DEBUG Binding entity from annotated class: com.peterphi.servicemanager.service.db.entity.LetsEncryptCertificateEntity
2021-12-11 17:23:44,829 DEBUG Binding column: Ejb3DiscriminatorColumn{logicalColumnName'DTYPE', discriminatorTypeName='string'}
2021-12-11 17:23:44,829 DEBUG Import with entity name acme_ca_cert
2021-12-11 17:23:44,829 DEBUG Bind entity com.peterphi.servicemanager.service.db.entity.LetsEncryptCertificateEntity on table acme_ca_cert
2021-12-11 17:23:44,832 DEBUG Binding column: Ejb3Column{table=org.hibernate.mapping.Table(acme_ca_cert), mappingColumn=id, insertable=true, updatable=true, unique=false}
2021-12-11 17:23:44,833 DEBUG MetadataSourceProcessor property id with lazy=false
2021-12-11 17:23:44,833 DEBUG Attempting to locate auto-apply AttributeConverter for property [com.peterphi.servicemanager.service.db.entity.LetsEncryptCertificateEntity:id]
2021-12-11 17:23:44,833 DEBUG building SimpleValue for id
2021-12-11 17:23:44,833 DEBUG Building property id
2021-12-11 17:23:44,833 DEBUG Binding column: Ejb3Column{table=org.hibernate.mapping.Table(acme_ca_cert), mappingColumn=cert_utf8, insertable=true, updatable=true, unique=false}
2021-12-11 17:23:44,833 DEBUG MetadataSourceProcessor property cert with lazy=false
2021-12-11 17:23:44,833 DEBUG Attempting to locate auto-apply AttributeConverter for property [com.peterphi.servicemanager.service.db.entity.LetsEncryptCertificateEntity:cert]
2021-12-11 17:23:44,833 DEBUG building SimpleValue for cert
2021-12-11 17:23:44,833 DEBUG Building property cert
2021-12-11 17:23:44,833 DEBUG Binding column: Ejb3Column{table=org.hibernate.mapping.Table(acme_ca_cert), mappingColumn=chain_utf8, insertable=true, updatable=true, unique=false}
2021-12-11 17:23:44,833 DEBUG MetadataSourceProcessor property chain with lazy=false
2021-12-11 17:23:44,833 DEBUG Attempting to locate auto-apply AttributeConverter for property [com.peterphi.servicemanager.service.db.entity.LetsEncryptCertificateEntity:chain]
2021-12-11 17:23:44,833 DEBUG building SimpleValue for chain
2021-12-11 17:23:44,833 DEBUG Building property chain
2021-12-11 17:23:44,834 DEBUG Binding column: Ejb3Column{table=org.hibernate.mapping.Table(acme_ca_cert), mappingColumn=created_ts, insertable=true, updatable=true, unique=false}
2021-12-11 17:23:44,834 DEBUG MetadataSourceProcessor property created with lazy=false
2021-12-11 17:23:44,834 DEBUG Attempting to locate auto-apply AttributeConverter for property [com.peterphi.servicemanager.service.db.entity.LetsEncryptCertificateEntity:created]
2021-12-11 17:23:44,834 DEBUG building SimpleValue for created
2021-12-11 17:23:44,834 DEBUG Building property created
2021-12-11 17:23:44,834 DEBUG Binding column: Ejb3Column{table=org.hibernate.mapping.Table(acme_ca_cert), mappingColumn=expires_ts, insertable=true, updatable=true, unique=false}
2021-12-11 17:23:44,834 DEBUG MetadataSourceProcessor property expires with lazy=false
2021-12-11 17:23:44,834 DEBUG Attempting to locate auto-apply AttributeConverter for property [com.peterphi.servicemanager.service.db.entity.LetsEncryptCertificateEntity:expires]
2021-12-11 17:23:44,834 DEBUG building SimpleValue for expires
2021-12-11 17:23:44,834 DEBUG Building property expires
2021-12-11 17:23:44,834 DEBUG Binding column: Ejb3Column{table=org.hibernate.mapping.Table(acme_ca_cert), mappingColumn=keypair_utf8, insertable=true, updatable=true, unique=false}
2021-12-11 17:23:44,834 DEBUG MetadataSourceProcessor property keypair with lazy=false
2021-12-11 17:23:44,834 DEBUG Attempting to locate auto-apply AttributeConverter for property [com.peterphi.servicemanager.service.db.entity.LetsEncryptCertificateEntity:keypair]
2021-12-11 17:23:44,834 DEBUG building SimpleValue for keypair
2021-12-11 17:23:44,834 DEBUG Building property keypair
2021-12-11 17:23:44,834 DEBUG Binding column: Ejb3Column{table=org.hibernate.mapping.Table(acme_ca_cert), mappingColumn=mgmt_token, insertable=true, updatable=true, unique=false}
2021-12-11 17:23:44,834 DEBUG MetadataSourceProcessor property managementToken with lazy=false
2021-12-11 17:23:44,834 DEBUG Attempting to locate auto-apply AttributeConverter for property [com.peterphi.servicemanager.service.db.entity.LetsEncryptCertificateEntity:managementToken]
2021-12-11 17:23:44,834 DEBUG building SimpleValue for managementToken
2021-12-11 17:23:44,835 DEBUG Building property managementToken
2021-12-11 17:23:44,835 DEBUG Binding column: Ejb3Column{table=org.hibernate.mapping.Table(acme_ca_cert), mappingColumn=updated_ts, insertable=true, updatable=true, unique=false}
2021-12-11 17:23:44,835 DEBUG MetadataSourceProcessor property updated with lazy=false
2021-12-11 17:23:44,835 DEBUG Attempting to locate auto-apply AttributeConverter for property [com.peterphi.servicemanager.service.db.entity.LetsEncryptCertificateEntity:updated]
2021-12-11 17:23:44,835 DEBUG building SimpleValue for updated
2021-12-11 17:23:44,835 DEBUG Building property updated
2021-12-11 17:23:44,835 DEBUG Binding entity from annotated class: com.peterphi.servicemanager.service.db.entity.LetsEncryptAccountEntity
2021-12-11 17:23:44,835 DEBUG Binding column: Ejb3DiscriminatorColumn{logicalColumnName'DTYPE', discriminatorTypeName='string'}
2021-12-11 17:23:44,835 DEBUG Import with entity name acme_ca_account
2021-12-11 17:23:44,835 DEBUG Bind entity com.peterphi.servicemanager.service.db.entity.LetsEncryptAccountEntity on table acme_ca_account
2021-12-11 17:23:44,836 DEBUG Binding column: Ejb3Column{table=org.hibernate.mapping.Table(acme_ca_account), mappingColumn=id, insertable=true, updatable=true, unique=false}
2021-12-11 17:23:44,836 DEBUG MetadataSourceProcessor property id with lazy=false
2021-12-11 17:23:44,836 DEBUG Attempting to locate auto-apply AttributeConverter for property [com.peterphi.servicemanager.service.db.entity.LetsEncryptAccountEntity:id]
2021-12-11 17:23:44,836 DEBUG building SimpleValue for id
2021-12-11 17:23:44,836 DEBUG Building property id
2021-12-11 17:23:44,836 DEBUG Binding column: Ejb3Column{table=org.hibernate.mapping.Table(acme_ca_account), mappingColumn=created_ts, insertable=true, updatable=true, unique=false}
2021-12-11 17:23:44,836 DEBUG MetadataSourceProcessor property created with lazy=false
2021-12-11 17:23:44,836 DEBUG Attempting to locate auto-apply AttributeConverter for property [com.peterphi.servicemanager.service.db.entity.LetsEncryptAccountEntity:created]
2021-12-11 17:23:44,836 DEBUG building SimpleValue for created
2021-12-11 17:23:44,836 DEBUG Building property created
2021-12-11 17:23:44,836 DEBUG Binding column: Ejb3Column{table=org.hibernate.mapping.Table(acme_ca_account), mappingColumn=keypair_utf8, insertable=true, updatable=true, unique=false}
2021-12-11 17:23:44,836 DEBUG MetadataSourceProcessor property keypair with lazy=false
2021-12-11 17:23:44,837 DEBUG Attempting to locate auto-apply AttributeConverter for property [com.peterphi.servicemanager.service.db.entity.LetsEncryptAccountEntity:keypair]
2021-12-11 17:23:44,837 DEBUG building SimpleValue for keypair
2021-12-11 17:23:44,837 DEBUG Building property keypair
2021-12-11 17:23:44,837 DEBUG Binding column: Ejb3Column{table=org.hibernate.mapping.Table(acme_ca_account), mappingColumn=updated_ts, insertable=true, updatable=true, unique=false}
2021-12-11 17:23:44,837 DEBUG MetadataSourceProcessor property updated with lazy=false
2021-12-11 17:23:44,837 DEBUG Attempting to locate auto-apply AttributeConverter for property [com.peterphi.servicemanager.service.db.entity.LetsEncryptAccountEntity:updated]
2021-12-11 17:23:44,837 DEBUG building SimpleValue for updated
2021-12-11 17:23:44,837 DEBUG Building property updated
2021-12-11 17:23:44,839 DEBUG Starting fillSimpleValue for id
2021-12-11 17:23:44,839 DEBUG Starting fillSimpleValue for codeRevision
2021-12-11 17:23:44,839 DEBUG Starting fillSimpleValue for created
2021-12-11 17:23:44,839 DEBUG Starting fillSimpleValue for endpoint
2021-12-11 17:23:44,839 DEBUG Starting fillSimpleValue for managementToken
2021-12-11 17:23:44,839 DEBUG Starting fillSimpleValue for updated
2021-12-11 17:23:44,839 DEBUG Starting fillSimpleValue for id
2021-12-11 17:23:44,839 DEBUG Starting fillSimpleValue for created
2021-12-11 17:23:44,839 DEBUG Starting fillSimpleValue for latestRevision
2021-12-11 17:23:44,839 DEBUG Starting fillSimpleValue for revisions
2021-12-11 17:23:44,839 DEBUG Starting fillSimpleValue for updated
2021-12-11 17:23:44,839 DEBUG Starting fillSimpleValue for id
2021-12-11 17:23:44,839 DEBUG Starting fillSimpleValue for created
2021-12-11 17:23:44,839 DEBUG Starting fillSimpleValue for provider
2021-12-11 17:23:44,839 DEBUG Starting fillSimpleValue for providerInstanceId
2021-12-11 17:23:44,839 DEBUG Starting fillSimpleValue for state
2021-12-11 17:23:44,840 DEBUG Starting fillSimpleValue for templateRevision
2021-12-11 17:23:44,840 DEBUG Starting fillSimpleValue for templateRevisionCounter
2021-12-11 17:23:44,840 DEBUG Starting fillSimpleValue for updated
2021-12-11 17:23:44,840 DEBUG Starting fillSimpleValue for id
2021-12-11 17:23:44,840 DEBUG Starting fillSimpleValue for cert
2021-12-11 17:23:44,840 DEBUG Starting fillSimpleValue for chain
2021-12-11 17:23:44,840 DEBUG Starting fillSimpleValue for created
2021-12-11 17:23:44,840 DEBUG Starting fillSimpleValue for expires
2021-12-11 17:23:44,840 DEBUG Starting fillSimpleValue for keypair
2021-12-11 17:23:44,840 DEBUG Starting fillSimpleValue for managementToken
2021-12-11 17:23:44,840 DEBUG Starting fillSimpleValue for updated
2021-12-11 17:23:44,840 DEBUG Starting fillSimpleValue for id
2021-12-11 17:23:44,840 DEBUG Starting fillSimpleValue for created
2021-12-11 17:23:44,840 DEBUG Starting fillSimpleValue for keypair
2021-12-11 17:23:44,840 DEBUG Starting fillSimpleValue for updated
2021-12-11 17:23:44,844 DEBUG Forcing column [id] to be non-null as it is part of the primary key for table [service_instance]
2021-12-11 17:23:44,845 DEBUG Forcing column [id] to be non-null as it is part of the primary key for table [resource_template]
2021-12-11 17:23:44,845 DEBUG Forcing column [id] to be non-null as it is part of the primary key for table [resource_instance]
2021-12-11 17:23:44,845 DEBUG Forcing column [id] to be non-null as it is part of the primary key for table [acme_ca_cert]
2021-12-11 17:23:44,845 DEBUG Forcing column [id] to be non-null as it is part of the primary key for table [acme_ca_account]
2021-12-11 17:23:44,845 DEBUG Second pass for collection: com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity.metadata
2021-12-11 17:23:44,845 DEBUG Binding a collection of element: com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity.metadata
2021-12-11 17:23:44,850 DEBUG Attempting to locate auto-apply AttributeConverter for collection element [com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity.metadata]
2021-12-11 17:23:44,850 DEBUG building SimpleValue for null
2021-12-11 17:23:44,850 DEBUG Starting fillSimpleValue for null
2021-12-11 17:23:44,851 DEBUG Attempting to locate auto-apply AttributeConverter for collection key [com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity.metadata]
2021-12-11 17:23:44,851 DEBUG building SimpleValue for null
2021-12-11 17:23:44,851 DEBUG Starting fillSimpleValue for null
2021-12-11 17:23:44,851 DEBUG Forcing column [resource_instance_id] to be non-null as it is part of the primary key for table [resource_instance_metadata]
2021-12-11 17:23:44,851 DEBUG Forcing column [meta_name] to be non-null as it is part of the primary key for table [resource_instance_metadata]
2021-12-11 17:23:44,851 DEBUG Mapped collection key: resource_instance_id, index: meta_name, element: meta_val
2021-12-11 17:23:44,852 DEBUG Second pass for collection: com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity.instances
2021-12-11 17:23:44,852 DEBUG Binding a OneToMany: com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity.instances through a foreign key
2021-12-11 17:23:44,852 DEBUG Mapping collection: com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity.instances -> resource_instance
2021-12-11 17:23:44,852 DEBUG Retrieving property com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity.template
2021-12-11 17:23:44,853 DEBUG Mapped collection key: template_id, one-to-many: com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity
2021-12-11 17:23:44,853 DEBUG Resolving reference to class: com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity
2021-12-11 17:23:44,855 DEBUG Resolving reference to class: com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity
2021-12-11 17:23:44,857 DEBUG Resolving reference to class: com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity
2021-12-11 17:23:44,857 DEBUG Resolving reference to class: com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity
2021-12-11 17:23:44,900 DEBUG Building session factory
2021-12-11 17:23:44,901 DEBUG SessionFactory name : null
2021-12-11 17:23:44,901 DEBUG Automatic flush during beforeCompletion(): enabled
2021-12-11 17:23:44,902 DEBUG Automatic session close at end of transaction: disabled
2021-12-11 17:23:44,902 DEBUG Statistics: disabled
2021-12-11 17:23:44,902 DEBUG Deleted entity synthetic identifier rollback: disabled
2021-12-11 17:23:44,902 DEBUG Default entity-mode: pojo
2021-12-11 17:23:44,902 DEBUG Check Nullability in Core (should be disabled when Bean Validation is on): enabled
2021-12-11 17:23:44,902 DEBUG Allow initialization of lazy state outside session : disabled
2021-12-11 17:23:44,902 DEBUG Using BatchFetchStyle : LEGACY
2021-12-11 17:23:44,902 DEBUG Default batch fetch size: -1
2021-12-11 17:23:44,902 DEBUG Maximum outer join fetch depth: null
2021-12-11 17:23:44,902 DEBUG Default null ordering: NONE
2021-12-11 17:23:44,902 DEBUG Order SQL updates by primary key: disabled
2021-12-11 17:23:44,902 DEBUG Order SQL inserts for batching: disabled
2021-12-11 17:23:44,902 DEBUG multi-tenancy strategy : NONE
2021-12-11 17:23:44,902 DEBUG JTA Track by Thread: enabled
2021-12-11 17:23:44,902 DEBUG Query language substitutions: {}
2021-12-11 17:23:44,902 DEBUG JPA query language strict compliance: disabled
2021-12-11 17:23:44,902 DEBUG Named query checking : enabled
2021-12-11 17:23:44,902 DEBUG Second-level cache: enabled
2021-12-11 17:23:44,902 DEBUG Second-level query cache: disabled
2021-12-11 17:23:44,902 DEBUG Second-level query cache factory: org.hibernate.cache.internal.StandardQueryCacheFactory@431e86b1
2021-12-11 17:23:44,902 DEBUG Second-level cache region prefix: null
2021-12-11 17:23:44,902 DEBUG Optimize second-level cache for minimal puts: disabled
2021-12-11 17:23:44,902 DEBUG Structured second-level cache entries: disabled
2021-12-11 17:23:44,902 DEBUG Second-level cache direct-reference entries: disabled
2021-12-11 17:23:44,902 DEBUG Automatic eviction of collection cache: disabled
2021-12-11 17:23:44,902 DEBUG JDBC batch size: 15
2021-12-11 17:23:44,902 DEBUG JDBC batch updates for versioned data: enabled
2021-12-11 17:23:44,902 DEBUG Scrollable result sets: enabled
2021-12-11 17:23:44,902 DEBUG Wrap result sets: disabled
2021-12-11 17:23:44,902 DEBUG JDBC3 getGeneratedKeys(): enabled
2021-12-11 17:23:44,902 DEBUG JDBC result set fetch size: null
2021-12-11 17:23:44,903 DEBUG Connection release mode: AFTER_TRANSACTION
2021-12-11 17:23:44,903 DEBUG Generate SQL with comments: disabled
2021-12-11 17:23:45,037 DEBUG Session factory constructed with filter configurations : {}
2021-12-11 17:23:45,037 DEBUG Instantiating session factory with properties: {liquibase.changelog=/liquibase/changelog.xml, awt.toolkit=sun.awt.X11.XToolkit, file.encoding.pkg=sun.io, java.specification.version=1.8, sun.cpu.isalist=, sun.jnu.encoding=UTF-8, hibernate.dialect=org.hibernate.dialect.HSQLDialect, java.class.path=/home/travis/build/passed/petergeneric/stdlib/service-manager/service-manager/target/test-classes:/home/travis/build/passed/petergeneric/stdlib/service-manager/service-manager/target/classes:/home/travis/.m2/passed/com/microsoft/azure/azure-storage/4.0.0/azure-storage-4.0.0.jar:/home/travis/.m2/passed/com/fasterxml/jackson/core/jackson-core/2.6.0/jackson-core-2.6.0.jar:/home/travis/.m2/passed/org/apache/commons/commons-lang3/3.4/commons-lang3-3.4.jar:/home/travis/.m2/passed/com/microsoft/azure/azure-mgmt-dns/0.9.7/azure-mgmt-dns-0.9.7.jar:/home/travis/.m2/passed/com/microsoft/azure/azure-core/0.9.7/azure-core-0.9.7.jar:/home/travis/.m2/passed/commons-codec/commons-codec/1.10/commons-codec-1.10.jar:/home/travis/.m2/passed/javax/mail/mail/1.4.5/mail-1.4.5.jar:/home/travis/.m2/passed/javax/activation/activation/1.1/activation-1.1.jar:/home/travis/.m2/passed/com/sun/jersey/jersey-client/1.19/jersey-client-1.19.jar:/home/travis/.m2/passed/com/sun/jersey/jersey-core/1.19/jersey-core-1.19.jar:/home/travis/.m2/passed/com/sun/jersey/jersey-json/1.19/jersey-json-1.19.jar:/home/travis/.m2/passed/org/codehaus/jettison/jettison/1.1/jettison-1.1.jar:/home/travis/.m2/passed/com/sun/xml/bind/jaxb-impl/2.2.3-1/jaxb-impl-2.2.3-1.jar:/home/travis/.m2/passed/javax/xml/bind/jaxb-api/2.2.2/jaxb-api-2.2.2.jar:/home/travis/.m2/passed/javax/xml/stream/stax-api/1.0-2/stax-api-1.0-2.jar:/home/travis/.m2/passed/org/codehaus/jackson/jackson-core-asl/1.9.2/jackson-core-asl-1.9.2.jar:/home/travis/.m2/passed/org/codehaus/jackson/jackson-mapper-asl/1.9.2/jackson-mapper-asl-1.9.2.jar:/home/travis/.m2/passed/org/codehaus/jackson/jackson-xc/1.9.2/jackson-xc-1.9.2.jar:/home/travis/.m2/passed/org/apache/httpcomponents/httpclient/4.3.6/httpclient-4.3.6.jar:/home/travis/.m2/passed/org/apache/httpcomponents/httpcore/4.3.3/httpcore-4.3.3.jar:/home/travis/.m2/passed/javax/inject/javax.inject/1/javax.inject-1.jar:/home/travis/.m2/passed/commons-io/commons-io/2.4/commons-io-2.4.jar:/home/travis/.m2/passed/org/shredzone/acme4j/acme4j-client/0.8/acme4j-client-0.8.jar:/home/travis/.m2/passed/org/bitbucket/b_c/jose4j/0.5.2/jose4j-0.5.2.jar:/home/travis/.m2/passed/org/shredzone/acme4j/acme4j-utils/0.8/acme4j-utils-0.8.jar:/home/travis/.m2/passed/org/bouncycastle/bcpg-jdk15on/1.55/bcpg-jdk15on-1.55.jar:/home/travis/.m2/passed/org/bouncycastle/bcmail-jdk15on/1.55/bcmail-jdk15on-1.55.jar:/home/travis/.m2/passed/org/bouncycastle/bcpkix-jdk15on/1.55/bcpkix-jdk15on-1.55.jar:/home/travis/.m2/passed/org/bouncycastle/bcprov-jdk15on/1.55/bcprov-jdk15on-1.55.jar:/home/travis/.m2/passed/log4j/log4j/1.2.17/log4j-1.2.17.jar:/home/travis/build/passed/petergeneric/stdlib/service-manager/service-manager-api/target/classes:/home/travis/build/passed/petergeneric/stdlib/guice/common/target/classes:/home/travis/.m2/passed/ognl/ognl/3.1.10/ognl-3.1.10.jar:/home/travis/.m2/passed/org/jboss/resteasy/resteasy-jaxrs/3.1.4.Final/resteasy-jaxrs-3.1.4.Final.jar:/home/travis/.m2/passed/org/jboss/spec/javax/ws/rs/jboss-jaxrs-api_2.0_spec/1.0.1.Beta1/jboss-jaxrs-api_2.0_spec-1.0.1.Beta1.jar:/home/travis/.m2/passed/org/jboss/resteasy/resteasy-jaxrs-services/3.1.4.Final/resteasy-jaxrs-services-3.1.4.Final.jar:/home/travis/.m2/passed/org/jboss/spec/javax/annotation/jboss-annotations-api_1.2_spec/1.0.0.Final/jboss-annotations-api_1.2_spec-1.0.0.Final.jar:/home/travis/.m2/passed/net/jcip/jcip-annotations/1.0/jcip-annotations-1.0.jar:/home/travis/.m2/passed/org/jboss/resteasy/resteasy-client/3.1.4.Final/resteasy-client-3.1.4.Final.jar:/home/travis/.m2/passed/org/jboss/resteasy/resteasy-jaxb-provider/3.1.4.Final/resteasy-jaxb-provider-3.1.4.Final.jar:/home/travis/.m2/passed/org/jboss/resteasy/resteasy-jettison-provider/3.1.4.Final/resteasy-jettison-provider-3.1.4.Final.jar:/home/travis/.m2/passed/commons-discovery/commons-discovery/0.5/commons-discovery-0.5.jar:/home/travis/.m2/passed/xml-apis/xml-apis/1.0.b2/xml-apis-1.0.b2.jar:/home/travis/.m2/passed/io/dropwizard/metrics/metrics-core/3.2.3/metrics-core-3.2.3.jar:/home/travis/.m2/passed/io/dropwizard/metrics/metrics-healthchecks/3.2.3/metrics-healthchecks-3.2.3.jar:/home/travis/.m2/passed/io/dropwizard/metrics/metrics-jvm/3.2.3/metrics-jvm-3.2.3.jar:/home/travis/.m2/passed/io/dropwizard/metrics/metrics-log4j/3.2.3/metrics-log4j-3.2.3.jar:/home/travis/build/passed/petergeneric/stdlib/stdlib/target/classes:/home/travis/.m2/passed/commons-lang/commons-lang/2.6/commons-lang-2.6.jar:/home/travis/.m2/passed/commons-logging/commons-logging/1.1.1/commons-logging-1.1.1.jar:/home/travis/.m2/passed/joda-time/joda-time/2.7/joda-time-2.7.jar:/home/travis/.m2/passed/org/eclipse/persistence/org.eclipse.persistence.moxy/2.7.0/org.eclipse.persistence.moxy-2.7.0.jar:/home/travis/.m2/passed/org/eclipse/persistence/org.eclipse.persistence.core/2.7.0/org.eclipse.persistence.core-2.7.0.jar:/home/travis/.m2/passed/org/eclipse/persistence/org.eclipse.persistence.asm/2.7.0/org.eclipse.persistence.asm-2.7.0.jar:/home/travis/.m2/passed/javax/validation/validation-api/1.1.0.Final/validation-api-1.1.0.Final.jar:/home/travis/.m2/passed/org/glassfish/javax.json/1.0.4/javax.json-1.0.4.jar:/home/travis/build/passed/petergeneric/stdlib/guice/hibernate/target/classes:/home/travis/.m2/passed/org/hibernate/hibernate-core/5.2.11.Final/hibernate-core-5.2.11.Final.jar:/home/travis/.m2/passed/org/jboss/logging/jboss-logging/3.3.0.Final/jboss-logging-3.3.0.Final.jar:/home/travis/.m2/passed/org/hibernate/javax/persistence/hibernate-jpa-2.1-api/1.0.0.Final/hibernate-jpa-2.1-api-1.0.0.Final.jar:/home/travis/.m2/passed/org/javassist/javassist/3.20.0-GA/javassist-3.20.0-GA.jar:/home/travis/.m2/passed/antlr/antlr/2.7.7/antlr-2.7.7.jar:/home/travis/.m2/passed/org/jboss/spec/javax/transaction/jboss-transaction-api_1.2_spec/1.0.1.Final/jboss-transaction-api_1.2_spec-1.0.1.Final.jar:/home/travis/.m2/passed/org/jboss/jandex/2.0.3.Final/jandex-2.0.3.Final.jar:/home/travis/.m2/passed/com/fasterxml/classmate/1.3.0/classmate-1.3.0.jar:/home/travis/.m2/passed/dom4j/dom4j/1.6.1/dom4j-1.6.1.jar:/home/travis/.m2/passed/org/hibernate/common/hibernate-commons-annotations/5.0.1.Final/hibernate-commons-annotations-5.0.1.Final.jar:/home/travis/.m2/passed/org/sonatype/sisu/sisu-guice/3.2.6/sisu-guice-3.2.6.jar:/home/travis/.m2/passed/aopalliance/aopalliance/1.0/aopalliance-1.0.jar:/home/travis/.m2/passed/com/google/guava/guava/16.0.1/guava-16.0.1.jar:/home/travis/.m2/passed/org/sonatype/sisu/inject/guice-multibindings/3.2.6/guice-multibindings-3.2.6.jar:/home/travis/.m2/passed/org/apache/xbean/xbean-finder/4.4/xbean-finder-4.4.jar:/home/travis/.m2/passed/org/apache/xbean/xbean-bundleutils/4.4/xbean-bundleutils-4.4.jar:/home/travis/.m2/passed/org/apache/xbean/xbean-asm-util/4.4/xbean-asm-util-4.4.jar:/home/travis/.m2/passed/org/ow2/asm/asm-all/5.0.4/asm-all-5.0.4.jar:/home/travis/build/passed/petergeneric/stdlib/guice/liquibase/target/classes:/home/travis/build/passed/petergeneric/stdlib/guice/webapp/target/classes:/home/travis/build/passed/petergeneric/stdlib/user-manager/api/target/classes:/home/travis/.m2/passed/org/thymeleaf/thymeleaf/2.1.4.RELEASE/thymeleaf-2.1.4.RELEASE.jar:/home/travis/.m2/passed/org/unbescape/unbescape/1.1.0.RELEASE/unbescape-1.1.0.RELEASE.jar:/home/travis/.m2/passed/org/liquibase/liquibase-core/3.5.3/liquibase-core-3.5.3.jar:/home/travis/.m2/passed/org/yaml/snakeyaml/1.17/snakeyaml-1.17.jar:/home/travis/build/passed/petergeneric/stdlib/guice/metrics/target/classes:/home/travis/.m2/passed/io/dropwizard/metrics/metrics-json/3.2.3/metrics-json-3.2.3.jar:/home/travis/build/passed/petergeneric/stdlib/rules/target/classes:/home/travis/build/passed/petergeneric/stdlib/guice/testing/target/classes:/home/travis/.m2/passed/org/mockito/mockito-core/1.10.19/mockito-core-1.10.19.jar:/home/travis/.m2/passed/org/objenesis/objenesis/2.1/objenesis-2.1.jar:/home/travis/build/passed/petergeneric/stdlib/azure/target/classes:/home/travis/.m2/passed/com/microsoft/azure/azure/1.0.0-beta2/azure-1.0.0-beta2.jar:/home/travis/.m2/passed/com/microsoft/azure/azure-client-runtime/1.0.0-beta2/azure-client-runtime-1.0.0-beta2.jar:/home/travis/.m2/passed/com/microsoft/rest/client-runtime/1.0.0-beta2/client-runtime-1.0.0-beta2.jar:/home/travis/.m2/passed/com/squareup/retrofit2/retrofit/2.0.2/retrofit-2.0.2.jar:/home/travis/.m2/passed/com/squareup/okhttp3/okhttp/3.3.1/okhttp-3.3.1.jar:/home/travis/.m2/passed/com/squareup/okio/okio/1.8.0/okio-1.8.0.jar:/home/travis/.m2/passed/com/squareup/okhttp3/logging-interceptor/3.3.1/logging-interceptor-3.3.1.jar:/home/travis/.m2/passed/com/squareup/okhttp3/okhttp-urlconnection/3.3.1/okhttp-urlconnection-3.3.1.jar:/home/travis/.m2/passed/com/squareup/retrofit2/converter-jackson/2.0.2/converter-jackson-2.0.2.jar:/home/travis/.m2/passed/com/fasterxml/jackson/core/jackson-databind/2.7.2/jackson-databind-2.7.2.jar:/home/travis/.m2/passed/com/fasterxml/jackson/datatype/jackson-datatype-joda/2.7.2/jackson-datatype-joda-2.7.2.jar:/home/travis/.m2/passed/com/fasterxml/jackson/core/jackson-annotations/2.7.0/jackson-annotations-2.7.0.jar:/home/travis/.m2/passed/com/microsoft/azure/azure-client-authentication/1.0.0-beta2/azure-client-authentication-1.0.0-beta2.jar:/home/travis/.m2/passed/com/microsoft/azure/adal4j/1.1.2/adal4j-1.1.2.jar:/home/travis/.m2/passed/com/nimbusds/oauth2-oidc-sdk/4.5/oauth2-oidc-sdk-4.5.jar:/home/travis/.m2/passed/net/minidev/json-smart/1.1.1/json-smart-1.1.1.jar:/home/travis/.m2/passed/com/nimbusds/lang-tag/1.4/lang-tag-1.4.jar:/home/travis/.m2/passed/com/nimbusds/nimbus-jose-jwt/3.1.2/nimbus-jose-jwt-3.1.2.jar:/home/travis/.m2/passed/com/google/code/gson/gson/2.2.4/gson-2.2.4.jar:/home/travis/.m2/passed/com/microsoft/azure/azure-mgmt-resources/1.0.0-beta2/azure-mgmt-resources-1.0.0-beta2.jar:/home/travis/.m2/passed/com/microsoft/azure/azure-mgmt-storage/1.0.0-beta2/azure-mgmt-storage-1.0.0-beta2.jar:/home/travis/.m2/passed/com/microsoft/azure/azure-mgmt-network/1.0.0-beta2/azure-mgmt-network-1.0.0-beta2.jar:/home/travis/.m2/passed/com/microsoft/azure/azure-mgmt-compute/1.0.0-beta2/azure-mgmt-compute-1.0.0-beta2.jar:/home/travis/.m2/passed/javax/servlet/servlet-api/2.5/servlet-api-2.5.jar:/home/travis/.m2/passed/junit/junit/4.12/junit-4.12.jar:/home/travis/.m2/passed/org/hamcrest/hamcrest-core/1.3/hamcrest-core-1.3.jar:/home/travis/build/passed/petergeneric/stdlib/guice/hibernate-testing/target/classes:/home/travis/.m2/passed/org/dbunit/dbunit/2.5.1/dbunit-2.5.1.jar:/home/travis/.m2/passed/commons-collections/commons-collections/3.2.1/commons-collections-3.2.1.jar:/home/travis/.m2/passed/org/apache/poi/poi-ooxml/3.11/poi-ooxml-3.11.jar:/home/travis/.m2/passed/org/apache/poi/poi/3.11/poi-3.11.jar:/home/travis/.m2/passed/org/apache/poi/poi-ooxml-schemas/3.11/poi-ooxml-schemas-3.11.jar:/home/travis/.m2/passed/org/apache/xmlbeans/xmlbeans/2.6.0/xmlbeans-2.6.0.jar:/home/travis/.m2/passed/stax/stax-api/1.0.1/stax-api-1.0.1.jar:/home/travis/.m2/passed/org/hsqldb/hsqldb/2.4.0/hsqldb-2.4.0.jar:/home/travis/.m2/passed/org/slf4j/slf4j-api/1.7.7/slf4j-api-1.7.7.jar:/home/travis/.m2/passed/org/slf4j/slf4j-jdk14/1.7.7/slf4j-jdk14-1.7.7.jar:, java.vm.vendor=Oracle Corporation, sun.arch.data.model=64, java.vendor.url=http://java.oracle.com/, user.timezone=UTC, os.name=Linux, java.vm.specification.version=1.8, user.country=US, sun.java.launcher=SUN_STANDARD, sun.boot.library.path=/usr/lib/jvm/java-8-oracle/jre/lib/amd64, sun.java.command=/home/travis/build/passed/petergeneric/stdlib/service-manager/service-manager/target/surefire/surefirebooter4402798197414575766.jar /home/travis/build/passed/petergeneric/stdlib/service-manager/service-manager/target/surefire/surefire1361221158825469667tmp /home/travis/build/passed/petergeneric/stdlib/service-manager/service-manager/target/surefire/surefire_113326406017430567911tmp, surefire.test.class.path=/home/travis/build/passed/petergeneric/stdlib/service-manager/service-manager/target/test-classes:/home/travis/build/passed/petergeneric/stdlib/service-manager/service-manager/target/classes:/home/travis/.m2/passed/com/microsoft/azure/azure-storage/4.0.0/azure-storage-4.0.0.jar:/home/travis/.m2/passed/com/fasterxml/jackson/core/jackson-core/2.6.0/jackson-core-2.6.0.jar:/home/travis/.m2/passed/org/apache/commons/commons-lang3/3.4/commons-lang3-3.4.jar:/home/travis/.m2/passed/com/microsoft/azure/azure-mgmt-dns/0.9.7/azure-mgmt-dns-0.9.7.jar:/home/travis/.m2/passed/com/microsoft/azure/azure-core/0.9.7/azure-core-0.9.7.jar:/home/travis/.m2/passed/commons-codec/commons-codec/1.10/commons-codec-1.10.jar:/home/travis/.m2/passed/javax/mail/mail/1.4.5/mail-1.4.5.jar:/home/travis/.m2/passed/javax/activation/activation/1.1/activation-1.1.jar:/home/travis/.m2/passed/com/sun/jersey/jersey-client/1.19/jersey-client-1.19.jar:/home/travis/.m2/passed/com/sun/jersey/jersey-core/1.19/jersey-core-1.19.jar:/home/travis/.m2/passed/com/sun/jersey/jersey-json/1.19/jersey-json-1.19.jar:/home/travis/.m2/passed/org/codehaus/jettison/jettison/1.1/jettison-1.1.jar:/home/travis/.m2/passed/com/sun/xml/bind/jaxb-impl/2.2.3-1/jaxb-impl-2.2.3-1.jar:/home/travis/.m2/passed/javax/xml/bind/jaxb-api/2.2.2/jaxb-api-2.2.2.jar:/home/travis/.m2/passed/javax/xml/stream/stax-api/1.0-2/stax-api-1.0-2.jar:/home/travis/.m2/passed/org/codehaus/jackson/jackson-core-asl/1.9.2/jackson-core-asl-1.9.2.jar:/home/travis/.m2/passed/org/codehaus/jackson/jackson-mapper-asl/1.9.2/jackson-mapper-asl-1.9.2.jar:/home/travis/.m2/passed/org/codehaus/jackson/jackson-xc/1.9.2/jackson-xc-1.9.2.jar:/home/travis/.m2/passed/org/apache/httpcomponents/httpclient/4.3.6/httpclient-4.3.6.jar:/home/travis/.m2/passed/org/apache/httpcomponents/httpcore/4.3.3/httpcore-4.3.3.jar:/home/travis/.m2/passed/javax/inject/javax.inject/1/javax.inject-1.jar:/home/travis/.m2/passed/commons-io/commons-io/2.4/commons-io-2.4.jar:/home/travis/.m2/passed/org/shredzone/acme4j/acme4j-client/0.8/acme4j-client-0.8.jar:/home/travis/.m2/passed/org/bitbucket/b_c/jose4j/0.5.2/jose4j-0.5.2.jar:/home/travis/.m2/passed/org/shredzone/acme4j/acme4j-utils/0.8/acme4j-utils-0.8.jar:/home/travis/.m2/passed/org/bouncycastle/bcpg-jdk15on/1.55/bcpg-jdk15on-1.55.jar:/home/travis/.m2/passed/org/bouncycastle/bcmail-jdk15on/1.55/bcmail-jdk15on-1.55.jar:/home/travis/.m2/passed/org/bouncycastle/bcpkix-jdk15on/1.55/bcpkix-jdk15on-1.55.jar:/home/travis/.m2/passed/org/bouncycastle/bcprov-jdk15on/1.55/bcprov-jdk15on-1.55.jar:/home/travis/.m2/passed/log4j/log4j/1.2.17/log4j-1.2.17.jar:/home/travis/build/passed/petergeneric/stdlib/service-manager/service-manager-api/target/classes:/home/travis/build/passed/petergeneric/stdlib/guice/common/target/classes:/home/travis/.m2/passed/ognl/ognl/3.1.10/ognl-3.1.10.jar:/home/travis/.m2/passed/org/jboss/resteasy/resteasy-jaxrs/3.1.4.Final/resteasy-jaxrs-3.1.4.Final.jar:/home/travis/.m2/passed/org/jboss/spec/javax/ws/rs/jboss-jaxrs-api_2.0_spec/1.0.1.Beta1/jboss-jaxrs-api_2.0_spec-1.0.1.Beta1.jar:/home/travis/.m2/passed/org/jboss/resteasy/resteasy-jaxrs-services/3.1.4.Final/resteasy-jaxrs-services-3.1.4.Final.jar:/home/travis/.m2/passed/org/jboss/spec/javax/annotation/jboss-annotations-api_1.2_spec/1.0.0.Final/jboss-annotations-api_1.2_spec-1.0.0.Final.jar:/home/travis/.m2/passed/net/jcip/jcip-annotations/1.0/jcip-annotations-1.0.jar:/home/travis/.m2/passed/org/jboss/resteasy/resteasy-client/3.1.4.Final/resteasy-client-3.1.4.Final.jar:/home/travis/.m2/passed/org/jboss/resteasy/resteasy-jaxb-provider/3.1.4.Final/resteasy-jaxb-provider-3.1.4.Final.jar:/home/travis/.m2/passed/org/jboss/resteasy/resteasy-jettison-provider/3.1.4.Final/resteasy-jettison-provider-3.1.4.Final.jar:/home/travis/.m2/passed/commons-discovery/commons-discovery/0.5/commons-discovery-0.5.jar:/home/travis/.m2/passed/xml-apis/xml-apis/1.0.b2/xml-apis-1.0.b2.jar:/home/travis/.m2/passed/io/dropwizard/metrics/metrics-core/3.2.3/metrics-core-3.2.3.jar:/home/travis/.m2/passed/io/dropwizard/metrics/metrics-healthchecks/3.2.3/metrics-healthchecks-3.2.3.jar:/home/travis/.m2/passed/io/dropwizard/metrics/metrics-jvm/3.2.3/metrics-jvm-3.2.3.jar:/home/travis/.m2/passed/io/dropwizard/metrics/metrics-log4j/3.2.3/metrics-log4j-3.2.3.jar:/home/travis/build/passed/petergeneric/stdlib/stdlib/target/classes:/home/travis/.m2/passed/commons-lang/commons-lang/2.6/commons-lang-2.6.jar:/home/travis/.m2/passed/commons-logging/commons-logging/1.1.1/commons-logging-1.1.1.jar:/home/travis/.m2/passed/joda-time/joda-time/2.7/joda-time-2.7.jar:/home/travis/.m2/passed/org/eclipse/persistence/org.eclipse.persistence.moxy/2.7.0/org.eclipse.persistence.moxy-2.7.0.jar:/home/travis/.m2/passed/org/eclipse/persistence/org.eclipse.persistence.core/2.7.0/org.eclipse.persistence.core-2.7.0.jar:/home/travis/.m2/passed/org/eclipse/persistence/org.eclipse.persistence.asm/2.7.0/org.eclipse.persistence.asm-2.7.0.jar:/home/travis/.m2/passed/javax/validation/validation-api/1.1.0.Final/validation-api-1.1.0.Final.jar:/home/travis/.m2/passed/org/glassfish/javax.json/1.0.4/javax.json-1.0.4.jar:/home/travis/build/passed/petergeneric/stdlib/guice/hibernate/target/classes:/home/travis/.m2/passed/org/hibernate/hibernate-core/5.2.11.Final/hibernate-core-5.2.11.Final.jar:/home/travis/.m2/passed/org/jboss/logging/jboss-logging/3.3.0.Final/jboss-logging-3.3.0.Final.jar:/home/travis/.m2/passed/org/hibernate/javax/persistence/hibernate-jpa-2.1-api/1.0.0.Final/hibernate-jpa-2.1-api-1.0.0.Final.jar:/home/travis/.m2/passed/org/javassist/javassist/3.20.0-GA/javassist-3.20.0-GA.jar:/home/travis/.m2/passed/antlr/antlr/2.7.7/antlr-2.7.7.jar:/home/travis/.m2/passed/org/jboss/spec/javax/transaction/jboss-transaction-api_1.2_spec/1.0.1.Final/jboss-transaction-api_1.2_spec-1.0.1.Final.jar:/home/travis/.m2/passed/org/jboss/jandex/2.0.3.Final/jandex-2.0.3.Final.jar:/home/travis/.m2/passed/com/fasterxml/classmate/1.3.0/classmate-1.3.0.jar:/home/travis/.m2/passed/dom4j/dom4j/1.6.1/dom4j-1.6.1.jar:/home/travis/.m2/passed/org/hibernate/common/hibernate-commons-annotations/5.0.1.Final/hibernate-commons-annotations-5.0.1.Final.jar:/home/travis/.m2/passed/org/sonatype/sisu/sisu-guice/3.2.6/sisu-guice-3.2.6.jar:/home/travis/.m2/passed/aopalliance/aopalliance/1.0/aopalliance-1.0.jar:/home/travis/.m2/passed/com/google/guava/guava/16.0.1/guava-16.0.1.jar:/home/travis/.m2/passed/org/sonatype/sisu/inject/guice-multibindings/3.2.6/guice-multibindings-3.2.6.jar:/home/travis/.m2/passed/org/apache/xbean/xbean-finder/4.4/xbean-finder-4.4.jar:/home/travis/.m2/passed/org/apache/xbean/xbean-bundleutils/4.4/xbean-bundleutils-4.4.jar:/home/travis/.m2/passed/org/apache/xbean/xbean-asm-util/4.4/xbean-asm-util-4.4.jar:/home/travis/.m2/passed/org/ow2/asm/asm-all/5.0.4/asm-all-5.0.4.jar:/home/travis/build/passed/petergeneric/stdlib/guice/liquibase/target/classes:/home/travis/build/passed/petergeneric/stdlib/guice/webapp/target/classes:/home/travis/build/passed/petergeneric/stdlib/user-manager/api/target/classes:/home/travis/.m2/passed/org/thymeleaf/thymeleaf/2.1.4.RELEASE/thymeleaf-2.1.4.RELEASE.jar:/home/travis/.m2/passed/org/unbescape/unbescape/1.1.0.RELEASE/unbescape-1.1.0.RELEASE.jar:/home/travis/.m2/passed/org/liquibase/liquibase-core/3.5.3/liquibase-core-3.5.3.jar:/home/travis/.m2/passed/org/yaml/snakeyaml/1.17/snakeyaml-1.17.jar:/home/travis/build/passed/petergeneric/stdlib/guice/metrics/target/classes:/home/travis/.m2/passed/io/dropwizard/metrics/metrics-json/3.2.3/metrics-json-3.2.3.jar:/home/travis/build/passed/petergeneric/stdlib/rules/target/classes:/home/travis/build/passed/petergeneric/stdlib/guice/testing/target/classes:/home/travis/.m2/passed/org/mockito/mockito-core/1.10.19/mockito-core-1.10.19.jar:/home/travis/.m2/passed/org/objenesis/objenesis/2.1/objenesis-2.1.jar:/home/travis/build/passed/petergeneric/stdlib/azure/target/classes:/home/travis/.m2/passed/com/microsoft/azure/azure/1.0.0-beta2/azure-1.0.0-beta2.jar:/home/travis/.m2/passed/com/microsoft/azure/azure-client-runtime/1.0.0-beta2/azure-client-runtime-1.0.0-beta2.jar:/home/travis/.m2/passed/com/microsoft/rest/client-runtime/1.0.0-beta2/client-runtime-1.0.0-beta2.jar:/home/travis/.m2/passed/com/squareup/retrofit2/retrofit/2.0.2/retrofit-2.0.2.jar:/home/travis/.m2/passed/com/squareup/okhttp3/okhttp/3.3.1/okhttp-3.3.1.jar:/home/travis/.m2/passed/com/squareup/okio/okio/1.8.0/okio-1.8.0.jar:/home/travis/.m2/passed/com/squareup/okhttp3/logging-interceptor/3.3.1/logging-interceptor-3.3.1.jar:/home/travis/.m2/passed/com/squareup/okhttp3/okhttp-urlconnection/3.3.1/okhttp-urlconnection-3.3.1.jar:/home/travis/.m2/passed/com/squareup/retrofit2/converter-jackson/2.0.2/converter-jackson-2.0.2.jar:/home/travis/.m2/passed/com/fasterxml/jackson/core/jackson-databind/2.7.2/jackson-databind-2.7.2.jar:/home/travis/.m2/passed/com/fasterxml/jackson/datatype/jackson-datatype-joda/2.7.2/jackson-datatype-joda-2.7.2.jar:/home/travis/.m2/passed/com/fasterxml/jackson/core/jackson-annotations/2.7.0/jackson-annotations-2.7.0.jar:/home/travis/.m2/passed/com/microsoft/azure/azure-client-authentication/1.0.0-beta2/azure-client-authentication-1.0.0-beta2.jar:/home/travis/.m2/passed/com/microsoft/azure/adal4j/1.1.2/adal4j-1.1.2.jar:/home/travis/.m2/passed/com/nimbusds/oauth2-oidc-sdk/4.5/oauth2-oidc-sdk-4.5.jar:/home/travis/.m2/passed/net/minidev/json-smart/1.1.1/json-smart-1.1.1.jar:/home/travis/.m2/passed/com/nimbusds/lang-tag/1.4/lang-tag-1.4.jar:/home/travis/.m2/passed/com/nimbusds/nimbus-jose-jwt/3.1.2/nimbus-jose-jwt-3.1.2.jar:/home/travis/.m2/passed/com/google/code/gson/gson/2.2.4/gson-2.2.4.jar:/home/travis/.m2/passed/com/microsoft/azure/azure-mgmt-resources/1.0.0-beta2/azure-mgmt-resources-1.0.0-beta2.jar:/home/travis/.m2/passed/com/microsoft/azure/azure-mgmt-storage/1.0.0-beta2/azure-mgmt-storage-1.0.0-beta2.jar:/home/travis/.m2/passed/com/microsoft/azure/azure-mgmt-network/1.0.0-beta2/azure-mgmt-network-1.0.0-beta2.jar:/home/travis/.m2/passed/com/microsoft/azure/azure-mgmt-compute/1.0.0-beta2/azure-mgmt-compute-1.0.0-beta2.jar:/home/travis/.m2/passed/javax/servlet/servlet-api/2.5/servlet-api-2.5.jar:/home/travis/.m2/passed/junit/junit/4.12/junit-4.12.jar:/home/travis/.m2/passed/org/hamcrest/hamcrest-core/1.3/hamcrest-core-1.3.jar:/home/travis/build/passed/petergeneric/stdlib/guice/hibernate-testing/target/classes:/home/travis/.m2/passed/org/dbunit/dbunit/2.5.1/dbunit-2.5.1.jar:/home/travis/.m2/passed/commons-collections/commons-collections/3.2.1/commons-collections-3.2.1.jar:/home/travis/.m2/passed/org/apache/poi/poi-ooxml/3.11/poi-ooxml-3.11.jar:/home/travis/.m2/passed/org/apache/poi/poi/3.11/poi-3.11.jar:/home/travis/.m2/passed/org/apache/poi/poi-ooxml-schemas/3.11/poi-ooxml-schemas-3.11.jar:/home/travis/.m2/passed/org/apache/xmlbeans/xmlbeans/2.6.0/xmlbeans-2.6.0.jar:/home/travis/.m2/passed/stax/stax-api/1.0.1/stax-api-1.0.1.jar:/home/travis/.m2/passed/org/hsqldb/hsqldb/2.4.0/hsqldb-2.4.0.jar:/home/travis/.m2/passed/org/slf4j/slf4j-api/1.7.7/slf4j-api-1.7.7.jar:/home/travis/.m2/passed/org/slf4j/slf4j-jdk14/1.7.7/slf4j-jdk14-1.7.7.jar:, sun.cpu.endian=little, user.home=/home/travis, user.language=en, java.specification.vendor=Oracle Corporation, java.home=/usr/lib/jvm/java-8-oracle/jre, basedir=/home/travis/build/passed/petergeneric/stdlib/service-manager/service-manager, file.separator=/, line.separator=
, java.vm.specification.vendor=Oracle Corporation, java.specification.name=Java Platform API Specification, java.awt.graphicsenv=sun.awt.X11GraphicsEnvironment, surefire.real.class.path=/home/travis/build/passed/petergeneric/stdlib/service-manager/service-manager/target/surefire/surefirebooter4402798197414575766.jar, sun.boot.class.path=/usr/lib/jvm/java-8-oracle/jre/lib/resources.jar:/usr/lib/jvm/java-8-oracle/jre/lib/rt.jar:/usr/lib/jvm/java-8-oracle/jre/lib/sunrsasign.jar:/usr/lib/jvm/java-8-oracle/jre/lib/jsse.jar:/usr/lib/jvm/java-8-oracle/jre/lib/jce.jar:/usr/lib/jvm/java-8-oracle/jre/lib/charsets.jar:/usr/lib/jvm/java-8-oracle/jre/lib/jfr.jar:/usr/lib/jvm/java-8-oracle/jre/classes, sun.management.compiler=HotSpot 64-Bit Tiered Compilers, java.runtime.version=1.8.0_144-b01, user.name=travis, path.separator=:, hibernate.connection.username=sa, os.version=4.15.0-109-generic, java.endorsed.dirs=/usr/lib/jvm/java-8-oracle/jre/lib/endorsed, hibernate.properties=embedded, java.runtime.name=Java(TM) SE Runtime Environment, hibernate.connection.url=jdbc:hsqldb:mem:testdb, file.encoding=UTF-8, java.vm.name=Java HotSpot(TM) 64-Bit Server VM, hibernate.show_sql=false, hibernate.allow-hbm2ddl-create=true, hibernate.current_session_context_class=thread, localRepository=/home/travis/.m2/passed, hibernate.connection.driver_class=org.hsqldb.jdbcDriver, java.vendor.url.bug=http://bugreport.sun.com/bugreport/, java.io.tmpdir=/tmp, liquibase.action=UPDATE, java.version=1.8.0_144, user.dir=/home/travis/build/passed/petergeneric/stdlib/service-manager/service-manager, hibernate.database-allows-order-by-without-select=false, os.arch=amd64, java.vm.specification.name=Java Virtual Machine Specification, hibernate.connection.password=****, java.awt.printerjob=sun.print.PSPrinterJob, sun.os.patch.level=unknown, hibernate.boot.CfgXmlAccessService.key=org.hibernate.boot.cfgxml.spi.LoadedConfig@101ca8da, java.library.path=/usr/java/packages/lib/amd64:/usr/lib64:/lib64:/lib:/usr/lib, java.vm.info=mixed mode, java.vendor=Oracle Corporation, java.vm.version=25.144-b01, hibernate.connection.readOnly=false, hibernate.bytecode.use_reflection_optimizer=false, https.protocols=TLSv1.2, java.ext.dirs=/usr/lib/jvm/java-8-oracle/jre/lib/ext:/usr/java/packages/lib/ext, sun.io.unicode.encoding=UnicodeLittle, java.class.version=52.0}
2021-12-11 17:23:45,060 DEBUG Unable to acquire Bean Validation ValidatorFactory, skipping activation
2021-12-11 17:23:45,060 DEBUG Skipping JACC integration as it was not enabled
2021-12-11 17:23:45,065 DEBUG Instantiated session factory
2021-12-11 17:23:45,116 DEBUG Not known whether passed class name [com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity] is safe
2021-12-11 17:23:45,116 DEBUG No temp ClassLoader provided; using live ClassLoader for loading potentially unsafe class : com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity
2021-12-11 17:23:45,163 DEBUG Not known whether passed class name [com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity] is safe
2021-12-11 17:23:45,163 DEBUG No temp ClassLoader provided; using live ClassLoader for loading potentially unsafe class : com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity
2021-12-11 17:23:45,229 DEBUG Not known whether passed class name [com.peterphi.servicemanager.service.db.entity.LetsEncryptAccountEntity] is safe
2021-12-11 17:23:45,229 DEBUG No temp ClassLoader provided; using live ClassLoader for loading potentially unsafe class : com.peterphi.servicemanager.service.db.entity.LetsEncryptAccountEntity
2021-12-11 17:23:45,229 DEBUG Not known whether passed class name [com.peterphi.servicemanager.service.db.entity.LetsEncryptAccountEntity] is safe
2021-12-11 17:23:45,229 DEBUG No temp ClassLoader provided; using live ClassLoader for loading potentially unsafe class : com.peterphi.servicemanager.service.db.entity.LetsEncryptAccountEntity
2021-12-11 17:23:45,234 DEBUG Not known whether passed class name [com.peterphi.servicemanager.service.db.entity.LetsEncryptCertificateEntity] is safe
2021-12-11 17:23:45,234 DEBUG No temp ClassLoader provided; using live ClassLoader for loading potentially unsafe class : com.peterphi.servicemanager.service.db.entity.LetsEncryptCertificateEntity
2021-12-11 17:23:45,234 DEBUG Not known whether passed class name [com.peterphi.servicemanager.service.db.entity.LetsEncryptCertificateEntity] is safe
2021-12-11 17:23:45,234 DEBUG No temp ClassLoader provided; using live ClassLoader for loading potentially unsafe class : com.peterphi.servicemanager.service.db.entity.LetsEncryptCertificateEntity
2021-12-11 17:23:45,240 DEBUG Not known whether passed class name [com.peterphi.servicemanager.service.db.entity.ServiceInstanceEntity] is safe
2021-12-11 17:23:45,240 DEBUG No temp ClassLoader provided; using live ClassLoader for loading potentially unsafe class : com.peterphi.servicemanager.service.db.entity.ServiceInstanceEntity
2021-12-11 17:23:45,241 DEBUG Not known whether passed class name [com.peterphi.servicemanager.service.db.entity.ServiceInstanceEntity] is safe
2021-12-11 17:23:45,241 DEBUG No temp ClassLoader provided; using live ClassLoader for loading potentially unsafe class : com.peterphi.servicemanager.service.db.entity.ServiceInstanceEntity
2021-12-11 17:23:45,245 DEBUG Not known whether passed class name [com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity] is safe
2021-12-11 17:23:45,245 DEBUG No temp ClassLoader provided; using live ClassLoader for loading potentially unsafe class : com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity
2021-12-11 17:23:45,246 DEBUG Not known whether passed class name [com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity] is safe
2021-12-11 17:23:45,246 DEBUG No temp ClassLoader provided; using live ClassLoader for loading potentially unsafe class : com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity
2021-12-11 17:23:45,258 DEBUG Static SQL for collection: com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity.instances
2021-12-11 17:23:45,258 DEBUG  Row insert: update resource_instance set template_id=? where id=?
2021-12-11 17:23:45,258 DEBUG  Row update: update resource_instance set  where id=?
2021-12-11 17:23:45,258 DEBUG  Row delete: update resource_instance set template_id=null where template_id=? and id=?
2021-12-11 17:23:45,258 DEBUG  One-shot delete: update resource_instance set template_id=null where template_id=?
2021-12-11 17:23:45,293 DEBUG Static SQL for collection: com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity.metadata
2021-12-11 17:23:45,293 DEBUG  Row insert: insert into resource_instance_metadata (resource_instance_id, meta_name, meta_val) values (?, ?, ?)
2021-12-11 17:23:45,293 DEBUG  Row update: update resource_instance_metadata set meta_val=? where resource_instance_id=? and meta_name=?
2021-12-11 17:23:45,293 DEBUG  Row delete: delete from resource_instance_metadata where resource_instance_id=? and meta_name=?
2021-12-11 17:23:45,293 DEBUG  One-shot delete: delete from resource_instance_metadata where resource_instance_id=?
2021-12-11 17:23:45,297 DEBUG Static SQL for entity: com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity
2021-12-11 17:23:45,297 DEBUG  Version select: select updated_ts from resource_instance where id =?
2021-12-11 17:23:45,297 DEBUG  Snapshot select: select resourcein_.id, resourcein_.created_ts as created_2_2_, resourcein_.provider_name as provider3_2_, resourcein_.provider_instance_id as provider4_2_, resourcein_.resource_state as resource5_2_, resourcein_.template_id as template9_2_, resourcein_.template_revision_commit as template6_2_, resourcein_.template_revision_counter as template7_2_, resourcein_.updated_ts as updated_8_2_ from resource_instance resourcein_ where resourcein_.id=?
2021-12-11 17:23:45,297 DEBUG  Insert 0: insert into resource_instance (created_ts, provider_name, provider_instance_id, resource_state, template_id, template_revision_commit, template_revision_counter, updated_ts, id) values (?, ?, ?, ?, ?, ?, ?, ?, ?)
2021-12-11 17:23:45,297 DEBUG  Update 0: update resource_instance set created_ts=?, provider_name=?, provider_instance_id=?, resource_state=?, template_id=?, template_revision_commit=?, template_revision_counter=?, updated_ts=? where id=? and updated_ts=?
2021-12-11 17:23:45,297 DEBUG  Delete 0: delete from resource_instance where id=? and updated_ts=?
2021-12-11 17:23:45,326 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@3663d0ba]
2021-12-11 17:23:45,328 DEBUG Visiting attribute path : created
2021-12-11 17:23:45,328 DEBUG Visiting attribute path : metadata
2021-12-11 17:23:45,334 DEBUG Adding QuerySpace : uid = <gen:1> -> org.hibernate.loader.plan.build.internal.spaces.CollectionQuerySpaceImpl@637791d]
2021-12-11 17:23:45,336 DEBUG Visiting attribute path : provider
2021-12-11 17:23:45,336 DEBUG Visiting attribute path : providerInstanceId
2021-12-11 17:23:45,336 DEBUG Visiting attribute path : state
2021-12-11 17:23:45,336 DEBUG Visiting attribute path : template
2021-12-11 17:23:45,337 DEBUG Adding QuerySpace : uid = <gen:2> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@6dce59e]
2021-12-11 17:23:45,337 DEBUG Visiting attribute path : templateRevision
2021-12-11 17:23:45,337 DEBUG Visiting attribute path : templateRevisionCounter
2021-12-11 17:23:45,337 DEBUG Visiting attribute path : updated
2021-12-11 17:23:45,338 DEBUG Building LoadPlan...
2021-12-11 17:23:45,356 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:45,362 DEBUG LoadPlan(entity=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity, querySpaceUid=<gen:0>, path=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity)
          - CollectionAttributeFetchImpl(collection=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity.metadata, querySpaceUid=<gen:1>, path=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity.metadata)
          - EntityAttributeFetchImpl(entity=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity, querySpaceUid=<gen:2>, path=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity.template)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity)
          - SQL table alias mapping - resourcein0_
          - alias suffix - 0_
          - suffixed key columns - {id1_2_0_}

2021-12-11 17:23:45,364 DEBUG Static select for entity com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity [NONE]: select resourcein0_.id as id1_2_0_, resourcein0_.created_ts as created_2_2_0_, resourcein0_.provider_name as provider3_2_0_, resourcein0_.provider_instance_id as provider4_2_0_, resourcein0_.resource_state as resource5_2_0_, resourcein0_.template_id as template9_2_0_, resourcein0_.template_revision_commit as template6_2_0_, resourcein0_.template_revision_counter as template7_2_0_, resourcein0_.updated_ts as updated_8_2_0_ from resource_instance resourcein0_ where resourcein0_.id=?
2021-12-11 17:23:45,365 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@4f59a516]
2021-12-11 17:23:45,365 DEBUG Visiting attribute path : created
2021-12-11 17:23:45,365 DEBUG Visiting attribute path : metadata
2021-12-11 17:23:45,365 DEBUG Adding QuerySpace : uid = <gen:1> -> org.hibernate.loader.plan.build.internal.spaces.CollectionQuerySpaceImpl@411cd156]
2021-12-11 17:23:45,365 DEBUG Visiting attribute path : provider
2021-12-11 17:23:45,365 DEBUG Visiting attribute path : providerInstanceId
2021-12-11 17:23:45,365 DEBUG Visiting attribute path : state
2021-12-11 17:23:45,365 DEBUG Visiting attribute path : template
2021-12-11 17:23:45,365 DEBUG Adding QuerySpace : uid = <gen:2> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@3c770db4]
2021-12-11 17:23:45,365 DEBUG Visiting attribute path : templateRevision
2021-12-11 17:23:45,365 DEBUG Visiting attribute path : templateRevisionCounter
2021-12-11 17:23:45,365 DEBUG Visiting attribute path : updated
2021-12-11 17:23:45,365 DEBUG Building LoadPlan...
2021-12-11 17:23:45,365 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:45,366 DEBUG LoadPlan(entity=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity, querySpaceUid=<gen:0>, path=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity)
          - CollectionAttributeFetchImpl(collection=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity.metadata, querySpaceUid=<gen:1>, path=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity.metadata)
          - EntityAttributeFetchImpl(entity=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity, querySpaceUid=<gen:2>, path=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity.template)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity)
          - SQL table alias mapping - resourcein0_
          - alias suffix - 0_
          - suffixed key columns - {id1_2_0_}

2021-12-11 17:23:45,366 DEBUG Static select for entity com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity [READ]: select resourcein0_.id as id1_2_0_, resourcein0_.created_ts as created_2_2_0_, resourcein0_.provider_name as provider3_2_0_, resourcein0_.provider_instance_id as provider4_2_0_, resourcein0_.resource_state as resource5_2_0_, resourcein0_.template_id as template9_2_0_, resourcein0_.template_revision_commit as template6_2_0_, resourcein0_.template_revision_counter as template7_2_0_, resourcein0_.updated_ts as updated_8_2_0_ from resource_instance resourcein0_ where resourcein0_.id=?
2021-12-11 17:23:45,366 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@3e046e39]
2021-12-11 17:23:45,366 DEBUG Visiting attribute path : created
2021-12-11 17:23:45,366 DEBUG Visiting attribute path : metadata
2021-12-11 17:23:45,366 DEBUG Adding QuerySpace : uid = <gen:1> -> org.hibernate.loader.plan.build.internal.spaces.CollectionQuerySpaceImpl@46fc522d]
2021-12-11 17:23:45,366 DEBUG Visiting attribute path : provider
2021-12-11 17:23:45,366 DEBUG Visiting attribute path : providerInstanceId
2021-12-11 17:23:45,366 DEBUG Visiting attribute path : state
2021-12-11 17:23:45,366 DEBUG Visiting attribute path : template
2021-12-11 17:23:45,367 DEBUG Adding QuerySpace : uid = <gen:2> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@4262fdeb]
2021-12-11 17:23:45,367 DEBUG Visiting attribute path : templateRevision
2021-12-11 17:23:45,367 DEBUG Visiting attribute path : templateRevisionCounter
2021-12-11 17:23:45,367 DEBUG Visiting attribute path : updated
2021-12-11 17:23:45,367 DEBUG Building LoadPlan...
2021-12-11 17:23:45,367 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:45,367 DEBUG LoadPlan(entity=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity, querySpaceUid=<gen:0>, path=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity)
          - CollectionAttributeFetchImpl(collection=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity.metadata, querySpaceUid=<gen:1>, path=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity.metadata)
          - EntityAttributeFetchImpl(entity=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity, querySpaceUid=<gen:2>, path=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity.template)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity)
          - SQL table alias mapping - resourcein0_
          - alias suffix - 0_
          - suffixed key columns - {id1_2_0_}

2021-12-11 17:23:45,367 DEBUG Static select for entity com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity [UPGRADE]: select resourcein0_.id as id1_2_0_, resourcein0_.created_ts as created_2_2_0_, resourcein0_.provider_name as provider3_2_0_, resourcein0_.provider_instance_id as provider4_2_0_, resourcein0_.resource_state as resource5_2_0_, resourcein0_.template_id as template9_2_0_, resourcein0_.template_revision_commit as template6_2_0_, resourcein0_.template_revision_counter as template7_2_0_, resourcein0_.updated_ts as updated_8_2_0_ from resource_instance resourcein0_ where resourcein0_.id=? for update
2021-12-11 17:23:45,367 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@5f0a2638]
2021-12-11 17:23:45,367 DEBUG Visiting attribute path : created
2021-12-11 17:23:45,367 DEBUG Visiting attribute path : metadata
2021-12-11 17:23:45,367 DEBUG Adding QuerySpace : uid = <gen:1> -> org.hibernate.loader.plan.build.internal.spaces.CollectionQuerySpaceImpl@77cb452c]
2021-12-11 17:23:45,368 DEBUG Visiting attribute path : provider
2021-12-11 17:23:45,368 DEBUG Visiting attribute path : providerInstanceId
2021-12-11 17:23:45,368 DEBUG Visiting attribute path : state
2021-12-11 17:23:45,368 DEBUG Visiting attribute path : template
2021-12-11 17:23:45,368 DEBUG Adding QuerySpace : uid = <gen:2> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@2213639b]
2021-12-11 17:23:45,368 DEBUG Visiting attribute path : templateRevision
2021-12-11 17:23:45,368 DEBUG Visiting attribute path : templateRevisionCounter
2021-12-11 17:23:45,368 DEBUG Visiting attribute path : updated
2021-12-11 17:23:45,368 DEBUG Building LoadPlan...
2021-12-11 17:23:45,368 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:45,368 DEBUG LoadPlan(entity=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity, querySpaceUid=<gen:0>, path=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity)
          - CollectionAttributeFetchImpl(collection=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity.metadata, querySpaceUid=<gen:1>, path=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity.metadata)
          - EntityAttributeFetchImpl(entity=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity, querySpaceUid=<gen:2>, path=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity.template)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity)
          - SQL table alias mapping - resourcein0_
          - alias suffix - 0_
          - suffixed key columns - {id1_2_0_}

2021-12-11 17:23:45,368 DEBUG Static select for entity com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity [UPGRADE_NOWAIT]: select resourcein0_.id as id1_2_0_, resourcein0_.created_ts as created_2_2_0_, resourcein0_.provider_name as provider3_2_0_, resourcein0_.provider_instance_id as provider4_2_0_, resourcein0_.resource_state as resource5_2_0_, resourcein0_.template_id as template9_2_0_, resourcein0_.template_revision_commit as template6_2_0_, resourcein0_.template_revision_counter as template7_2_0_, resourcein0_.updated_ts as updated_8_2_0_ from resource_instance resourcein0_ where resourcein0_.id=? for update
2021-12-11 17:23:45,368 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@2c26ba07]
2021-12-11 17:23:45,369 DEBUG Visiting attribute path : created
2021-12-11 17:23:45,369 DEBUG Visiting attribute path : metadata
2021-12-11 17:23:45,369 DEBUG Adding QuerySpace : uid = <gen:1> -> org.hibernate.loader.plan.build.internal.spaces.CollectionQuerySpaceImpl@42ea7565]
2021-12-11 17:23:45,369 DEBUG Visiting attribute path : provider
2021-12-11 17:23:45,369 DEBUG Visiting attribute path : providerInstanceId
2021-12-11 17:23:45,369 DEBUG Visiting attribute path : state
2021-12-11 17:23:45,369 DEBUG Visiting attribute path : template
2021-12-11 17:23:45,369 DEBUG Adding QuerySpace : uid = <gen:2> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@7b5cc918]
2021-12-11 17:23:45,369 DEBUG Visiting attribute path : templateRevision
2021-12-11 17:23:45,369 DEBUG Visiting attribute path : templateRevisionCounter
2021-12-11 17:23:45,369 DEBUG Visiting attribute path : updated
2021-12-11 17:23:45,369 DEBUG Building LoadPlan...
2021-12-11 17:23:45,369 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:45,369 DEBUG LoadPlan(entity=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity, querySpaceUid=<gen:0>, path=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity)
          - CollectionAttributeFetchImpl(collection=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity.metadata, querySpaceUid=<gen:1>, path=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity.metadata)
          - EntityAttributeFetchImpl(entity=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity, querySpaceUid=<gen:2>, path=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity.template)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity)
          - SQL table alias mapping - resourcein0_
          - alias suffix - 0_
          - suffixed key columns - {id1_2_0_}

2021-12-11 17:23:45,369 DEBUG Static select for entity com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity [UPGRADE_SKIPLOCKED]: select resourcein0_.id as id1_2_0_, resourcein0_.created_ts as created_2_2_0_, resourcein0_.provider_name as provider3_2_0_, resourcein0_.provider_instance_id as provider4_2_0_, resourcein0_.resource_state as resource5_2_0_, resourcein0_.template_id as template9_2_0_, resourcein0_.template_revision_commit as template6_2_0_, resourcein0_.template_revision_counter as template7_2_0_, resourcein0_.updated_ts as updated_8_2_0_ from resource_instance resourcein0_ where resourcein0_.id=? for update
2021-12-11 17:23:45,369 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@62b3a2f6]
2021-12-11 17:23:45,370 DEBUG Visiting attribute path : created
2021-12-11 17:23:45,370 DEBUG Visiting attribute path : metadata
2021-12-11 17:23:45,370 DEBUG Adding QuerySpace : uid = <gen:1> -> org.hibernate.loader.plan.build.internal.spaces.CollectionQuerySpaceImpl@317890ea]
2021-12-11 17:23:45,370 DEBUG Visiting attribute path : provider
2021-12-11 17:23:45,370 DEBUG Visiting attribute path : providerInstanceId
2021-12-11 17:23:45,370 DEBUG Visiting attribute path : state
2021-12-11 17:23:45,370 DEBUG Visiting attribute path : template
2021-12-11 17:23:45,370 DEBUG Adding QuerySpace : uid = <gen:2> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@2c719bd4]
2021-12-11 17:23:45,370 DEBUG Visiting attribute path : templateRevision
2021-12-11 17:23:45,370 DEBUG Visiting attribute path : templateRevisionCounter
2021-12-11 17:23:45,370 DEBUG Visiting attribute path : updated
2021-12-11 17:23:45,370 DEBUG Building LoadPlan...
2021-12-11 17:23:45,370 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:45,370 DEBUG LoadPlan(entity=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity, querySpaceUid=<gen:0>, path=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity)
          - CollectionAttributeFetchImpl(collection=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity.metadata, querySpaceUid=<gen:1>, path=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity.metadata)
          - EntityAttributeFetchImpl(entity=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity, querySpaceUid=<gen:2>, path=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity.template)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity)
          - SQL table alias mapping - resourcein0_
          - alias suffix - 0_
          - suffixed key columns - {id1_2_0_}

2021-12-11 17:23:45,370 DEBUG Static select for entity com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity [FORCE]: select resourcein0_.id as id1_2_0_, resourcein0_.created_ts as created_2_2_0_, resourcein0_.provider_name as provider3_2_0_, resourcein0_.provider_instance_id as provider4_2_0_, resourcein0_.resource_state as resource5_2_0_, resourcein0_.template_id as template9_2_0_, resourcein0_.template_revision_commit as template6_2_0_, resourcein0_.template_revision_counter as template7_2_0_, resourcein0_.updated_ts as updated_8_2_0_ from resource_instance resourcein0_ where resourcein0_.id=? for update
2021-12-11 17:23:45,370 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@53aa38be]
2021-12-11 17:23:45,370 DEBUG Visiting attribute path : created
2021-12-11 17:23:45,371 DEBUG Visiting attribute path : metadata
2021-12-11 17:23:45,371 DEBUG Adding QuerySpace : uid = <gen:1> -> org.hibernate.loader.plan.build.internal.spaces.CollectionQuerySpaceImpl@422ad5e2]
2021-12-11 17:23:45,371 DEBUG Visiting attribute path : provider
2021-12-11 17:23:45,371 DEBUG Visiting attribute path : providerInstanceId
2021-12-11 17:23:45,371 DEBUG Visiting attribute path : state
2021-12-11 17:23:45,371 DEBUG Visiting attribute path : template
2021-12-11 17:23:45,371 DEBUG Adding QuerySpace : uid = <gen:2> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@62a54948]
2021-12-11 17:23:45,371 DEBUG Visiting attribute path : templateRevision
2021-12-11 17:23:45,371 DEBUG Visiting attribute path : templateRevisionCounter
2021-12-11 17:23:45,371 DEBUG Visiting attribute path : updated
2021-12-11 17:23:45,371 DEBUG Building LoadPlan...
2021-12-11 17:23:45,371 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:45,371 DEBUG LoadPlan(entity=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity, querySpaceUid=<gen:0>, path=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity)
          - CollectionAttributeFetchImpl(collection=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity.metadata, querySpaceUid=<gen:1>, path=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity.metadata)
          - EntityAttributeFetchImpl(entity=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity, querySpaceUid=<gen:2>, path=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity.template)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity)
          - SQL table alias mapping - resourcein0_
          - alias suffix - 0_
          - suffixed key columns - {id1_2_0_}

2021-12-11 17:23:45,371 DEBUG Static select for entity com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity [PESSIMISTIC_READ]: select resourcein0_.id as id1_2_0_, resourcein0_.created_ts as created_2_2_0_, resourcein0_.provider_name as provider3_2_0_, resourcein0_.provider_instance_id as provider4_2_0_, resourcein0_.resource_state as resource5_2_0_, resourcein0_.template_id as template9_2_0_, resourcein0_.template_revision_commit as template6_2_0_, resourcein0_.template_revision_counter as template7_2_0_, resourcein0_.updated_ts as updated_8_2_0_ from resource_instance resourcein0_ where resourcein0_.id=? for update
2021-12-11 17:23:45,371 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@6048e26a]
2021-12-11 17:23:45,372 DEBUG Visiting attribute path : created
2021-12-11 17:23:45,372 DEBUG Visiting attribute path : metadata
2021-12-11 17:23:45,372 DEBUG Adding QuerySpace : uid = <gen:1> -> org.hibernate.loader.plan.build.internal.spaces.CollectionQuerySpaceImpl@44286963]
2021-12-11 17:23:45,372 DEBUG Visiting attribute path : provider
2021-12-11 17:23:45,372 DEBUG Visiting attribute path : providerInstanceId
2021-12-11 17:23:45,372 DEBUG Visiting attribute path : state
2021-12-11 17:23:45,372 DEBUG Visiting attribute path : template
2021-12-11 17:23:45,372 DEBUG Adding QuerySpace : uid = <gen:2> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@c8f97a7]
2021-12-11 17:23:45,372 DEBUG Visiting attribute path : templateRevision
2021-12-11 17:23:45,372 DEBUG Visiting attribute path : templateRevisionCounter
2021-12-11 17:23:45,372 DEBUG Visiting attribute path : updated
2021-12-11 17:23:45,372 DEBUG Building LoadPlan...
2021-12-11 17:23:45,372 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:45,372 DEBUG LoadPlan(entity=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity, querySpaceUid=<gen:0>, path=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity)
          - CollectionAttributeFetchImpl(collection=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity.metadata, querySpaceUid=<gen:1>, path=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity.metadata)
          - EntityAttributeFetchImpl(entity=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity, querySpaceUid=<gen:2>, path=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity.template)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity)
          - SQL table alias mapping - resourcein0_
          - alias suffix - 0_
          - suffixed key columns - {id1_2_0_}

2021-12-11 17:23:45,372 DEBUG Static select for entity com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity [PESSIMISTIC_WRITE]: select resourcein0_.id as id1_2_0_, resourcein0_.created_ts as created_2_2_0_, resourcein0_.provider_name as provider3_2_0_, resourcein0_.provider_instance_id as provider4_2_0_, resourcein0_.resource_state as resource5_2_0_, resourcein0_.template_id as template9_2_0_, resourcein0_.template_revision_commit as template6_2_0_, resourcein0_.template_revision_counter as template7_2_0_, resourcein0_.updated_ts as updated_8_2_0_ from resource_instance resourcein0_ where resourcein0_.id=? for update
2021-12-11 17:23:45,372 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@2b736fee]
2021-12-11 17:23:45,372 DEBUG Visiting attribute path : created
2021-12-11 17:23:45,372 DEBUG Visiting attribute path : metadata
2021-12-11 17:23:45,373 DEBUG Adding QuerySpace : uid = <gen:1> -> org.hibernate.loader.plan.build.internal.spaces.CollectionQuerySpaceImpl@35adf623]
2021-12-11 17:23:45,373 DEBUG Visiting attribute path : provider
2021-12-11 17:23:45,373 DEBUG Visiting attribute path : providerInstanceId
2021-12-11 17:23:45,373 DEBUG Visiting attribute path : state
2021-12-11 17:23:45,373 DEBUG Visiting attribute path : template
2021-12-11 17:23:45,373 DEBUG Adding QuerySpace : uid = <gen:2> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@456f7d9e]
2021-12-11 17:23:45,373 DEBUG Visiting attribute path : templateRevision
2021-12-11 17:23:45,373 DEBUG Visiting attribute path : templateRevisionCounter
2021-12-11 17:23:45,373 DEBUG Visiting attribute path : updated
2021-12-11 17:23:45,373 DEBUG Building LoadPlan...
2021-12-11 17:23:45,373 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:45,373 DEBUG LoadPlan(entity=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity, querySpaceUid=<gen:0>, path=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity)
          - CollectionAttributeFetchImpl(collection=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity.metadata, querySpaceUid=<gen:1>, path=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity.metadata)
          - EntityAttributeFetchImpl(entity=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity, querySpaceUid=<gen:2>, path=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity.template)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity)
          - SQL table alias mapping - resourcein0_
          - alias suffix - 0_
          - suffixed key columns - {id1_2_0_}

2021-12-11 17:23:45,373 DEBUG Static select for entity com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity [PESSIMISTIC_FORCE_INCREMENT]: select resourcein0_.id as id1_2_0_, resourcein0_.created_ts as created_2_2_0_, resourcein0_.provider_name as provider3_2_0_, resourcein0_.provider_instance_id as provider4_2_0_, resourcein0_.resource_state as resource5_2_0_, resourcein0_.template_id as template9_2_0_, resourcein0_.template_revision_commit as template6_2_0_, resourcein0_.template_revision_counter as template7_2_0_, resourcein0_.updated_ts as updated_8_2_0_ from resource_instance resourcein0_ where resourcein0_.id=? for update
2021-12-11 17:23:45,373 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@75d366c2]
2021-12-11 17:23:45,373 DEBUG Visiting attribute path : created
2021-12-11 17:23:45,373 DEBUG Visiting attribute path : metadata
2021-12-11 17:23:45,374 DEBUG Adding QuerySpace : uid = <gen:1> -> org.hibernate.loader.plan.build.internal.spaces.CollectionQuerySpaceImpl@5232e3f1]
2021-12-11 17:23:45,374 DEBUG Visiting attribute path : provider
2021-12-11 17:23:45,374 DEBUG Visiting attribute path : providerInstanceId
2021-12-11 17:23:45,374 DEBUG Visiting attribute path : state
2021-12-11 17:23:45,374 DEBUG Visiting attribute path : template
2021-12-11 17:23:45,374 DEBUG Adding QuerySpace : uid = <gen:2> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@6c8fe7a4]
2021-12-11 17:23:45,374 DEBUG Visiting attribute path : templateRevision
2021-12-11 17:23:45,374 DEBUG Visiting attribute path : templateRevisionCounter
2021-12-11 17:23:45,374 DEBUG Visiting attribute path : updated
2021-12-11 17:23:45,374 DEBUG Building LoadPlan...
2021-12-11 17:23:45,374 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:45,374 DEBUG LoadPlan(entity=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity, querySpaceUid=<gen:0>, path=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity)
          - CollectionAttributeFetchImpl(collection=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity.metadata, querySpaceUid=<gen:1>, path=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity.metadata)
          - EntityAttributeFetchImpl(entity=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity, querySpaceUid=<gen:2>, path=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity.template)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity)
          - SQL table alias mapping - resourcein0_
          - alias suffix - 0_
          - suffixed key columns - {id1_2_0_}

2021-12-11 17:23:45,374 DEBUG Static select for entity com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity [OPTIMISTIC]: select resourcein0_.id as id1_2_0_, resourcein0_.created_ts as created_2_2_0_, resourcein0_.provider_name as provider3_2_0_, resourcein0_.provider_instance_id as provider4_2_0_, resourcein0_.resource_state as resource5_2_0_, resourcein0_.template_id as template9_2_0_, resourcein0_.template_revision_commit as template6_2_0_, resourcein0_.template_revision_counter as template7_2_0_, resourcein0_.updated_ts as updated_8_2_0_ from resource_instance resourcein0_ where resourcein0_.id=?
2021-12-11 17:23:45,374 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@2047981]
2021-12-11 17:23:45,374 DEBUG Visiting attribute path : created
2021-12-11 17:23:45,374 DEBUG Visiting attribute path : metadata
2021-12-11 17:23:45,374 DEBUG Adding QuerySpace : uid = <gen:1> -> org.hibernate.loader.plan.build.internal.spaces.CollectionQuerySpaceImpl@6f31df32]
2021-12-11 17:23:45,374 DEBUG Visiting attribute path : provider
2021-12-11 17:23:45,375 DEBUG Visiting attribute path : providerInstanceId
2021-12-11 17:23:45,375 DEBUG Visiting attribute path : state
2021-12-11 17:23:45,375 DEBUG Visiting attribute path : template
2021-12-11 17:23:45,375 DEBUG Adding QuerySpace : uid = <gen:2> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@7c90b7b7]
2021-12-11 17:23:45,375 DEBUG Visiting attribute path : templateRevision
2021-12-11 17:23:45,375 DEBUG Visiting attribute path : templateRevisionCounter
2021-12-11 17:23:45,375 DEBUG Visiting attribute path : updated
2021-12-11 17:23:45,375 DEBUG Building LoadPlan...
2021-12-11 17:23:45,375 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:45,375 DEBUG LoadPlan(entity=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity, querySpaceUid=<gen:0>, path=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity)
          - CollectionAttributeFetchImpl(collection=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity.metadata, querySpaceUid=<gen:1>, path=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity.metadata)
          - EntityAttributeFetchImpl(entity=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity, querySpaceUid=<gen:2>, path=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity.template)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity)
          - SQL table alias mapping - resourcein0_
          - alias suffix - 0_
          - suffixed key columns - {id1_2_0_}

2021-12-11 17:23:45,375 DEBUG Static select for entity com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity [OPTIMISTIC_FORCE_INCREMENT]: select resourcein0_.id as id1_2_0_, resourcein0_.created_ts as created_2_2_0_, resourcein0_.provider_name as provider3_2_0_, resourcein0_.provider_instance_id as provider4_2_0_, resourcein0_.resource_state as resource5_2_0_, resourcein0_.template_id as template9_2_0_, resourcein0_.template_revision_commit as template6_2_0_, resourcein0_.template_revision_counter as template7_2_0_, resourcein0_.updated_ts as updated_8_2_0_ from resource_instance resourcein0_ where resourcein0_.id=?
2021-12-11 17:23:45,393 DEBUG Static select for action ACTION_MERGE on entity com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity: select resourcein0_.id as id1_2_0_, resourcein0_.created_ts as created_2_2_0_, resourcein0_.provider_name as provider3_2_0_, resourcein0_.provider_instance_id as provider4_2_0_, resourcein0_.resource_state as resource5_2_0_, resourcein0_.template_id as template9_2_0_, resourcein0_.template_revision_commit as template6_2_0_, resourcein0_.template_revision_counter as template7_2_0_, resourcein0_.updated_ts as updated_8_2_0_ from resource_instance resourcein0_ where resourcein0_.id=?
2021-12-11 17:23:45,393 DEBUG Static select for action ACTION_REFRESH on entity com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity: select resourcein0_.id as id1_2_0_, resourcein0_.created_ts as created_2_2_0_, resourcein0_.provider_name as provider3_2_0_, resourcein0_.provider_instance_id as provider4_2_0_, resourcein0_.resource_state as resource5_2_0_, resourcein0_.template_id as template9_2_0_, resourcein0_.template_revision_commit as template6_2_0_, resourcein0_.template_revision_counter as template7_2_0_, resourcein0_.updated_ts as updated_8_2_0_ from resource_instance resourcein0_ where resourcein0_.id=?
2021-12-11 17:23:45,393 DEBUG Static SQL for entity: com.peterphi.servicemanager.service.db.entity.LetsEncryptAccountEntity
2021-12-11 17:23:45,393 DEBUG  Version select: select updated_ts from acme_ca_account where id =?
2021-12-11 17:23:45,393 DEBUG  Snapshot select: select letsencryp_.id, letsencryp_.created_ts as created_2_0_, letsencryp_.keypair_utf8 as keypair_3_0_, letsencryp_.updated_ts as updated_4_0_ from acme_ca_account letsencryp_ where letsencryp_.id=?
2021-12-11 17:23:45,393 DEBUG  Insert 0: insert into acme_ca_account (created_ts, keypair_utf8, updated_ts, id) values (?, ?, ?, ?)
2021-12-11 17:23:45,393 DEBUG  Update 0: update acme_ca_account set created_ts=?, keypair_utf8=?, updated_ts=? where id=? and updated_ts=?
2021-12-11 17:23:45,393 DEBUG  Delete 0: delete from acme_ca_account where id=? and updated_ts=?
2021-12-11 17:23:45,393 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@1f782c05]
2021-12-11 17:23:45,393 DEBUG Visiting attribute path : created
2021-12-11 17:23:45,393 DEBUG Visiting attribute path : keypair
2021-12-11 17:23:45,393 DEBUG Visiting attribute path : updated
2021-12-11 17:23:45,394 DEBUG Building LoadPlan...
2021-12-11 17:23:45,394 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:45,394 DEBUG LoadPlan(entity=com.peterphi.servicemanager.service.db.entity.LetsEncryptAccountEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.servicemanager.service.db.entity.LetsEncryptAccountEntity, querySpaceUid=<gen:0>, path=com.peterphi.servicemanager.service.db.entity.LetsEncryptAccountEntity)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.servicemanager.service.db.entity.LetsEncryptAccountEntity)
          - SQL table alias mapping - letsencryp0_
          - alias suffix - 0_
          - suffixed key columns - {id1_0_0_}

2021-12-11 17:23:45,394 DEBUG Static select for entity com.peterphi.servicemanager.service.db.entity.LetsEncryptAccountEntity [NONE]: select letsencryp0_.id as id1_0_0_, letsencryp0_.created_ts as created_2_0_0_, letsencryp0_.keypair_utf8 as keypair_3_0_0_, letsencryp0_.updated_ts as updated_4_0_0_ from acme_ca_account letsencryp0_ where letsencryp0_.id=?
2021-12-11 17:23:45,394 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@432af457]
2021-12-11 17:23:45,394 DEBUG Visiting attribute path : created
2021-12-11 17:23:45,394 DEBUG Visiting attribute path : keypair
2021-12-11 17:23:45,394 DEBUG Visiting attribute path : updated
2021-12-11 17:23:45,394 DEBUG Building LoadPlan...
2021-12-11 17:23:45,394 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:45,395 DEBUG LoadPlan(entity=com.peterphi.servicemanager.service.db.entity.LetsEncryptAccountEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.servicemanager.service.db.entity.LetsEncryptAccountEntity, querySpaceUid=<gen:0>, path=com.peterphi.servicemanager.service.db.entity.LetsEncryptAccountEntity)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.servicemanager.service.db.entity.LetsEncryptAccountEntity)
          - SQL table alias mapping - letsencryp0_
          - alias suffix - 0_
          - suffixed key columns - {id1_0_0_}

2021-12-11 17:23:45,395 DEBUG Static select for entity com.peterphi.servicemanager.service.db.entity.LetsEncryptAccountEntity [READ]: select letsencryp0_.id as id1_0_0_, letsencryp0_.created_ts as created_2_0_0_, letsencryp0_.keypair_utf8 as keypair_3_0_0_, letsencryp0_.updated_ts as updated_4_0_0_ from acme_ca_account letsencryp0_ where letsencryp0_.id=?
2021-12-11 17:23:45,395 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@519c6fcc]
2021-12-11 17:23:45,395 DEBUG Visiting attribute path : created
2021-12-11 17:23:45,395 DEBUG Visiting attribute path : keypair
2021-12-11 17:23:45,395 DEBUG Visiting attribute path : updated
2021-12-11 17:23:45,395 DEBUG Building LoadPlan...
2021-12-11 17:23:45,395 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:45,396 DEBUG LoadPlan(entity=com.peterphi.servicemanager.service.db.entity.LetsEncryptAccountEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.servicemanager.service.db.entity.LetsEncryptAccountEntity, querySpaceUid=<gen:0>, path=com.peterphi.servicemanager.service.db.entity.LetsEncryptAccountEntity)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.servicemanager.service.db.entity.LetsEncryptAccountEntity)
          - SQL table alias mapping - letsencryp0_
          - alias suffix - 0_
          - suffixed key columns - {id1_0_0_}

2021-12-11 17:23:45,396 DEBUG Static select for entity com.peterphi.servicemanager.service.db.entity.LetsEncryptAccountEntity [UPGRADE]: select letsencryp0_.id as id1_0_0_, letsencryp0_.created_ts as created_2_0_0_, letsencryp0_.keypair_utf8 as keypair_3_0_0_, letsencryp0_.updated_ts as updated_4_0_0_ from acme_ca_account letsencryp0_ where letsencryp0_.id=? for update
2021-12-11 17:23:45,396 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@7ecda95b]
2021-12-11 17:23:45,396 DEBUG Visiting attribute path : created
2021-12-11 17:23:45,396 DEBUG Visiting attribute path : keypair
2021-12-11 17:23:45,396 DEBUG Visiting attribute path : updated
2021-12-11 17:23:45,396 DEBUG Building LoadPlan...
2021-12-11 17:23:45,396 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:45,396 DEBUG LoadPlan(entity=com.peterphi.servicemanager.service.db.entity.LetsEncryptAccountEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.servicemanager.service.db.entity.LetsEncryptAccountEntity, querySpaceUid=<gen:0>, path=com.peterphi.servicemanager.service.db.entity.LetsEncryptAccountEntity)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.servicemanager.service.db.entity.LetsEncryptAccountEntity)
          - SQL table alias mapping - letsencryp0_
          - alias suffix - 0_
          - suffixed key columns - {id1_0_0_}

2021-12-11 17:23:45,396 DEBUG Static select for entity com.peterphi.servicemanager.service.db.entity.LetsEncryptAccountEntity [UPGRADE_NOWAIT]: select letsencryp0_.id as id1_0_0_, letsencryp0_.created_ts as created_2_0_0_, letsencryp0_.keypair_utf8 as keypair_3_0_0_, letsencryp0_.updated_ts as updated_4_0_0_ from acme_ca_account letsencryp0_ where letsencryp0_.id=? for update
2021-12-11 17:23:45,396 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@100ad67e]
2021-12-11 17:23:45,396 DEBUG Visiting attribute path : created
2021-12-11 17:23:45,396 DEBUG Visiting attribute path : keypair
2021-12-11 17:23:45,396 DEBUG Visiting attribute path : updated
2021-12-11 17:23:45,397 DEBUG Building LoadPlan...
2021-12-11 17:23:45,397 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:45,397 DEBUG LoadPlan(entity=com.peterphi.servicemanager.service.db.entity.LetsEncryptAccountEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.servicemanager.service.db.entity.LetsEncryptAccountEntity, querySpaceUid=<gen:0>, path=com.peterphi.servicemanager.service.db.entity.LetsEncryptAccountEntity)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.servicemanager.service.db.entity.LetsEncryptAccountEntity)
          - SQL table alias mapping - letsencryp0_
          - alias suffix - 0_
          - suffixed key columns - {id1_0_0_}

2021-12-11 17:23:45,397 DEBUG Static select for entity com.peterphi.servicemanager.service.db.entity.LetsEncryptAccountEntity [UPGRADE_SKIPLOCKED]: select letsencryp0_.id as id1_0_0_, letsencryp0_.created_ts as created_2_0_0_, letsencryp0_.keypair_utf8 as keypair_3_0_0_, letsencryp0_.updated_ts as updated_4_0_0_ from acme_ca_account letsencryp0_ where letsencryp0_.id=? for update
2021-12-11 17:23:45,397 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@11787b64]
2021-12-11 17:23:45,397 DEBUG Visiting attribute path : created
2021-12-11 17:23:45,397 DEBUG Visiting attribute path : keypair
2021-12-11 17:23:45,397 DEBUG Visiting attribute path : updated
2021-12-11 17:23:45,397 DEBUG Building LoadPlan...
2021-12-11 17:23:45,397 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:45,397 DEBUG LoadPlan(entity=com.peterphi.servicemanager.service.db.entity.LetsEncryptAccountEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.servicemanager.service.db.entity.LetsEncryptAccountEntity, querySpaceUid=<gen:0>, path=com.peterphi.servicemanager.service.db.entity.LetsEncryptAccountEntity)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.servicemanager.service.db.entity.LetsEncryptAccountEntity)
          - SQL table alias mapping - letsencryp0_
          - alias suffix - 0_
          - suffixed key columns - {id1_0_0_}

2021-12-11 17:23:45,398 DEBUG Static select for entity com.peterphi.servicemanager.service.db.entity.LetsEncryptAccountEntity [FORCE]: select letsencryp0_.id as id1_0_0_, letsencryp0_.created_ts as created_2_0_0_, letsencryp0_.keypair_utf8 as keypair_3_0_0_, letsencryp0_.updated_ts as updated_4_0_0_ from acme_ca_account letsencryp0_ where letsencryp0_.id=? for update
2021-12-11 17:23:45,398 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@77b3752b]
2021-12-11 17:23:45,398 DEBUG Visiting attribute path : created
2021-12-11 17:23:45,398 DEBUG Visiting attribute path : keypair
2021-12-11 17:23:45,398 DEBUG Visiting attribute path : updated
2021-12-11 17:23:45,398 DEBUG Building LoadPlan...
2021-12-11 17:23:45,398 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:45,398 DEBUG LoadPlan(entity=com.peterphi.servicemanager.service.db.entity.LetsEncryptAccountEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.servicemanager.service.db.entity.LetsEncryptAccountEntity, querySpaceUid=<gen:0>, path=com.peterphi.servicemanager.service.db.entity.LetsEncryptAccountEntity)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.servicemanager.service.db.entity.LetsEncryptAccountEntity)
          - SQL table alias mapping - letsencryp0_
          - alias suffix - 0_
          - suffixed key columns - {id1_0_0_}

2021-12-11 17:23:45,398 DEBUG Static select for entity com.peterphi.servicemanager.service.db.entity.LetsEncryptAccountEntity [PESSIMISTIC_READ]: select letsencryp0_.id as id1_0_0_, letsencryp0_.created_ts as created_2_0_0_, letsencryp0_.keypair_utf8 as keypair_3_0_0_, letsencryp0_.updated_ts as updated_4_0_0_ from acme_ca_account letsencryp0_ where letsencryp0_.id=? for update
2021-12-11 17:23:45,398 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@319642db]
2021-12-11 17:23:45,398 DEBUG Visiting attribute path : created
2021-12-11 17:23:45,398 DEBUG Visiting attribute path : keypair
2021-12-11 17:23:45,398 DEBUG Visiting attribute path : updated
2021-12-11 17:23:45,398 DEBUG Building LoadPlan...
2021-12-11 17:23:45,398 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:45,398 DEBUG LoadPlan(entity=com.peterphi.servicemanager.service.db.entity.LetsEncryptAccountEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.servicemanager.service.db.entity.LetsEncryptAccountEntity, querySpaceUid=<gen:0>, path=com.peterphi.servicemanager.service.db.entity.LetsEncryptAccountEntity)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.servicemanager.service.db.entity.LetsEncryptAccountEntity)
          - SQL table alias mapping - letsencryp0_
          - alias suffix - 0_
          - suffixed key columns - {id1_0_0_}

2021-12-11 17:23:45,399 DEBUG Static select for entity com.peterphi.servicemanager.service.db.entity.LetsEncryptAccountEntity [PESSIMISTIC_WRITE]: select letsencryp0_.id as id1_0_0_, letsencryp0_.created_ts as created_2_0_0_, letsencryp0_.keypair_utf8 as keypair_3_0_0_, letsencryp0_.updated_ts as updated_4_0_0_ from acme_ca_account letsencryp0_ where letsencryp0_.id=? for update
2021-12-11 17:23:45,399 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@35bfa1bb]
2021-12-11 17:23:45,399 DEBUG Visiting attribute path : created
2021-12-11 17:23:45,399 DEBUG Visiting attribute path : keypair
2021-12-11 17:23:45,399 DEBUG Visiting attribute path : updated
2021-12-11 17:23:45,399 DEBUG Building LoadPlan...
2021-12-11 17:23:45,399 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:45,399 DEBUG LoadPlan(entity=com.peterphi.servicemanager.service.db.entity.LetsEncryptAccountEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.servicemanager.service.db.entity.LetsEncryptAccountEntity, querySpaceUid=<gen:0>, path=com.peterphi.servicemanager.service.db.entity.LetsEncryptAccountEntity)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.servicemanager.service.db.entity.LetsEncryptAccountEntity)
          - SQL table alias mapping - letsencryp0_
          - alias suffix - 0_
          - suffixed key columns - {id1_0_0_}

2021-12-11 17:23:45,399 DEBUG Static select for entity com.peterphi.servicemanager.service.db.entity.LetsEncryptAccountEntity [PESSIMISTIC_FORCE_INCREMENT]: select letsencryp0_.id as id1_0_0_, letsencryp0_.created_ts as created_2_0_0_, letsencryp0_.keypair_utf8 as keypair_3_0_0_, letsencryp0_.updated_ts as updated_4_0_0_ from acme_ca_account letsencryp0_ where letsencryp0_.id=? for update
2021-12-11 17:23:45,399 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@68b11545]
2021-12-11 17:23:45,399 DEBUG Visiting attribute path : created
2021-12-11 17:23:45,399 DEBUG Visiting attribute path : keypair
2021-12-11 17:23:45,399 DEBUG Visiting attribute path : updated
2021-12-11 17:23:45,399 DEBUG Building LoadPlan...
2021-12-11 17:23:45,399 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:45,399 DEBUG LoadPlan(entity=com.peterphi.servicemanager.service.db.entity.LetsEncryptAccountEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.servicemanager.service.db.entity.LetsEncryptAccountEntity, querySpaceUid=<gen:0>, path=com.peterphi.servicemanager.service.db.entity.LetsEncryptAccountEntity)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.servicemanager.service.db.entity.LetsEncryptAccountEntity)
          - SQL table alias mapping - letsencryp0_
          - alias suffix - 0_
          - suffixed key columns - {id1_0_0_}

2021-12-11 17:23:45,399 DEBUG Static select for entity com.peterphi.servicemanager.service.db.entity.LetsEncryptAccountEntity [OPTIMISTIC]: select letsencryp0_.id as id1_0_0_, letsencryp0_.created_ts as created_2_0_0_, letsencryp0_.keypair_utf8 as keypair_3_0_0_, letsencryp0_.updated_ts as updated_4_0_0_ from acme_ca_account letsencryp0_ where letsencryp0_.id=?
2021-12-11 17:23:45,399 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@357bc488]
2021-12-11 17:23:45,399 DEBUG Visiting attribute path : created
2021-12-11 17:23:45,399 DEBUG Visiting attribute path : keypair
2021-12-11 17:23:45,400 DEBUG Visiting attribute path : updated
2021-12-11 17:23:45,400 DEBUG Building LoadPlan...
2021-12-11 17:23:45,400 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:45,400 DEBUG LoadPlan(entity=com.peterphi.servicemanager.service.db.entity.LetsEncryptAccountEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.servicemanager.service.db.entity.LetsEncryptAccountEntity, querySpaceUid=<gen:0>, path=com.peterphi.servicemanager.service.db.entity.LetsEncryptAccountEntity)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.servicemanager.service.db.entity.LetsEncryptAccountEntity)
          - SQL table alias mapping - letsencryp0_
          - alias suffix - 0_
          - suffixed key columns - {id1_0_0_}

2021-12-11 17:23:45,400 DEBUG Static select for entity com.peterphi.servicemanager.service.db.entity.LetsEncryptAccountEntity [OPTIMISTIC_FORCE_INCREMENT]: select letsencryp0_.id as id1_0_0_, letsencryp0_.created_ts as created_2_0_0_, letsencryp0_.keypair_utf8 as keypair_3_0_0_, letsencryp0_.updated_ts as updated_4_0_0_ from acme_ca_account letsencryp0_ where letsencryp0_.id=?
2021-12-11 17:23:45,400 DEBUG Static select for action ACTION_MERGE on entity com.peterphi.servicemanager.service.db.entity.LetsEncryptAccountEntity: select letsencryp0_.id as id1_0_0_, letsencryp0_.created_ts as created_2_0_0_, letsencryp0_.keypair_utf8 as keypair_3_0_0_, letsencryp0_.updated_ts as updated_4_0_0_ from acme_ca_account letsencryp0_ where letsencryp0_.id=?
2021-12-11 17:23:45,400 DEBUG Static select for action ACTION_REFRESH on entity com.peterphi.servicemanager.service.db.entity.LetsEncryptAccountEntity: select letsencryp0_.id as id1_0_0_, letsencryp0_.created_ts as created_2_0_0_, letsencryp0_.keypair_utf8 as keypair_3_0_0_, letsencryp0_.updated_ts as updated_4_0_0_ from acme_ca_account letsencryp0_ where letsencryp0_.id=?
2021-12-11 17:23:45,400 DEBUG Static SQL for entity: com.peterphi.servicemanager.service.db.entity.LetsEncryptCertificateEntity
2021-12-11 17:23:45,400 DEBUG  Version select: select updated_ts from acme_ca_cert where id =?
2021-12-11 17:23:45,400 DEBUG  Snapshot select: select letsencryp_.id, letsencryp_.cert_utf8 as cert_utf2_1_, letsencryp_.chain_utf8 as chain_ut3_1_, letsencryp_.created_ts as created_4_1_, letsencryp_.expires_ts as expires_5_1_, letsencryp_.keypair_utf8 as keypair_6_1_, letsencryp_.mgmt_token as mgmt_tok7_1_, letsencryp_.updated_ts as updated_8_1_ from acme_ca_cert letsencryp_ where letsencryp_.id=?
2021-12-11 17:23:45,400 DEBUG  Insert 0: insert into acme_ca_cert (cert_utf8, chain_utf8, created_ts, expires_ts, keypair_utf8, mgmt_token, updated_ts, id) values (?, ?, ?, ?, ?, ?, ?, ?)
2021-12-11 17:23:45,400 DEBUG  Update 0: update acme_ca_cert set cert_utf8=?, chain_utf8=?, created_ts=?, expires_ts=?, keypair_utf8=?, mgmt_token=?, updated_ts=? where id=? and updated_ts=?
2021-12-11 17:23:45,400 DEBUG  Delete 0: delete from acme_ca_cert where id=? and updated_ts=?
2021-12-11 17:23:45,401 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@2eda4eeb]
2021-12-11 17:23:45,401 DEBUG Visiting attribute path : cert
2021-12-11 17:23:45,401 DEBUG Visiting attribute path : chain
2021-12-11 17:23:45,401 DEBUG Visiting attribute path : created
2021-12-11 17:23:45,401 DEBUG Visiting attribute path : expires
2021-12-11 17:23:45,401 DEBUG Visiting attribute path : keypair
2021-12-11 17:23:45,401 DEBUG Visiting attribute path : managementToken
2021-12-11 17:23:45,401 DEBUG Visiting attribute path : updated
2021-12-11 17:23:45,401 DEBUG Building LoadPlan...
2021-12-11 17:23:45,401 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:45,401 DEBUG LoadPlan(entity=com.peterphi.servicemanager.service.db.entity.LetsEncryptCertificateEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.servicemanager.service.db.entity.LetsEncryptCertificateEntity, querySpaceUid=<gen:0>, path=com.peterphi.servicemanager.service.db.entity.LetsEncryptCertificateEntity)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.servicemanager.service.db.entity.LetsEncryptCertificateEntity)
          - SQL table alias mapping - letsencryp0_
          - alias suffix - 0_
          - suffixed key columns - {id1_1_0_}

2021-12-11 17:23:45,401 DEBUG Static select for entity com.peterphi.servicemanager.service.db.entity.LetsEncryptCertificateEntity [NONE]: select letsencryp0_.id as id1_1_0_, letsencryp0_.cert_utf8 as cert_utf2_1_0_, letsencryp0_.chain_utf8 as chain_ut3_1_0_, letsencryp0_.created_ts as created_4_1_0_, letsencryp0_.expires_ts as expires_5_1_0_, letsencryp0_.keypair_utf8 as keypair_6_1_0_, letsencryp0_.mgmt_token as mgmt_tok7_1_0_, letsencryp0_.updated_ts as updated_8_1_0_ from acme_ca_cert letsencryp0_ where letsencryp0_.id=?
2021-12-11 17:23:45,401 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@309dcdf3]
2021-12-11 17:23:45,401 DEBUG Visiting attribute path : cert
2021-12-11 17:23:45,401 DEBUG Visiting attribute path : chain
2021-12-11 17:23:45,401 DEBUG Visiting attribute path : created
2021-12-11 17:23:45,401 DEBUG Visiting attribute path : expires
2021-12-11 17:23:45,401 DEBUG Visiting attribute path : keypair
2021-12-11 17:23:45,401 DEBUG Visiting attribute path : managementToken
2021-12-11 17:23:45,401 DEBUG Visiting attribute path : updated
2021-12-11 17:23:45,401 DEBUG Building LoadPlan...
2021-12-11 17:23:45,401 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:45,401 DEBUG LoadPlan(entity=com.peterphi.servicemanager.service.db.entity.LetsEncryptCertificateEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.servicemanager.service.db.entity.LetsEncryptCertificateEntity, querySpaceUid=<gen:0>, path=com.peterphi.servicemanager.service.db.entity.LetsEncryptCertificateEntity)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.servicemanager.service.db.entity.LetsEncryptCertificateEntity)
          - SQL table alias mapping - letsencryp0_
          - alias suffix - 0_
          - suffixed key columns - {id1_1_0_}

2021-12-11 17:23:45,402 DEBUG Static select for entity com.peterphi.servicemanager.service.db.entity.LetsEncryptCertificateEntity [READ]: select letsencryp0_.id as id1_1_0_, letsencryp0_.cert_utf8 as cert_utf2_1_0_, letsencryp0_.chain_utf8 as chain_ut3_1_0_, letsencryp0_.created_ts as created_4_1_0_, letsencryp0_.expires_ts as expires_5_1_0_, letsencryp0_.keypair_utf8 as keypair_6_1_0_, letsencryp0_.mgmt_token as mgmt_tok7_1_0_, letsencryp0_.updated_ts as updated_8_1_0_ from acme_ca_cert letsencryp0_ where letsencryp0_.id=?
2021-12-11 17:23:45,402 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@9a20cbd]
2021-12-11 17:23:45,402 DEBUG Visiting attribute path : cert
2021-12-11 17:23:45,402 DEBUG Visiting attribute path : chain
2021-12-11 17:23:45,402 DEBUG Visiting attribute path : created
2021-12-11 17:23:45,402 DEBUG Visiting attribute path : expires
2021-12-11 17:23:45,402 DEBUG Visiting attribute path : keypair
2021-12-11 17:23:45,402 DEBUG Visiting attribute path : managementToken
2021-12-11 17:23:45,402 DEBUG Visiting attribute path : updated
2021-12-11 17:23:45,402 DEBUG Building LoadPlan...
2021-12-11 17:23:45,402 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:45,402 DEBUG LoadPlan(entity=com.peterphi.servicemanager.service.db.entity.LetsEncryptCertificateEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.servicemanager.service.db.entity.LetsEncryptCertificateEntity, querySpaceUid=<gen:0>, path=com.peterphi.servicemanager.service.db.entity.LetsEncryptCertificateEntity)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.servicemanager.service.db.entity.LetsEncryptCertificateEntity)
          - SQL table alias mapping - letsencryp0_
          - alias suffix - 0_
          - suffixed key columns - {id1_1_0_}

2021-12-11 17:23:45,402 DEBUG Static select for entity com.peterphi.servicemanager.service.db.entity.LetsEncryptCertificateEntity [UPGRADE]: select letsencryp0_.id as id1_1_0_, letsencryp0_.cert_utf8 as cert_utf2_1_0_, letsencryp0_.chain_utf8 as chain_ut3_1_0_, letsencryp0_.created_ts as created_4_1_0_, letsencryp0_.expires_ts as expires_5_1_0_, letsencryp0_.keypair_utf8 as keypair_6_1_0_, letsencryp0_.mgmt_token as mgmt_tok7_1_0_, letsencryp0_.updated_ts as updated_8_1_0_ from acme_ca_cert letsencryp0_ where letsencryp0_.id=? for update
2021-12-11 17:23:45,402 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@445821a6]
2021-12-11 17:23:45,402 DEBUG Visiting attribute path : cert
2021-12-11 17:23:45,402 DEBUG Visiting attribute path : chain
2021-12-11 17:23:45,402 DEBUG Visiting attribute path : created
2021-12-11 17:23:45,402 DEBUG Visiting attribute path : expires
2021-12-11 17:23:45,402 DEBUG Visiting attribute path : keypair
2021-12-11 17:23:45,402 DEBUG Visiting attribute path : managementToken
2021-12-11 17:23:45,402 DEBUG Visiting attribute path : updated
2021-12-11 17:23:45,402 DEBUG Building LoadPlan...
2021-12-11 17:23:45,402 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:45,403 DEBUG LoadPlan(entity=com.peterphi.servicemanager.service.db.entity.LetsEncryptCertificateEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.servicemanager.service.db.entity.LetsEncryptCertificateEntity, querySpaceUid=<gen:0>, path=com.peterphi.servicemanager.service.db.entity.LetsEncryptCertificateEntity)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.servicemanager.service.db.entity.LetsEncryptCertificateEntity)
          - SQL table alias mapping - letsencryp0_
          - alias suffix - 0_
          - suffixed key columns - {id1_1_0_}

2021-12-11 17:23:45,403 DEBUG Static select for entity com.peterphi.servicemanager.service.db.entity.LetsEncryptCertificateEntity [UPGRADE_NOWAIT]: select letsencryp0_.id as id1_1_0_, letsencryp0_.cert_utf8 as cert_utf2_1_0_, letsencryp0_.chain_utf8 as chain_ut3_1_0_, letsencryp0_.created_ts as created_4_1_0_, letsencryp0_.expires_ts as expires_5_1_0_, letsencryp0_.keypair_utf8 as keypair_6_1_0_, letsencryp0_.mgmt_token as mgmt_tok7_1_0_, letsencryp0_.updated_ts as updated_8_1_0_ from acme_ca_cert letsencryp0_ where letsencryp0_.id=? for update
2021-12-11 17:23:45,403 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@35d26ad2]
2021-12-11 17:23:45,403 DEBUG Visiting attribute path : cert
2021-12-11 17:23:45,403 DEBUG Visiting attribute path : chain
2021-12-11 17:23:45,403 DEBUG Visiting attribute path : created
2021-12-11 17:23:45,403 DEBUG Visiting attribute path : expires
2021-12-11 17:23:45,403 DEBUG Visiting attribute path : keypair
2021-12-11 17:23:45,403 DEBUG Visiting attribute path : managementToken
2021-12-11 17:23:45,403 DEBUG Visiting attribute path : updated
2021-12-11 17:23:45,403 DEBUG Building LoadPlan...
2021-12-11 17:23:45,403 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:45,403 DEBUG LoadPlan(entity=com.peterphi.servicemanager.service.db.entity.LetsEncryptCertificateEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.servicemanager.service.db.entity.LetsEncryptCertificateEntity, querySpaceUid=<gen:0>, path=com.peterphi.servicemanager.service.db.entity.LetsEncryptCertificateEntity)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.servicemanager.service.db.entity.LetsEncryptCertificateEntity)
          - SQL table alias mapping - letsencryp0_
          - alias suffix - 0_
          - suffixed key columns - {id1_1_0_}

2021-12-11 17:23:45,403 DEBUG Static select for entity com.peterphi.servicemanager.service.db.entity.LetsEncryptCertificateEntity [UPGRADE_SKIPLOCKED]: select letsencryp0_.id as id1_1_0_, letsencryp0_.cert_utf8 as cert_utf2_1_0_, letsencryp0_.chain_utf8 as chain_ut3_1_0_, letsencryp0_.created_ts as created_4_1_0_, letsencryp0_.expires_ts as expires_5_1_0_, letsencryp0_.keypair_utf8 as keypair_6_1_0_, letsencryp0_.mgmt_token as mgmt_tok7_1_0_, letsencryp0_.updated_ts as updated_8_1_0_ from acme_ca_cert letsencryp0_ where letsencryp0_.id=? for update
2021-12-11 17:23:45,403 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@ee21292]
2021-12-11 17:23:45,403 DEBUG Visiting attribute path : cert
2021-12-11 17:23:45,403 DEBUG Visiting attribute path : chain
2021-12-11 17:23:45,403 DEBUG Visiting attribute path : created
2021-12-11 17:23:45,403 DEBUG Visiting attribute path : expires
2021-12-11 17:23:45,403 DEBUG Visiting attribute path : keypair
2021-12-11 17:23:45,403 DEBUG Visiting attribute path : managementToken
2021-12-11 17:23:45,403 DEBUG Visiting attribute path : updated
2021-12-11 17:23:45,403 DEBUG Building LoadPlan...
2021-12-11 17:23:45,403 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:45,404 DEBUG LoadPlan(entity=com.peterphi.servicemanager.service.db.entity.LetsEncryptCertificateEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.servicemanager.service.db.entity.LetsEncryptCertificateEntity, querySpaceUid=<gen:0>, path=com.peterphi.servicemanager.service.db.entity.LetsEncryptCertificateEntity)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.servicemanager.service.db.entity.LetsEncryptCertificateEntity)
          - SQL table alias mapping - letsencryp0_
          - alias suffix - 0_
          - suffixed key columns - {id1_1_0_}

2021-12-11 17:23:45,404 DEBUG Static select for entity com.peterphi.servicemanager.service.db.entity.LetsEncryptCertificateEntity [FORCE]: select letsencryp0_.id as id1_1_0_, letsencryp0_.cert_utf8 as cert_utf2_1_0_, letsencryp0_.chain_utf8 as chain_ut3_1_0_, letsencryp0_.created_ts as created_4_1_0_, letsencryp0_.expires_ts as expires_5_1_0_, letsencryp0_.keypair_utf8 as keypair_6_1_0_, letsencryp0_.mgmt_token as mgmt_tok7_1_0_, letsencryp0_.updated_ts as updated_8_1_0_ from acme_ca_cert letsencryp0_ where letsencryp0_.id=? for update
2021-12-11 17:23:45,404 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@66e21568]
2021-12-11 17:23:45,404 DEBUG Visiting attribute path : cert
2021-12-11 17:23:45,404 DEBUG Visiting attribute path : chain
2021-12-11 17:23:45,404 DEBUG Visiting attribute path : created
2021-12-11 17:23:45,404 DEBUG Visiting attribute path : expires
2021-12-11 17:23:45,404 DEBUG Visiting attribute path : keypair
2021-12-11 17:23:45,404 DEBUG Visiting attribute path : managementToken
2021-12-11 17:23:45,404 DEBUG Visiting attribute path : updated
2021-12-11 17:23:45,404 DEBUG Building LoadPlan...
2021-12-11 17:23:45,404 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:45,404 DEBUG LoadPlan(entity=com.peterphi.servicemanager.service.db.entity.LetsEncryptCertificateEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.servicemanager.service.db.entity.LetsEncryptCertificateEntity, querySpaceUid=<gen:0>, path=com.peterphi.servicemanager.service.db.entity.LetsEncryptCertificateEntity)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.servicemanager.service.db.entity.LetsEncryptCertificateEntity)
          - SQL table alias mapping - letsencryp0_
          - alias suffix - 0_
          - suffixed key columns - {id1_1_0_}

2021-12-11 17:23:45,404 DEBUG Static select for entity com.peterphi.servicemanager.service.db.entity.LetsEncryptCertificateEntity [PESSIMISTIC_READ]: select letsencryp0_.id as id1_1_0_, letsencryp0_.cert_utf8 as cert_utf2_1_0_, letsencryp0_.chain_utf8 as chain_ut3_1_0_, letsencryp0_.created_ts as created_4_1_0_, letsencryp0_.expires_ts as expires_5_1_0_, letsencryp0_.keypair_utf8 as keypair_6_1_0_, letsencryp0_.mgmt_token as mgmt_tok7_1_0_, letsencryp0_.updated_ts as updated_8_1_0_ from acme_ca_cert letsencryp0_ where letsencryp0_.id=? for update
2021-12-11 17:23:45,404 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@611b35d6]
2021-12-11 17:23:45,404 DEBUG Visiting attribute path : cert
2021-12-11 17:23:45,404 DEBUG Visiting attribute path : chain
2021-12-11 17:23:45,404 DEBUG Visiting attribute path : created
2021-12-11 17:23:45,404 DEBUG Visiting attribute path : expires
2021-12-11 17:23:45,404 DEBUG Visiting attribute path : keypair
2021-12-11 17:23:45,404 DEBUG Visiting attribute path : managementToken
2021-12-11 17:23:45,404 DEBUG Visiting attribute path : updated
2021-12-11 17:23:45,404 DEBUG Building LoadPlan...
2021-12-11 17:23:45,405 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:45,405 DEBUG LoadPlan(entity=com.peterphi.servicemanager.service.db.entity.LetsEncryptCertificateEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.servicemanager.service.db.entity.LetsEncryptCertificateEntity, querySpaceUid=<gen:0>, path=com.peterphi.servicemanager.service.db.entity.LetsEncryptCertificateEntity)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.servicemanager.service.db.entity.LetsEncryptCertificateEntity)
          - SQL table alias mapping - letsencryp0_
          - alias suffix - 0_
          - suffixed key columns - {id1_1_0_}

2021-12-11 17:23:45,405 DEBUG Static select for entity com.peterphi.servicemanager.service.db.entity.LetsEncryptCertificateEntity [PESSIMISTIC_WRITE]: select letsencryp0_.id as id1_1_0_, letsencryp0_.cert_utf8 as cert_utf2_1_0_, letsencryp0_.chain_utf8 as chain_ut3_1_0_, letsencryp0_.created_ts as created_4_1_0_, letsencryp0_.expires_ts as expires_5_1_0_, letsencryp0_.keypair_utf8 as keypair_6_1_0_, letsencryp0_.mgmt_token as mgmt_tok7_1_0_, letsencryp0_.updated_ts as updated_8_1_0_ from acme_ca_cert letsencryp0_ where letsencryp0_.id=? for update
2021-12-11 17:23:45,405 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@543d5863]
2021-12-11 17:23:45,405 DEBUG Visiting attribute path : cert
2021-12-11 17:23:45,405 DEBUG Visiting attribute path : chain
2021-12-11 17:23:45,405 DEBUG Visiting attribute path : created
2021-12-11 17:23:45,405 DEBUG Visiting attribute path : expires
2021-12-11 17:23:45,405 DEBUG Visiting attribute path : keypair
2021-12-11 17:23:45,405 DEBUG Visiting attribute path : managementToken
2021-12-11 17:23:45,405 DEBUG Visiting attribute path : updated
2021-12-11 17:23:45,405 DEBUG Building LoadPlan...
2021-12-11 17:23:45,405 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:45,405 DEBUG LoadPlan(entity=com.peterphi.servicemanager.service.db.entity.LetsEncryptCertificateEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.servicemanager.service.db.entity.LetsEncryptCertificateEntity, querySpaceUid=<gen:0>, path=com.peterphi.servicemanager.service.db.entity.LetsEncryptCertificateEntity)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.servicemanager.service.db.entity.LetsEncryptCertificateEntity)
          - SQL table alias mapping - letsencryp0_
          - alias suffix - 0_
          - suffixed key columns - {id1_1_0_}

2021-12-11 17:23:45,405 DEBUG Static select for entity com.peterphi.servicemanager.service.db.entity.LetsEncryptCertificateEntity [PESSIMISTIC_FORCE_INCREMENT]: select letsencryp0_.id as id1_1_0_, letsencryp0_.cert_utf8 as cert_utf2_1_0_, letsencryp0_.chain_utf8 as chain_ut3_1_0_, letsencryp0_.created_ts as created_4_1_0_, letsencryp0_.expires_ts as expires_5_1_0_, letsencryp0_.keypair_utf8 as keypair_6_1_0_, letsencryp0_.mgmt_token as mgmt_tok7_1_0_, letsencryp0_.updated_ts as updated_8_1_0_ from acme_ca_cert letsencryp0_ where letsencryp0_.id=? for update
2021-12-11 17:23:45,406 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@dd3f8aa]
2021-12-11 17:23:45,406 DEBUG Visiting attribute path : cert
2021-12-11 17:23:45,406 DEBUG Visiting attribute path : chain
2021-12-11 17:23:45,406 DEBUG Visiting attribute path : created
2021-12-11 17:23:45,406 DEBUG Visiting attribute path : expires
2021-12-11 17:23:45,406 DEBUG Visiting attribute path : keypair
2021-12-11 17:23:45,406 DEBUG Visiting attribute path : managementToken
2021-12-11 17:23:45,406 DEBUG Visiting attribute path : updated
2021-12-11 17:23:45,406 DEBUG Building LoadPlan...
2021-12-11 17:23:45,406 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:45,406 DEBUG LoadPlan(entity=com.peterphi.servicemanager.service.db.entity.LetsEncryptCertificateEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.servicemanager.service.db.entity.LetsEncryptCertificateEntity, querySpaceUid=<gen:0>, path=com.peterphi.servicemanager.service.db.entity.LetsEncryptCertificateEntity)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.servicemanager.service.db.entity.LetsEncryptCertificateEntity)
          - SQL table alias mapping - letsencryp0_
          - alias suffix - 0_
          - suffixed key columns - {id1_1_0_}

2021-12-11 17:23:45,406 DEBUG Static select for entity com.peterphi.servicemanager.service.db.entity.LetsEncryptCertificateEntity [OPTIMISTIC]: select letsencryp0_.id as id1_1_0_, letsencryp0_.cert_utf8 as cert_utf2_1_0_, letsencryp0_.chain_utf8 as chain_ut3_1_0_, letsencryp0_.created_ts as created_4_1_0_, letsencryp0_.expires_ts as expires_5_1_0_, letsencryp0_.keypair_utf8 as keypair_6_1_0_, letsencryp0_.mgmt_token as mgmt_tok7_1_0_, letsencryp0_.updated_ts as updated_8_1_0_ from acme_ca_cert letsencryp0_ where letsencryp0_.id=?
2021-12-11 17:23:45,406 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@3a1f2a1]
2021-12-11 17:23:45,406 DEBUG Visiting attribute path : cert
2021-12-11 17:23:45,406 DEBUG Visiting attribute path : chain
2021-12-11 17:23:45,406 DEBUG Visiting attribute path : created
2021-12-11 17:23:45,406 DEBUG Visiting attribute path : expires
2021-12-11 17:23:45,406 DEBUG Visiting attribute path : keypair
2021-12-11 17:23:45,406 DEBUG Visiting attribute path : managementToken
2021-12-11 17:23:45,406 DEBUG Visiting attribute path : updated
2021-12-11 17:23:45,406 DEBUG Building LoadPlan...
2021-12-11 17:23:45,407 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:45,407 DEBUG LoadPlan(entity=com.peterphi.servicemanager.service.db.entity.LetsEncryptCertificateEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.servicemanager.service.db.entity.LetsEncryptCertificateEntity, querySpaceUid=<gen:0>, path=com.peterphi.servicemanager.service.db.entity.LetsEncryptCertificateEntity)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.servicemanager.service.db.entity.LetsEncryptCertificateEntity)
          - SQL table alias mapping - letsencryp0_
          - alias suffix - 0_
          - suffixed key columns - {id1_1_0_}

2021-12-11 17:23:45,407 DEBUG Static select for entity com.peterphi.servicemanager.service.db.entity.LetsEncryptCertificateEntity [OPTIMISTIC_FORCE_INCREMENT]: select letsencryp0_.id as id1_1_0_, letsencryp0_.cert_utf8 as cert_utf2_1_0_, letsencryp0_.chain_utf8 as chain_ut3_1_0_, letsencryp0_.created_ts as created_4_1_0_, letsencryp0_.expires_ts as expires_5_1_0_, letsencryp0_.keypair_utf8 as keypair_6_1_0_, letsencryp0_.mgmt_token as mgmt_tok7_1_0_, letsencryp0_.updated_ts as updated_8_1_0_ from acme_ca_cert letsencryp0_ where letsencryp0_.id=?
2021-12-11 17:23:45,407 DEBUG Static select for action ACTION_MERGE on entity com.peterphi.servicemanager.service.db.entity.LetsEncryptCertificateEntity: select letsencryp0_.id as id1_1_0_, letsencryp0_.cert_utf8 as cert_utf2_1_0_, letsencryp0_.chain_utf8 as chain_ut3_1_0_, letsencryp0_.created_ts as created_4_1_0_, letsencryp0_.expires_ts as expires_5_1_0_, letsencryp0_.keypair_utf8 as keypair_6_1_0_, letsencryp0_.mgmt_token as mgmt_tok7_1_0_, letsencryp0_.updated_ts as updated_8_1_0_ from acme_ca_cert letsencryp0_ where letsencryp0_.id=?
2021-12-11 17:23:45,407 DEBUG Static select for action ACTION_REFRESH on entity com.peterphi.servicemanager.service.db.entity.LetsEncryptCertificateEntity: select letsencryp0_.id as id1_1_0_, letsencryp0_.cert_utf8 as cert_utf2_1_0_, letsencryp0_.chain_utf8 as chain_ut3_1_0_, letsencryp0_.created_ts as created_4_1_0_, letsencryp0_.expires_ts as expires_5_1_0_, letsencryp0_.keypair_utf8 as keypair_6_1_0_, letsencryp0_.mgmt_token as mgmt_tok7_1_0_, letsencryp0_.updated_ts as updated_8_1_0_ from acme_ca_cert letsencryp0_ where letsencryp0_.id=?
2021-12-11 17:23:45,408 DEBUG Static SQL for entity: com.peterphi.servicemanager.service.db.entity.ServiceInstanceEntity
2021-12-11 17:23:45,408 DEBUG  Version select: select updated_ts from service_instance where id =?
2021-12-11 17:23:45,408 DEBUG  Snapshot select: select serviceins_.id, serviceins_.code_revision as code_rev2_5_, serviceins_.created_ts as created_3_5_, serviceins_.service_href as service_4_5_, serviceins_.management_token as manageme5_5_, serviceins_.updated_ts as updated_6_5_ from service_instance serviceins_ where serviceins_.id=?
2021-12-11 17:23:45,408 DEBUG  Insert 0: insert into service_instance (code_revision, created_ts, service_href, management_token, updated_ts, id) values (?, ?, ?, ?, ?, ?)
2021-12-11 17:23:45,408 DEBUG  Update 0: update service_instance set code_revision=?, created_ts=?, service_href=?, management_token=?, updated_ts=? where id=? and updated_ts=?
2021-12-11 17:23:45,408 DEBUG  Delete 0: delete from service_instance where id=? and updated_ts=?
2021-12-11 17:23:45,408 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@52ca2652]
2021-12-11 17:23:45,408 DEBUG Visiting attribute path : codeRevision
2021-12-11 17:23:45,408 DEBUG Visiting attribute path : created
2021-12-11 17:23:45,408 DEBUG Visiting attribute path : endpoint
2021-12-11 17:23:45,408 DEBUG Visiting attribute path : managementToken
2021-12-11 17:23:45,408 DEBUG Visiting attribute path : updated
2021-12-11 17:23:45,408 DEBUG Building LoadPlan...
2021-12-11 17:23:45,408 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:45,408 DEBUG LoadPlan(entity=com.peterphi.servicemanager.service.db.entity.ServiceInstanceEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.servicemanager.service.db.entity.ServiceInstanceEntity, querySpaceUid=<gen:0>, path=com.peterphi.servicemanager.service.db.entity.ServiceInstanceEntity)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.servicemanager.service.db.entity.ServiceInstanceEntity)
          - SQL table alias mapping - serviceins0_
          - alias suffix - 0_
          - suffixed key columns - {id1_5_0_}

2021-12-11 17:23:45,408 DEBUG Static select for entity com.peterphi.servicemanager.service.db.entity.ServiceInstanceEntity [NONE]: select serviceins0_.id as id1_5_0_, serviceins0_.code_revision as code_rev2_5_0_, serviceins0_.created_ts as created_3_5_0_, serviceins0_.service_href as service_4_5_0_, serviceins0_.management_token as manageme5_5_0_, serviceins0_.updated_ts as updated_6_5_0_ from service_instance serviceins0_ where serviceins0_.id=?
2021-12-11 17:23:45,409 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@697d6ded]
2021-12-11 17:23:45,409 DEBUG Visiting attribute path : codeRevision
2021-12-11 17:23:45,409 DEBUG Visiting attribute path : created
2021-12-11 17:23:45,409 DEBUG Visiting attribute path : endpoint
2021-12-11 17:23:45,409 DEBUG Visiting attribute path : managementToken
2021-12-11 17:23:45,409 DEBUG Visiting attribute path : updated
2021-12-11 17:23:45,409 DEBUG Building LoadPlan...
2021-12-11 17:23:45,409 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:45,409 DEBUG LoadPlan(entity=com.peterphi.servicemanager.service.db.entity.ServiceInstanceEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.servicemanager.service.db.entity.ServiceInstanceEntity, querySpaceUid=<gen:0>, path=com.peterphi.servicemanager.service.db.entity.ServiceInstanceEntity)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.servicemanager.service.db.entity.ServiceInstanceEntity)
          - SQL table alias mapping - serviceins0_
          - alias suffix - 0_
          - suffixed key columns - {id1_5_0_}

2021-12-11 17:23:45,409 DEBUG Static select for entity com.peterphi.servicemanager.service.db.entity.ServiceInstanceEntity [READ]: select serviceins0_.id as id1_5_0_, serviceins0_.code_revision as code_rev2_5_0_, serviceins0_.created_ts as created_3_5_0_, serviceins0_.service_href as service_4_5_0_, serviceins0_.management_token as manageme5_5_0_, serviceins0_.updated_ts as updated_6_5_0_ from service_instance serviceins0_ where serviceins0_.id=?
2021-12-11 17:23:45,409 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@5efeb117]
2021-12-11 17:23:45,409 DEBUG Visiting attribute path : codeRevision
2021-12-11 17:23:45,409 DEBUG Visiting attribute path : created
2021-12-11 17:23:45,409 DEBUG Visiting attribute path : endpoint
2021-12-11 17:23:45,409 DEBUG Visiting attribute path : managementToken
2021-12-11 17:23:45,409 DEBUG Visiting attribute path : updated
2021-12-11 17:23:45,409 DEBUG Building LoadPlan...
2021-12-11 17:23:45,409 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:45,410 DEBUG LoadPlan(entity=com.peterphi.servicemanager.service.db.entity.ServiceInstanceEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.servicemanager.service.db.entity.ServiceInstanceEntity, querySpaceUid=<gen:0>, path=com.peterphi.servicemanager.service.db.entity.ServiceInstanceEntity)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.servicemanager.service.db.entity.ServiceInstanceEntity)
          - SQL table alias mapping - serviceins0_
          - alias suffix - 0_
          - suffixed key columns - {id1_5_0_}

2021-12-11 17:23:45,410 DEBUG Static select for entity com.peterphi.servicemanager.service.db.entity.ServiceInstanceEntity [UPGRADE]: select serviceins0_.id as id1_5_0_, serviceins0_.code_revision as code_rev2_5_0_, serviceins0_.created_ts as created_3_5_0_, serviceins0_.service_href as service_4_5_0_, serviceins0_.management_token as manageme5_5_0_, serviceins0_.updated_ts as updated_6_5_0_ from service_instance serviceins0_ where serviceins0_.id=? for update
2021-12-11 17:23:45,410 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@149b4d20]
2021-12-11 17:23:45,410 DEBUG Visiting attribute path : codeRevision
2021-12-11 17:23:45,410 DEBUG Visiting attribute path : created
2021-12-11 17:23:45,410 DEBUG Visiting attribute path : endpoint
2021-12-11 17:23:45,410 DEBUG Visiting attribute path : managementToken
2021-12-11 17:23:45,410 DEBUG Visiting attribute path : updated
2021-12-11 17:23:45,410 DEBUG Building LoadPlan...
2021-12-11 17:23:45,410 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:45,410 DEBUG LoadPlan(entity=com.peterphi.servicemanager.service.db.entity.ServiceInstanceEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.servicemanager.service.db.entity.ServiceInstanceEntity, querySpaceUid=<gen:0>, path=com.peterphi.servicemanager.service.db.entity.ServiceInstanceEntity)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.servicemanager.service.db.entity.ServiceInstanceEntity)
          - SQL table alias mapping - serviceins0_
          - alias suffix - 0_
          - suffixed key columns - {id1_5_0_}

2021-12-11 17:23:45,410 DEBUG Static select for entity com.peterphi.servicemanager.service.db.entity.ServiceInstanceEntity [UPGRADE_NOWAIT]: select serviceins0_.id as id1_5_0_, serviceins0_.code_revision as code_rev2_5_0_, serviceins0_.created_ts as created_3_5_0_, serviceins0_.service_href as service_4_5_0_, serviceins0_.management_token as manageme5_5_0_, serviceins0_.updated_ts as updated_6_5_0_ from service_instance serviceins0_ where serviceins0_.id=? for update
2021-12-11 17:23:45,410 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@4d93f75b]
2021-12-11 17:23:45,410 DEBUG Visiting attribute path : codeRevision
2021-12-11 17:23:45,410 DEBUG Visiting attribute path : created
2021-12-11 17:23:45,410 DEBUG Visiting attribute path : endpoint
2021-12-11 17:23:45,410 DEBUG Visiting attribute path : managementToken
2021-12-11 17:23:45,410 DEBUG Visiting attribute path : updated
2021-12-11 17:23:45,410 DEBUG Building LoadPlan...
2021-12-11 17:23:45,411 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:45,411 DEBUG LoadPlan(entity=com.peterphi.servicemanager.service.db.entity.ServiceInstanceEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.servicemanager.service.db.entity.ServiceInstanceEntity, querySpaceUid=<gen:0>, path=com.peterphi.servicemanager.service.db.entity.ServiceInstanceEntity)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.servicemanager.service.db.entity.ServiceInstanceEntity)
          - SQL table alias mapping - serviceins0_
          - alias suffix - 0_
          - suffixed key columns - {id1_5_0_}

2021-12-11 17:23:45,411 DEBUG Static select for entity com.peterphi.servicemanager.service.db.entity.ServiceInstanceEntity [UPGRADE_SKIPLOCKED]: select serviceins0_.id as id1_5_0_, serviceins0_.code_revision as code_rev2_5_0_, serviceins0_.created_ts as created_3_5_0_, serviceins0_.service_href as service_4_5_0_, serviceins0_.management_token as manageme5_5_0_, serviceins0_.updated_ts as updated_6_5_0_ from service_instance serviceins0_ where serviceins0_.id=? for update
2021-12-11 17:23:45,411 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@4f281aaf]
2021-12-11 17:23:45,411 DEBUG Visiting attribute path : codeRevision
2021-12-11 17:23:45,411 DEBUG Visiting attribute path : created
2021-12-11 17:23:45,411 DEBUG Visiting attribute path : endpoint
2021-12-11 17:23:45,411 DEBUG Visiting attribute path : managementToken
2021-12-11 17:23:45,411 DEBUG Visiting attribute path : updated
2021-12-11 17:23:45,411 DEBUG Building LoadPlan...
2021-12-11 17:23:45,411 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:45,411 DEBUG LoadPlan(entity=com.peterphi.servicemanager.service.db.entity.ServiceInstanceEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.servicemanager.service.db.entity.ServiceInstanceEntity, querySpaceUid=<gen:0>, path=com.peterphi.servicemanager.service.db.entity.ServiceInstanceEntity)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.servicemanager.service.db.entity.ServiceInstanceEntity)
          - SQL table alias mapping - serviceins0_
          - alias suffix - 0_
          - suffixed key columns - {id1_5_0_}

2021-12-11 17:23:45,411 DEBUG Static select for entity com.peterphi.servicemanager.service.db.entity.ServiceInstanceEntity [FORCE]: select serviceins0_.id as id1_5_0_, serviceins0_.code_revision as code_rev2_5_0_, serviceins0_.created_ts as created_3_5_0_, serviceins0_.service_href as service_4_5_0_, serviceins0_.management_token as manageme5_5_0_, serviceins0_.updated_ts as updated_6_5_0_ from service_instance serviceins0_ where serviceins0_.id=? for update
2021-12-11 17:23:45,411 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@f2b90fc]
2021-12-11 17:23:45,412 DEBUG Visiting attribute path : codeRevision
2021-12-11 17:23:45,412 DEBUG Visiting attribute path : created
2021-12-11 17:23:45,412 DEBUG Visiting attribute path : endpoint
2021-12-11 17:23:45,412 DEBUG Visiting attribute path : managementToken
2021-12-11 17:23:45,412 DEBUG Visiting attribute path : updated
2021-12-11 17:23:45,412 DEBUG Building LoadPlan...
2021-12-11 17:23:45,412 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:45,412 DEBUG LoadPlan(entity=com.peterphi.servicemanager.service.db.entity.ServiceInstanceEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.servicemanager.service.db.entity.ServiceInstanceEntity, querySpaceUid=<gen:0>, path=com.peterphi.servicemanager.service.db.entity.ServiceInstanceEntity)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.servicemanager.service.db.entity.ServiceInstanceEntity)
          - SQL table alias mapping - serviceins0_
          - alias suffix - 0_
          - suffixed key columns - {id1_5_0_}

2021-12-11 17:23:45,412 DEBUG Static select for entity com.peterphi.servicemanager.service.db.entity.ServiceInstanceEntity [PESSIMISTIC_READ]: select serviceins0_.id as id1_5_0_, serviceins0_.code_revision as code_rev2_5_0_, serviceins0_.created_ts as created_3_5_0_, serviceins0_.service_href as service_4_5_0_, serviceins0_.management_token as manageme5_5_0_, serviceins0_.updated_ts as updated_6_5_0_ from service_instance serviceins0_ where serviceins0_.id=? for update
2021-12-11 17:23:45,412 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@24c685e7]
2021-12-11 17:23:45,412 DEBUG Visiting attribute path : codeRevision
2021-12-11 17:23:45,412 DEBUG Visiting attribute path : created
2021-12-11 17:23:45,412 DEBUG Visiting attribute path : endpoint
2021-12-11 17:23:45,412 DEBUG Visiting attribute path : managementToken
2021-12-11 17:23:45,412 DEBUG Visiting attribute path : updated
2021-12-11 17:23:45,412 DEBUG Building LoadPlan...
2021-12-11 17:23:45,412 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:45,412 DEBUG LoadPlan(entity=com.peterphi.servicemanager.service.db.entity.ServiceInstanceEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.servicemanager.service.db.entity.ServiceInstanceEntity, querySpaceUid=<gen:0>, path=com.peterphi.servicemanager.service.db.entity.ServiceInstanceEntity)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.servicemanager.service.db.entity.ServiceInstanceEntity)
          - SQL table alias mapping - serviceins0_
          - alias suffix - 0_
          - suffixed key columns - {id1_5_0_}

2021-12-11 17:23:45,413 DEBUG Static select for entity com.peterphi.servicemanager.service.db.entity.ServiceInstanceEntity [PESSIMISTIC_WRITE]: select serviceins0_.id as id1_5_0_, serviceins0_.code_revision as code_rev2_5_0_, serviceins0_.created_ts as created_3_5_0_, serviceins0_.service_href as service_4_5_0_, serviceins0_.management_token as manageme5_5_0_, serviceins0_.updated_ts as updated_6_5_0_ from service_instance serviceins0_ where serviceins0_.id=? for update
2021-12-11 17:23:45,413 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@2ed9f6f8]
2021-12-11 17:23:45,413 DEBUG Visiting attribute path : codeRevision
2021-12-11 17:23:45,413 DEBUG Visiting attribute path : created
2021-12-11 17:23:45,413 DEBUG Visiting attribute path : endpoint
2021-12-11 17:23:45,413 DEBUG Visiting attribute path : managementToken
2021-12-11 17:23:45,413 DEBUG Visiting attribute path : updated
2021-12-11 17:23:45,413 DEBUG Building LoadPlan...
2021-12-11 17:23:45,413 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:45,413 DEBUG LoadPlan(entity=com.peterphi.servicemanager.service.db.entity.ServiceInstanceEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.servicemanager.service.db.entity.ServiceInstanceEntity, querySpaceUid=<gen:0>, path=com.peterphi.servicemanager.service.db.entity.ServiceInstanceEntity)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.servicemanager.service.db.entity.ServiceInstanceEntity)
          - SQL table alias mapping - serviceins0_
          - alias suffix - 0_
          - suffixed key columns - {id1_5_0_}

2021-12-11 17:23:45,413 DEBUG Static select for entity com.peterphi.servicemanager.service.db.entity.ServiceInstanceEntity [PESSIMISTIC_FORCE_INCREMENT]: select serviceins0_.id as id1_5_0_, serviceins0_.code_revision as code_rev2_5_0_, serviceins0_.created_ts as created_3_5_0_, serviceins0_.service_href as service_4_5_0_, serviceins0_.management_token as manageme5_5_0_, serviceins0_.updated_ts as updated_6_5_0_ from service_instance serviceins0_ where serviceins0_.id=? for update
2021-12-11 17:23:45,413 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@35650279]
2021-12-11 17:23:45,413 DEBUG Visiting attribute path : codeRevision
2021-12-11 17:23:45,413 DEBUG Visiting attribute path : created
2021-12-11 17:23:45,413 DEBUG Visiting attribute path : endpoint
2021-12-11 17:23:45,413 DEBUG Visiting attribute path : managementToken
2021-12-11 17:23:45,413 DEBUG Visiting attribute path : updated
2021-12-11 17:23:45,413 DEBUG Building LoadPlan...
2021-12-11 17:23:45,413 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:45,413 DEBUG LoadPlan(entity=com.peterphi.servicemanager.service.db.entity.ServiceInstanceEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.servicemanager.service.db.entity.ServiceInstanceEntity, querySpaceUid=<gen:0>, path=com.peterphi.servicemanager.service.db.entity.ServiceInstanceEntity)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.servicemanager.service.db.entity.ServiceInstanceEntity)
          - SQL table alias mapping - serviceins0_
          - alias suffix - 0_
          - suffixed key columns - {id1_5_0_}

2021-12-11 17:23:45,414 DEBUG Static select for entity com.peterphi.servicemanager.service.db.entity.ServiceInstanceEntity [OPTIMISTIC]: select serviceins0_.id as id1_5_0_, serviceins0_.code_revision as code_rev2_5_0_, serviceins0_.created_ts as created_3_5_0_, serviceins0_.service_href as service_4_5_0_, serviceins0_.management_token as manageme5_5_0_, serviceins0_.updated_ts as updated_6_5_0_ from service_instance serviceins0_ where serviceins0_.id=?
2021-12-11 17:23:45,414 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@182e7eda]
2021-12-11 17:23:45,414 DEBUG Visiting attribute path : codeRevision
2021-12-11 17:23:45,414 DEBUG Visiting attribute path : created
2021-12-11 17:23:45,414 DEBUG Visiting attribute path : endpoint
2021-12-11 17:23:45,414 DEBUG Visiting attribute path : managementToken
2021-12-11 17:23:45,414 DEBUG Visiting attribute path : updated
2021-12-11 17:23:45,414 DEBUG Building LoadPlan...
2021-12-11 17:23:45,414 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:45,414 DEBUG LoadPlan(entity=com.peterphi.servicemanager.service.db.entity.ServiceInstanceEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.servicemanager.service.db.entity.ServiceInstanceEntity, querySpaceUid=<gen:0>, path=com.peterphi.servicemanager.service.db.entity.ServiceInstanceEntity)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.servicemanager.service.db.entity.ServiceInstanceEntity)
          - SQL table alias mapping - serviceins0_
          - alias suffix - 0_
          - suffixed key columns - {id1_5_0_}

2021-12-11 17:23:45,414 DEBUG Static select for entity com.peterphi.servicemanager.service.db.entity.ServiceInstanceEntity [OPTIMISTIC_FORCE_INCREMENT]: select serviceins0_.id as id1_5_0_, serviceins0_.code_revision as code_rev2_5_0_, serviceins0_.created_ts as created_3_5_0_, serviceins0_.service_href as service_4_5_0_, serviceins0_.management_token as manageme5_5_0_, serviceins0_.updated_ts as updated_6_5_0_ from service_instance serviceins0_ where serviceins0_.id=?
2021-12-11 17:23:45,414 DEBUG Static select for action ACTION_MERGE on entity com.peterphi.servicemanager.service.db.entity.ServiceInstanceEntity: select serviceins0_.id as id1_5_0_, serviceins0_.code_revision as code_rev2_5_0_, serviceins0_.created_ts as created_3_5_0_, serviceins0_.service_href as service_4_5_0_, serviceins0_.management_token as manageme5_5_0_, serviceins0_.updated_ts as updated_6_5_0_ from service_instance serviceins0_ where serviceins0_.id=?
2021-12-11 17:23:45,415 DEBUG Static select for action ACTION_REFRESH on entity com.peterphi.servicemanager.service.db.entity.ServiceInstanceEntity: select serviceins0_.id as id1_5_0_, serviceins0_.code_revision as code_rev2_5_0_, serviceins0_.created_ts as created_3_5_0_, serviceins0_.service_href as service_4_5_0_, serviceins0_.management_token as manageme5_5_0_, serviceins0_.updated_ts as updated_6_5_0_ from service_instance serviceins0_ where serviceins0_.id=?
2021-12-11 17:23:45,415 DEBUG Static SQL for entity: com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity
2021-12-11 17:23:45,415 DEBUG  Version select: select updated_ts from resource_template where id =?
2021-12-11 17:23:45,415 DEBUG  Snapshot select: select resourcete_.id, resourcete_.created_ts as created_2_4_, resourcete_.revision_commit as revision3_4_, resourcete_.revision_counter as revision4_4_, resourcete_.updated_ts as updated_5_4_ from resource_template resourcete_ where resourcete_.id=?
2021-12-11 17:23:45,415 DEBUG  Insert 0: insert into resource_template (created_ts, revision_commit, revision_counter, updated_ts, id) values (?, ?, ?, ?, ?)
2021-12-11 17:23:45,415 DEBUG  Update 0: update resource_template set created_ts=?, revision_commit=?, revision_counter=?, updated_ts=? where id=? and updated_ts=?
2021-12-11 17:23:45,415 DEBUG  Delete 0: delete from resource_template where id=? and updated_ts=?
2021-12-11 17:23:45,415 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@420a8042]
2021-12-11 17:23:45,415 DEBUG Visiting attribute path : created
2021-12-11 17:23:45,415 DEBUG Visiting attribute path : instances
2021-12-11 17:23:45,415 DEBUG Adding QuerySpace : uid = <gen:1> -> org.hibernate.loader.plan.build.internal.spaces.CollectionQuerySpaceImpl@5921b93c]
2021-12-11 17:23:45,415 DEBUG Adding QuerySpace : uid = <gen:2> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@faea4da]
2021-12-11 17:23:45,416 DEBUG Visiting attribute path : latestRevision
2021-12-11 17:23:45,416 DEBUG Visiting attribute path : revisions
2021-12-11 17:23:45,416 DEBUG Visiting attribute path : updated
2021-12-11 17:23:45,416 DEBUG Building LoadPlan...
2021-12-11 17:23:45,416 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:45,417 DEBUG LoadPlan(entity=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity, querySpaceUid=<gen:0>, path=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity)
          - CollectionAttributeFetchImpl(collection=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity.instances, querySpaceUid=<gen:1>, path=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity.instances)
             - (collection element) CollectionFetchableElementEntityGraph(entity=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity, querySpaceUid=<gen:2>, path=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity.instances.<elements>)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity)
          - SQL table alias mapping - resourcete0_
          - alias suffix - 0_
          - suffixed key columns - {id1_4_0_}

2021-12-11 17:23:45,417 DEBUG Static select for entity com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity [NONE]: select resourcete0_.id as id1_4_0_, resourcete0_.created_ts as created_2_4_0_, resourcete0_.revision_commit as revision3_4_0_, resourcete0_.revision_counter as revision4_4_0_, resourcete0_.updated_ts as updated_5_4_0_ from resource_template resourcete0_ where resourcete0_.id=?
2021-12-11 17:23:45,417 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@69f2cb04]
2021-12-11 17:23:45,417 DEBUG Visiting attribute path : created
2021-12-11 17:23:45,417 DEBUG Visiting attribute path : instances
2021-12-11 17:23:45,417 DEBUG Adding QuerySpace : uid = <gen:1> -> org.hibernate.loader.plan.build.internal.spaces.CollectionQuerySpaceImpl@b4732dc]
2021-12-11 17:23:45,417 DEBUG Adding QuerySpace : uid = <gen:2> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@45292ec1]
2021-12-11 17:23:45,417 DEBUG Visiting attribute path : latestRevision
2021-12-11 17:23:45,417 DEBUG Visiting attribute path : revisions
2021-12-11 17:23:45,417 DEBUG Visiting attribute path : updated
2021-12-11 17:23:45,417 DEBUG Building LoadPlan...
2021-12-11 17:23:45,417 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:45,417 DEBUG LoadPlan(entity=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity, querySpaceUid=<gen:0>, path=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity)
          - CollectionAttributeFetchImpl(collection=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity.instances, querySpaceUid=<gen:1>, path=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity.instances)
             - (collection element) CollectionFetchableElementEntityGraph(entity=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity, querySpaceUid=<gen:2>, path=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity.instances.<elements>)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity)
          - SQL table alias mapping - resourcete0_
          - alias suffix - 0_
          - suffixed key columns - {id1_4_0_}

2021-12-11 17:23:45,417 DEBUG Static select for entity com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity [READ]: select resourcete0_.id as id1_4_0_, resourcete0_.created_ts as created_2_4_0_, resourcete0_.revision_commit as revision3_4_0_, resourcete0_.revision_counter as revision4_4_0_, resourcete0_.updated_ts as updated_5_4_0_ from resource_template resourcete0_ where resourcete0_.id=?
2021-12-11 17:23:45,418 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@3a7c678b]
2021-12-11 17:23:45,418 DEBUG Visiting attribute path : created
2021-12-11 17:23:45,418 DEBUG Visiting attribute path : instances
2021-12-11 17:23:45,418 DEBUG Adding QuerySpace : uid = <gen:1> -> org.hibernate.loader.plan.build.internal.spaces.CollectionQuerySpaceImpl@1ad9b8d3]
2021-12-11 17:23:45,418 DEBUG Adding QuerySpace : uid = <gen:2> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@168ad26f]
2021-12-11 17:23:45,418 DEBUG Visiting attribute path : latestRevision
2021-12-11 17:23:45,418 DEBUG Visiting attribute path : revisions
2021-12-11 17:23:45,418 DEBUG Visiting attribute path : updated
2021-12-11 17:23:45,418 DEBUG Building LoadPlan...
2021-12-11 17:23:45,418 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:45,418 DEBUG LoadPlan(entity=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity, querySpaceUid=<gen:0>, path=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity)
          - CollectionAttributeFetchImpl(collection=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity.instances, querySpaceUid=<gen:1>, path=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity.instances)
             - (collection element) CollectionFetchableElementEntityGraph(entity=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity, querySpaceUid=<gen:2>, path=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity.instances.<elements>)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity)
          - SQL table alias mapping - resourcete0_
          - alias suffix - 0_
          - suffixed key columns - {id1_4_0_}

2021-12-11 17:23:45,418 DEBUG Static select for entity com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity [UPGRADE]: select resourcete0_.id as id1_4_0_, resourcete0_.created_ts as created_2_4_0_, resourcete0_.revision_commit as revision3_4_0_, resourcete0_.revision_counter as revision4_4_0_, resourcete0_.updated_ts as updated_5_4_0_ from resource_template resourcete0_ where resourcete0_.id=? for update
2021-12-11 17:23:45,418 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@4f93bf0a]
2021-12-11 17:23:45,418 DEBUG Visiting attribute path : created
2021-12-11 17:23:45,419 DEBUG Visiting attribute path : instances
2021-12-11 17:23:45,419 DEBUG Adding QuerySpace : uid = <gen:1> -> org.hibernate.loader.plan.build.internal.spaces.CollectionQuerySpaceImpl@656a3d6b]
2021-12-11 17:23:45,419 DEBUG Adding QuerySpace : uid = <gen:2> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@25b38203]
2021-12-11 17:23:45,419 DEBUG Visiting attribute path : latestRevision
2021-12-11 17:23:45,419 DEBUG Visiting attribute path : revisions
2021-12-11 17:23:45,419 DEBUG Visiting attribute path : updated
2021-12-11 17:23:45,419 DEBUG Building LoadPlan...
2021-12-11 17:23:45,419 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:45,419 DEBUG LoadPlan(entity=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity, querySpaceUid=<gen:0>, path=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity)
          - CollectionAttributeFetchImpl(collection=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity.instances, querySpaceUid=<gen:1>, path=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity.instances)
             - (collection element) CollectionFetchableElementEntityGraph(entity=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity, querySpaceUid=<gen:2>, path=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity.instances.<elements>)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity)
          - SQL table alias mapping - resourcete0_
          - alias suffix - 0_
          - suffixed key columns - {id1_4_0_}

2021-12-11 17:23:45,419 DEBUG Static select for entity com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity [UPGRADE_NOWAIT]: select resourcete0_.id as id1_4_0_, resourcete0_.created_ts as created_2_4_0_, resourcete0_.revision_commit as revision3_4_0_, resourcete0_.revision_counter as revision4_4_0_, resourcete0_.updated_ts as updated_5_4_0_ from resource_template resourcete0_ where resourcete0_.id=? for update
2021-12-11 17:23:45,419 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@778a1250]
2021-12-11 17:23:45,419 DEBUG Visiting attribute path : created
2021-12-11 17:23:45,419 DEBUG Visiting attribute path : instances
2021-12-11 17:23:45,419 DEBUG Adding QuerySpace : uid = <gen:1> -> org.hibernate.loader.plan.build.internal.spaces.CollectionQuerySpaceImpl@61191222]
2021-12-11 17:23:45,419 DEBUG Adding QuerySpace : uid = <gen:2> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@58833798]
2021-12-11 17:23:45,419 DEBUG Visiting attribute path : latestRevision
2021-12-11 17:23:45,419 DEBUG Visiting attribute path : revisions
2021-12-11 17:23:45,419 DEBUG Visiting attribute path : updated
2021-12-11 17:23:45,419 DEBUG Building LoadPlan...
2021-12-11 17:23:45,420 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:45,420 DEBUG LoadPlan(entity=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity, querySpaceUid=<gen:0>, path=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity)
          - CollectionAttributeFetchImpl(collection=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity.instances, querySpaceUid=<gen:1>, path=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity.instances)
             - (collection element) CollectionFetchableElementEntityGraph(entity=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity, querySpaceUid=<gen:2>, path=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity.instances.<elements>)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity)
          - SQL table alias mapping - resourcete0_
          - alias suffix - 0_
          - suffixed key columns - {id1_4_0_}

2021-12-11 17:23:45,420 DEBUG Static select for entity com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity [UPGRADE_SKIPLOCKED]: select resourcete0_.id as id1_4_0_, resourcete0_.created_ts as created_2_4_0_, resourcete0_.revision_commit as revision3_4_0_, resourcete0_.revision_counter as revision4_4_0_, resourcete0_.updated_ts as updated_5_4_0_ from resource_template resourcete0_ where resourcete0_.id=? for update
2021-12-11 17:23:45,420 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@7f3ca64a]
2021-12-11 17:23:45,420 DEBUG Visiting attribute path : created
2021-12-11 17:23:45,420 DEBUG Visiting attribute path : instances
2021-12-11 17:23:45,420 DEBUG Adding QuerySpace : uid = <gen:1> -> org.hibernate.loader.plan.build.internal.spaces.CollectionQuerySpaceImpl@64e7d698]
2021-12-11 17:23:45,420 DEBUG Adding QuerySpace : uid = <gen:2> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@2519026b]
2021-12-11 17:23:45,420 DEBUG Visiting attribute path : latestRevision
2021-12-11 17:23:45,420 DEBUG Visiting attribute path : revisions
2021-12-11 17:23:45,420 DEBUG Visiting attribute path : updated
2021-12-11 17:23:45,420 DEBUG Building LoadPlan...
2021-12-11 17:23:45,420 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:45,420 DEBUG LoadPlan(entity=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity, querySpaceUid=<gen:0>, path=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity)
          - CollectionAttributeFetchImpl(collection=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity.instances, querySpaceUid=<gen:1>, path=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity.instances)
             - (collection element) CollectionFetchableElementEntityGraph(entity=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity, querySpaceUid=<gen:2>, path=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity.instances.<elements>)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity)
          - SQL table alias mapping - resourcete0_
          - alias suffix - 0_
          - suffixed key columns - {id1_4_0_}

2021-12-11 17:23:45,420 DEBUG Static select for entity com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity [FORCE]: select resourcete0_.id as id1_4_0_, resourcete0_.created_ts as created_2_4_0_, resourcete0_.revision_commit as revision3_4_0_, resourcete0_.revision_counter as revision4_4_0_, resourcete0_.updated_ts as updated_5_4_0_ from resource_template resourcete0_ where resourcete0_.id=? for update
2021-12-11 17:23:45,420 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@3f8dfe74]
2021-12-11 17:23:45,421 DEBUG Visiting attribute path : created
2021-12-11 17:23:45,421 DEBUG Visiting attribute path : instances
2021-12-11 17:23:45,421 DEBUG Adding QuerySpace : uid = <gen:1> -> org.hibernate.loader.plan.build.internal.spaces.CollectionQuerySpaceImpl@1a950fdd]
2021-12-11 17:23:45,421 DEBUG Adding QuerySpace : uid = <gen:2> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@77724cbe]
2021-12-11 17:23:45,421 DEBUG Visiting attribute path : latestRevision
2021-12-11 17:23:45,421 DEBUG Visiting attribute path : revisions
2021-12-11 17:23:45,421 DEBUG Visiting attribute path : updated
2021-12-11 17:23:45,421 DEBUG Building LoadPlan...
2021-12-11 17:23:45,421 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:45,421 DEBUG LoadPlan(entity=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity, querySpaceUid=<gen:0>, path=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity)
          - CollectionAttributeFetchImpl(collection=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity.instances, querySpaceUid=<gen:1>, path=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity.instances)
             - (collection element) CollectionFetchableElementEntityGraph(entity=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity, querySpaceUid=<gen:2>, path=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity.instances.<elements>)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity)
          - SQL table alias mapping - resourcete0_
          - alias suffix - 0_
          - suffixed key columns - {id1_4_0_}

2021-12-11 17:23:45,421 DEBUG Static select for entity com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity [PESSIMISTIC_READ]: select resourcete0_.id as id1_4_0_, resourcete0_.created_ts as created_2_4_0_, resourcete0_.revision_commit as revision3_4_0_, resourcete0_.revision_counter as revision4_4_0_, resourcete0_.updated_ts as updated_5_4_0_ from resource_template resourcete0_ where resourcete0_.id=? for update
2021-12-11 17:23:45,421 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@27dc627a]
2021-12-11 17:23:45,421 DEBUG Visiting attribute path : created
2021-12-11 17:23:45,421 DEBUG Visiting attribute path : instances
2021-12-11 17:23:45,421 DEBUG Adding QuerySpace : uid = <gen:1> -> org.hibernate.loader.plan.build.internal.spaces.CollectionQuerySpaceImpl@37a9b687]
2021-12-11 17:23:45,421 DEBUG Adding QuerySpace : uid = <gen:2> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@525b1b70]
2021-12-11 17:23:45,421 DEBUG Visiting attribute path : latestRevision
2021-12-11 17:23:45,421 DEBUG Visiting attribute path : revisions
2021-12-11 17:23:45,421 DEBUG Visiting attribute path : updated
2021-12-11 17:23:45,421 DEBUG Building LoadPlan...
2021-12-11 17:23:45,422 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:45,422 DEBUG LoadPlan(entity=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity, querySpaceUid=<gen:0>, path=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity)
          - CollectionAttributeFetchImpl(collection=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity.instances, querySpaceUid=<gen:1>, path=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity.instances)
             - (collection element) CollectionFetchableElementEntityGraph(entity=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity, querySpaceUid=<gen:2>, path=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity.instances.<elements>)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity)
          - SQL table alias mapping - resourcete0_
          - alias suffix - 0_
          - suffixed key columns - {id1_4_0_}

2021-12-11 17:23:45,422 DEBUG Static select for entity com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity [PESSIMISTIC_WRITE]: select resourcete0_.id as id1_4_0_, resourcete0_.created_ts as created_2_4_0_, resourcete0_.revision_commit as revision3_4_0_, resourcete0_.revision_counter as revision4_4_0_, resourcete0_.updated_ts as updated_5_4_0_ from resource_template resourcete0_ where resourcete0_.id=? for update
2021-12-11 17:23:45,422 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@16d07cf3]
2021-12-11 17:23:45,422 DEBUG Visiting attribute path : created
2021-12-11 17:23:45,422 DEBUG Visiting attribute path : instances
2021-12-11 17:23:45,422 DEBUG Adding QuerySpace : uid = <gen:1> -> org.hibernate.loader.plan.build.internal.spaces.CollectionQuerySpaceImpl@6c977dcf]
2021-12-11 17:23:45,422 DEBUG Adding QuerySpace : uid = <gen:2> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@661d6bb6]
2021-12-11 17:23:45,422 DEBUG Visiting attribute path : latestRevision
2021-12-11 17:23:45,422 DEBUG Visiting attribute path : revisions
2021-12-11 17:23:45,422 DEBUG Visiting attribute path : updated
2021-12-11 17:23:45,422 DEBUG Building LoadPlan...
2021-12-11 17:23:45,423 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:45,423 DEBUG LoadPlan(entity=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity, querySpaceUid=<gen:0>, path=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity)
          - CollectionAttributeFetchImpl(collection=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity.instances, querySpaceUid=<gen:1>, path=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity.instances)
             - (collection element) CollectionFetchableElementEntityGraph(entity=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity, querySpaceUid=<gen:2>, path=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity.instances.<elements>)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity)
          - SQL table alias mapping - resourcete0_
          - alias suffix - 0_
          - suffixed key columns - {id1_4_0_}

2021-12-11 17:23:45,423 DEBUG Static select for entity com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity [PESSIMISTIC_FORCE_INCREMENT]: select resourcete0_.id as id1_4_0_, resourcete0_.created_ts as created_2_4_0_, resourcete0_.revision_commit as revision3_4_0_, resourcete0_.revision_counter as revision4_4_0_, resourcete0_.updated_ts as updated_5_4_0_ from resource_template resourcete0_ where resourcete0_.id=? for update
2021-12-11 17:23:45,423 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@733fb462]
2021-12-11 17:23:45,423 DEBUG Visiting attribute path : created
2021-12-11 17:23:45,423 DEBUG Visiting attribute path : instances
2021-12-11 17:23:45,423 DEBUG Adding QuerySpace : uid = <gen:1> -> org.hibernate.loader.plan.build.internal.spaces.CollectionQuerySpaceImpl@359066bc]
2021-12-11 17:23:45,423 DEBUG Adding QuerySpace : uid = <gen:2> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@385dfb63]
2021-12-11 17:23:45,423 DEBUG Visiting attribute path : latestRevision
2021-12-11 17:23:45,423 DEBUG Visiting attribute path : revisions
2021-12-11 17:23:45,423 DEBUG Visiting attribute path : updated
2021-12-11 17:23:45,423 DEBUG Building LoadPlan...
2021-12-11 17:23:45,424 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:45,424 DEBUG LoadPlan(entity=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity, querySpaceUid=<gen:0>, path=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity)
          - CollectionAttributeFetchImpl(collection=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity.instances, querySpaceUid=<gen:1>, path=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity.instances)
             - (collection element) CollectionFetchableElementEntityGraph(entity=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity, querySpaceUid=<gen:2>, path=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity.instances.<elements>)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity)
          - SQL table alias mapping - resourcete0_
          - alias suffix - 0_
          - suffixed key columns - {id1_4_0_}

2021-12-11 17:23:45,424 DEBUG Static select for entity com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity [OPTIMISTIC]: select resourcete0_.id as id1_4_0_, resourcete0_.created_ts as created_2_4_0_, resourcete0_.revision_commit as revision3_4_0_, resourcete0_.revision_counter as revision4_4_0_, resourcete0_.updated_ts as updated_5_4_0_ from resource_template resourcete0_ where resourcete0_.id=?
2021-12-11 17:23:45,424 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@364fd4ae]
2021-12-11 17:23:45,424 DEBUG Visiting attribute path : created
2021-12-11 17:23:45,424 DEBUG Visiting attribute path : instances
2021-12-11 17:23:45,424 DEBUG Adding QuerySpace : uid = <gen:1> -> org.hibernate.loader.plan.build.internal.spaces.CollectionQuerySpaceImpl@12417468]
2021-12-11 17:23:45,424 DEBUG Adding QuerySpace : uid = <gen:2> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@459003a0]
2021-12-11 17:23:45,424 DEBUG Visiting attribute path : latestRevision
2021-12-11 17:23:45,424 DEBUG Visiting attribute path : revisions
2021-12-11 17:23:45,424 DEBUG Visiting attribute path : updated
2021-12-11 17:23:45,424 DEBUG Building LoadPlan...
2021-12-11 17:23:45,424 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:45,424 DEBUG LoadPlan(entity=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity, querySpaceUid=<gen:0>, path=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity)
          - CollectionAttributeFetchImpl(collection=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity.instances, querySpaceUid=<gen:1>, path=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity.instances)
             - (collection element) CollectionFetchableElementEntityGraph(entity=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity, querySpaceUid=<gen:2>, path=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity.instances.<elements>)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity)
          - SQL table alias mapping - resourcete0_
          - alias suffix - 0_
          - suffixed key columns - {id1_4_0_}

2021-12-11 17:23:45,424 DEBUG Static select for entity com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity [OPTIMISTIC_FORCE_INCREMENT]: select resourcete0_.id as id1_4_0_, resourcete0_.created_ts as created_2_4_0_, resourcete0_.revision_commit as revision3_4_0_, resourcete0_.revision_counter as revision4_4_0_, resourcete0_.updated_ts as updated_5_4_0_ from resource_template resourcete0_ where resourcete0_.id=?
2021-12-11 17:23:45,428 DEBUG Static select for action ACTION_MERGE on entity com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity: select resourcete0_.id as id1_4_1_, resourcete0_.created_ts as created_2_4_1_, resourcete0_.revision_commit as revision3_4_1_, resourcete0_.revision_counter as revision4_4_1_, resourcete0_.updated_ts as updated_5_4_1_, instances1_.template_id as template9_2_3_, instances1_.id as id1_2_3_, instances1_.id as id1_2_0_, instances1_.created_ts as created_2_2_0_, instances1_.provider_name as provider3_2_0_, instances1_.provider_instance_id as provider4_2_0_, instances1_.resource_state as resource5_2_0_, instances1_.template_id as template9_2_0_, instances1_.template_revision_commit as template6_2_0_, instances1_.template_revision_counter as template7_2_0_, instances1_.updated_ts as updated_8_2_0_ from resource_template resourcete0_ left outer join resource_instance instances1_ on resourcete0_.id=instances1_.template_id where resourcete0_.id=? order by instances1_.resource_state
2021-12-11 17:23:45,428 DEBUG Static select for action ACTION_REFRESH on entity com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity: select resourcete0_.id as id1_4_1_, resourcete0_.created_ts as created_2_4_1_, resourcete0_.revision_commit as revision3_4_1_, resourcete0_.revision_counter as revision4_4_1_, resourcete0_.updated_ts as updated_5_4_1_, instances1_.template_id as template9_2_3_, instances1_.id as id1_2_3_, instances1_.id as id1_2_0_, instances1_.created_ts as created_2_2_0_, instances1_.provider_name as provider3_2_0_, instances1_.provider_instance_id as provider4_2_0_, instances1_.resource_state as resource5_2_0_, instances1_.template_id as template9_2_0_, instances1_.template_revision_commit as template6_2_0_, instances1_.template_revision_counter as template7_2_0_, instances1_.updated_ts as updated_8_2_0_ from resource_template resourcete0_ left outer join resource_instance instances1_ on resourcete0_.id=instances1_.template_id where resourcete0_.id=? order by instances1_.resource_state
2021-12-11 17:23:45,434 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.CollectionQuerySpaceImpl@a85644c]
2021-12-11 17:23:45,434 DEBUG Adding QuerySpace : uid = <gen:1> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@8054fe2]
2021-12-11 17:23:45,436 DEBUG Visiting attribute path : created
2021-12-11 17:23:45,436 DEBUG Visiting attribute path : metadata
2021-12-11 17:23:45,436 DEBUG Adding QuerySpace : uid = <gen:2> -> org.hibernate.loader.plan.build.internal.spaces.CollectionQuerySpaceImpl@196624bf]
2021-12-11 17:23:45,437 DEBUG Visiting attribute path : provider
2021-12-11 17:23:45,437 DEBUG Visiting attribute path : providerInstanceId
2021-12-11 17:23:45,437 DEBUG Visiting attribute path : state
2021-12-11 17:23:45,437 DEBUG Visiting attribute path : template
2021-12-11 17:23:45,437 DEBUG Property path deemed to be circular : template
2021-12-11 17:23:45,437 DEBUG Visiting attribute path : templateRevision
2021-12-11 17:23:45,437 DEBUG Visiting attribute path : templateRevisionCounter
2021-12-11 17:23:45,437 DEBUG Visiting attribute path : updated
2021-12-11 17:23:45,437 DEBUG Building LoadPlan...
2021-12-11 17:23:45,440 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:45,441 DEBUG LoadPlan(collection=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity.instances)
    - Returns
       - CollectionReturnImpl(collection=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity.instances, querySpaceUid=<gen:0>, path=[com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity.instances])
          - (collection element) CollectionFetchableElementEntityGraph(entity=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity, querySpaceUid=<gen:1>, path=[com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity.instances].<elements>)
             - CollectionAttributeFetchImpl(collection=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity.metadata, querySpaceUid=<gen:2>, path=[com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity.instances].<elements>.metadata)
    - QuerySpaces
       - CollectionQuerySpaceImpl(uid=<gen:0>, collection=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity.instances)
          - SQL table alias mapping - instances0_
          - alias suffix - 0_
          - suffixed key columns - {template9_2_0_}
          - entity-element alias suffix - 1_
          - 1_entity-element suffixed key columns - id1_2_1_
          - JOIN (JoinDefinedByMetadata(elements)) : <gen:0> -> <gen:1>
             - EntityQuerySpaceImpl(uid=<gen:1>, entity=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity)
                - SQL table alias mapping - instances0_
                - alias suffix - 1_
                - suffixed key columns - {id1_2_1_}

2021-12-11 17:23:45,441 DEBUG Static select for collection com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity.instances: select instances0_.template_id as template9_2_0_, instances0_.id as id1_2_0_, instances0_.id as id1_2_1_, instances0_.created_ts as created_2_2_1_, instances0_.provider_name as provider3_2_1_, instances0_.provider_instance_id as provider4_2_1_, instances0_.resource_state as resource5_2_1_, instances0_.template_id as template9_2_1_, instances0_.template_revision_commit as template6_2_1_, instances0_.template_revision_counter as template7_2_1_, instances0_.updated_ts as updated_8_2_1_ from resource_instance instances0_ where instances0_.template_id=? order by instances0_.resource_state
2021-12-11 17:23:45,441 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.CollectionQuerySpaceImpl@388c519]
2021-12-11 17:23:45,442 DEBUG Visiting index for collection :  
2021-12-11 17:23:45,442 DEBUG Building LoadPlan...
2021-12-11 17:23:45,443 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:45,443 DEBUG LoadPlan(collection=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity.metadata)
    - Returns
       - CollectionReturnImpl(collection=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity.metadata, querySpaceUid=<gen:0>, path=[com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity.metadata])
    - QuerySpaces
       - CollectionQuerySpaceImpl(uid=<gen:0>, collection=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity.metadata)
          - SQL table alias mapping - metadata0_
          - alias suffix - 0_
          - suffixed key columns - {resource1_3_0_}

2021-12-11 17:23:45,443 DEBUG Static select for collection com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity.metadata: select metadata0_.resource_instance_id as resource1_3_0_, metadata0_.meta_val as meta_val2_3_0_, metadata0_.meta_name as meta_nam3_0_ from resource_instance_metadata metadata0_ where metadata0_.resource_instance_id=?
2021-12-11 17:23:45,484 DEBUG No actions specified; doing nothing
2021-12-11 17:23:45,489 DEBUG Checking 0 named HQL queries
2021-12-11 17:23:45,489 DEBUG Checking 0 named SQL queries
2021-12-11 17:23:45,491 DEBUG Initializing SessionFactoryRegistry : org.hibernate.internal.SessionFactoryRegistry@93501be
2021-12-11 17:23:45,493 DEBUG Registering SessionFactory: 820785d0-c375-423d-9b77-6880d5d4dada (<unnamed>)
2021-12-11 17:23:45,493 DEBUG Not binding SessionFactory to JNDI, no JNDI name configured
2021-12-11 17:23:45,498 DEBUG Known entities: [acme_ca_cert, resource_instance, acme_ca_account, service_instance, resource_template]
2021-12-11 17:23:45,499 DEBUG Begin create QEntity class com.peterphi.servicemanager.service.db.entity.LetsEncryptCertificateEntity
2021-12-11 17:23:45,501 DEBUG End create QEntity class com.peterphi.servicemanager.service.db.entity.LetsEncryptCertificateEntity
2021-12-11 17:23:45,501 DEBUG Begin create QEntity class com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity
2021-12-11 17:23:45,501 DEBUG Ignoring BASIC ElementCollection MAP of class java.lang.String metadata
2021-12-11 17:23:45,502 DEBUG Begin create QEntity class com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity
2021-12-11 17:23:45,502 DEBUG End create QEntity class com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity
2021-12-11 17:23:45,503 DEBUG End create QEntity class com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity
2021-12-11 17:23:45,503 DEBUG Begin create QEntity class com.peterphi.servicemanager.service.db.entity.LetsEncryptAccountEntity
2021-12-11 17:23:45,503 DEBUG End create QEntity class com.peterphi.servicemanager.service.db.entity.LetsEncryptAccountEntity
2021-12-11 17:23:45,503 DEBUG Begin create QEntity class com.peterphi.servicemanager.service.db.entity.ServiceInstanceEntity
2021-12-11 17:23:45,503 DEBUG End create QEntity class com.peterphi.servicemanager.service.db.entity.ServiceInstanceEntity
2021-12-11 17:23:45,587 DEBUG Statistics initialized [enabled=false]
2021-12-11 17:23:45,628 DEBUG begin
2021-12-11 17:23:45,686 DEBUG Rendered criteria query -> select generatedAlias0 from resource_template as generatedAlias0 where 1=1
2021-12-11 17:23:45,696 DEBUG QueryTranslatorFactory : org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory@224c7de4
2021-12-11 17:23:45,696  INFO HHH000397: Using ASTQueryTranslatorFactory
2021-12-11 17:23:45,717 DEBUG parse() - HQL: select generatedAlias0 from com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity as generatedAlias0 where 1=1
2021-12-11 17:23:45,720 DEBUG throwQueryException() : no errors
2021-12-11 17:23:45,722 DEBUG --- HQL AST ---
 \-[QUERY] Node: 'query'
    +-[SELECT_FROM] Node: 'SELECT_FROM'
    |  +-[FROM] Node: 'from'
    |  |  \-[RANGE] Node: 'RANGE'
    |  |     +-[DOT] Node: '.'
    |  |     |  +-[DOT] Node: '.'
    |  |     |  |  +-[DOT] Node: '.'
    |  |     |  |  |  +-[DOT] Node: '.'
    |  |     |  |  |  |  +-[DOT] Node: '.'
    |  |     |  |  |  |  |  +-[DOT] Node: '.'
    |  |     |  |  |  |  |  |  +-[IDENT] Node: 'com'
    |  |     |  |  |  |  |  |  \-[IDENT] Node: 'peterphi'
    |  |     |  |  |  |  |  \-[IDENT] Node: 'servicemanager'
    |  |     |  |  |  |  \-[IDENT] Node: 'service'
    |  |     |  |  |  \-[IDENT] Node: 'db'
    |  |     |  |  \-[IDENT] Node: 'entity'
    |  |     |  \-[IDENT] Node: 'ResourceTemplateEntity'
    |  |     \-[ALIAS] Node: 'generatedAlias0'
    |  \-[SELECT] Node: 'select'
    |     \-[IDENT] Node: 'generatedAlias0'
    \-[WHERE] Node: 'where'
       \-[EQ] Node: '='
          +-[NUM_INT] Node: '1'
          \-[NUM_INT] Node: '1'

2021-12-11 17:23:45,745 DEBUG select << begin [level=1, statement=select]
2021-12-11 17:23:45,760 DEBUG FromClause{level=1} : com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity (generatedAlias0) -> resourcete0_
2021-12-11 17:23:45,761 DEBUG Resolved : generatedAlias0 -> resourcete0_.id
2021-12-11 17:23:45,766 DEBUG select : finishing up [level=1, statement=select]
2021-12-11 17:23:45,766 DEBUG processQuery() :  ( SELECT ( {select clause} resourcete0_.id ) ( FromClause{level=1} resource_template resourcete0_ ) ( where ( = 1 1 ) ) )
2021-12-11 17:23:45,775 DEBUG Using FROM fragment [resource_template resourcete0_]
2021-12-11 17:23:45,775 DEBUG select >> end [level=1, statement=select]
2021-12-11 17:23:45,775 DEBUG --- SQL AST ---
 \-[SELECT] QueryNode: 'SELECT'  querySpaces (resource_template)
    +-[SELECT_CLAUSE] SelectClause: '{select clause}'
    |  +-[ALIAS_REF] IdentNode: 'resourcete0_.id as id1_4_' {alias=generatedAlias0, className=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity, tableAlias=resourcete0_}
    |  \-[SQL_TOKEN] SqlFragment: 'resourcete0_.created_ts as created_2_4_, resourcete0_.revision_commit as revision3_4_, resourcete0_.revision_counter as revision4_4_, resourcete0_.updated_ts as updated_5_4_'
    +-[FROM] FromClause: 'from' FromClause{level=1, fromElementCounter=1, fromElements=1, fromElementByClassAlias=[generatedAlias0], fromElementByTableAlias=[resourcete0_], fromElementsByPath=[], collectionJoinFromElementsByPath=[], impliedElements=[]}
    |  \-[FROM_FRAGMENT] FromElement: 'resource_template resourcete0_' FromElement{explicit,not a collection join,not a fetch join,fetch non-lazy properties,classAlias=generatedAlias0,role=null,tableName=resource_template,tableAlias=resourcete0_,origin=null,columns={,className=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity}}
    \-[WHERE] SqlNode: 'where'
       \-[EQ] BinaryLogicOperatorNode: '='
          +-[NUM_INT] LiteralNode: '1'
          \-[NUM_INT] LiteralNode: '1'

2021-12-11 17:23:45,775 DEBUG throwQueryException() : no errors
2021-12-11 17:23:45,783 DEBUG HQL: select generatedAlias0 from com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity as generatedAlias0 where 1=1
2021-12-11 17:23:45,783 DEBUG SQL: select resourcete0_.id as id1_4_, resourcete0_.created_ts as created_2_4_, resourcete0_.revision_commit as revision3_4_, resourcete0_.revision_counter as revision4_4_, resourcete0_.updated_ts as updated_5_4_ from resource_template resourcete0_ where 1=1
2021-12-11 17:23:45,783 DEBUG throwQueryException() : no errors
2021-12-11 17:23:45,800 DEBUG select resourcete0_.id as id1_4_, resourcete0_.created_ts as created_2_4_, resourcete0_.revision_commit as revision3_4_, resourcete0_.revision_counter as revision4_4_, resourcete0_.updated_ts as updated_5_4_ from resource_template resourcete0_ where 1=1
2021-12-11 17:23:45,813 DEBUG Transformed: 0 rows to: 0 distinct results
2021-12-11 17:23:45,815 DEBUG rolling back
2021-12-11 17:23:45,815 DEBUG Initiating JDBC connection release from afterTransaction
2021-12-11 17:23:45,816 DEBUG Clearing local Synchronizations
2021-12-11 17:23:45,816 DEBUG Initiating JDBC connection release from afterTransaction
2021-12-11 17:23:45,819 DEBUG begin
2021-12-11 17:23:45,826 DEBUG Rendered criteria query -> select generatedAlias0 from resource_instance as generatedAlias0 left join fetch generatedAlias0.template as generatedAlias1 left join fetch generatedAlias0.metadata as generatedAlias2 where 1=1
2021-12-11 17:23:45,828 DEBUG parse() - HQL: select generatedAlias0 from com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity as generatedAlias0 left join fetch generatedAlias0.template as generatedAlias1 left join fetch generatedAlias0.metadata as generatedAlias2 where 1=1
2021-12-11 17:23:45,832 DEBUG throwQueryException() : no errors
2021-12-11 17:23:45,833 DEBUG --- HQL AST ---
 \-[QUERY] Node: 'query'
    +-[SELECT_FROM] Node: 'SELECT_FROM'
    |  +-[FROM] Node: 'from'
    |  |  +-[RANGE] Node: 'RANGE'
    |  |  |  +-[DOT] Node: '.'
    |  |  |  |  +-[DOT] Node: '.'
    |  |  |  |  |  +-[DOT] Node: '.'
    |  |  |  |  |  |  +-[DOT] Node: '.'
    |  |  |  |  |  |  |  +-[DOT] Node: '.'
    |  |  |  |  |  |  |  |  +-[DOT] Node: '.'
    |  |  |  |  |  |  |  |  |  +-[IDENT] Node: 'com'
    |  |  |  |  |  |  |  |  |  \-[IDENT] Node: 'peterphi'
    |  |  |  |  |  |  |  |  \-[IDENT] Node: 'servicemanager'
    |  |  |  |  |  |  |  \-[IDENT] Node: 'service'
    |  |  |  |  |  |  \-[IDENT] Node: 'db'
    |  |  |  |  |  \-[IDENT] Node: 'entity'
    |  |  |  |  \-[IDENT] Node: 'ResourceInstanceEntity'
    |  |  |  \-[ALIAS] Node: 'generatedAlias0'
    |  |  +-[JOIN] Node: 'join'
    |  |  |  +-[LEFT] Node: 'left'
    |  |  |  +-[FETCH] Node: 'fetch'
    |  |  |  +-[DOT] Node: '.'
    |  |  |  |  +-[IDENT] Node: 'generatedAlias0'
    |  |  |  |  \-[IDENT] Node: 'template'
    |  |  |  \-[ALIAS] Node: 'generatedAlias1'
    |  |  \-[JOIN] Node: 'join'
    |  |     +-[LEFT] Node: 'left'
    |  |     +-[FETCH] Node: 'fetch'
    |  |     +-[DOT] Node: '.'
    |  |     |  +-[IDENT] Node: 'generatedAlias0'
    |  |     |  \-[IDENT] Node: 'metadata'
    |  |     \-[ALIAS] Node: 'generatedAlias2'
    |  \-[SELECT] Node: 'select'
    |     \-[IDENT] Node: 'generatedAlias0'
    \-[WHERE] Node: 'where'
       \-[EQ] Node: '='
          +-[NUM_INT] Node: '1'
          \-[NUM_INT] Node: '1'

2021-12-11 17:23:45,833 DEBUG select << begin [level=1, statement=select]
2021-12-11 17:23:45,834 DEBUG FromClause{level=1} : com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity (generatedAlias0) -> resourcein0_
2021-12-11 17:23:45,835 DEBUG Resolved : generatedAlias0 -> resourcein0_.id
2021-12-11 17:23:45,838 DEBUG getDataType() : template -> org.hibernate.type.ManyToOneType(com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity)
2021-12-11 17:23:45,838 DEBUG dereferenceEntityJoin() : generating join for template in com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity (generatedAlias1) parent = [ {null} ]
2021-12-11 17:23:45,839 DEBUG FromClause{level=1} : com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity (generatedAlias1) -> resourcete1_
2021-12-11 17:23:45,839 DEBUG addJoinByPathMap() : generatedAlias0.template -> FromElement{explicit,not a collection join,not a fetch join,fetch non-lazy properties,classAlias=generatedAlias1,role=null,tableName=resource_template,tableAlias=resourcete1_,origin=resource_instance resourcein0_,columns={resourcein0_.template_id ,className=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity}}
2021-12-11 17:23:45,840 DEBUG Resolved : generatedAlias0.template -> resourcein0_.template_id
2021-12-11 17:23:45,840 DEBUG createFromJoinElement() : -- join tree --
 \-[JOIN_FRAGMENT] FromElement: 'resource_template resourcete1_' FromElement{explicit,not a collection join,fetch join,fetch non-lazy properties,classAlias=generatedAlias1,role=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity.template,tableName=resource_template,tableAlias=resourcete1_,origin=resource_instance resourcein0_,columns={resourcein0_.template_id ,className=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity}}

2021-12-11 17:23:45,840 DEBUG Resolved : generatedAlias0 -> resourcein0_.id
2021-12-11 17:23:45,841 DEBUG getDataType() : metadata -> org.hibernate.type.MapType(com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity.metadata)
2021-12-11 17:23:45,842 DEBUG FromClause{level=1} : null (generatedAlias2) -> metadata2_
2021-12-11 17:23:45,842 DEBUG addCollectionJoinFromElementByPath() : generatedAlias0.metadata -> resource_instance_metadata
2021-12-11 17:23:45,842 DEBUG dereferenceCollection() : Created new FROM element for generatedAlias0.metadata : resource_instance_metadata metadata2_
2021-12-11 17:23:45,842 DEBUG Resolved : generatedAlias0.metadata -> .
2021-12-11 17:23:45,842 DEBUG createFromJoinElement() : -- join tree --
 \-[JOIN_FRAGMENT] FromElement: 'resource_instance_metadata metadata2_' FromElement{explicit,collection join,fetch join,fetch non-lazy properties,classAlias=generatedAlias2,role=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity.metadata,tableName={none},tableAlias=metadata2_,origin=null,columns={,className=null}}

2021-12-11 17:23:45,843 DEBUG Resolved : generatedAlias0 -> resourcein0_.id
2021-12-11 17:23:45,843 DEBUG select : finishing up [level=1, statement=select]
2021-12-11 17:23:45,843 DEBUG processQuery() :  ( SELECT ( {select clause} resourcein0_.id ) ( FromClause{level=1} (  resource_template resourcete1_ resource_instance_metadata metadata2_ ) ) ( where ( = 1 1 ) ) )
2021-12-11 17:23:45,844 DEBUG Using FROM fragment [resource_instance resourcein0_]
2021-12-11 17:23:45,845 DEBUG Using FROM fragment [left outer join resource_template resourcete1_ on resourcein0_.template_id=resourcete1_.id]
2021-12-11 17:23:45,845 DEBUG Using FROM fragment [left outer join resource_instance_metadata metadata2_ on resourcein0_.id=metadata2_.resource_instance_id]
2021-12-11 17:23:45,845 DEBUG select >> end [level=1, statement=select]
2021-12-11 17:23:45,845 DEBUG --- SQL AST ---
 \-[SELECT] QueryNode: 'SELECT'  querySpaces (resource_instance_metadata,resource_instance,resource_template)
    +-[SELECT_CLAUSE] SelectClause: '{select clause}'
    |  +-[ALIAS_REF] IdentNode: 'resourcein0_.id as id1_2_0_' {alias=generatedAlias0, className=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity, tableAlias=resourcein0_}
    |  +-[SELECT_EXPR] SelectExpressionImpl: 'resourcete1_.id as id1_4_1_' {FromElement{explicit,not a collection join,fetch join,fetch non-lazy properties,classAlias=generatedAlias1,role=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity.template,tableName=resource_template,tableAlias=resourcete1_,origin=resource_instance resourcein0_,columns={resourcein0_.template_id ,className=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity}}}
    |  +-[SQL_TOKEN] SqlFragment: 'resourcein0_.created_ts as created_2_2_0_, resourcein0_.provider_name as provider3_2_0_, resourcein0_.provider_instance_id as provider4_2_0_, resourcein0_.resource_state as resource5_2_0_, resourcein0_.template_id as template9_2_0_, resourcein0_.template_revision_commit as template6_2_0_, resourcein0_.template_revision_counter as template7_2_0_, resourcein0_.updated_ts as updated_8_2_0_'
    |  +-[SQL_TOKEN] SqlFragment: 'metadata2_.resource_instance_id as resource1_3_0__, metadata2_.meta_val as meta_val2_3_0__, metadata2_.meta_name as meta_nam3_0__'
    |  +-[SQL_TOKEN] SqlFragment: 'resourcete1_.created_ts as created_2_4_1_, resourcete1_.revision_commit as revision3_4_1_, resourcete1_.revision_counter as revision4_4_1_, resourcete1_.updated_ts as updated_5_4_1_'
    |  \-[SQL_TOKEN] SqlFragment: 'metadata2_.resource_instance_id as resource1_3_0__, metadata2_.meta_val as meta_val2_3_0__, metadata2_.meta_name as meta_nam3_0__'
    +-[FROM] FromClause: 'from' FromClause{level=1, fromElementCounter=2, fromElements=3, fromElementByClassAlias=[generatedAlias0, generatedAlias2, generatedAlias1], fromElementByTableAlias=[resourcein0_, metadata2_, resourcete1_], fromElementsByPath=[generatedAlias0.template], collectionJoinFromElementsByPath=[generatedAlias0.metadata], impliedElements=[]}
    |  \-[FROM_FRAGMENT] FromElement: 'resource_instance resourcein0_' FromElement{explicit,collection join,not a fetch join,fetch non-lazy properties,classAlias=generatedAlias0,role=null,tableName=resource_instance,tableAlias=resourcein0_,origin=null,columns={,className=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity}}
    |     +-[JOIN_FRAGMENT] FromElement: 'left outer join resource_template resourcete1_ on resourcein0_.template_id=resourcete1_.id' FromElement{explicit,not a collection join,fetch join,fetch non-lazy properties,classAlias=generatedAlias1,role=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity.template,tableName=resource_template,tableAlias=resourcete1_,origin=resource_instance resourcein0_,columns={resourcein0_.template_id ,className=com.peterphi.servicemanager.service.db.entity.ResourceTemplateEntity}}
    |     \-[JOIN_FRAGMENT] FromElement: 'left outer join resource_instance_metadata metadata2_ on resourcein0_.id=metadata2_.resource_instance_id' FromElement{explicit,collection join,fetch join,fetch non-lazy properties,classAlias=generatedAlias2,role=com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity.metadata,tableName={none},tableAlias=metadata2_,origin=resource_instance resourcein0_,columns={,className=null}}
    \-[WHERE] SqlNode: 'where'
       \-[EQ] BinaryLogicOperatorNode: '='
          +-[NUM_INT] LiteralNode: '1'
          \-[NUM_INT] LiteralNode: '1'

2021-12-11 17:23:45,846 DEBUG throwQueryException() : no errors
2021-12-11 17:23:45,846 DEBUG HQL: select generatedAlias0 from com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity as generatedAlias0 left join fetch generatedAlias0.template as generatedAlias1 left join fetch generatedAlias0.metadata as generatedAlias2 where 1=1
2021-12-11 17:23:45,846 DEBUG SQL: select resourcein0_.id as id1_2_0_, resourcete1_.id as id1_4_1_, resourcein0_.created_ts as created_2_2_0_, resourcein0_.provider_name as provider3_2_0_, resourcein0_.provider_instance_id as provider4_2_0_, resourcein0_.resource_state as resource5_2_0_, resourcein0_.template_id as template9_2_0_, resourcein0_.template_revision_commit as template6_2_0_, resourcein0_.template_revision_counter as template7_2_0_, resourcein0_.updated_ts as updated_8_2_0_, metadata2_.resource_instance_id as resource1_3_0__, metadata2_.meta_val as meta_val2_3_0__, metadata2_.meta_name as meta_nam3_0__, resourcete1_.created_ts as created_2_4_1_, resourcete1_.revision_commit as revision3_4_1_, resourcete1_.revision_counter as revision4_4_1_, resourcete1_.updated_ts as updated_5_4_1_, metadata2_.resource_instance_id as resource1_3_0__, metadata2_.meta_val as meta_val2_3_0__, metadata2_.meta_name as meta_nam3_0__ from resource_instance resourcein0_ left outer join resource_template resourcete1_ on resourcein0_.template_id=resourcete1_.id left outer join resource_instance_metadata metadata2_ on resourcein0_.id=metadata2_.resource_instance_id where 1=1
2021-12-11 17:23:45,846 DEBUG throwQueryException() : no errors
2021-12-11 17:23:45,847 DEBUG select resourcein0_.id as id1_2_0_, resourcete1_.id as id1_4_1_, resourcein0_.created_ts as created_2_2_0_, resourcein0_.provider_name as provider3_2_0_, resourcein0_.provider_instance_id as provider4_2_0_, resourcein0_.resource_state as resource5_2_0_, resourcein0_.template_id as template9_2_0_, resourcein0_.template_revision_commit as template6_2_0_, resourcein0_.template_revision_counter as template7_2_0_, resourcein0_.updated_ts as updated_8_2_0_, metadata2_.resource_instance_id as resource1_3_0__, metadata2_.meta_val as meta_val2_3_0__, metadata2_.meta_name as meta_nam3_0__, resourcete1_.created_ts as created_2_4_1_, resourcete1_.revision_commit as revision3_4_1_, resourcete1_.revision_counter as revision4_4_1_, resourcete1_.updated_ts as updated_5_4_1_, metadata2_.resource_instance_id as resource1_3_0__, metadata2_.meta_val as meta_val2_3_0__, metadata2_.meta_name as meta_nam3_0__ from resource_instance resourcein0_ left outer join resource_template resourcete1_ on resourcein0_.template_id=resourcete1_.id left outer join resource_instance_metadata metadata2_ on resourcein0_.id=metadata2_.resource_instance_id where 1=1
2021-12-11 17:23:45,852 DEBUG No collections were found in result set for role: com.peterphi.servicemanager.service.db.entity.ResourceInstanceEntity.metadata
2021-12-11 17:23:45,852 DEBUG Transformed: 0 rows to: 0 distinct results
2021-12-11 17:23:45,853 DEBUG rolling back
2021-12-11 17:23:45,853 DEBUG Initiating JDBC connection release from afterTransaction
2021-12-11 17:23:45,853 DEBUG Clearing local Synchronizations
2021-12-11 17:23:45,853 DEBUG Initiating JDBC connection release from afterTransaction
2021-12-11 17:23:45,853 DEBUG begin
2021-12-11 17:23:45,854 DEBUG Rendered criteria query -> select generatedAlias0 from service_instance as generatedAlias0 where 1=1
2021-12-11 17:23:45,854 DEBUG parse() - HQL: select generatedAlias0 from com.peterphi.servicemanager.service.db.entity.ServiceInstanceEntity as generatedAlias0 where 1=1
2021-12-11 17:23:45,855 DEBUG throwQueryException() : no errors
2021-12-11 17:23:45,855 DEBUG --- HQL AST ---
 \-[QUERY] Node: 'query'
    +-[SELECT_FROM] Node: 'SELECT_FROM'
    |  +-[FROM] Node: 'from'
    |  |  \-[RANGE] Node: 'RANGE'
    |  |     +-[DOT] Node: '.'
    |  |     |  +-[DOT] Node: '.'
    |  |     |  |  +-[DOT] Node: '.'
    |  |     |  |  |  +-[DOT] Node: '.'
    |  |     |  |  |  |  +-[DOT] Node: '.'
    |  |     |  |  |  |  |  +-[DOT] Node: '.'
    |  |     |  |  |  |  |  |  +-[IDENT] Node: 'com'
    |  |     |  |  |  |  |  |  \-[IDENT] Node: 'peterphi'
    |  |     |  |  |  |  |  \-[IDENT] Node: 'servicemanager'
    |  |     |  |  |  |  \-[IDENT] Node: 'service'
    |  |     |  |  |  \-[IDENT] Node: 'db'
    |  |     |  |  \-[IDENT] Node: 'entity'
    |  |     |  \-[IDENT] Node: 'ServiceInstanceEntity'
    |  |     \-[ALIAS] Node: 'generatedAlias0'
    |  \-[SELECT] Node: 'select'
    |     \-[IDENT] Node: 'generatedAlias0'
    \-[WHERE] Node: 'where'
       \-[EQ] Node: '='
          +-[NUM_INT] Node: '1'
          \-[NUM_INT] Node: '1'

2021-12-11 17:23:45,856 DEBUG select << begin [level=1, statement=select]
2021-12-11 17:23:45,856 DEBUG FromClause{level=1} : com.peterphi.servicemanager.service.db.entity.ServiceInstanceEntity (generatedAlias0) -> serviceins0_
2021-12-11 17:23:45,856 DEBUG Resolved : generatedAlias0 -> serviceins0_.id
2021-12-11 17:23:45,857 DEBUG select : finishing up [level=1, statement=select]
2021-12-11 17:23:45,857 DEBUG processQuery() :  ( SELECT ( {select clause} serviceins0_.id ) ( FromClause{level=1} service_instance serviceins0_ ) ( where ( = 1 1 ) ) )
2021-12-11 17:23:45,857 DEBUG Using FROM fragment [service_instance serviceins0_]
2021-12-11 17:23:45,857 DEBUG select >> end [level=1, statement=select]
2021-12-11 17:23:45,857 DEBUG --- SQL AST ---
 \-[SELECT] QueryNode: 'SELECT'  querySpaces (service_instance)
    +-[SELECT_CLAUSE] SelectClause: '{select clause}'
    |  +-[ALIAS_REF] IdentNode: 'serviceins0_.id as id1_5_' {alias=generatedAlias0, className=com.peterphi.servicemanager.service.db.entity.ServiceInstanceEntity, tableAlias=serviceins0_}
    |  \-[SQL_TOKEN] SqlFragment: 'serviceins0_.code_revision as code_rev2_5_, serviceins0_.created_ts as created_3_5_, serviceins0_.service_href as service_4_5_, serviceins0_.management_token as manageme5_5_, serviceins0_.updated_ts as updated_6_5_'
    +-[FROM] FromClause: 'from' FromClause{level=1, fromElementCounter=1, fromElements=1, fromElementByClassAlias=[generatedAlias0], fromElementByTableAlias=[serviceins0_], fromElementsByPath=[], collectionJoinFromElementsByPath=[], impliedElements=[]}
    |  \-[FROM_FRAGMENT] FromElement: 'service_instance serviceins0_' FromElement{explicit,not a collection join,not a fetch join,fetch non-lazy properties,classAlias=generatedAlias0,role=null,tableName=service_instance,tableAlias=serviceins0_,origin=null,columns={,className=com.peterphi.servicemanager.service.db.entity.ServiceInstanceEntity}}
    \-[WHERE] SqlNode: 'where'
       \-[EQ] BinaryLogicOperatorNode: '='
          +-[NUM_INT] LiteralNode: '1'
          \-[NUM_INT] LiteralNode: '1'

2021-12-11 17:23:45,857 DEBUG throwQueryException() : no errors
2021-12-11 17:23:45,857 DEBUG HQL: select generatedAlias0 from com.peterphi.servicemanager.service.db.entity.ServiceInstanceEntity as generatedAlias0 where 1=1
2021-12-11 17:23:45,857 DEBUG SQL: select serviceins0_.id as id1_5_, serviceins0_.code_revision as code_rev2_5_, serviceins0_.created_ts as created_3_5_, serviceins0_.service_href as service_4_5_, serviceins0_.management_token as manageme5_5_, serviceins0_.updated_ts as updated_6_5_ from service_instance serviceins0_ where 1=1
2021-12-11 17:23:45,857 DEBUG throwQueryException() : no errors
2021-12-11 17:23:45,858 DEBUG select serviceins0_.id as id1_5_, serviceins0_.code_revision as code_rev2_5_, serviceins0_.created_ts as created_3_5_, serviceins0_.service_href as service_4_5_, serviceins0_.management_token as manageme5_5_, serviceins0_.updated_ts as updated_6_5_ from service_instance serviceins0_ where 1=1
2021-12-11 17:23:45,859 DEBUG Transformed: 0 rows to: 0 distinct results
2021-12-11 17:23:45,859 DEBUG rolling back
2021-12-11 17:23:45,859 DEBUG Initiating JDBC connection release from afterTransaction
2021-12-11 17:23:45,859 DEBUG Clearing local Synchronizations
2021-12-11 17:23:45,859 DEBUG Initiating JDBC connection release from afterTransaction
2021-12-11 17:23:45,859 DEBUG begin
2021-12-11 17:23:45,860 DEBUG Rendered criteria query -> select generatedAlias0 from acme_ca_cert as generatedAlias0 where 1=1
2021-12-11 17:23:45,860 DEBUG parse() - HQL: select generatedAlias0 from com.peterphi.servicemanager.service.db.entity.LetsEncryptCertificateEntity as generatedAlias0 where 1=1
2021-12-11 17:23:45,861 DEBUG throwQueryException() : no errors
2021-12-11 17:23:45,861 DEBUG --- HQL AST ---
 \-[QUERY] Node: 'query'
    +-[SELECT_FROM] Node: 'SELECT_FROM'
    |  +-[FROM] Node: 'from'
    |  |  \-[RANGE] Node: 'RANGE'
    |  |     +-[DOT] Node: '.'
    |  |     |  +-[DOT] Node: '.'
    |  |     |  |  +-[DOT] Node: '.'
    |  |     |  |  |  +-[DOT] Node: '.'
    |  |     |  |  |  |  +-[DOT] Node: '.'
    |  |     |  |  |  |  |  +-[DOT] Node: '.'
    |  |     |  |  |  |  |  |  +-[IDENT] Node: 'com'
    |  |     |  |  |  |  |  |  \-[IDENT] Node: 'peterphi'
    |  |     |  |  |  |  |  \-[IDENT] Node: 'servicemanager'
    |  |     |  |  |  |  \-[IDENT] Node: 'service'
    |  |     |  |  |  \-[IDENT] Node: 'db'
    |  |     |  |  \-[IDENT] Node: 'entity'
    |  |     |  \-[IDENT] Node: 'LetsEncryptCertificateEntity'
    |  |     \-[ALIAS] Node: 'generatedAlias0'
    |  \-[SELECT] Node: 'select'
    |     \-[IDENT] Node: 'generatedAlias0'
    \-[WHERE] Node: 'where'
       \-[EQ] Node: '='
          +-[NUM_INT] Node: '1'
          \-[NUM_INT] Node: '1'

2021-12-11 17:23:45,861 DEBUG select << begin [level=1, statement=select]
2021-12-11 17:23:45,862 DEBUG FromClause{level=1} : com.peterphi.servicemanager.service.db.entity.LetsEncryptCertificateEntity (generatedAlias0) -> letsencryp0_
2021-12-11 17:23:45,862 DEBUG Resolved : generatedAlias0 -> letsencryp0_.id
2021-12-11 17:23:45,862 DEBUG select : finishing up [level=1, statement=select]
2021-12-11 17:23:45,862 DEBUG processQuery() :  ( SELECT ( {select clause} letsencryp0_.id ) ( FromClause{level=1} acme_ca_cert letsencryp0_ ) ( where ( = 1 1 ) ) )
2021-12-11 17:23:45,862 DEBUG Using FROM fragment [acme_ca_cert letsencryp0_]
2021-12-11 17:23:45,862 DEBUG select >> end [level=1, statement=select]
2021-12-11 17:23:45,863 DEBUG --- SQL AST ---
 \-[SELECT] QueryNode: 'SELECT'  querySpaces (acme_ca_cert)
    +-[SELECT_CLAUSE] SelectClause: '{select clause}'
    |  +-[ALIAS_REF] IdentNode: 'letsencryp0_.id as id1_1_' {alias=generatedAlias0, className=com.peterphi.servicemanager.service.db.entity.LetsEncryptCertificateEntity, tableAlias=letsencryp0_}
    |  \-[SQL_TOKEN] SqlFragment: 'letsencryp0_.cert_utf8 as cert_utf2_1_, letsencryp0_.chain_utf8 as chain_ut3_1_, letsencryp0_.created_ts as created_4_1_, letsencryp0_.expires_ts as expires_5_1_, letsencryp0_.keypair_utf8 as keypair_6_1_, letsencryp0_.mgmt_token as mgmt_tok7_1_, letsencryp0_.updated_ts as updated_8_1_'
    +-[FROM] FromClause: 'from' FromClause{level=1, fromElementCounter=1, fromElements=1, fromElementByClassAlias=[generatedAlias0], fromElementByTableAlias=[letsencryp0_], fromElementsByPath=[], collectionJoinFromElementsByPath=[], impliedElements=[]}
    |  \-[FROM_FRAGMENT] FromElement: 'acme_ca_cert letsencryp0_' FromElement{explicit,not a collection join,not a fetch join,fetch non-lazy properties,classAlias=generatedAlias0,role=null,tableName=acme_ca_cert,tableAlias=letsencryp0_,origin=null,columns={,className=com.peterphi.servicemanager.service.db.entity.LetsEncryptCertificateEntity}}
    \-[WHERE] SqlNode: 'where'
       \-[EQ] BinaryLogicOperatorNode: '='
          +-[NUM_INT] LiteralNode: '1'
          \-[NUM_INT] LiteralNode: '1'

2021-12-11 17:23:45,863 DEBUG throwQueryException() : no errors
2021-12-11 17:23:45,863 DEBUG HQL: select generatedAlias0 from com.peterphi.servicemanager.service.db.entity.LetsEncryptCertificateEntity as generatedAlias0 where 1=1
2021-12-11 17:23:45,863 DEBUG SQL: select letsencryp0_.id as id1_1_, letsencryp0_.cert_utf8 as cert_utf2_1_, letsencryp0_.chain_utf8 as chain_ut3_1_, letsencryp0_.created_ts as created_4_1_, letsencryp0_.expires_ts as expires_5_1_, letsencryp0_.keypair_utf8 as keypair_6_1_, letsencryp0_.mgmt_token as mgmt_tok7_1_, letsencryp0_.updated_ts as updated_8_1_ from acme_ca_cert letsencryp0_ where 1=1
2021-12-11 17:23:45,863 DEBUG throwQueryException() : no errors
2021-12-11 17:23:45,863 DEBUG select letsencryp0_.id as id1_1_, letsencryp0_.cert_utf8 as cert_utf2_1_, letsencryp0_.chain_utf8 as chain_ut3_1_, letsencryp0_.created_ts as created_4_1_, letsencryp0_.expires_ts as expires_5_1_, letsencryp0_.keypair_utf8 as keypair_6_1_, letsencryp0_.mgmt_token as mgmt_tok7_1_, letsencryp0_.updated_ts as updated_8_1_ from acme_ca_cert letsencryp0_ where 1=1
2021-12-11 17:23:45,864 DEBUG Transformed: 0 rows to: 0 distinct results
2021-12-11 17:23:45,864 DEBUG rolling back
2021-12-11 17:23:45,864 DEBUG Initiating JDBC connection release from afterTransaction
2021-12-11 17:23:45,864 DEBUG Clearing local Synchronizations
2021-12-11 17:23:45,864 DEBUG Initiating JDBC connection release from afterTransaction
2021-12-11 17:23:45,865 DEBUG begin
2021-12-11 17:23:45,865 DEBUG Rendered criteria query -> select generatedAlias0 from acme_ca_account as generatedAlias0 where 1=1
2021-12-11 17:23:45,865 DEBUG parse() - HQL: select generatedAlias0 from com.peterphi.servicemanager.service.db.entity.LetsEncryptAccountEntity as generatedAlias0 where 1=1
2021-12-11 17:23:45,866 DEBUG throwQueryException() : no errors
2021-12-11 17:23:45,866 DEBUG --- HQL AST ---
 \-[QUERY] Node: 'query'
    +-[SELECT_FROM] Node: 'SELECT_FROM'
    |  +-[FROM] Node: 'from'
    |  |  \-[RANGE] Node: 'RANGE'
    |  |     +-[DOT] Node: '.'
    |  |     |  +-[DOT] Node: '.'
    |  |     |  |  +-[DOT] Node: '.'
    |  |     |  |  |  +-[DOT] Node: '.'
    |  |     |  |  |  |  +-[DOT] Node: '.'
    |  |     |  |  |  |  |  +-[DOT] Node: '.'
    |  |     |  |  |  |  |  |  +-[IDENT] Node: 'com'
    |  |     |  |  |  |  |  |  \-[IDENT] Node: 'peterphi'
    |  |     |  |  |  |  |  \-[IDENT] Node: 'servicemanager'
    |  |     |  |  |  |  \-[IDENT] Node: 'service'
    |  |     |  |  |  \-[IDENT] Node: 'db'
    |  |     |  |  \-[IDENT] Node: 'entity'
    |  |     |  \-[IDENT] Node: 'LetsEncryptAccountEntity'
    |  |     \-[ALIAS] Node: 'generatedAlias0'
    |  \-[SELECT] Node: 'select'
    |     \-[IDENT] Node: 'generatedAlias0'
    \-[WHERE] Node: 'where'
       \-[EQ] Node: '='
          +-[NUM_INT] Node: '1'
          \-[NUM_INT] Node: '1'

2021-12-11 17:23:45,866 DEBUG select << begin [level=1, statement=select]
2021-12-11 17:23:45,866 DEBUG FromClause{level=1} : com.peterphi.servicemanager.service.db.entity.LetsEncryptAccountEntity (generatedAlias0) -> letsencryp0_
2021-12-11 17:23:45,866 DEBUG Resolved : generatedAlias0 -> letsencryp0_.id
2021-12-11 17:23:45,867 DEBUG select : finishing up [level=1, statement=select]
2021-12-11 17:23:45,867 DEBUG processQuery() :  ( SELECT ( {select clause} letsencryp0_.id ) ( FromClause{level=1} acme_ca_account letsencryp0_ ) ( where ( = 1 1 ) ) )
2021-12-11 17:23:45,867 DEBUG Using FROM fragment [acme_ca_account letsencryp0_]
2021-12-11 17:23:45,867 DEBUG select >> end [level=1, statement=select]
2021-12-11 17:23:45,867 DEBUG --- SQL AST ---
 \-[SELECT] QueryNode: 'SELECT'  querySpaces (acme_ca_account)
    +-[SELECT_CLAUSE] SelectClause: '{select clause}'
    |  +-[ALIAS_REF] IdentNode: 'letsencryp0_.id as id1_0_' {alias=generatedAlias0, className=com.peterphi.servicemanager.service.db.entity.LetsEncryptAccountEntity, tableAlias=letsencryp0_}
    |  \-[SQL_TOKEN] SqlFragment: 'letsencryp0_.created_ts as created_2_0_, letsencryp0_.keypair_utf8 as keypair_3_0_, letsencryp0_.updated_ts as updated_4_0_'
    +-[FROM] FromClause: 'from' FromClause{level=1, fromElementCounter=1, fromElements=1, fromElementByClassAlias=[generatedAlias0], fromElementByTableAlias=[letsencryp0_], fromElementsByPath=[], collectionJoinFromElementsByPath=[], impliedElements=[]}
    |  \-[FROM_FRAGMENT] FromElement: 'acme_ca_account letsencryp0_' FromElement{explicit,not a collection join,not a fetch join,fetch non-lazy properties,classAlias=generatedAlias0,role=null,tableName=acme_ca_account,tableAlias=letsencryp0_,origin=null,columns={,className=com.peterphi.servicemanager.service.db.entity.LetsEncryptAccountEntity}}
    \-[WHERE] SqlNode: 'where'
       \-[EQ] BinaryLogicOperatorNode: '='
          +-[NUM_INT] LiteralNode: '1'
          \-[NUM_INT] LiteralNode: '1'

2021-12-11 17:23:45,867 DEBUG throwQueryException() : no errors
2021-12-11 17:23:45,867 DEBUG HQL: select generatedAlias0 from com.peterphi.servicemanager.service.db.entity.LetsEncryptAccountEntity as generatedAlias0 where 1=1
2021-12-11 17:23:45,867 DEBUG SQL: select letsencryp0_.id as id1_0_, letsencryp0_.created_ts as created_2_0_, letsencryp0_.keypair_utf8 as keypair_3_0_, letsencryp0_.updated_ts as updated_4_0_ from acme_ca_account letsencryp0_ where 1=1
2021-12-11 17:23:45,867 DEBUG throwQueryException() : no errors
2021-12-11 17:23:45,867 DEBUG select letsencryp0_.id as id1_0_, letsencryp0_.created_ts as created_2_0_, letsencryp0_.keypair_utf8 as keypair_3_0_, letsencryp0_.updated_ts as updated_4_0_ from acme_ca_account letsencryp0_ where 1=1
2021-12-11 17:23:45,868 DEBUG Transformed: 0 rows to: 0 distinct results
2021-12-11 17:23:45,868 DEBUG rolling back
2021-12-11 17:23:45,868 DEBUG Initiating JDBC connection release from afterTransaction
2021-12-11 17:23:45,868 DEBUG Clearing local Synchronizations
2021-12-11 17:23:45,868 DEBUG Initiating JDBC connection release from afterTransaction
2021-12-11 17:23:45,869  INFO Shutting down 1 service(s)
2021-12-11 17:23:45,869 DEBUG Requesting shutdown of com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider$$EnhancerByGuice$$e9bc367e@51841ac6
2021-12-11 17:23:45,869  INFO Shut down Hibernate SessionFactory...
2021-12-11 17:23:45,869 DEBUG begin
2021-12-11 17:23:45,871 DEBUG committing
2021-12-11 17:23:45,872 DEBUG Initiating JDBC connection release from afterTransaction
2021-12-11 17:23:45,872 DEBUG Clearing local Synchronizations
2021-12-11 17:23:45,872 DEBUG Initiating JDBC connection release from afterTransaction
2021-12-11 17:23:45,872 DEBUG HHH000031: Closing
2021-12-11 17:23:45,872 DEBUG Implicitly destroying ServiceRegistry on de-registration of all child ServiceRegistries
2021-12-11 17:23:45,872  INFO HHH10001008: Cleaning up connection pool [jdbc:hsqldb:mem:testdb]
2021-12-11 17:23:45,873 DEBUG Implicitly destroying Boot-strap registry on de-registration of all child ServiceRegistries
2021-12-11 17:23:45,873  INFO Shutdown complete
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 8.491 sec - in com.peterphi.servicemanager.service.db.ServiceManagerDatabaseTest

Results :

Tests run: 1, Failures: 0, Errors: 0, Skipped: 0

[INFO] 
[INFO] ------------------------------------------------------------------------
[INFO] Building Host Agent 9.5.4-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-enforcer-plugin:1.0:enforce (enforce-maven) @ host-agent ---
[INFO] 
[INFO] --- buildnumber-maven-plugin:1.3:create (default) @ host-agent ---
[INFO] 
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ host-agent ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 2 resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:compile (default-compile) @ host-agent ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ host-agent ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /home/travis/build/passed/petergeneric/stdlib/service-manager/host-agent/src/test/resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:testCompile (default-testCompile) @ host-agent ---
[INFO] No sources to compile
[INFO] 
[INFO] --- maven-surefire-plugin:2.19:test (default-test) @ host-agent ---
[INFO] No tests to run.
[INFO] 
[INFO] ------------------------------------------------------------------------
[INFO] Building user manager service 9.5.4-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-enforcer-plugin:1.0:enforce (enforce-maven) @ user-manager ---
[INFO] 
[INFO] --- buildnumber-maven-plugin:1.3:create (default) @ user-manager ---
[INFO] 
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ user-manager ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 6 resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:compile (default-compile) @ user-manager ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ user-manager ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 1 resource
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:testCompile (default-testCompile) @ user-manager ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-surefire-plugin:2.19:test (default-test) @ user-manager ---

-------------------------------------------------------
 T E S T S
-------------------------------------------------------
Picked up _JAVA_OPTIONS: -Xmx2048m -Xms512m
Running com.peterphi.usermanager.db.dao.CreateDatabaseSchemaTest
2021-12-11 17:23:46,928  INFO Trying to create Guice Injector...
2021-12-11 17:23:48,018 DEBUG Injector for (app) created in 1008 ms
2021-12-11 17:23:48,018 DEBUG Class scanner stats: insts=1 cached createTime=164, scanTime=2
2021-12-11 17:23:48,145 DEBUG Logging Provider: org.jboss.logging.Log4jLoggerProvider
2021-12-11 17:23:48,154 DEBUG Adding Integrator [org.hibernate.cfg.beanvalidation.BeanValidationIntegrator].
2021-12-11 17:23:48,156 DEBUG Adding Integrator [org.hibernate.secure.spi.JaccIntegrator].
2021-12-11 17:23:48,160 DEBUG Adding Integrator [org.hibernate.cache.internal.CollectionCacheInvalidator].
2021-12-11 17:23:48,259  INFO HHH000412: Hibernate Core {5.2.11.Final}
2021-12-11 17:23:48,260  INFO HHH000206: hibernate.properties not found
2021-12-11 17:23:48,291 DEBUG Execute called: UPDATE
2021-12-11 17:23:48,306 DEBUG Create JDBC Connection directly: jdbc:hsqldb:mem:testdb
2021-12-11 17:23:48,764 DEBUG Opening jar:file:/home/travis/build/passed/petergeneric/stdlib/user-manager/service/target/surefire/surefirebooter5302467952035037937.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:48,765 DEBUG Opening jar:file:/home/travis/.m2/passed/org/apache/maven/surefire/surefire-booter/2.19/surefire-booter-2.19.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:48,765 DEBUG Opening jar:file:/home/travis/.m2/passed/org/apache/maven/surefire/surefire-api/2.19/surefire-api-2.19.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:48,765 DEBUG Opening jar:file:/home/travis/.m2/passed/commons-io/commons-io/2.4/commons-io-2.4.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:48,765 DEBUG Opening jar:file:/home/travis/.m2/passed/commons-lang/commons-lang/2.6/commons-lang-2.6.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:48,765 DEBUG Opening jar:file:/home/travis/.m2/passed/org/eclipse/persistence/org.eclipse.persistence.moxy/2.7.0/org.eclipse.persistence.moxy-2.7.0.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:48,819 DEBUG Opening jar:file:/home/travis/.m2/passed/org/eclipse/persistence/org.eclipse.persistence.core/2.7.0/org.eclipse.persistence.core-2.7.0.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:48,860 DEBUG Opening jar:file:/home/travis/.m2/passed/org/eclipse/persistence/org.eclipse.persistence.asm/2.7.0/org.eclipse.persistence.asm-2.7.0.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:48,869 DEBUG Opening jar:file:/home/travis/.m2/passed/javax/validation/validation-api/1.1.0.Final/validation-api-1.1.0.Final.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:48,869 DEBUG Opening jar:file:/home/travis/.m2/passed/org/glassfish/javax.json/1.0.4/javax.json-1.0.4.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:48,870 DEBUG Opening jar:file:/home/travis/.m2/passed/ognl/ognl/3.1.10/ognl-3.1.10.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:48,870 DEBUG Opening jar:file:/home/travis/.m2/passed/org/apache/httpcomponents/httpclient/4.5.3/httpclient-4.5.3.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:48,870 DEBUG Opening jar:file:/home/travis/.m2/passed/org/apache/httpcomponents/httpcore/4.4.6/httpcore-4.4.6.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:48,870 DEBUG Opening jar:file:/home/travis/.m2/passed/commons-codec/commons-codec/1.9/commons-codec-1.9.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:48,870 DEBUG Opening jar:file:/home/travis/.m2/passed/org/jboss/resteasy/resteasy-client/3.1.4.Final/resteasy-client-3.1.4.Final.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:48,871 DEBUG Opening jar:file:/home/travis/.m2/passed/io/dropwizard/metrics/metrics-core/3.2.3/metrics-core-3.2.3.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:48,871 DEBUG Opening jar:file:/home/travis/.m2/passed/io/dropwizard/metrics/metrics-healthchecks/3.2.3/metrics-healthchecks-3.2.3.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:48,871 DEBUG Opening jar:file:/home/travis/.m2/passed/io/dropwizard/metrics/metrics-jvm/3.2.3/metrics-jvm-3.2.3.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:48,871 DEBUG Opening jar:file:/home/travis/.m2/passed/io/dropwizard/metrics/metrics-log4j/3.2.3/metrics-log4j-3.2.3.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:48,871 DEBUG Opening jar:file:/home/travis/.m2/passed/org/jboss/resteasy/resteasy-jaxrs/3.1.4.Final/resteasy-jaxrs-3.1.4.Final.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:48,872 DEBUG Opening jar:file:/home/travis/.m2/passed/org/jboss/spec/javax/ws/rs/jboss-jaxrs-api_2.0_spec/1.0.1.Beta1/jboss-jaxrs-api_2.0_spec-1.0.1.Beta1.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:48,872 DEBUG Opening jar:file:/home/travis/.m2/passed/org/jboss/resteasy/resteasy-jaxrs-services/3.1.4.Final/resteasy-jaxrs-services-3.1.4.Final.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:48,872 DEBUG Opening jar:file:/home/travis/.m2/passed/org/jboss/spec/javax/annotation/jboss-annotations-api_1.2_spec/1.0.0.Final/jboss-annotations-api_1.2_spec-1.0.0.Final.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:48,872 DEBUG Opening jar:file:/home/travis/.m2/passed/javax/activation/activation/1.1.1/activation-1.1.1.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:48,872 DEBUG Opening jar:file:/home/travis/.m2/passed/net/jcip/jcip-annotations/1.0/jcip-annotations-1.0.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:48,873 DEBUG Opening jar:file:/home/travis/.m2/passed/org/javassist/javassist/3.19.0-GA/javassist-3.19.0-GA.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:48,873 DEBUG Opening jar:file:/home/travis/.m2/passed/org/bitbucket/b_c/jose4j/0.5.2/jose4j-0.5.2.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:48,873 DEBUG Opening jar:file:/home/travis/.m2/passed/org/thymeleaf/thymeleaf/2.1.4.RELEASE/thymeleaf-2.1.4.RELEASE.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:48,873 DEBUG Opening jar:file:/home/travis/.m2/passed/org/unbescape/unbescape/1.1.0.RELEASE/unbescape-1.1.0.RELEASE.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:48,873 DEBUG Opening jar:file:/home/travis/.m2/passed/org/jboss/resteasy/resteasy-jaxb-provider/3.1.4.Final/resteasy-jaxb-provider-3.1.4.Final.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:48,873 DEBUG Opening jar:file:/home/travis/.m2/passed/org/jboss/logging/jboss-logging/3.3.0.Final/jboss-logging-3.3.0.Final.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:48,874 DEBUG Opening jar:file:/home/travis/.m2/passed/org/jboss/resteasy/resteasy-jettison-provider/3.1.4.Final/resteasy-jettison-provider-3.1.4.Final.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:48,874 DEBUG Opening jar:file:/home/travis/.m2/passed/org/codehaus/jettison/jettison/1.3.8/jettison-1.3.8.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:48,874 DEBUG Opening jar:file:/home/travis/.m2/passed/commons-discovery/commons-discovery/0.5/commons-discovery-0.5.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:48,874 DEBUG Opening jar:file:/home/travis/.m2/passed/commons-logging/commons-logging/1.2/commons-logging-1.2.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:48,874 DEBUG Opening jar:file:/home/travis/.m2/passed/xml-apis/xml-apis/1.0.b2/xml-apis-1.0.b2.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:48,882 DEBUG Opening jar:file:/home/travis/.m2/passed/org/sonatype/sisu/sisu-guice/3.2.6/sisu-guice-3.2.6.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:48,882 DEBUG Opening jar:file:/home/travis/.m2/passed/aopalliance/aopalliance/1.0/aopalliance-1.0.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:48,882 DEBUG Opening jar:file:/home/travis/.m2/passed/com/google/guava/guava/16.0.1/guava-16.0.1.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:48,882 DEBUG Opening jar:file:/home/travis/.m2/passed/org/sonatype/sisu/inject/guice-multibindings/3.2.6/guice-multibindings-3.2.6.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:48,883 DEBUG Opening jar:file:/home/travis/.m2/passed/org/apache/xbean/xbean-finder/4.4/xbean-finder-4.4.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:48,883 DEBUG Opening jar:file:/home/travis/.m2/passed/org/apache/xbean/xbean-bundleutils/4.4/xbean-bundleutils-4.4.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:48,883 DEBUG Opening jar:file:/home/travis/.m2/passed/org/apache/xbean/xbean-asm-util/4.4/xbean-asm-util-4.4.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:48,883 DEBUG Opening jar:file:/home/travis/.m2/passed/org/ow2/asm/asm-all/5.0.4/asm-all-5.0.4.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:48,883 DEBUG Opening jar:file:/home/travis/.m2/passed/org/hibernate/hibernate-core/5.2.11.Final/hibernate-core-5.2.11.Final.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:48,884 DEBUG Opening jar:file:/home/travis/.m2/passed/org/hibernate/javax/persistence/hibernate-jpa-2.1-api/1.0.0.Final/hibernate-jpa-2.1-api-1.0.0.Final.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:48,884 DEBUG Opening jar:file:/home/travis/.m2/passed/antlr/antlr/2.7.7/antlr-2.7.7.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:48,884 DEBUG Opening jar:file:/home/travis/.m2/passed/org/jboss/spec/javax/transaction/jboss-transaction-api_1.2_spec/1.0.1.Final/jboss-transaction-api_1.2_spec-1.0.1.Final.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:48,884 DEBUG Opening jar:file:/home/travis/.m2/passed/org/jboss/jandex/2.0.3.Final/jandex-2.0.3.Final.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:48,884 DEBUG Opening jar:file:/home/travis/.m2/passed/com/fasterxml/classmate/1.3.0/classmate-1.3.0.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:48,884 DEBUG Opening jar:file:/home/travis/.m2/passed/dom4j/dom4j/1.6.1/dom4j-1.6.1.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:48,885 DEBUG Opening jar:file:/home/travis/.m2/passed/org/hibernate/common/hibernate-commons-annotations/5.0.1.Final/hibernate-commons-annotations-5.0.1.Final.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:48,885 DEBUG Opening jar:file:/home/travis/.m2/passed/org/liquibase/liquibase-core/3.5.3/liquibase-core-3.5.3.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:48,885 DEBUG Opening jar:file:/home/travis/.m2/passed/org/yaml/snakeyaml/1.17/snakeyaml-1.17.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:48,885 DEBUG Opening jar:file:/home/travis/.m2/passed/io/dropwizard/metrics/metrics-json/3.2.3/metrics-json-3.2.3.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:48,885 DEBUG Opening jar:file:/home/travis/.m2/passed/com/fasterxml/jackson/core/jackson-databind/2.6.6/jackson-databind-2.6.6.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:48,886 DEBUG Opening jar:file:/home/travis/.m2/passed/com/fasterxml/jackson/core/jackson-annotations/2.6.0/jackson-annotations-2.6.0.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:48,886 DEBUG Opening jar:file:/home/travis/.m2/passed/com/fasterxml/jackson/core/jackson-core/2.6.6/jackson-core-2.6.6.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:48,886 DEBUG Opening jar:file:/home/travis/.m2/passed/log4j/log4j/1.2.17/log4j-1.2.17.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:48,886 DEBUG Opening jar:file:/home/travis/.m2/passed/javax/servlet/servlet-api/2.5/servlet-api-2.5.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:48,886 DEBUG Opening jar:file:/home/travis/.m2/passed/joda-time/joda-time/2.7/joda-time-2.7.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:48,886 DEBUG Opening jar:file:/home/travis/.m2/passed/junit/junit/4.12/junit-4.12.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:48,887 DEBUG Opening jar:file:/home/travis/.m2/passed/org/hamcrest/hamcrest-core/1.3/hamcrest-core-1.3.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:48,887 DEBUG Opening jar:file:/home/travis/.m2/passed/org/mockito/mockito-core/1.10.19/mockito-core-1.10.19.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:48,887 DEBUG Opening jar:file:/home/travis/.m2/passed/org/objenesis/objenesis/2.1/objenesis-2.1.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:48,887 DEBUG Opening jar:file:/home/travis/.m2/passed/org/dbunit/dbunit/2.5.1/dbunit-2.5.1.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:48,887 DEBUG Opening jar:file:/home/travis/.m2/passed/commons-collections/commons-collections/3.2.1/commons-collections-3.2.1.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:48,887 DEBUG Opening jar:file:/home/travis/.m2/passed/org/apache/poi/poi-ooxml/3.11/poi-ooxml-3.11.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:48,888 DEBUG Opening jar:file:/home/travis/.m2/passed/org/apache/poi/poi/3.11/poi-3.11.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:48,888 DEBUG Opening jar:file:/home/travis/.m2/passed/org/apache/poi/poi-ooxml-schemas/3.11/poi-ooxml-schemas-3.11.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:48,888 DEBUG Opening jar:file:/home/travis/.m2/passed/org/apache/xmlbeans/xmlbeans/2.6.0/xmlbeans-2.6.0.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:48,888 DEBUG Opening jar:file:/home/travis/.m2/passed/stax/stax-api/1.0.1/stax-api-1.0.1.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:48,888 DEBUG Opening jar:file:/home/travis/.m2/passed/org/hsqldb/hsqldb/2.4.0/hsqldb-2.4.0.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:48,888 DEBUG Opening jar:file:/home/travis/.m2/passed/org/slf4j/slf4j-api/1.7.7/slf4j-api-1.7.7.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:48,888 DEBUG Opening jar:file:/home/travis/.m2/passed/org/slf4j/slf4j-jdk14/1.7.7/slf4j-jdk14-1.7.7.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:48,889 DEBUG Opening jar:file:/home/travis/.m2/passed/org/apache/maven/surefire/surefire-junit4/2.19/surefire-junit4-2.19.jar!/META-INF/MANIFEST.MF as META-INF/MANIFEST.MF
2021-12-11 17:23:49,473 DEBUG Connected to SA@jdbc:hsqldb:mem:testdb
2021-12-11 17:23:49,474 DEBUG Setting auto commit to false from true
2021-12-11 17:23:49,483 DEBUG Execute liquibase action: UPDATE
2021-12-11 17:23:49,539 DEBUG Executing QUERY database command: select count(*) from PUBLIC.DATABASECHANGELOGLOCK
2021-12-11 17:23:49,543 DEBUG Create Database Lock Table
2021-12-11 17:23:49,561 DEBUG Executing EXECUTE database command: CREATE TABLE PUBLIC.DATABASECHANGELOGLOCK (ID INT NOT NULL, LOCKED BOOLEAN NOT NULL, LOCKGRANTED TIMESTAMP, LOCKEDBY VARCHAR(255), CONSTRAINT PK_DATABASECHANGELOGLOCK PRIMARY KEY (ID))
2021-12-11 17:23:49,563 DEBUG Created database lock table with name: PUBLIC.DATABASECHANGELOGLOCK
2021-12-11 17:23:49,564 DEBUG Executing QUERY database command: select count(*) from PUBLIC.DATABASECHANGELOGLOCK
2021-12-11 17:23:49,566 DEBUG Initialize Database Lock Table
2021-12-11 17:23:49,568 DEBUG Executing EXECUTE database command: DELETE FROM PUBLIC.DATABASECHANGELOGLOCK
2021-12-11 17:23:49,571 DEBUG Executing EXECUTE database command: INSERT INTO PUBLIC.DATABASECHANGELOGLOCK (ID, LOCKED) VALUES (1, FALSE)
2021-12-11 17:23:49,573 DEBUG Executing QUERY database command: SELECT LOCKED FROM PUBLIC.DATABASECHANGELOGLOCK WHERE ID=1
2021-12-11 17:23:49,574 DEBUG Lock Database
2021-12-11 17:23:49,583 DEBUG Executing UPDATE database command: UPDATE PUBLIC.DATABASECHANGELOGLOCK SET LOCKED = TRUE, LOCKEDBY = 'ca17b7a9e79c (172.17.0.18)', LOCKGRANTED = '2021-12-11 17:23:49.575' WHERE ID = 1 AND LOCKED = FALSE
2021-12-11 17:23:49,585  INFO Successfully acquired change log lock
2021-12-11 17:23:49,617 DEBUG Opening file:/home/travis/build/passed/petergeneric/stdlib/user-manager/service/target/classes/liquibase/changelog.xml as liquibase/changelog.xml
2021-12-11 17:23:50,282 DEBUG Resolving XML entity name='null', publicId='null', baseURI='null', systemId='http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.3.xsd'
2021-12-11 17:23:50,284 DEBUG Opening jar:file:/home/travis/.m2/passed/org/liquibase/liquibase-core/3.5.3/liquibase-core-3.5.3.jar!/liquibase/parser/core/xml/dbchangelog-3.3.xsd as liquibase/parser/core/xml/dbchangelog-3.3.xsd
2021-12-11 17:23:50,364 DEBUG Opening file:/home/travis/build/passed/petergeneric/stdlib/user-manager/service/target/classes/liquibase/000-Original.xml as liquibase/000-Original.xml
2021-12-11 17:23:50,366 DEBUG Resolving XML entity name='null', publicId='null', baseURI='null', systemId='http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.3.xsd'
2021-12-11 17:23:50,366 DEBUG Opening jar:file:/home/travis/.m2/passed/org/liquibase/liquibase-core/3.5.3/liquibase-core-3.5.3.jar!/liquibase/parser/core/xml/dbchangelog-3.3.xsd as liquibase/parser/core/xml/dbchangelog-3.3.xsd
2021-12-11 17:23:50,451 DEBUG Computed checksum for 1639243430449 as aa72382bb17375ea135a3d46d14fd515
2021-12-11 17:23:50,477 DEBUG Create Database Change Log Table
2021-12-11 17:23:50,478  INFO Creating database history table with name: PUBLIC.DATABASECHANGELOG
2021-12-11 17:23:50,480 DEBUG Executing EXECUTE database command: CREATE TABLE PUBLIC.DATABASECHANGELOG (ID VARCHAR(255) NOT NULL, AUTHOR VARCHAR(255) NOT NULL, FILENAME VARCHAR(255) NOT NULL, DATEEXECUTED TIMESTAMP NOT NULL, ORDEREXECUTED INT NOT NULL, EXECTYPE VARCHAR(10) NOT NULL, MD5SUM VARCHAR(35), DESCRIPTION VARCHAR(255), COMMENTS VARCHAR(255), TAG VARCHAR(255), LIQUIBASE VARCHAR(20), CONTEXTS VARCHAR(255), LABELS VARCHAR(255), DEPLOYMENT_ID VARCHAR(10))
2021-12-11 17:23:50,484 DEBUG Executing QUERY database command: select count(*) from PUBLIC.DATABASECHANGELOG
2021-12-11 17:23:50,484  INFO Reading from PUBLIC.DATABASECHANGELOG
2021-12-11 17:23:50,485 DEBUG Executing QUERY database command: SELECT * FROM PUBLIC.DATABASECHANGELOG ORDER BY DATEEXECUTED ASC, ORDEREXECUTED ASC
2021-12-11 17:23:50,487 DEBUG Executing QUERY database command: select count(*) from PUBLIC.DATABASECHANGELOGLOCK
2021-12-11 17:23:50,491 DEBUG Computed checksum for createSequence:[
    sequenceName="hibernate_sequence"
] as 3b59bc60f6cf5c7c76b020ae29954565
2021-12-11 17:23:50,491 DEBUG Computed checksum for 7:3b59bc60f6cf5c7c76b020ae29954565: as afe897bea20bc08d1681087c94d0967d
2021-12-11 17:23:50,496 DEBUG Computed checksum for createTable:[
    columns=[
        [
            [
                primaryKey="true"
                primaryKeyName="PK__user_account"
            ]
            autoIncrement="true"
            name="id"
            type="INT"
        ],
        [
            [
                nullable="false"
            ]
            name="email"
            type="VARCHAR(200)"
        ],
        [
            [
                nullable="false"
            ]
            name="password"
            type="VARCH... [truncated in log] as 5e2bb1e3bad2ff4525459176f518ba75
2021-12-11 17:23:50,497 DEBUG Computed checksum for addUniqueConstraint:[
    columnNames="email"
    constraintName="UX_user_account__email"
    deferrable="false"
    disabled="false"
    initiallyDeferred="false"
    tableName="user_account"
] as 6562c099e536b47766ad0e2eab062964
2021-12-11 17:23:50,497 DEBUG Computed checksum for 7:5e2bb1e3bad2ff4525459176f518ba75:7:6562c099e536b47766ad0e2eab062964: as 326b1fbd4a7f1401b1f6fa24d24c6da2
2021-12-11 17:23:50,511 DEBUG Computed checksum for createTable:[
    columns=[
        [
            [
                primaryKey="true"
                primaryKeyName="PK__role_definition"
            ]
            name="id"
            type="VARCHAR(255)"
        ],
        [
            [
                nullable="false"
            ]
            name="caption"
            type="VARCHAR(1024)"
        ]
    ]
    tableName="role_definition"
] as 638e00ed1d0eabae58a30d51c1e4e490
2021-12-11 17:23:50,512 DEBUG Computed checksum for createTable:[
    columns=[
        [
            [
                nullable="false"
            ]
            name="user_id"
            type="INT"
        ],
        [
            [
                nullable="false"
            ]
            name="role_id"
            type="VARCHAR(255)"
        ]
    ]
    tableName="user_has_role"
] as 428f13250051c9ad6d1a2ff308215002
2021-12-11 17:23:50,513 DEBUG Computed checksum for addForeignKeyConstraint:[
    baseColumnNames="user_id"
    baseTableName="user_has_role"
    constraintName="FK__user_has_role__user_id"
    deferrable="false"
    initiallyDeferred="false"
    onDelete="CASCADE"
    onUpdate="CASCADE"
    referencedColumnNames="id"
    referencedTableName="user_account"
] as b0c345c00852105cfccca02f65133554
2021-12-11 17:23:50,514 DEBUG Computed checksum for addForeignKeyConstraint:[
    baseColumnNames="role_id"
    baseTableName="user_has_role"
    constraintName="FK__user_has_role__role_id"
    deferrable="false"
    initiallyDeferred="false"
    onDelete="CASCADE"
    onUpdate="CASCADE"
    referencedColumnNames="id"
    referencedTableName="role_definition"
] as 7a93c8fbdae38ad478df2a91ae9cf04e
2021-12-11 17:23:50,515 DEBUG Computed checksum for addPrimaryKey:[
    columnNames="user_id, role_id"
    constraintName="PK__user_has_role"
    tableName="user_has_role"
] as 9e5cc2c235e8568629cd6f0387405ff8
2021-12-11 17:23:50,516 DEBUG Computed checksum for insert:[
    columns=[
        [
            name="id"
            value="user-manager-admin"
        ],
        [
            name="caption"
            value="User Administrator"
        ]
    ]
    tableName="role_definition"
] as 74b5a5e1afd8946069d05d2df6ec78ad
2021-12-11 17:23:50,516 DEBUG Computed checksum for insert:[
    columns=[
        [
            name="id"
            value="admin"
        ],
        [
            name="caption"
            value="Administrator"
        ]
    ]
    tableName="role_definition"
] as b597557de631132d4c7162dac336e385
2021-12-11 17:23:50,517 DEBUG Computed checksum for insert:[
    columns=[
        [
            name="id"
            value="framework-admin"
        ],
        [
            name="caption"
            value="Application Framework Administrator (for service /guice pages)"
        ]
    ]
    tableName="role_definition"
] as a17f55639f9f8c23be54dcd3557016ed
2021-12-11 17:23:50,522 DEBUG Computed checksum for insert:[
    columns=[
        [
            name="id"
            value="framework-info"
        ],
        [
            name="caption"
            value="Application Framework User (for service /guice pages)"
        ]
    ]
    tableName="role_definition"
] as 2e2fff5e8c7d1bdedcda2f627760e230
2021-12-11 17:23:50,523 DEBUG Computed checksum for 7:638e00ed1d0eabae58a30d51c1e4e490:7:428f13250051c9ad6d1a2ff308215002:7:b0c345c00852105cfccca02f65133554:7:7a93c8fbdae38ad478df2a91ae9cf04e:7:9e5cc2c235e8568629cd6f0387405ff8:7:74b5a5e1afd8946069d05d2df6ec78ad:7:b597557de631132d4c7162dac336e385:7:a17f55639f9f8c23be54dcd3557016ed:7:2e2fff5e8c7d1bdedcda2f627760e230: as 8ddc35e308ab46b077bda7393544fbb6
2021-12-11 17:23:50,531 DEBUG Computed checksum for createTable:[
    columns=[
        [
            [
                primaryKey="true"
                primaryKeyName="PK__oauth_service"
            ]
            name="id"
            type="VARCHAR(36)"
        ],
        [
            [
                nullable="false"
            ]
            name="owner_id"
            type="INT"
        ],
        [
            [
                nullable="false"
            ]
            name="client_name"
            type="VARCHAR(1000)"
        ],
      ... [truncated in log] as d652f2725d636decde33dc47c5f13555
2021-12-11 17:23:50,532 DEBUG Computed checksum for createTable:[
    columns=[
        [
            [
                primaryKey="true"
                primaryKeyName="PK__oauth_session_context"
            ]
            autoIncrement="true"
            name="id"
            type="INT"
        ],
        [
            [
                nullable="false"
            ]
            name="user_id"
            type="INT"
        ],
        [
            [
                nullable="false"
            ]
            name="service_id"
            type="V... [truncated in log] as 2f1d811927e50ec7baf0d3d048a8df42
2021-12-11 17:23:50,533 DEBUG Computed checksum for createTable:[
    columns=[
        [
            [
                primaryKey="true"
                primaryKeyName="PK__oauth_session"
            ]
            name="id"
            type="VARCHAR(36)"
        ],
        [
            [
                nullable="false"
            ]
            name="context_id"
            type="INT"
        ],
        [
            [
                nullable="true"
            ]
            name="authorisation_code"
            type="VARCHAR(36)"
        ],
... [truncated in log] as 74c0354c2ccc797443a81bb8c3a1db5e
2021-12-11 17:23:50,533 DEBUG Computed checksum for 7:d652f2725d636decde33dc47c5f13555:7:2f1d811927e50ec7baf0d3d048a8df42:7:74c0354c2ccc797443a81bb8c3a1db5e: as badb1c0a44480c1bfdc74fac90e2fe7b
2021-12-11 17:23:50,540 DEBUG Computed checksum for addForeignKeyConstraint:[
    baseColumnNames="owner_id"
    baseTableName="oauth_service"
    constraintName="FK__oauth_service__user_id"
    deferrable="false"
    initiallyDeferred="false"
    onDelete="CASCADE"
    onUpdate="CASCADE"
    referencedColumnNames="id"
    referencedTableName="user_account"
] as b76ec612ee08ff2319736d99a5a04eed
2021-12-11 17:23:50,541 DEBUG Computed checksum for addForeignKeyConstraint:[
    baseColumnNames="service_id"
    baseTableName="oauth_session_context"
    constraintName="FK__oauth_session_context__service_id"
    deferrable="false"
    initiallyDeferred="false"
    onDelete="CASCADE"
    onUpdate="CASCADE"
    referencedColumnNames="id"
    referencedTableName="oauth_service"
] as ad08e677ecff0ce1722ee57ac23e7240
2021-12-11 17:23:50,542 DEBUG Computed checksum for addForeignKeyConstraint:[
    baseColumnNames="user_id"
    baseTableName="oauth_session_context"
    constraintName="FK__oauth_session_context__user_id"
    deferrable="false"
    initiallyDeferred="false"
    onDelete="CASCADE"
    onUpdate="CASCADE"
    referencedColumnNames="id"
    referencedTableName="user_account"
] as 6dec6bc5a8c9bbae5cc11997a3b63c7a
2021-12-11 17:23:50,543 DEBUG Computed checksum for addForeignKeyConstraint:[
    baseColumnNames="context_id"
    baseTableName="oauth_session"
    constraintName="FK__oauth_session__context_id"
    deferrable="false"
    initiallyDeferred="false"
    onDelete="CASCADE"
    onUpdate="CASCADE"
    referencedColumnNames="id"
    referencedTableName="oauth_session_context"
] as c968be166911e02badf53b57ba98c43a
2021-12-11 17:23:50,543 DEBUG Computed checksum for 7:b76ec612ee08ff2319736d99a5a04eed:7:ad08e677ecff0ce1722ee57ac23e7240:7:6dec6bc5a8c9bbae5cc11997a3b63c7a:7:c968be166911e02badf53b57ba98c43a: as 688c5e190db7b4699d96b7916ec2536d
2021-12-11 17:23:50,546 DEBUG Computed checksum for addForeignKeyConstraint:[
    baseColumnNames="owner_id"
    baseTableName="oauth_service"
    constraintName="FK__oauth_service__user_id"
    deferrable="false"
    initiallyDeferred="false"
    onDelete="CASCADE"
    onUpdate="CASCADE"
    referencedColumnNames="id"
    referencedTableName="user_account"
] as b76ec612ee08ff2319736d99a5a04eed
2021-12-11 17:23:50,547 DEBUG Computed checksum for addForeignKeyConstraint:[
    baseColumnNames="service_id"
    baseTableName="oauth_session_context"
    constraintName="FK__oauth_session_context__service_id"
    deferrable="false"
    initiallyDeferred="false"
    onDelete="CASCADE"
    onUpdate="CASCADE"
    referencedColumnNames="id"
    referencedTableName="oauth_service"
] as ad08e677ecff0ce1722ee57ac23e7240
2021-12-11 17:23:50,547 DEBUG Computed checksum for addForeignKeyConstraint:[
    baseColumnNames="user_id"
    baseTableName="oauth_session_context"
    constraintName="FK__oauth_session_context__user_id"
    deferrable="false"
    initiallyDeferred="false"
    onDelete="NO ACTION"
    onUpdate="NO ACTION"
    referencedColumnNames="id"
    referencedTableName="user_account"
] as e1c12a2c3e2c50838fb73d0adfe933d2
2021-12-11 17:23:50,549 DEBUG Computed checksum for addForeignKeyConstraint:[
    baseColumnNames="context_id"
    baseTableName="oauth_session"
    constraintName="FK__oauth_session__context_id"
    deferrable="false"
    initiallyDeferred="false"
    onDelete="CASCADE"
    onUpdate="CASCADE"
    referencedColumnNames="id"
    referencedTableName="oauth_session_context"
] as c968be166911e02badf53b57ba98c43a
2021-12-11 17:23:50,549 DEBUG Computed checksum for 7:b76ec612ee08ff2319736d99a5a04eed:7:ad08e677ecff0ce1722ee57ac23e7240:7:e1c12a2c3e2c50838fb73d0adfe933d2:7:c968be166911e02badf53b57ba98c43a: as 082498e3a3de1f4a79a3a540ef1ea4eb
2021-12-11 17:23:50,552 DEBUG Computed checksum for addColumn:[
    columns=[
        [
            [
                nullable="false"
            ]
            defaultValueBoolean="true"
            name="is_local"
            type="BOOLEAN"
        ]
    ]
    tableName="user_account"
] as eb11a691e01841c4fdeb28ec32005392
2021-12-11 17:23:50,552 DEBUG Computed checksum for 7:eb11a691e01841c4fdeb28ec32005392: as 6c1675ce0aede049467285c5cfa09d79
2021-12-11 17:23:50,554 DEBUG Running Changeset:./000-Original.xml::pk_sequence_on_supported_dbs::peter@peterphi.com
2021-12-11 17:23:50,554 DEBUG Changeset ./000-Original.xml::pk_sequence_on_supported_dbs::peter@peterphi.com
2021-12-11 17:23:50,555 DEBUG Reading ChangeSet: ./000-Original.xml::pk_sequence_on_supported_dbs::peter@peterphi.com
2021-12-11 17:23:50,555 DEBUG Executing Statement: liquibase.statement.core.CreateSequenceStatement@35cd68d4
2021-12-11 17:23:50,556 DEBUG Executing EXECUTE database command: CREATE SEQUENCE PUBLIC.hibernate_sequence AS BIGINT
2021-12-11 17:23:50,556  INFO Sequence hibernate_sequence created
2021-12-11 17:23:50,556  INFO ChangeSet ./000-Original.xml::pk_sequence_on_supported_dbs::peter@peterphi.com ran successfully in 2ms
2021-12-11 17:23:50,557 DEBUG Executing QUERY database command: SELECT MAX(ORDEREXECUTED) FROM PUBLIC.DATABASECHANGELOG
2021-12-11 17:23:50,560 DEBUG Executing EXECUTE database command: INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('pk_sequence_on_supported_dbs', 'peter@peterphi.com', './000-Original.xml', NOW, 1, '7:afe897bea20bc08d1681087c94d0967d', 'createSequence sequenceName=hibernate_sequence', '', 'EXECUTED', NULL, NULL, '3.5.3', '9243430487')
2021-12-11 17:23:50,561 DEBUG Running Changeset:./000-Original.xml::create_user_account::peter@peterphi.com
2021-12-11 17:23:50,561 DEBUG Changeset ./000-Original.xml::create_user_account::peter@peterphi.com
2021-12-11 17:23:50,561 DEBUG Reading ChangeSet: ./000-Original.xml::create_user_account::peter@peterphi.com
2021-12-11 17:23:50,562 DEBUG Executing Statement: liquibase.statement.core.CreateTableStatement@59901c4d
2021-12-11 17:23:50,563 DEBUG Executing EXECUTE database command: CREATE TABLE PUBLIC.user_account (id INT GENERATED BY DEFAULT AS IDENTITY NOT NULL, email VARCHAR(200) NOT NULL, password VARCHAR(60) NOT NULL, name VARCHAR(100) NOT NULL, local_session_id VARCHAR(36), date_format VARCHAR(50) NOT NULL, date_timezone VARCHAR(50) NOT NULL, created_ts BIGINT NOT NULL, last_login_ts BIGINT, CONSTRAINT PK__user_account PRIMARY KEY (id))
2021-12-11 17:23:50,564  INFO Table user_account created
2021-12-11 17:23:50,564 DEBUG Executing Statement: liquibase.statement.core.AddUniqueConstraintStatement@700f518a
2021-12-11 17:23:50,566 DEBUG Executing EXECUTE database command: ALTER TABLE PUBLIC.user_account ADD CONSTRAINT UX_user_account__email UNIQUE (email)
2021-12-11 17:23:50,568  INFO Unique constraint added to user_account(email)
2021-12-11 17:23:50,568  INFO ChangeSet ./000-Original.xml::create_user_account::peter@peterphi.com ran successfully in 7ms
2021-12-11 17:23:50,570 DEBUG Executing EXECUTE database command: INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('create_user_account', 'peter@peterphi.com', './000-Original.xml', NOW, 2, '7:326b1fbd4a7f1401b1f6fa24d24c6da2', 'createTable tableName=user_account; addUniqueConstraint constraintName=UX_user_account__email, tableName=user_account', '', 'EXECUTED', NULL, NULL, '3.5.3', '9243430487')
2021-12-11 17:23:50,571 DEBUG Running Changeset:./000-Original.xml::add_role_definition_table::peter@peterphi.com
2021-12-11 17:23:50,571 DEBUG Changeset ./000-Original.xml::add_role_definition_table::peter@peterphi.com
2021-12-11 17:23:50,571 DEBUG Reading ChangeSet: ./000-Original.xml::add_role_definition_table::peter@peterphi.com
2021-12-11 17:23:50,571 DEBUG Executing Statement: liquibase.statement.core.CreateTableStatement@199bc830
2021-12-11 17:23:50,571 DEBUG Executing EXECUTE database command: CREATE TABLE PUBLIC.role_definition (id VARCHAR(255) NOT NULL, caption VARCHAR(1024) NOT NULL, CONSTRAINT PK__role_definition PRIMARY KEY (id))
2021-12-11 17:23:50,572  INFO Table role_definition created
2021-12-11 17:23:50,573 DEBUG Executing Statement: liquibase.statement.core.CreateTableStatement@3e17a0a1
2021-12-11 17:23:50,573 DEBUG Executing EXECUTE database command: CREATE TABLE PUBLIC.user_has_role (user_id INT NOT NULL, role_id VARCHAR(255) NOT NULL)
2021-12-11 17:23:50,574  INFO Table user_has_role created
2021-12-11 17:23:50,574 DEBUG Executing Statement: liquibase.statement.core.AddForeignKeyConstraintStatement@150ede8b
2021-12-11 17:23:50,575 DEBUG Executing EXECUTE database command: ALTER TABLE PUBLIC.user_has_role ADD CONSTRAINT FK__user_has_role__user_id FOREIGN KEY (user_id) REFERENCES PUBLIC.user_account (id) ON UPDATE CASCADE ON DELETE CASCADE
2021-12-11 17:23:50,576  INFO Foreign key constraint added to user_has_role (user_id)
2021-12-11 17:23:50,577 DEBUG Executing Statement: liquibase.statement.core.AddForeignKeyConstraintStatement@6778aea6
2021-12-11 17:23:50,577 DEBUG Executing EXECUTE database command: ALTER TABLE PUBLIC.user_has_role ADD CONSTRAINT FK__user_has_role__role_id FOREIGN KEY (role_id) REFERENCES PUBLIC.role_definition (id) ON UPDATE CASCADE ON DELETE CASCADE
2021-12-11 17:23:50,578  INFO Foreign key constraint added to user_has_role (role_id)
2021-12-11 17:23:50,578 DEBUG Executing Statement: liquibase.statement.core.AddPrimaryKeyStatement@7a7cc52c
2021-12-11 17:23:50,579 DEBUG Executing EXECUTE database command: ALTER TABLE PUBLIC.user_has_role ADD CONSTRAINT PK__user_has_role PRIMARY KEY (user_id, role_id)
2021-12-11 17:23:50,579  INFO Primary key added to user_has_role (user_id, role_id)
2021-12-11 17:23:50,579 DEBUG Executing Statement: liquibase.statement.core.InsertStatement@2f61d591
2021-12-11 17:23:50,580 DEBUG Executing EXECUTE database command: INSERT INTO PUBLIC.role_definition (id, caption) VALUES ('user-manager-admin', 'User Administrator')
2021-12-11 17:23:50,580  INFO New row inserted into role_definition
2021-12-11 17:23:50,580 DEBUG Executing Statement: liquibase.statement.core.InsertStatement@332820f4
2021-12-11 17:23:50,581 DEBUG Executing EXECUTE database command: INSERT INTO PUBLIC.role_definition (id, caption) VALUES ('admin', 'Administrator')
2021-12-11 17:23:50,581  INFO New row inserted into role_definition
2021-12-11 17:23:50,581 DEBUG Executing Statement: liquibase.statement.core.InsertStatement@7173ae5b
2021-12-11 17:23:50,582 DEBUG Executing EXECUTE database command: INSERT INTO PUBLIC.role_definition (id, caption) VALUES ('framework-admin', 'Application Framework Administrator (for service /guice pages)')
2021-12-11 17:23:50,582  INFO New row inserted into role_definition
2021-12-11 17:23:50,582 DEBUG Executing Statement: liquibase.statement.core.InsertStatement@72456279
2021-12-11 17:23:50,582 DEBUG Executing EXECUTE database command: INSERT INTO PUBLIC.role_definition (id, caption) VALUES ('framework-info', 'Application Framework User (for service /guice pages)')
2021-12-11 17:23:50,583  INFO New row inserted into role_definition
2021-12-11 17:23:50,583  INFO ChangeSet ./000-Original.xml::add_role_definition_table::peter@peterphi.com ran successfully in 12ms
2021-12-11 17:23:50,585 DEBUG Executing EXECUTE database command: INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('add_role_definition_table', 'peter@peterphi.com', './000-Original.xml', NOW, 3, '7:8ddc35e308ab46b077bda7393544fbb6', 'createTable tableName=role_definition; createTable tableName=user_has_role; addForeignKeyConstraint baseTableName=user_has_role, constraintName=FK__user_has_role__user_id, referencedTableName=user_account; addForeignKeyConstraint baseTableName=use...', '', 'EXECUTED', NULL, NULL, '3.5.3', '9243430487')
2021-12-11 17:23:50,587 DEBUG Running Changeset:./000-Original.xml::create_oauth_tables::peter@peterphi.com
2021-12-11 17:23:50,587 DEBUG Changeset ./000-Original.xml::create_oauth_tables::peter@peterphi.com
2021-12-11 17:23:50,587 DEBUG Reading ChangeSet: ./000-Original.xml::create_oauth_tables::peter@peterphi.com
2021-12-11 17:23:50,588 DEBUG Executing Statement: liquibase.statement.core.CreateTableStatement@6a9b9909
2021-12-11 17:23:50,588 DEBUG Executing EXECUTE database command: CREATE TABLE PUBLIC.oauth_service (id VARCHAR(36) NOT NULL, owner_id INT NOT NULL, client_name VARCHAR(1000) NOT NULL, client_endpoints VARCHAR(2000) NOT NULL, client_secret VARCHAR(36) NOT NULL, is_enabled BOOLEAN NOT NULL, created_ts BIGINT NOT NULL, updated_ts BIGINT NOT NULL, CONSTRAINT PK__oauth_service PRIMARY KEY (id))
2021-12-11 17:23:50,590  INFO Table oauth_service created
2021-12-11 17:23:50,590 DEBUG Executing Statement: liquibase.statement.core.CreateTableStatement@34b27915
2021-12-11 17:23:50,591 DEBUG Executing EXECUTE database command: CREATE TABLE PUBLIC.oauth_session_context (id INT GENERATED BY DEFAULT AS IDENTITY NOT NULL, user_id INT NOT NULL, service_id VARCHAR(36) NOT NULL, approved_scope VARCHAR(1000) NOT NULL, is_active BOOLEAN NOT NULL, created_ts BIGINT NOT NULL, updated_ts BIGINT NOT NULL, CONSTRAINT PK__oauth_session_context PRIMARY KEY (id))
2021-12-11 17:23:50,592  INFO Table oauth_session_context created
2021-12-11 17:23:50,593 DEBUG Executing Statement: liquibase.statement.core.CreateTableStatement@57402ba1
2021-12-11 17:23:50,593 DEBUG Executing EXECUTE database command: CREATE TABLE PUBLIC.oauth_session (id VARCHAR(36) NOT NULL, context_id INT NOT NULL, authorisation_code VARCHAR(36), current_token VARCHAR(36), initiator_detail VARCHAR(8192), is_active BOOLEAN NOT NULL, expires_ts BIGINT NOT NULL, created_ts BIGINT NOT NULL, updated_ts BIGINT NOT NULL, CONSTRAINT PK__oauth_session PRIMARY KEY (id))
2021-12-11 17:23:50,595  INFO Table oauth_session created
2021-12-11 17:23:50,595  INFO ChangeSet ./000-Original.xml::create_oauth_tables::peter@peterphi.com ran successfully in 8ms
2021-12-11 17:23:50,597 DEBUG Executing EXECUTE database command: INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('create_oauth_tables', 'peter@peterphi.com', './000-Original.xml', NOW, 4, '7:badb1c0a44480c1bfdc74fac90e2fe7b', 'createTable tableName=oauth_service; createTable tableName=oauth_session_context; createTable tableName=oauth_session', '', 'EXECUTED', NULL, NULL, '3.5.3', '9243430487')
2021-12-11 17:23:50,598 DEBUG Running Changeset:./000-Original.xml::create_oauth_constraints__cascade::peter@peterphi.com
2021-12-11 17:23:50,598 DEBUG Changeset ./000-Original.xml::create_oauth_constraints__cascade::peter@peterphi.com
2021-12-11 17:23:50,598 DEBUG Reading ChangeSet: ./000-Original.xml::create_oauth_constraints__cascade::peter@peterphi.com
2021-12-11 17:23:50,599 DEBUG Executing Statement: liquibase.statement.core.AddForeignKeyConstraintStatement@3936df72
2021-12-11 17:23:50,599 DEBUG Executing EXECUTE database command: ALTER TABLE PUBLIC.oauth_service ADD CONSTRAINT FK__oauth_service__user_id FOREIGN KEY (owner_id) REFERENCES PUBLIC.user_account (id) ON UPDATE CASCADE ON DELETE CASCADE
2021-12-11 17:23:50,601  INFO Foreign key constraint added to oauth_service (owner_id)
2021-12-11 17:23:50,601 DEBUG Executing Statement: liquibase.statement.core.AddForeignKeyConstraintStatement@3ee69ad8
2021-12-11 17:23:50,602 DEBUG Executing EXECUTE database command: ALTER TABLE PUBLIC.oauth_session_context ADD CONSTRAINT FK__oauth_session_context__service_id FOREIGN KEY (service_id) REFERENCES PUBLIC.oauth_service (id) ON UPDATE CASCADE ON DELETE CASCADE
2021-12-11 17:23:50,603  INFO Foreign key constraint added to oauth_session_context (service_id)
2021-12-11 17:23:50,603 DEBUG Executing Statement: liquibase.statement.core.AddForeignKeyConstraintStatement@44c13103
2021-12-11 17:23:50,604 DEBUG Executing EXECUTE database command: ALTER TABLE PUBLIC.oauth_session_context ADD CONSTRAINT FK__oauth_session_context__user_id FOREIGN KEY (user_id) REFERENCES PUBLIC.user_account (id) ON UPDATE CASCADE ON DELETE CASCADE
2021-12-11 17:23:50,605  INFO Foreign key constraint added to oauth_session_context (user_id)
2021-12-11 17:23:50,605 DEBUG Executing Statement: liquibase.statement.core.AddForeignKeyConstraintStatement@19962194
2021-12-11 17:23:50,606 DEBUG Executing EXECUTE database command: ALTER TABLE PUBLIC.oauth_session ADD CONSTRAINT FK__oauth_session__context_id FOREIGN KEY (context_id) REFERENCES PUBLIC.oauth_session_context (id) ON UPDATE CASCADE ON DELETE CASCADE
2021-12-11 17:23:50,608  INFO Foreign key constraint added to oauth_session (context_id)
2021-12-11 17:23:50,608  INFO ChangeSet ./000-Original.xml::create_oauth_constraints__cascade::peter@peterphi.com ran successfully in 10ms
2021-12-11 17:23:50,610 DEBUG Executing EXECUTE database command: INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('create_oauth_constraints__cascade', 'peter@peterphi.com', './000-Original.xml', NOW, 5, '7:688c5e190db7b4699d96b7916ec2536d', 'addForeignKeyConstraint baseTableName=oauth_service, constraintName=FK__oauth_service__user_id, referencedTableName=user_account; addForeignKeyConstraint baseTableName=oauth_session_context, constraintName=FK__oauth_session_context__service_id, re...', '', 'EXECUTED', NULL, NULL, '3.5.3', '9243430487')
2021-12-11 17:23:50,612 DEBUG Running Changeset:./000-Original.xml::create_oauth_constraints__sqlserver::peter@peterphi.com
2021-12-11 17:23:50,612 DEBUG Changeset ./000-Original.xml::create_oauth_constraints__sqlserver::peter@peterphi.com
2021-12-11 17:23:50,612  INFO Marking ChangeSet: ./000-Original.xml::create_oauth_constraints__sqlserver::peter@peterphi.com ran despite precondition failure due to onFail='MARK_RAN': 
          /liquibase/changelog.xml : DBMS Precondition failed: expected mssql, got hsqldb

2021-12-11 17:23:50,612 DEBUG Skipping ChangeSet: ./000-Original.xml::create_oauth_constraints__sqlserver::peter@peterphi.com
2021-12-11 17:23:50,615 DEBUG Executing EXECUTE database command: INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('create_oauth_constraints__sqlserver', 'peter@peterphi.com', './000-Original.xml', NOW, 6, '7:082498e3a3de1f4a79a3a540ef1ea4eb', 'addForeignKeyConstraint baseTableName=oauth_service, constraintName=FK__oauth_service__user_id, referencedTableName=user_account; addForeignKeyConstraint baseTableName=oauth_session_context, constraintName=FK__oauth_session_context__service_id, re...', '', 'MARK_RAN', NULL, NULL, '3.5.3', '9243430487')
2021-12-11 17:23:50,616 DEBUG Running Changeset:./000-Original.xml::create_user_is_local::peter@peterphi.com
2021-12-11 17:23:50,616 DEBUG Changeset ./000-Original.xml::create_user_is_local::peter@peterphi.com
2021-12-11 17:23:50,616 DEBUG Reading ChangeSet: ./000-Original.xml::create_user_is_local::peter@peterphi.com
2021-12-11 17:23:50,616 DEBUG Executing Statement: liquibase.statement.core.AddColumnStatement@55259aa7
2021-12-11 17:23:50,618 DEBUG Executing EXECUTE database command: ALTER TABLE PUBLIC.user_account ADD is_local BOOLEAN DEFAULT TRUE NOT NULL
2021-12-11 17:23:50,621  INFO Columns is_local(BOOLEAN) added to user_account
2021-12-11 17:23:50,621  INFO ChangeSet ./000-Original.xml::create_user_is_local::peter@peterphi.com ran successfully in 5ms
2021-12-11 17:23:50,622 DEBUG Executing EXECUTE database command: INSERT INTO PUBLIC.DATABASECHANGELOG (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('create_user_is_local', 'peter@peterphi.com', './000-Original.xml', NOW, 7, '7:6c1675ce0aede049467285c5cfa09d79', 'addColumn tableName=user_account', '', 'EXECUTED', NULL, NULL, '3.5.3', '9243430487')
2021-12-11 17:23:50,623 DEBUG Release Database Lock
2021-12-11 17:23:50,624 DEBUG Executing UPDATE database command: UPDATE PUBLIC.DATABASECHANGELOGLOCK SET LOCKED = FALSE, LOCKEDBY = NULL, LOCKGRANTED = NULL WHERE ID = 1
2021-12-11 17:23:50,624  INFO Successfully released change log lock
2021-12-11 17:23:50,625 DEBUG Register for shutdown: com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider$$EnhancerByGuice$$e9bc367e@3e104d4b
2021-12-11 17:23:50,625 DEBUG Adding Integrator [org.hibernate.cfg.beanvalidation.BeanValidationIntegrator].
2021-12-11 17:23:50,626 DEBUG Adding Integrator [org.hibernate.secure.spi.JaccIntegrator].
2021-12-11 17:23:50,626 DEBUG Adding Integrator [org.hibernate.cache.internal.CollectionCacheInvalidator].
2021-12-11 17:23:50,643 DEBUG Overriding existing service binding [org.hibernate.secure.spi.JaccService]
2021-12-11 17:23:50,643 DEBUG Building session factory using provided StandardServiceRegistry
2021-12-11 17:23:50,666 DEBUG Cache region factory : org.hibernate.cache.internal.NoCachingRegionFactory
2021-12-11 17:23:50,677  INFO HCANN000001: Hibernate Commons Annotations {5.0.1.Final}
2021-12-11 17:23:50,711 DEBUG Adding type registration boolean -> org.hibernate.type.BooleanType@6f3e19b3
2021-12-11 17:23:50,712 DEBUG Adding type registration boolean -> org.hibernate.type.BooleanType@6f3e19b3
2021-12-11 17:23:50,712 DEBUG Adding type registration java.lang.Boolean -> org.hibernate.type.BooleanType@6f3e19b3
2021-12-11 17:23:50,713 DEBUG Adding type registration numeric_boolean -> org.hibernate.type.NumericBooleanType@339a3670
2021-12-11 17:23:50,715 DEBUG Adding type registration true_false -> org.hibernate.type.TrueFalseType@5d51e129
2021-12-11 17:23:50,716 DEBUG Adding type registration yes_no -> org.hibernate.type.YesNoType@21c815e4
2021-12-11 17:23:50,718 DEBUG Adding type registration byte -> org.hibernate.type.ByteType@761956ac
2021-12-11 17:23:50,718 DEBUG Adding type registration byte -> org.hibernate.type.ByteType@761956ac
2021-12-11 17:23:50,718 DEBUG Adding type registration java.lang.Byte -> org.hibernate.type.ByteType@761956ac
2021-12-11 17:23:50,720 DEBUG Adding type registration character -> org.hibernate.type.CharacterType@6c9320c2
2021-12-11 17:23:50,720 DEBUG Adding type registration char -> org.hibernate.type.CharacterType@6c9320c2
2021-12-11 17:23:50,720 DEBUG Adding type registration java.lang.Character -> org.hibernate.type.CharacterType@6c9320c2
2021-12-11 17:23:50,721 DEBUG Adding type registration short -> org.hibernate.type.ShortType@1e43e323
2021-12-11 17:23:50,722 DEBUG Adding type registration short -> org.hibernate.type.ShortType@1e43e323
2021-12-11 17:23:50,722 DEBUG Adding type registration java.lang.Short -> org.hibernate.type.ShortType@1e43e323
2021-12-11 17:23:50,723 DEBUG Adding type registration integer -> org.hibernate.type.IntegerType@79fd6f95
2021-12-11 17:23:50,725 DEBUG Adding type registration int -> org.hibernate.type.IntegerType@79fd6f95
2021-12-11 17:23:50,726 DEBUG Adding type registration java.lang.Integer -> org.hibernate.type.IntegerType@79fd6f95
2021-12-11 17:23:50,736 DEBUG Adding type registration long -> org.hibernate.type.LongType@113e13f9
2021-12-11 17:23:50,737 DEBUG Adding type registration long -> org.hibernate.type.LongType@113e13f9
2021-12-11 17:23:50,737 DEBUG Adding type registration java.lang.Long -> org.hibernate.type.LongType@113e13f9
2021-12-11 17:23:50,740 DEBUG Adding type registration float -> org.hibernate.type.FloatType@24e83d19
2021-12-11 17:23:50,740 DEBUG Adding type registration float -> org.hibernate.type.FloatType@24e83d19
2021-12-11 17:23:50,740 DEBUG Adding type registration java.lang.Float -> org.hibernate.type.FloatType@24e83d19
2021-12-11 17:23:50,743 DEBUG Adding type registration double -> org.hibernate.type.DoubleType@35267fd4
2021-12-11 17:23:50,744 DEBUG Adding type registration double -> org.hibernate.type.DoubleType@35267fd4
2021-12-11 17:23:50,744 DEBUG Adding type registration java.lang.Double -> org.hibernate.type.DoubleType@35267fd4
2021-12-11 17:23:50,746 DEBUG Adding type registration big_decimal -> org.hibernate.type.BigDecimalType@65c33b92
2021-12-11 17:23:50,747 DEBUG Adding type registration java.math.BigDecimal -> org.hibernate.type.BigDecimalType@65c33b92
2021-12-11 17:23:50,748 DEBUG Adding type registration big_integer -> org.hibernate.type.BigIntegerType@1f0b3cfe
2021-12-11 17:23:50,749 DEBUG Adding type registration java.math.BigInteger -> org.hibernate.type.BigIntegerType@1f0b3cfe
2021-12-11 17:23:50,750 DEBUG Adding type registration string -> org.hibernate.type.StringType@5ec4ff02
2021-12-11 17:23:50,750 DEBUG Adding type registration java.lang.String -> org.hibernate.type.StringType@5ec4ff02
2021-12-11 17:23:50,752 DEBUG Adding type registration nstring -> org.hibernate.type.StringNVarcharType@612e21b9
2021-12-11 17:23:50,753 DEBUG Adding type registration ncharacter -> org.hibernate.type.CharacterNCharType@312b34e3
2021-12-11 17:23:50,755 DEBUG Adding type registration url -> org.hibernate.type.UrlType@44bd4b0a
2021-12-11 17:23:50,755 DEBUG Adding type registration java.net.URL -> org.hibernate.type.UrlType@44bd4b0a
2021-12-11 17:23:50,758 DEBUG Adding type registration Duration -> org.hibernate.type.DurationType@67c5ac52
2021-12-11 17:23:50,758 DEBUG Adding type registration java.time.Duration -> org.hibernate.type.DurationType@67c5ac52
2021-12-11 17:23:50,783 DEBUG Adding type registration Instant -> org.hibernate.type.InstantType@25d93198
2021-12-11 17:23:50,783 DEBUG Adding type registration java.time.Instant -> org.hibernate.type.InstantType@25d93198
2021-12-11 17:23:50,785 DEBUG Adding type registration LocalDateTime -> org.hibernate.type.LocalDateTimeType@5f038248
2021-12-11 17:23:50,785 DEBUG Adding type registration java.time.LocalDateTime -> org.hibernate.type.LocalDateTimeType@5f038248
2021-12-11 17:23:50,787 DEBUG Adding type registration LocalDate -> org.hibernate.type.LocalDateType@1deceb67
2021-12-11 17:23:50,787 DEBUG Adding type registration java.time.LocalDate -> org.hibernate.type.LocalDateType@1deceb67
2021-12-11 17:23:50,789 DEBUG Adding type registration LocalTime -> org.hibernate.type.LocalTimeType@5d5c04f9
2021-12-11 17:23:50,789 DEBUG Adding type registration java.time.LocalTime -> org.hibernate.type.LocalTimeType@5d5c04f9
2021-12-11 17:23:50,791 DEBUG Adding type registration OffsetDateTime -> org.hibernate.type.OffsetDateTimeType@62db3891
2021-12-11 17:23:50,791 DEBUG Adding type registration java.time.OffsetDateTime -> org.hibernate.type.OffsetDateTimeType@62db3891
2021-12-11 17:23:50,793 DEBUG Adding type registration OffsetTime -> org.hibernate.type.OffsetTimeType@5bc7e78e
2021-12-11 17:23:50,793 DEBUG Adding type registration java.time.OffsetTime -> org.hibernate.type.OffsetTimeType@5bc7e78e
2021-12-11 17:23:50,798 DEBUG Adding type registration ZonedDateTime -> org.hibernate.type.ZonedDateTimeType@71904469
2021-12-11 17:23:50,798 DEBUG Adding type registration java.time.ZonedDateTime -> org.hibernate.type.ZonedDateTimeType@71904469
2021-12-11 17:23:50,801 DEBUG Adding type registration date -> org.hibernate.type.DateType@8851ce1
2021-12-11 17:23:50,801 DEBUG Adding type registration java.sql.Date -> org.hibernate.type.DateType@8851ce1
2021-12-11 17:23:50,803 DEBUG Adding type registration time -> org.hibernate.type.TimeType@34d52ecd
2021-12-11 17:23:50,803 DEBUG Adding type registration java.sql.Time -> org.hibernate.type.TimeType@34d52ecd
2021-12-11 17:23:50,804 DEBUG Adding type registration timestamp -> org.hibernate.type.TimestampType@277bf091
2021-12-11 17:23:50,804 DEBUG Adding type registration java.sql.Timestamp -> org.hibernate.type.TimestampType@277bf091
2021-12-11 17:23:50,804 DEBUG Adding type registration java.util.Date -> org.hibernate.type.TimestampType@277bf091
2021-12-11 17:23:50,806 DEBUG Adding type registration dbtimestamp -> org.hibernate.type.DbTimestampType@fab35b1
2021-12-11 17:23:50,807 DEBUG Adding type registration calendar -> org.hibernate.type.CalendarType@6b2e46af
2021-12-11 17:23:50,808 DEBUG Adding type registration java.util.Calendar -> org.hibernate.type.CalendarType@6b2e46af
2021-12-11 17:23:50,808 DEBUG Adding type registration java.util.GregorianCalendar -> org.hibernate.type.CalendarType@6b2e46af
2021-12-11 17:23:50,808 DEBUG Adding type registration calendar_date -> org.hibernate.type.CalendarDateType@3374b5bc
2021-12-11 17:23:50,809 DEBUG Adding type registration locale -> org.hibernate.type.LocaleType@4047d2d9
2021-12-11 17:23:50,809 DEBUG Adding type registration java.util.Locale -> org.hibernate.type.LocaleType@4047d2d9
2021-12-11 17:23:50,811 DEBUG Adding type registration currency -> org.hibernate.type.CurrencyType@660f0c
2021-12-11 17:23:50,811 DEBUG Adding type registration java.util.Currency -> org.hibernate.type.CurrencyType@660f0c
2021-12-11 17:23:50,812 DEBUG Adding type registration timezone -> org.hibernate.type.TimeZoneType@4760f169
2021-12-11 17:23:50,812 DEBUG Adding type registration java.util.TimeZone -> org.hibernate.type.TimeZoneType@4760f169
2021-12-11 17:23:50,813 DEBUG Adding type registration class -> org.hibernate.type.ClassType@76563d26
2021-12-11 17:23:50,813 DEBUG Adding type registration java.lang.Class -> org.hibernate.type.ClassType@76563d26
2021-12-11 17:23:50,815 DEBUG Adding type registration uuid-binary -> org.hibernate.type.UUIDBinaryType@7f353d99
2021-12-11 17:23:50,815 DEBUG Adding type registration java.util.UUID -> org.hibernate.type.UUIDBinaryType@7f353d99
2021-12-11 17:23:50,815 DEBUG Adding type registration uuid-char -> org.hibernate.type.UUIDCharType@38d17d80
2021-12-11 17:23:50,816 DEBUG Adding type registration binary -> org.hibernate.type.BinaryType@e5cbff2
2021-12-11 17:23:50,817 DEBUG Adding type registration byte[] -> org.hibernate.type.BinaryType@e5cbff2
2021-12-11 17:23:50,817 DEBUG Adding type registration [B -> org.hibernate.type.BinaryType@e5cbff2
2021-12-11 17:23:50,818 DEBUG Adding type registration wrapper-binary -> org.hibernate.type.WrapperBinaryType@60f70249
2021-12-11 17:23:50,818 DEBUG Adding type registration Byte[] -> org.hibernate.type.WrapperBinaryType@60f70249
2021-12-11 17:23:50,818 DEBUG Adding type registration [Ljava.lang.Byte; -> org.hibernate.type.WrapperBinaryType@60f70249
2021-12-11 17:23:50,819 DEBUG Adding type registration row_version -> org.hibernate.type.RowVersionType@6920614
2021-12-11 17:23:50,820 DEBUG Adding type registration image -> org.hibernate.type.ImageType@6d1dcdff
2021-12-11 17:23:50,821 DEBUG Adding type registration characters -> org.hibernate.type.CharArrayType@43045f9f
2021-12-11 17:23:50,821 DEBUG Adding type registration char[] -> org.hibernate.type.CharArrayType@43045f9f
2021-12-11 17:23:50,821 DEBUG Adding type registration [C -> org.hibernate.type.CharArrayType@43045f9f
2021-12-11 17:23:50,822 DEBUG Adding type registration wrapper-characters -> org.hibernate.type.CharacterArrayType@767a014e
2021-12-11 17:23:50,822 DEBUG Adding type registration [Ljava.lang.Character; -> org.hibernate.type.CharacterArrayType@767a014e
2021-12-11 17:23:50,822 DEBUG Adding type registration Character[] -> org.hibernate.type.CharacterArrayType@767a014e
2021-12-11 17:23:50,823 DEBUG Adding type registration text -> org.hibernate.type.TextType@9596ce8
2021-12-11 17:23:50,824 DEBUG Adding type registration ntext -> org.hibernate.type.NTextType@26c47874
2021-12-11 17:23:50,830 DEBUG Adding type registration blob -> org.hibernate.type.BlobType@2eae4349
2021-12-11 17:23:50,830 DEBUG Adding type registration java.sql.Blob -> org.hibernate.type.BlobType@2eae4349
2021-12-11 17:23:50,831 DEBUG Adding type registration materialized_blob -> org.hibernate.type.MaterializedBlobType@646c0a67
2021-12-11 17:23:50,838 DEBUG Adding type registration clob -> org.hibernate.type.ClobType@6cd64ee8
2021-12-11 17:23:50,838 DEBUG Adding type registration java.sql.Clob -> org.hibernate.type.ClobType@6cd64ee8
2021-12-11 17:23:50,845 DEBUG Adding type registration nclob -> org.hibernate.type.NClobType@3c3a0032
2021-12-11 17:23:50,846 DEBUG Adding type registration java.sql.NClob -> org.hibernate.type.NClobType@3c3a0032
2021-12-11 17:23:50,847 DEBUG Adding type registration materialized_clob -> org.hibernate.type.MaterializedClobType@25ad4f71
2021-12-11 17:23:50,848 DEBUG Adding type registration materialized_nclob -> org.hibernate.type.MaterializedNClobType@455c1d8c
2021-12-11 17:23:50,850 DEBUG Adding type registration serializable -> org.hibernate.type.SerializableType@a92be4f
2021-12-11 17:23:50,854 DEBUG Adding type registration object -> org.hibernate.type.ObjectType@467b684d
2021-12-11 17:23:50,854 DEBUG Adding type registration java.lang.Object -> org.hibernate.type.ObjectType@467b684d
2021-12-11 17:23:50,855 DEBUG Adding type registration imm_date -> org.hibernate.type.AdaptedImmutableType@611a990b
2021-12-11 17:23:50,855 DEBUG Adding type registration imm_time -> org.hibernate.type.AdaptedImmutableType@7cbeac65
2021-12-11 17:23:50,855 DEBUG Adding type registration imm_timestamp -> org.hibernate.type.AdaptedImmutableType@7fe82967
2021-12-11 17:23:50,855 DEBUG Adding type registration imm_dbtimestamp -> org.hibernate.type.AdaptedImmutableType@50850539
2021-12-11 17:23:50,855 DEBUG Adding type registration imm_calendar -> org.hibernate.type.AdaptedImmutableType@65e21ce3
2021-12-11 17:23:50,855 DEBUG Adding type registration imm_calendar_date -> org.hibernate.type.AdaptedImmutableType@6c3659be
2021-12-11 17:23:50,855 DEBUG Adding type registration imm_binary -> org.hibernate.type.AdaptedImmutableType@522bf64e
2021-12-11 17:23:50,855 DEBUG Adding type registration imm_serializable -> org.hibernate.type.AdaptedImmutableType@2aff9dff
2021-12-11 17:23:50,874  WARN HHH10001002: Using Hibernate built-in connection pool (not for production use!)
2021-12-11 17:23:50,876  INFO HHH10001005: using driver [org.hsqldb.jdbcDriver] at URL [jdbc:hsqldb:mem:testdb]
2021-12-11 17:23:50,876  INFO HHH10001001: Connection properties: {user=sa, password=, readOnly=false}
2021-12-11 17:23:50,877  INFO HHH10001003: Autocommit mode: false
2021-12-11 17:23:50,881 DEBUG Initializing Connection pool with 1 Connections
2021-12-11 17:23:50,881  INFO HHH000115: Hibernate connection pool size: 20 (min=1)
2021-12-11 17:23:50,888 DEBUG Database ->
       name : HSQL Database Engine
    version : 2.4.0
      major : 2
      minor : 4
2021-12-11 17:23:50,888 DEBUG Driver ->
       name : HSQL Database Engine Driver
    version : 2.4.0
      major : 2
      minor : 4
2021-12-11 17:23:50,888 DEBUG JDBC version : 4.2
2021-12-11 17:23:50,906  INFO HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2021-12-11 17:23:50,938 DEBUG JDBC driver metadata reported database stores quoted identifiers in neither upper, lower nor mixed case
2021-12-11 17:23:50,952 DEBUG Adding type registration java.util.Date -> org.hibernate.type.CustomType@489091bd
2021-12-11 17:23:50,952  INFO HHH000270: Type registration [java.util.Date] overrides previous : org.hibernate.type.TimestampType@277bf091
2021-12-11 17:23:50,952 DEBUG Adding type registration org.joda.time.DateTime -> org.hibernate.type.CustomType@512d6e60
2021-12-11 17:23:50,952 DEBUG Adding type registration com.peterphi.std.types.Timecode -> org.hibernate.type.CustomType@1de9b505
2021-12-11 17:23:50,952 DEBUG Adding type registration com.peterphi.std.types.SampleCount -> org.hibernate.type.CustomType@7b122839
2021-12-11 17:23:50,952 DEBUG Adding type registration org.joda.time.LocalDate -> org.hibernate.type.CustomType@3743539f
2021-12-11 17:23:50,987 DEBUG Registering IdentifierGenerator strategy [uuid2] -> [org.hibernate.id.UUIDGenerator]
2021-12-11 17:23:50,987 DEBUG Registering IdentifierGenerator strategy [guid] -> [org.hibernate.id.GUIDGenerator]
2021-12-11 17:23:50,988 DEBUG Registering IdentifierGenerator strategy [uuid] -> [org.hibernate.id.UUIDHexGenerator]
2021-12-11 17:23:50,989 DEBUG Registering IdentifierGenerator strategy [uuid.hex] -> [org.hibernate.id.UUIDHexGenerator]
2021-12-11 17:23:50,989 DEBUG Registering IdentifierGenerator strategy [assigned] -> [org.hibernate.id.Assigned]
2021-12-11 17:23:50,990 DEBUG Registering IdentifierGenerator strategy [identity] -> [org.hibernate.id.IdentityGenerator]
2021-12-11 17:23:50,991 DEBUG Registering IdentifierGenerator strategy [select] -> [org.hibernate.id.SelectGenerator]
2021-12-11 17:23:50,992 DEBUG Registering IdentifierGenerator strategy [sequence] -> [org.hibernate.id.enhanced.SequenceStyleGenerator]
2021-12-11 17:23:50,994 DEBUG Registering IdentifierGenerator strategy [seqhilo] -> [org.hibernate.id.SequenceHiLoGenerator]
2021-12-11 17:23:50,994 DEBUG Registering IdentifierGenerator strategy [increment] -> [org.hibernate.id.IncrementGenerator]
2021-12-11 17:23:50,995 DEBUG Registering IdentifierGenerator strategy [foreign] -> [org.hibernate.id.ForeignGenerator]
2021-12-11 17:23:50,995 DEBUG Registering IdentifierGenerator strategy [sequence-identity] -> [org.hibernate.id.SequenceIdentityGenerator]
2021-12-11 17:23:50,995 DEBUG Registering IdentifierGenerator strategy [enhanced-sequence] -> [org.hibernate.id.enhanced.SequenceStyleGenerator]
2021-12-11 17:23:50,996 DEBUG Registering IdentifierGenerator strategy [enhanced-table] -> [org.hibernate.id.enhanced.TableGenerator]
2021-12-11 17:23:51,041 DEBUG Created database namespace [logicalName=Name{catalog=null, schema=null}, physicalName=Name{catalog=null, schema=null}]
2021-12-11 17:23:51,100 DEBUG Binding entity from annotated class: com.peterphi.usermanager.db.entity.UserEntity
2021-12-11 17:23:51,133 DEBUG Binding column: Ejb3DiscriminatorColumn{logicalColumnName'DTYPE', discriminatorTypeName='string'}
2021-12-11 17:23:51,141 DEBUG Import with entity name user_account
2021-12-11 17:23:51,150 DEBUG Bind entity com.peterphi.usermanager.db.entity.UserEntity on table user_account
2021-12-11 17:23:51,186 DEBUG Binding column: Ejb3Column{table=org.hibernate.mapping.Table(user_account), mappingColumn=id, insertable=true, updatable=true, unique=false}
2021-12-11 17:23:51,189 DEBUG MetadataSourceProcessor property id with lazy=false
2021-12-11 17:23:51,192 DEBUG Attempting to locate auto-apply AttributeConverter for property [com.peterphi.usermanager.db.entity.UserEntity:id]
2021-12-11 17:23:51,194 DEBUG building SimpleValue for id
2021-12-11 17:23:51,197 DEBUG Building property id
2021-12-11 17:23:51,202 DEBUG Binding column: Ejb3Column{table=org.hibernate.mapping.Table(user_account), mappingColumn=created_ts, insertable=true, updatable=true, unique=false}
2021-12-11 17:23:51,202 DEBUG MetadataSourceProcessor property created with lazy=false
2021-12-11 17:23:51,202 DEBUG Attempting to locate auto-apply AttributeConverter for property [com.peterphi.usermanager.db.entity.UserEntity:created]
2021-12-11 17:23:51,202 DEBUG building SimpleValue for created
2021-12-11 17:23:51,202 DEBUG Building property created
2021-12-11 17:23:51,203 DEBUG Binding column: Ejb3Column{table=org.hibernate.mapping.Table(user_account), mappingColumn=date_format, insertable=true, updatable=true, unique=false}
2021-12-11 17:23:51,203 DEBUG MetadataSourceProcessor property dateFormat with lazy=false
2021-12-11 17:23:51,203 DEBUG Attempting to locate auto-apply AttributeConverter for property [com.peterphi.usermanager.db.entity.UserEntity:dateFormat]
2021-12-11 17:23:51,203 DEBUG building SimpleValue for dateFormat
2021-12-11 17:23:51,203 DEBUG Building property dateFormat
2021-12-11 17:23:51,203 DEBUG Binding column: Ejb3Column{table=org.hibernate.mapping.Table(user_account), mappingColumn=email, insertable=true, updatable=true, unique=false}
2021-12-11 17:23:51,203 DEBUG MetadataSourceProcessor property email with lazy=false
2021-12-11 17:23:51,203 DEBUG Attempting to locate auto-apply AttributeConverter for property [com.peterphi.usermanager.db.entity.UserEntity:email]
2021-12-11 17:23:51,203 DEBUG building SimpleValue for email
2021-12-11 17:23:51,203 DEBUG Building property email
2021-12-11 17:23:51,206 DEBUG Binding column: Ejb3Column{table=org.hibernate.mapping.Table(user_account), mappingColumn=last_login_ts, insertable=true, updatable=true, unique=false}
2021-12-11 17:23:51,206 DEBUG MetadataSourceProcessor property lastLogin with lazy=false
2021-12-11 17:23:51,206 DEBUG Attempting to locate auto-apply AttributeConverter for property [com.peterphi.usermanager.db.entity.UserEntity:lastLogin]
2021-12-11 17:23:51,206 DEBUG building SimpleValue for lastLogin
2021-12-11 17:23:51,206 DEBUG Building property lastLogin
2021-12-11 17:23:51,207 DEBUG Binding column: Ejb3Column{table=org.hibernate.mapping.Table(user_account), mappingColumn=is_local, insertable=true, updatable=true, unique=false}
2021-12-11 17:23:51,207 DEBUG MetadataSourceProcessor property local with lazy=false
2021-12-11 17:23:51,207 DEBUG Attempting to locate auto-apply AttributeConverter for property [com.peterphi.usermanager.db.entity.UserEntity:local]
2021-12-11 17:23:51,207 DEBUG building SimpleValue for local
2021-12-11 17:23:51,207 DEBUG Building property local
2021-12-11 17:23:51,207 DEBUG Binding column: Ejb3Column{table=org.hibernate.mapping.Table(user_account), mappingColumn=name, insertable=true, updatable=true, unique=false}
2021-12-11 17:23:51,207 DEBUG MetadataSourceProcessor property name with lazy=false
2021-12-11 17:23:51,207 DEBUG Attempting to locate auto-apply AttributeConverter for property [com.peterphi.usermanager.db.entity.UserEntity:name]
2021-12-11 17:23:51,207 DEBUG building SimpleValue for name
2021-12-11 17:23:51,207 DEBUG Building property name
2021-12-11 17:23:51,208 DEBUG Binding column: Ejb3Column{table=org.hibernate.mapping.Table(user_account), mappingColumn=password, insertable=true, updatable=true, unique=false}
2021-12-11 17:23:51,208 DEBUG MetadataSourceProcessor property password with lazy=false
2021-12-11 17:23:51,208 DEBUG Attempting to locate auto-apply AttributeConverter for property [com.peterphi.usermanager.db.entity.UserEntity:password]
2021-12-11 17:23:51,208 DEBUG building SimpleValue for password
2021-12-11 17:23:51,208 DEBUG Building property password
2021-12-11 17:23:51,212 DEBUG Binding column: Ejb3Column{table=org.hibernate.mapping.Table(user_account), mappingColumn=null, insertable=true, updatable=true, unique=false}
2021-12-11 17:23:51,227 DEBUG Binding column: Ejb3Column{table=org.hibernate.mapping.Table(user_account), mappingColumn=element, insertable=true, updatable=true, unique=false}
2021-12-11 17:23:51,227 DEBUG Binding column: Ejb3Column{table=org.hibernate.mapping.Table(user_account), mappingColumn=roles_KEY, insertable=true, updatable=true, unique=false}
2021-12-11 17:23:51,230 DEBUG Binding column: Ejb3JoinColumn{logicalColumnName='roles_KEY', referencedColumn='null', mappedBy='null'}
2021-12-11 17:23:51,232 DEBUG Binding column: Ejb3JoinColumn{logicalColumnName='null', referencedColumn='null', mappedBy='members'}
2021-12-11 17:23:51,232 DEBUG Binding column: Ejb3JoinColumn{logicalColumnName='null', referencedColumn='null', mappedBy='members'}
2021-12-11 17:23:51,233 DEBUG Collection role: com.peterphi.usermanager.db.entity.UserEntity.roles
2021-12-11 17:23:51,237 DEBUG Building property roles
2021-12-11 17:23:51,239 DEBUG Binding column: Ejb3Column{table=org.hibernate.mapping.Table(user_account), mappingColumn=local_session_id, insertable=true, updatable=true, unique=false}
2021-12-11 17:23:51,239 DEBUG MetadataSourceProcessor property sessionReconnectKey with lazy=false
2021-12-11 17:23:51,239 DEBUG Attempting to locate auto-apply AttributeConverter for property [com.peterphi.usermanager.db.entity.UserEntity:sessionReconnectKey]
2021-12-11 17:23:51,239 DEBUG building SimpleValue for sessionReconnectKey
2021-12-11 17:23:51,239 DEBUG Building property sessionReconnectKey
2021-12-11 17:23:51,239 DEBUG Binding column: Ejb3Column{table=org.hibernate.mapping.Table(user_account), mappingColumn=date_timezone, insertable=true, updatable=true, unique=false}
2021-12-11 17:23:51,239 DEBUG MetadataSourceProcessor property timeZone with lazy=false
2021-12-11 17:23:51,239 DEBUG Attempting to locate auto-apply AttributeConverter for property [com.peterphi.usermanager.db.entity.UserEntity:timeZone]
2021-12-11 17:23:51,239 DEBUG building SimpleValue for timeZone
2021-12-11 17:23:51,239 DEBUG Building property timeZone
2021-12-11 17:23:51,240 DEBUG Binding entity from annotated class: com.peterphi.usermanager.db.entity.RoleEntity
2021-12-11 17:23:51,240 DEBUG Binding column: Ejb3DiscriminatorColumn{logicalColumnName'DTYPE', discriminatorTypeName='string'}
2021-12-11 17:23:51,240 DEBUG Import with entity name role_definition
2021-12-11 17:23:51,240 DEBUG Bind entity com.peterphi.usermanager.db.entity.RoleEntity on table role_definition
2021-12-11 17:23:51,248 DEBUG Binding column: Ejb3Column{table=org.hibernate.mapping.Table(role_definition), mappingColumn=id, insertable=true, updatable=true, unique=false}
2021-12-11 17:23:51,249 DEBUG MetadataSourceProcessor property id with lazy=false
2021-12-11 17:23:51,249 DEBUG Attempting to locate auto-apply AttributeConverter for property [com.peterphi.usermanager.db.entity.RoleEntity:id]
2021-12-11 17:23:51,249 DEBUG building SimpleValue for id
2021-12-11 17:23:51,249 DEBUG Building property id
2021-12-11 17:23:51,250 DEBUG Binding column: Ejb3Column{table=org.hibernate.mapping.Table(role_definition), mappingColumn=caption, insertable=true, updatable=true, unique=false}
2021-12-11 17:23:51,250 DEBUG MetadataSourceProcessor property caption with lazy=false
2021-12-11 17:23:51,250 DEBUG Attempting to locate auto-apply AttributeConverter for property [com.peterphi.usermanager.db.entity.RoleEntity:caption]
2021-12-11 17:23:51,250 DEBUG building SimpleValue for caption
2021-12-11 17:23:51,250 DEBUG Building property caption
2021-12-11 17:23:51,250 DEBUG Binding column: Ejb3Column{table=org.hibernate.mapping.Table(role_definition), mappingColumn=null, insertable=true, updatable=true, unique=false}
2021-12-11 17:23:51,250 DEBUG Binding column: Ejb3Column{table=org.hibernate.mapping.Table(role_definition), mappingColumn=element, insertable=true, updatable=true, unique=false}
2021-12-11 17:23:51,250 DEBUG Binding column: Ejb3Column{table=org.hibernate.mapping.Table(role_definition), mappingColumn=members_KEY, insertable=true, updatable=true, unique=false}
2021-12-11 17:23:51,251 DEBUG Binding column: Ejb3JoinColumn{logicalColumnName='members_KEY', referencedColumn='null', mappedBy='null'}
2021-12-11 17:23:51,253 DEBUG Binding column: Ejb3JoinColumn{logicalColumnName='role_id', referencedColumn='id', mappedBy=''}
2021-12-11 17:23:51,253 DEBUG Binding column: Ejb3JoinColumn{logicalColumnName='user_id', referencedColumn='id', mappedBy=''}
2021-12-11 17:23:51,253 DEBUG Collection role: com.peterphi.usermanager.db.entity.RoleEntity.members
2021-12-11 17:23:51,253 DEBUG Building property members
2021-12-11 17:23:51,253 DEBUG Binding entity from annotated class: com.peterphi.usermanager.db.entity.OAuthSessionEntity
2021-12-11 17:23:51,253 DEBUG Binding column: Ejb3DiscriminatorColumn{logicalColumnName'DTYPE', discriminatorTypeName='string'}
2021-12-11 17:23:51,254 DEBUG Import with entity name oauth_session
2021-12-11 17:23:51,254 DEBUG Bind entity com.peterphi.usermanager.db.entity.OAuthSessionEntity on table oauth_session
2021-12-11 17:23:51,260 DEBUG Binding column: Ejb3Column{table=org.hibernate.mapping.Table(oauth_session), mappingColumn=id, insertable=true, updatable=true, unique=false}
2021-12-11 17:23:51,260 DEBUG MetadataSourceProcessor property id with lazy=false
2021-12-11 17:23:51,260 DEBUG Attempting to locate auto-apply AttributeConverter for property [com.peterphi.usermanager.db.entity.OAuthSessionEntity:id]
2021-12-11 17:23:51,260 DEBUG building SimpleValue for id
2021-12-11 17:23:51,260 DEBUG Building property id
2021-12-11 17:23:51,260 DEBUG Binding column: Ejb3Column{table=org.hibernate.mapping.Table(oauth_session), mappingColumn=is_active, insertable=true, updatable=true, unique=false}
2021-12-11 17:23:51,260 DEBUG MetadataSourceProcessor property alive with lazy=false
2021-12-11 17:23:51,260 DEBUG Attempting to locate auto-apply AttributeConverter for property [com.peterphi.usermanager.db.entity.OAuthSessionEntity:alive]
2021-12-11 17:23:51,260 DEBUG building SimpleValue for alive
2021-12-11 17:23:51,260 DEBUG Building property alive
2021-12-11 17:23:51,261 DEBUG Binding column: Ejb3Column{table=org.hibernate.mapping.Table(oauth_session), mappingColumn=authorisation_code, insertable=true, updatable=true, unique=false}
2021-12-11 17:23:51,261 DEBUG MetadataSourceProcessor property authorisationCode with lazy=false
2021-12-11 17:23:51,261 DEBUG Attempting to locate auto-apply AttributeConverter for property [com.peterphi.usermanager.db.entity.OAuthSessionEntity:authorisationCode]
2021-12-11 17:23:51,261 DEBUG building SimpleValue for authorisationCode
2021-12-11 17:23:51,261 DEBUG Building property authorisationCode
2021-12-11 17:23:51,261 DEBUG Binding column: Ejb3JoinColumn{logicalColumnName='context_id', referencedColumn='', mappedBy=''}
2021-12-11 17:23:51,261 DEBUG Binding column: Ejb3Column{table=org.hibernate.mapping.Table(oauth_session), mappingColumn=context, insertable=true, updatable=true, unique=false}
2021-12-11 17:23:51,263 DEBUG Building property context
2021-12-11 17:23:51,263 DEBUG Binding column: Ejb3Column{table=org.hibernate.mapping.Table(oauth_session), mappingColumn=created_ts, insertable=true, updatable=true, unique=false}
2021-12-11 17:23:51,263 DEBUG MetadataSourceProcessor property created with lazy=false
2021-12-11 17:23:51,263 DEBUG Attempting to locate auto-apply AttributeConverter for property [com.peterphi.usermanager.db.entity.OAuthSessionEntity:created]
2021-12-11 17:23:51,263 DEBUG building SimpleValue for created
2021-12-11 17:23:51,263 DEBUG Building property created
2021-12-11 17:23:51,263 DEBUG Binding column: Ejb3Column{table=org.hibernate.mapping.Table(oauth_session), mappingColumn=expires_ts, insertable=true, updatable=true, unique=false}
2021-12-11 17:23:51,263 DEBUG MetadataSourceProcessor property expires with lazy=false
2021-12-11 17:23:51,263 DEBUG Attempting to locate auto-apply AttributeConverter for property [com.peterphi.usermanager.db.entity.OAuthSessionEntity:expires]
2021-12-11 17:23:51,263 DEBUG building SimpleValue for expires
2021-12-11 17:23:51,263 DEBUG Building property expires
2021-12-11 17:23:51,263 DEBUG Binding column: Ejb3Column{table=org.hibernate.mapping.Table(oauth_session), mappingColumn=initiator_detail, insertable=true, updatable=true, unique=false}
2021-12-11 17:23:51,263 DEBUG MetadataSourceProcessor property initiator with lazy=false
2021-12-11 17:23:51,263 DEBUG Attempting to locate auto-apply AttributeConverter for property [com.peterphi.usermanager.db.entity.OAuthSessionEntity:initiator]
2021-12-11 17:23:51,263 DEBUG building SimpleValue for initiator
2021-12-11 17:23:51,263 DEBUG Building property initiator
2021-12-11 17:23:51,263 DEBUG Binding column: Ejb3Column{table=org.hibernate.mapping.Table(oauth_session), mappingColumn=current_token, insertable=true, updatable=true, unique=false}
2021-12-11 17:23:51,263 DEBUG MetadataSourceProcessor property token with lazy=false
2021-12-11 17:23:51,263 DEBUG Attempting to locate auto-apply AttributeConverter for property [com.peterphi.usermanager.db.entity.OAuthSessionEntity:token]
2021-12-11 17:23:51,264 DEBUG building SimpleValue for token
2021-12-11 17:23:51,264 DEBUG Building property token
2021-12-11 17:23:51,264 DEBUG Binding column: Ejb3Column{table=org.hibernate.mapping.Table(oauth_session), mappingColumn=updated_ts, insertable=true, updatable=true, unique=false}
2021-12-11 17:23:51,264 DEBUG MetadataSourceProcessor property updated with lazy=false
2021-12-11 17:23:51,264 DEBUG Attempting to locate auto-apply AttributeConverter for property [com.peterphi.usermanager.db.entity.OAuthSessionEntity:updated]
2021-12-11 17:23:51,264 DEBUG building SimpleValue for updated
2021-12-11 17:23:51,264 DEBUG Building property updated
2021-12-11 17:23:51,264 DEBUG Binding entity from annotated class: com.peterphi.usermanager.db.entity.OAuthSessionContextEntity
2021-12-11 17:23:51,264 DEBUG Binding column: Ejb3DiscriminatorColumn{logicalColumnName'DTYPE', discriminatorTypeName='string'}
2021-12-11 17:23:51,264 DEBUG Import with entity name oauth_session_context
2021-12-11 17:23:51,264 DEBUG Bind entity com.peterphi.usermanager.db.entity.OAuthSessionContextEntity on table oauth_session_context
2021-12-11 17:23:51,265 DEBUG Binding column: Ejb3Column{table=org.hibernate.mapping.Table(oauth_session_context), mappingColumn=id, insertable=true, updatable=true, unique=false}
2021-12-11 17:23:51,265 DEBUG MetadataSourceProcessor property id with lazy=false
2021-12-11 17:23:51,265 DEBUG Attempting to locate auto-apply AttributeConverter for property [com.peterphi.usermanager.db.entity.OAuthSessionContextEntity:id]
2021-12-11 17:23:51,265 DEBUG building SimpleValue for id
2021-12-11 17:23:51,265 DEBUG Building property id
2021-12-11 17:23:51,266 DEBUG Binding column: Ejb3Column{table=org.hibernate.mapping.Table(oauth_session_context), mappingColumn=is_active, insertable=true, updatable=true, unique=false}
2021-12-11 17:23:51,266 DEBUG MetadataSourceProcessor property active with lazy=false
2021-12-11 17:23:51,266 DEBUG Attempting to locate auto-apply AttributeConverter for property [com.peterphi.usermanager.db.entity.OAuthSessionContextEntity:active]
2021-12-11 17:23:51,266 DEBUG building SimpleValue for active
2021-12-11 17:23:51,266 DEBUG Building property active
2021-12-11 17:23:51,266 DEBUG Binding column: Ejb3Column{table=org.hibernate.mapping.Table(oauth_session_context), mappingColumn=created_ts, insertable=true, updatable=true, unique=false}
2021-12-11 17:23:51,266 DEBUG MetadataSourceProcessor property created with lazy=false
2021-12-11 17:23:51,266 DEBUG Attempting to locate auto-apply AttributeConverter for property [com.peterphi.usermanager.db.entity.OAuthSessionContextEntity:created]
2021-12-11 17:23:51,266 DEBUG building SimpleValue for created
2021-12-11 17:23:51,266 DEBUG Building property created
2021-12-11 17:23:51,266 DEBUG Binding column: Ejb3Column{table=org.hibernate.mapping.Table(oauth_session_context), mappingColumn=approved_scope, insertable=true, updatable=true, unique=false}
2021-12-11 17:23:51,266 DEBUG MetadataSourceProcessor property scope with lazy=false
2021-12-11 17:23:51,266 DEBUG Attempting to locate auto-apply AttributeConverter for property [com.peterphi.usermanager.db.entity.OAuthSessionContextEntity:scope]
2021-12-11 17:23:51,266 DEBUG building SimpleValue for scope
2021-12-11 17:23:51,266 DEBUG Building property scope
2021-12-11 17:23:51,266 DEBUG Binding column: Ejb3JoinColumn{logicalColumnName='service_id', referencedColumn='', mappedBy=''}
2021-12-11 17:23:51,266 DEBUG Binding column: Ejb3Column{table=org.hibernate.mapping.Table(oauth_session_context), mappingColumn=service, insertable=true, updatable=true, unique=false}
2021-12-11 17:23:51,266 DEBUG Building property service
2021-12-11 17:23:51,267 DEBUG Binding column: Ejb3Column{table=org.hibernate.mapping.Table(oauth_session_context), mappingColumn=updated_ts, insertable=true, updatable=true, unique=false}
2021-12-11 17:23:51,267 DEBUG MetadataSourceProcessor property updated with lazy=false
2021-12-11 17:23:51,267 DEBUG Attempting to locate auto-apply AttributeConverter for property [com.peterphi.usermanager.db.entity.OAuthSessionContextEntity:updated]
2021-12-11 17:23:51,267 DEBUG building SimpleValue for updated
2021-12-11 17:23:51,267 DEBUG Building property updated
2021-12-11 17:23:51,267 DEBUG Binding column: Ejb3JoinColumn{logicalColumnName='user_id', referencedColumn='', mappedBy=''}
2021-12-11 17:23:51,267 DEBUG Binding column: Ejb3Column{table=org.hibernate.mapping.Table(oauth_session_context), mappingColumn=user, insertable=true, updatable=true, unique=false}
2021-12-11 17:23:51,267 DEBUG Building property user
2021-12-11 17:23:51,267 DEBUG Binding entity from annotated class: com.peterphi.usermanager.db.entity.OAuthServiceEntity
2021-12-11 17:23:51,267 DEBUG Binding column: Ejb3DiscriminatorColumn{logicalColumnName'DTYPE', discriminatorTypeName='string'}
2021-12-11 17:23:51,267 DEBUG Import with entity name oauth_service
2021-12-11 17:23:51,267 DEBUG Bind entity com.peterphi.usermanager.db.entity.OAuthServiceEntity on table oauth_service
2021-12-11 17:23:51,268 DEBUG Binding column: Ejb3Column{table=org.hibernate.mapping.Table(oauth_service), mappingColumn=id, insertable=true, updatable=true, unique=false}
2021-12-11 17:23:51,268 DEBUG MetadataSourceProcessor property id with lazy=false
2021-12-11 17:23:51,268 DEBUG Attempting to locate auto-apply AttributeConverter for property [com.peterphi.usermanager.db.entity.OAuthServiceEntity:id]
2021-12-11 17:23:51,268 DEBUG building SimpleValue for id
2021-12-11 17:23:51,268 DEBUG Building property id
2021-12-11 17:23:51,268 DEBUG Binding column: Ejb3Column{table=org.hibernate.mapping.Table(oauth_service), mappingColumn=client_secret, insertable=true, updatable=true, unique=false}
2021-12-11 17:23:51,268 DEBUG MetadataSourceProcessor property clientSecret with lazy=false
2021-12-11 17:23:51,268 DEBUG Attempting to locate auto-apply AttributeConverter for property [com.peterphi.usermanager.db.entity.OAuthServiceEntity:clientSecret]
2021-12-11 17:23:51,268 DEBUG building SimpleValue for clientSecret
2021-12-11 17:23:51,268 DEBUG Building property clientSecret
2021-12-11 17:23:51,268 DEBUG Binding column: Ejb3Column{table=org.hibernate.mapping.Table(oauth_service), mappingColumn=created_ts, insertable=true, updatable=true, unique=false}
2021-12-11 17:23:51,268 DEBUG MetadataSourceProcessor property created with lazy=false
2021-12-11 17:23:51,268 DEBUG Attempting to locate auto-apply AttributeConverter for property [com.peterphi.usermanager.db.entity.OAuthServiceEntity:created]
2021-12-11 17:23:51,268 DEBUG building SimpleValue for created
2021-12-11 17:23:51,268 DEBUG Building property created
2021-12-11 17:23:51,268 DEBUG Binding column: Ejb3Column{table=org.hibernate.mapping.Table(oauth_service), mappingColumn=is_enabled, insertable=true, updatable=true, unique=false}
2021-12-11 17:23:51,268 DEBUG MetadataSourceProcessor property enabled with lazy=false
2021-12-11 17:23:51,268 DEBUG Attempting to locate auto-apply AttributeConverter for property [com.peterphi.usermanager.db.entity.OAuthServiceEntity:enabled]
2021-12-11 17:23:51,268 DEBUG building SimpleValue for enabled
2021-12-11 17:23:51,269 DEBUG Building property enabled
2021-12-11 17:23:51,269 DEBUG Binding column: Ejb3Column{table=org.hibernate.mapping.Table(oauth_service), mappingColumn=client_endpoints, insertable=true, updatable=true, unique=false}
2021-12-11 17:23:51,269 DEBUG MetadataSourceProcessor property endpoints with lazy=false
2021-12-11 17:23:51,269 DEBUG Attempting to locate auto-apply AttributeConverter for property [com.peterphi.usermanager.db.entity.OAuthServiceEntity:endpoints]
2021-12-11 17:23:51,269 DEBUG building SimpleValue for endpoints
2021-12-11 17:23:51,269 DEBUG Building property endpoints
2021-12-11 17:23:51,269 DEBUG Binding column: Ejb3Column{table=org.hibernate.mapping.Table(oauth_service), mappingColumn=client_name, insertable=true, updatable=true, unique=false}
2021-12-11 17:23:51,269 DEBUG MetadataSourceProcessor property name with lazy=false
2021-12-11 17:23:51,269 DEBUG Attempting to locate auto-apply AttributeConverter for property [com.peterphi.usermanager.db.entity.OAuthServiceEntity:name]
2021-12-11 17:23:51,269 DEBUG building SimpleValue for name
2021-12-11 17:23:51,269 DEBUG Building property name
2021-12-11 17:23:51,269 DEBUG Binding column: Ejb3JoinColumn{logicalColumnName='owner_id', referencedColumn='', mappedBy=''}
2021-12-11 17:23:51,269 DEBUG Binding column: Ejb3Column{table=org.hibernate.mapping.Table(oauth_service), mappingColumn=owner, insertable=true, updatable=true, unique=false}
2021-12-11 17:23:51,269 DEBUG Building property owner
2021-12-11 17:23:51,269 DEBUG Binding column: Ejb3Column{table=org.hibernate.mapping.Table(oauth_service), mappingColumn=updated_ts, insertable=true, updatable=true, unique=false}
2021-12-11 17:23:51,269 DEBUG MetadataSourceProcessor property updated with lazy=false
2021-12-11 17:23:51,269 DEBUG Attempting to locate auto-apply AttributeConverter for property [com.peterphi.usermanager.db.entity.OAuthServiceEntity:updated]
2021-12-11 17:23:51,269 DEBUG building SimpleValue for updated
2021-12-11 17:23:51,269 DEBUG Building property updated
2021-12-11 17:23:51,270 DEBUG Starting fillSimpleValue for id
2021-12-11 17:23:51,270 DEBUG Starting fillSimpleValue for created
2021-12-11 17:23:51,270 DEBUG Starting fillSimpleValue for dateFormat
2021-12-11 17:23:51,270 DEBUG Starting fillSimpleValue for email
2021-12-11 17:23:51,270 DEBUG Starting fillSimpleValue for lastLogin
2021-12-11 17:23:51,270 DEBUG Starting fillSimpleValue for local
2021-12-11 17:23:51,270 DEBUG Starting fillSimpleValue for name
2021-12-11 17:23:51,270 DEBUG Starting fillSimpleValue for password
2021-12-11 17:23:51,270 DEBUG Starting fillSimpleValue for sessionReconnectKey
2021-12-11 17:23:51,270 DEBUG Starting fillSimpleValue for timeZone
2021-12-11 17:23:51,271 DEBUG Starting fillSimpleValue for id
2021-12-11 17:23:51,271 DEBUG Starting fillSimpleValue for caption
2021-12-11 17:23:51,271 DEBUG Starting fillSimpleValue for id
2021-12-11 17:23:51,271 DEBUG Starting fillSimpleValue for alive
2021-12-11 17:23:51,271 DEBUG Starting fillSimpleValue for authorisationCode
2021-12-11 17:23:51,271 DEBUG Starting fillSimpleValue for created
2021-12-11 17:23:51,271 DEBUG Starting fillSimpleValue for expires
2021-12-11 17:23:51,271 DEBUG Starting fillSimpleValue for initiator
2021-12-11 17:23:51,271 DEBUG Starting fillSimpleValue for token
2021-12-11 17:23:51,271 DEBUG Starting fillSimpleValue for updated
2021-12-11 17:23:51,271 DEBUG Starting fillSimpleValue for id
2021-12-11 17:23:51,271 DEBUG Starting fillSimpleValue for active
2021-12-11 17:23:51,271 DEBUG Starting fillSimpleValue for created
2021-12-11 17:23:51,271 DEBUG Starting fillSimpleValue for scope
2021-12-11 17:23:51,271 DEBUG Starting fillSimpleValue for updated
2021-12-11 17:23:51,271 DEBUG Starting fillSimpleValue for id
2021-12-11 17:23:51,271 DEBUG Starting fillSimpleValue for clientSecret
2021-12-11 17:23:51,271 DEBUG Starting fillSimpleValue for created
2021-12-11 17:23:51,271 DEBUG Starting fillSimpleValue for enabled
2021-12-11 17:23:51,271 DEBUG Starting fillSimpleValue for endpoints
2021-12-11 17:23:51,271 DEBUG Starting fillSimpleValue for name
2021-12-11 17:23:51,271 DEBUG Starting fillSimpleValue for updated
2021-12-11 17:23:51,274 DEBUG Forcing column [id] to be non-null as it is part of the primary key for table [user_account]
2021-12-11 17:23:51,274 DEBUG Forcing column [id] to be non-null as it is part of the primary key for table [role_definition]
2021-12-11 17:23:51,274 DEBUG Forcing column [id] to be non-null as it is part of the primary key for table [oauth_session]
2021-12-11 17:23:51,274 DEBUG Forcing column [id] to be non-null as it is part of the primary key for table [oauth_session_context]
2021-12-11 17:23:51,274 DEBUG Forcing column [id] to be non-null as it is part of the primary key for table [oauth_service]
2021-12-11 17:23:51,275 DEBUG Second pass for collection: com.peterphi.usermanager.db.entity.RoleEntity.members
2021-12-11 17:23:51,275 DEBUG Binding as ManyToMany: com.peterphi.usermanager.db.entity.RoleEntity.members
2021-12-11 17:23:51,277 DEBUG Mapped collection key: role_id, element: user_id
2021-12-11 17:23:51,278 DEBUG Second pass for collection: com.peterphi.usermanager.db.entity.UserEntity.roles
2021-12-11 17:23:51,278 DEBUG Binding as ManyToMany: com.peterphi.usermanager.db.entity.UserEntity.roles
2021-12-11 17:23:51,278 DEBUG Retrieving property com.peterphi.usermanager.db.entity.RoleEntity.members
2021-12-11 17:23:51,278 DEBUG Mapped collection key: user_id, element: role_id
2021-12-11 17:23:51,278 DEBUG Resolving reference to class: com.peterphi.usermanager.db.entity.UserEntity
2021-12-11 17:23:51,280 DEBUG Resolving reference to class: com.peterphi.usermanager.db.entity.OAuthSessionContextEntity
2021-12-11 17:23:51,280 DEBUG Resolving reference to class: com.peterphi.usermanager.db.entity.OAuthServiceEntity
2021-12-11 17:23:51,280 DEBUG Resolving reference to class: com.peterphi.usermanager.db.entity.UserEntity
2021-12-11 17:23:51,280 DEBUG Resolving reference to class: com.peterphi.usermanager.db.entity.UserEntity
2021-12-11 17:23:51,280 DEBUG Resolving reference to class: com.peterphi.usermanager.db.entity.RoleEntity
2021-12-11 17:23:51,282 DEBUG Resolving reference to class: com.peterphi.usermanager.db.entity.UserEntity
2021-12-11 17:23:51,282 DEBUG Resolving reference to class: com.peterphi.usermanager.db.entity.OAuthSessionContextEntity
2021-12-11 17:23:51,282 DEBUG Resolving reference to class: com.peterphi.usermanager.db.entity.OAuthServiceEntity
2021-12-11 17:23:51,282 DEBUG Resolving reference to class: com.peterphi.usermanager.db.entity.UserEntity
2021-12-11 17:23:51,282 DEBUG Resolving reference to class: com.peterphi.usermanager.db.entity.UserEntity
2021-12-11 17:23:51,282 DEBUG Resolving reference to class: com.peterphi.usermanager.db.entity.RoleEntity
2021-12-11 17:23:51,316 DEBUG Building session factory
2021-12-11 17:23:51,317 DEBUG SessionFactory name : null
2021-12-11 17:23:51,317 DEBUG Automatic flush during beforeCompletion(): enabled
2021-12-11 17:23:51,317 DEBUG Automatic session close at end of transaction: disabled
2021-12-11 17:23:51,317 DEBUG Statistics: disabled
2021-12-11 17:23:51,317 DEBUG Deleted entity synthetic identifier rollback: disabled
2021-12-11 17:23:51,317 DEBUG Default entity-mode: pojo
2021-12-11 17:23:51,317 DEBUG Check Nullability in Core (should be disabled when Bean Validation is on): enabled
2021-12-11 17:23:51,317 DEBUG Allow initialization of lazy state outside session : disabled
2021-12-11 17:23:51,317 DEBUG Using BatchFetchStyle : LEGACY
2021-12-11 17:23:51,317 DEBUG Default batch fetch size: -1
2021-12-11 17:23:51,317 DEBUG Maximum outer join fetch depth: null
2021-12-11 17:23:51,317 DEBUG Default null ordering: NONE
2021-12-11 17:23:51,317 DEBUG Order SQL updates by primary key: disabled
2021-12-11 17:23:51,317 DEBUG Order SQL inserts for batching: disabled
2021-12-11 17:23:51,317 DEBUG multi-tenancy strategy : NONE
2021-12-11 17:23:51,317 DEBUG JTA Track by Thread: enabled
2021-12-11 17:23:51,317 DEBUG Query language substitutions: {}
2021-12-11 17:23:51,317 DEBUG JPA query language strict compliance: disabled
2021-12-11 17:23:51,317 DEBUG Named query checking : enabled
2021-12-11 17:23:51,317 DEBUG Second-level cache: enabled
2021-12-11 17:23:51,317 DEBUG Second-level query cache: disabled
2021-12-11 17:23:51,317 DEBUG Second-level query cache factory: org.hibernate.cache.internal.StandardQueryCacheFactory@7f973a14
2021-12-11 17:23:51,317 DEBUG Second-level cache region prefix: null
2021-12-11 17:23:51,317 DEBUG Optimize second-level cache for minimal puts: disabled
2021-12-11 17:23:51,317 DEBUG Structured second-level cache entries: disabled
2021-12-11 17:23:51,317 DEBUG Second-level cache direct-reference entries: disabled
2021-12-11 17:23:51,317 DEBUG Automatic eviction of collection cache: disabled
2021-12-11 17:23:51,317 DEBUG JDBC batch size: 15
2021-12-11 17:23:51,317 DEBUG JDBC batch updates for versioned data: enabled
2021-12-11 17:23:51,317 DEBUG Scrollable result sets: enabled
2021-12-11 17:23:51,317 DEBUG Wrap result sets: disabled
2021-12-11 17:23:51,317 DEBUG JDBC3 getGeneratedKeys(): enabled
2021-12-11 17:23:51,317 DEBUG JDBC result set fetch size: null
2021-12-11 17:23:51,317 DEBUG Connection release mode: AFTER_TRANSACTION
2021-12-11 17:23:51,317 DEBUG Generate SQL with comments: disabled
2021-12-11 17:23:51,461 DEBUG Session factory constructed with filter configurations : {}
2021-12-11 17:23:51,461 DEBUG Instantiating session factory with properties: {liquibase.changelog=/liquibase/changelog.xml, awt.toolkit=sun.awt.X11.XToolkit, file.encoding.pkg=sun.io, java.specification.version=1.8, sun.cpu.isalist=, sun.jnu.encoding=UTF-8, hibernate.dialect=org.hibernate.dialect.HSQLDialect, java.class.path=/home/travis/build/passed/petergeneric/stdlib/user-manager/service/target/test-classes:/home/travis/build/passed/petergeneric/stdlib/user-manager/service/target/classes:/home/travis/build/passed/petergeneric/stdlib/user-manager/api/target/classes:/home/travis/build/passed/petergeneric/stdlib/stdlib/target/classes:/home/travis/.m2/passed/commons-io/commons-io/2.4/commons-io-2.4.jar:/home/travis/.m2/passed/commons-lang/commons-lang/2.6/commons-lang-2.6.jar:/home/travis/.m2/passed/org/eclipse/persistence/org.eclipse.persistence.moxy/2.7.0/org.eclipse.persistence.moxy-2.7.0.jar:/home/travis/.m2/passed/org/eclipse/persistence/org.eclipse.persistence.core/2.7.0/org.eclipse.persistence.core-2.7.0.jar:/home/travis/.m2/passed/org/eclipse/persistence/org.eclipse.persistence.asm/2.7.0/org.eclipse.persistence.asm-2.7.0.jar:/home/travis/.m2/passed/javax/validation/validation-api/1.1.0.Final/validation-api-1.1.0.Final.jar:/home/travis/.m2/passed/org/glassfish/javax.json/1.0.4/javax.json-1.0.4.jar:/home/travis/build/passed/petergeneric/stdlib/guice/common/target/classes:/home/travis/.m2/passed/ognl/ognl/3.1.10/ognl-3.1.10.jar:/home/travis/.m2/passed/org/apache/httpcomponents/httpclient/4.5.3/httpclient-4.5.3.jar:/home/travis/.m2/passed/org/apache/httpcomponents/httpcore/4.4.6/httpcore-4.4.6.jar:/home/travis/.m2/passed/commons-codec/commons-codec/1.9/commons-codec-1.9.jar:/home/travis/.m2/passed/org/jboss/resteasy/resteasy-client/3.1.4.Final/resteasy-client-3.1.4.Final.jar:/home/travis/.m2/passed/io/dropwizard/metrics/metrics-core/3.2.3/metrics-core-3.2.3.jar:/home/travis/.m2/passed/io/dropwizard/metrics/metrics-healthchecks/3.2.3/metrics-healthchecks-3.2.3.jar:/home/travis/.m2/passed/io/dropwizard/metrics/metrics-jvm/3.2.3/metrics-jvm-3.2.3.jar:/home/travis/.m2/passed/io/dropwizard/metrics/metrics-log4j/3.2.3/metrics-log4j-3.2.3.jar:/home/travis/.m2/passed/org/jboss/resteasy/resteasy-jaxrs/3.1.4.Final/resteasy-jaxrs-3.1.4.Final.jar:/home/travis/.m2/passed/org/jboss/spec/javax/ws/rs/jboss-jaxrs-api_2.0_spec/1.0.1.Beta1/jboss-jaxrs-api_2.0_spec-1.0.1.Beta1.jar:/home/travis/.m2/passed/org/jboss/resteasy/resteasy-jaxrs-services/3.1.4.Final/resteasy-jaxrs-services-3.1.4.Final.jar:/home/travis/.m2/passed/org/jboss/spec/javax/annotation/jboss-annotations-api_1.2_spec/1.0.0.Final/jboss-annotations-api_1.2_spec-1.0.0.Final.jar:/home/travis/.m2/passed/javax/activation/activation/1.1.1/activation-1.1.1.jar:/home/travis/.m2/passed/net/jcip/jcip-annotations/1.0/jcip-annotations-1.0.jar:/home/travis/build/passed/petergeneric/stdlib/guice/webapp/target/classes:/home/travis/.m2/passed/org/javassist/javassist/3.19.0-GA/javassist-3.19.0-GA.jar:/home/travis/.m2/passed/org/bitbucket/b_c/jose4j/0.5.2/jose4j-0.5.2.jar:/home/travis/.m2/passed/org/thymeleaf/thymeleaf/2.1.4.RELEASE/thymeleaf-2.1.4.RELEASE.jar:/home/travis/.m2/passed/org/unbescape/unbescape/1.1.0.RELEASE/unbescape-1.1.0.RELEASE.jar:/home/travis/.m2/passed/org/jboss/resteasy/resteasy-jaxb-provider/3.1.4.Final/resteasy-jaxb-provider-3.1.4.Final.jar:/home/travis/.m2/passed/org/jboss/logging/jboss-logging/3.3.0.Final/jboss-logging-3.3.0.Final.jar:/home/travis/.m2/passed/org/jboss/resteasy/resteasy-jettison-provider/3.1.4.Final/resteasy-jettison-provider-3.1.4.Final.jar:/home/travis/.m2/passed/org/codehaus/jettison/jettison/1.3.8/jettison-1.3.8.jar:/home/travis/.m2/passed/commons-discovery/commons-discovery/0.5/commons-discovery-0.5.jar:/home/travis/.m2/passed/commons-logging/commons-logging/1.2/commons-logging-1.2.jar:/home/travis/.m2/passed/xml-apis/xml-apis/1.0.b2/xml-apis-1.0.b2.jar:/home/travis/.m2/passed/org/sonatype/sisu/sisu-guice/3.2.6/sisu-guice-3.2.6.jar:/home/travis/.m2/passed/javax/inject/javax.inject/1/javax.inject-1.jar:/home/travis/.m2/passed/aopalliance/aopalliance/1.0/aopalliance-1.0.jar:/home/travis/.m2/passed/com/google/guava/guava/16.0.1/guava-16.0.1.jar:/home/travis/.m2/passed/org/sonatype/sisu/inject/guice-multibindings/3.2.6/guice-multibindings-3.2.6.jar:/home/travis/.m2/passed/org/apache/xbean/xbean-finder/4.4/xbean-finder-4.4.jar:/home/travis/.m2/passed/org/apache/xbean/xbean-bundleutils/4.4/xbean-bundleutils-4.4.jar:/home/travis/.m2/passed/org/apache/xbean/xbean-asm-util/4.4/xbean-asm-util-4.4.jar:/home/travis/.m2/passed/org/ow2/asm/asm-all/5.0.4/asm-all-5.0.4.jar:/home/travis/build/passed/petergeneric/stdlib/guice/hibernate/target/classes:/home/travis/.m2/passed/org/hibernate/hibernate-core/5.2.11.Final/hibernate-core-5.2.11.Final.jar:/home/travis/.m2/passed/org/hibernate/javax/persistence/hibernate-jpa-2.1-api/1.0.0.Final/hibernate-jpa-2.1-api-1.0.0.Final.jar:/home/travis/.m2/passed/antlr/antlr/2.7.7/antlr-2.7.7.jar:/home/travis/.m2/passed/org/jboss/spec/javax/transaction/jboss-transaction-api_1.2_spec/1.0.1.Final/jboss-transaction-api_1.2_spec-1.0.1.Final.jar:/home/travis/.m2/passed/org/jboss/jandex/2.0.3.Final/jandex-2.0.3.Final.jar:/home/travis/.m2/passed/com/fasterxml/classmate/1.3.0/classmate-1.3.0.jar:/home/travis/.m2/passed/dom4j/dom4j/1.6.1/dom4j-1.6.1.jar:/home/travis/.m2/passed/org/hibernate/common/hibernate-commons-annotations/5.0.1.Final/hibernate-commons-annotations-5.0.1.Final.jar:/home/travis/build/passed/petergeneric/stdlib/guice/liquibase/target/classes:/home/travis/.m2/passed/org/liquibase/liquibase-core/3.5.3/liquibase-core-3.5.3.jar:/home/travis/.m2/passed/org/yaml/snakeyaml/1.17/snakeyaml-1.17.jar:/home/travis/build/passed/petergeneric/stdlib/guice/metrics/target/classes:/home/travis/.m2/passed/io/dropwizard/metrics/metrics-json/3.2.3/metrics-json-3.2.3.jar:/home/travis/.m2/passed/com/fasterxml/jackson/core/jackson-databind/2.6.6/jackson-databind-2.6.6.jar:/home/travis/.m2/passed/com/fasterxml/jackson/core/jackson-annotations/2.6.0/jackson-annotations-2.6.0.jar:/home/travis/.m2/passed/com/fasterxml/jackson/core/jackson-core/2.6.6/jackson-core-2.6.6.jar:/home/travis/.m2/passed/log4j/log4j/1.2.17/log4j-1.2.17.jar:/home/travis/.m2/passed/javax/servlet/servlet-api/2.5/servlet-api-2.5.jar:/home/travis/.m2/passed/joda-time/joda-time/2.7/joda-time-2.7.jar:/home/travis/.m2/passed/junit/junit/4.12/junit-4.12.jar:/home/travis/.m2/passed/org/hamcrest/hamcrest-core/1.3/hamcrest-core-1.3.jar:/home/travis/build/passed/petergeneric/stdlib/guice/hibernate-testing/target/classes:/home/travis/build/passed/petergeneric/stdlib/guice/testing/target/classes:/home/travis/.m2/passed/org/mockito/mockito-core/1.10.19/mockito-core-1.10.19.jar:/home/travis/.m2/passed/org/objenesis/objenesis/2.1/objenesis-2.1.jar:/home/travis/.m2/passed/org/dbunit/dbunit/2.5.1/dbunit-2.5.1.jar:/home/travis/.m2/passed/commons-collections/commons-collections/3.2.1/commons-collections-3.2.1.jar:/home/travis/.m2/passed/org/apache/poi/poi-ooxml/3.11/poi-ooxml-3.11.jar:/home/travis/.m2/passed/org/apache/poi/poi/3.11/poi-3.11.jar:/home/travis/.m2/passed/org/apache/poi/poi-ooxml-schemas/3.11/poi-ooxml-schemas-3.11.jar:/home/travis/.m2/passed/org/apache/xmlbeans/xmlbeans/2.6.0/xmlbeans-2.6.0.jar:/home/travis/.m2/passed/stax/stax-api/1.0.1/stax-api-1.0.1.jar:/home/travis/.m2/passed/org/hsqldb/hsqldb/2.4.0/hsqldb-2.4.0.jar:/home/travis/.m2/passed/org/slf4j/slf4j-api/1.7.7/slf4j-api-1.7.7.jar:/home/travis/.m2/passed/org/slf4j/slf4j-jdk14/1.7.7/slf4j-jdk14-1.7.7.jar:, java.vm.vendor=Oracle Corporation, sun.arch.data.model=64, java.vendor.url=http://java.oracle.com/, user.timezone=UTC, os.name=Linux, java.vm.specification.version=1.8, user.country=US, sun.java.launcher=SUN_STANDARD, sun.boot.library.path=/usr/lib/jvm/java-8-oracle/jre/lib/amd64, sun.java.command=/home/travis/build/passed/petergeneric/stdlib/user-manager/service/target/surefire/surefirebooter5302467952035037937.jar /home/travis/build/passed/petergeneric/stdlib/user-manager/service/target/surefire/surefire5718224278043372240tmp /home/travis/build/passed/petergeneric/stdlib/user-manager/service/target/surefire/surefire_128739736326803440926tmp, surefire.test.class.path=/home/travis/build/passed/petergeneric/stdlib/user-manager/service/target/test-classes:/home/travis/build/passed/petergeneric/stdlib/user-manager/service/target/classes:/home/travis/build/passed/petergeneric/stdlib/user-manager/api/target/classes:/home/travis/build/passed/petergeneric/stdlib/stdlib/target/classes:/home/travis/.m2/passed/commons-io/commons-io/2.4/commons-io-2.4.jar:/home/travis/.m2/passed/commons-lang/commons-lang/2.6/commons-lang-2.6.jar:/home/travis/.m2/passed/org/eclipse/persistence/org.eclipse.persistence.moxy/2.7.0/org.eclipse.persistence.moxy-2.7.0.jar:/home/travis/.m2/passed/org/eclipse/persistence/org.eclipse.persistence.core/2.7.0/org.eclipse.persistence.core-2.7.0.jar:/home/travis/.m2/passed/org/eclipse/persistence/org.eclipse.persistence.asm/2.7.0/org.eclipse.persistence.asm-2.7.0.jar:/home/travis/.m2/passed/javax/validation/validation-api/1.1.0.Final/validation-api-1.1.0.Final.jar:/home/travis/.m2/passed/org/glassfish/javax.json/1.0.4/javax.json-1.0.4.jar:/home/travis/build/passed/petergeneric/stdlib/guice/common/target/classes:/home/travis/.m2/passed/ognl/ognl/3.1.10/ognl-3.1.10.jar:/home/travis/.m2/passed/org/apache/httpcomponents/httpclient/4.5.3/httpclient-4.5.3.jar:/home/travis/.m2/passed/org/apache/httpcomponents/httpcore/4.4.6/httpcore-4.4.6.jar:/home/travis/.m2/passed/commons-codec/commons-codec/1.9/commons-codec-1.9.jar:/home/travis/.m2/passed/org/jboss/resteasy/resteasy-client/3.1.4.Final/resteasy-client-3.1.4.Final.jar:/home/travis/.m2/passed/io/dropwizard/metrics/metrics-core/3.2.3/metrics-core-3.2.3.jar:/home/travis/.m2/passed/io/dropwizard/metrics/metrics-healthchecks/3.2.3/metrics-healthchecks-3.2.3.jar:/home/travis/.m2/passed/io/dropwizard/metrics/metrics-jvm/3.2.3/metrics-jvm-3.2.3.jar:/home/travis/.m2/passed/io/dropwizard/metrics/metrics-log4j/3.2.3/metrics-log4j-3.2.3.jar:/home/travis/.m2/passed/org/jboss/resteasy/resteasy-jaxrs/3.1.4.Final/resteasy-jaxrs-3.1.4.Final.jar:/home/travis/.m2/passed/org/jboss/spec/javax/ws/rs/jboss-jaxrs-api_2.0_spec/1.0.1.Beta1/jboss-jaxrs-api_2.0_spec-1.0.1.Beta1.jar:/home/travis/.m2/passed/org/jboss/resteasy/resteasy-jaxrs-services/3.1.4.Final/resteasy-jaxrs-services-3.1.4.Final.jar:/home/travis/.m2/passed/org/jboss/spec/javax/annotation/jboss-annotations-api_1.2_spec/1.0.0.Final/jboss-annotations-api_1.2_spec-1.0.0.Final.jar:/home/travis/.m2/passed/javax/activation/activation/1.1.1/activation-1.1.1.jar:/home/travis/.m2/passed/net/jcip/jcip-annotations/1.0/jcip-annotations-1.0.jar:/home/travis/build/passed/petergeneric/stdlib/guice/webapp/target/classes:/home/travis/.m2/passed/org/javassist/javassist/3.19.0-GA/javassist-3.19.0-GA.jar:/home/travis/.m2/passed/org/bitbucket/b_c/jose4j/0.5.2/jose4j-0.5.2.jar:/home/travis/.m2/passed/org/thymeleaf/thymeleaf/2.1.4.RELEASE/thymeleaf-2.1.4.RELEASE.jar:/home/travis/.m2/passed/org/unbescape/unbescape/1.1.0.RELEASE/unbescape-1.1.0.RELEASE.jar:/home/travis/.m2/passed/org/jboss/resteasy/resteasy-jaxb-provider/3.1.4.Final/resteasy-jaxb-provider-3.1.4.Final.jar:/home/travis/.m2/passed/org/jboss/logging/jboss-logging/3.3.0.Final/jboss-logging-3.3.0.Final.jar:/home/travis/.m2/passed/org/jboss/resteasy/resteasy-jettison-provider/3.1.4.Final/resteasy-jettison-provider-3.1.4.Final.jar:/home/travis/.m2/passed/org/codehaus/jettison/jettison/1.3.8/jettison-1.3.8.jar:/home/travis/.m2/passed/commons-discovery/commons-discovery/0.5/commons-discovery-0.5.jar:/home/travis/.m2/passed/commons-logging/commons-logging/1.2/commons-logging-1.2.jar:/home/travis/.m2/passed/xml-apis/xml-apis/1.0.b2/xml-apis-1.0.b2.jar:/home/travis/.m2/passed/org/sonatype/sisu/sisu-guice/3.2.6/sisu-guice-3.2.6.jar:/home/travis/.m2/passed/javax/inject/javax.inject/1/javax.inject-1.jar:/home/travis/.m2/passed/aopalliance/aopalliance/1.0/aopalliance-1.0.jar:/home/travis/.m2/passed/com/google/guava/guava/16.0.1/guava-16.0.1.jar:/home/travis/.m2/passed/org/sonatype/sisu/inject/guice-multibindings/3.2.6/guice-multibindings-3.2.6.jar:/home/travis/.m2/passed/org/apache/xbean/xbean-finder/4.4/xbean-finder-4.4.jar:/home/travis/.m2/passed/org/apache/xbean/xbean-bundleutils/4.4/xbean-bundleutils-4.4.jar:/home/travis/.m2/passed/org/apache/xbean/xbean-asm-util/4.4/xbean-asm-util-4.4.jar:/home/travis/.m2/passed/org/ow2/asm/asm-all/5.0.4/asm-all-5.0.4.jar:/home/travis/build/passed/petergeneric/stdlib/guice/hibernate/target/classes:/home/travis/.m2/passed/org/hibernate/hibernate-core/5.2.11.Final/hibernate-core-5.2.11.Final.jar:/home/travis/.m2/passed/org/hibernate/javax/persistence/hibernate-jpa-2.1-api/1.0.0.Final/hibernate-jpa-2.1-api-1.0.0.Final.jar:/home/travis/.m2/passed/antlr/antlr/2.7.7/antlr-2.7.7.jar:/home/travis/.m2/passed/org/jboss/spec/javax/transaction/jboss-transaction-api_1.2_spec/1.0.1.Final/jboss-transaction-api_1.2_spec-1.0.1.Final.jar:/home/travis/.m2/passed/org/jboss/jandex/2.0.3.Final/jandex-2.0.3.Final.jar:/home/travis/.m2/passed/com/fasterxml/classmate/1.3.0/classmate-1.3.0.jar:/home/travis/.m2/passed/dom4j/dom4j/1.6.1/dom4j-1.6.1.jar:/home/travis/.m2/passed/org/hibernate/common/hibernate-commons-annotations/5.0.1.Final/hibernate-commons-annotations-5.0.1.Final.jar:/home/travis/build/passed/petergeneric/stdlib/guice/liquibase/target/classes:/home/travis/.m2/passed/org/liquibase/liquibase-core/3.5.3/liquibase-core-3.5.3.jar:/home/travis/.m2/passed/org/yaml/snakeyaml/1.17/snakeyaml-1.17.jar:/home/travis/build/passed/petergeneric/stdlib/guice/metrics/target/classes:/home/travis/.m2/passed/io/dropwizard/metrics/metrics-json/3.2.3/metrics-json-3.2.3.jar:/home/travis/.m2/passed/com/fasterxml/jackson/core/jackson-databind/2.6.6/jackson-databind-2.6.6.jar:/home/travis/.m2/passed/com/fasterxml/jackson/core/jackson-annotations/2.6.0/jackson-annotations-2.6.0.jar:/home/travis/.m2/passed/com/fasterxml/jackson/core/jackson-core/2.6.6/jackson-core-2.6.6.jar:/home/travis/.m2/passed/log4j/log4j/1.2.17/log4j-1.2.17.jar:/home/travis/.m2/passed/javax/servlet/servlet-api/2.5/servlet-api-2.5.jar:/home/travis/.m2/passed/joda-time/joda-time/2.7/joda-time-2.7.jar:/home/travis/.m2/passed/junit/junit/4.12/junit-4.12.jar:/home/travis/.m2/passed/org/hamcrest/hamcrest-core/1.3/hamcrest-core-1.3.jar:/home/travis/build/passed/petergeneric/stdlib/guice/hibernate-testing/target/classes:/home/travis/build/passed/petergeneric/stdlib/guice/testing/target/classes:/home/travis/.m2/passed/org/mockito/mockito-core/1.10.19/mockito-core-1.10.19.jar:/home/travis/.m2/passed/org/objenesis/objenesis/2.1/objenesis-2.1.jar:/home/travis/.m2/passed/org/dbunit/dbunit/2.5.1/dbunit-2.5.1.jar:/home/travis/.m2/passed/commons-collections/commons-collections/3.2.1/commons-collections-3.2.1.jar:/home/travis/.m2/passed/org/apache/poi/poi-ooxml/3.11/poi-ooxml-3.11.jar:/home/travis/.m2/passed/org/apache/poi/poi/3.11/poi-3.11.jar:/home/travis/.m2/passed/org/apache/poi/poi-ooxml-schemas/3.11/poi-ooxml-schemas-3.11.jar:/home/travis/.m2/passed/org/apache/xmlbeans/xmlbeans/2.6.0/xmlbeans-2.6.0.jar:/home/travis/.m2/passed/stax/stax-api/1.0.1/stax-api-1.0.1.jar:/home/travis/.m2/passed/org/hsqldb/hsqldb/2.4.0/hsqldb-2.4.0.jar:/home/travis/.m2/passed/org/slf4j/slf4j-api/1.7.7/slf4j-api-1.7.7.jar:/home/travis/.m2/passed/org/slf4j/slf4j-jdk14/1.7.7/slf4j-jdk14-1.7.7.jar:, sun.cpu.endian=little, user.home=/home/travis, user.language=en, java.specification.vendor=Oracle Corporation, java.home=/usr/lib/jvm/java-8-oracle/jre, basedir=/home/travis/build/passed/petergeneric/stdlib/user-manager/service, file.separator=/, line.separator=
, java.vm.specification.vendor=Oracle Corporation, java.specification.name=Java Platform API Specification, java.awt.graphicsenv=sun.awt.X11GraphicsEnvironment, surefire.real.class.path=/home/travis/build/passed/petergeneric/stdlib/user-manager/service/target/surefire/surefirebooter5302467952035037937.jar, sun.boot.class.path=/usr/lib/jvm/java-8-oracle/jre/lib/resources.jar:/usr/lib/jvm/java-8-oracle/jre/lib/rt.jar:/usr/lib/jvm/java-8-oracle/jre/lib/sunrsasign.jar:/usr/lib/jvm/java-8-oracle/jre/lib/jsse.jar:/usr/lib/jvm/java-8-oracle/jre/lib/jce.jar:/usr/lib/jvm/java-8-oracle/jre/lib/charsets.jar:/usr/lib/jvm/java-8-oracle/jre/lib/jfr.jar:/usr/lib/jvm/java-8-oracle/jre/classes, sun.management.compiler=HotSpot 64-Bit Tiered Compilers, java.runtime.version=1.8.0_144-b01, user.name=travis, path.separator=:, hibernate.connection.username=sa, os.version=4.15.0-109-generic, java.endorsed.dirs=/usr/lib/jvm/java-8-oracle/jre/lib/endorsed, hibernate.properties=embedded, java.runtime.name=Java(TM) SE Runtime Environment, hibernate.connection.url=jdbc:hsqldb:mem:testdb, file.encoding=UTF-8, java.vm.name=Java HotSpot(TM) 64-Bit Server VM, hibernate.show_sql=false, hibernate.allow-hbm2ddl-create=true, hibernate.current_session_context_class=thread, localRepository=/home/travis/.m2/passed, hibernate.connection.driver_class=org.hsqldb.jdbcDriver, java.vendor.url.bug=http://bugreport.sun.com/bugreport/, java.io.tmpdir=/tmp, liquibase.action=UPDATE, java.version=1.8.0_144, user.dir=/home/travis/build/passed/petergeneric/stdlib/user-manager/service, hibernate.database-allows-order-by-without-select=false, os.arch=amd64, java.vm.specification.name=Java Virtual Machine Specification, hibernate.connection.password=****, java.awt.printerjob=sun.print.PSPrinterJob, sun.os.patch.level=unknown, hibernate.boot.CfgXmlAccessService.key=org.hibernate.boot.cfgxml.spi.LoadedConfig@2c7db926, java.library.path=/usr/java/packages/lib/amd64:/usr/lib64:/lib64:/lib:/usr/lib, java.vm.info=mixed mode, java.vendor=Oracle Corporation, java.vm.version=25.144-b01, hibernate.connection.readOnly=false, hibernate.bytecode.use_reflection_optimizer=false, https.protocols=TLSv1.2, java.ext.dirs=/usr/lib/jvm/java-8-oracle/jre/lib/ext:/usr/java/packages/lib/ext, sun.io.unicode.encoding=UnicodeLittle, java.class.version=52.0}
2021-12-11 17:23:51,483 DEBUG Unable to acquire Bean Validation ValidatorFactory, skipping activation
2021-12-11 17:23:51,483 DEBUG Skipping JACC integration as it was not enabled
2021-12-11 17:23:51,488 DEBUG Instantiated session factory
2021-12-11 17:23:51,530 DEBUG Not known whether passed class name [com.peterphi.usermanager.db.entity.UserEntity] is safe
2021-12-11 17:23:51,530 DEBUG No temp ClassLoader provided; using live ClassLoader for loading potentially unsafe class : com.peterphi.usermanager.db.entity.UserEntity
2021-12-11 17:23:51,570 DEBUG Not known whether passed class name [com.peterphi.usermanager.db.entity.UserEntity] is safe
2021-12-11 17:23:51,570 DEBUG No temp ClassLoader provided; using live ClassLoader for loading potentially unsafe class : com.peterphi.usermanager.db.entity.UserEntity
2021-12-11 17:23:51,625 DEBUG Not known whether passed class name [com.peterphi.usermanager.db.entity.OAuthSessionContextEntity] is safe
2021-12-11 17:23:51,625 DEBUG No temp ClassLoader provided; using live ClassLoader for loading potentially unsafe class : com.peterphi.usermanager.db.entity.OAuthSessionContextEntity
2021-12-11 17:23:51,627 DEBUG Not known whether passed class name [com.peterphi.usermanager.db.entity.OAuthSessionContextEntity] is safe
2021-12-11 17:23:51,627 DEBUG No temp ClassLoader provided; using live ClassLoader for loading potentially unsafe class : com.peterphi.usermanager.db.entity.OAuthSessionContextEntity
2021-12-11 17:23:51,632 DEBUG Not known whether passed class name [com.peterphi.usermanager.db.entity.OAuthServiceEntity] is safe
2021-12-11 17:23:51,632 DEBUG No temp ClassLoader provided; using live ClassLoader for loading potentially unsafe class : com.peterphi.usermanager.db.entity.OAuthServiceEntity
2021-12-11 17:23:51,632 DEBUG Not known whether passed class name [com.peterphi.usermanager.db.entity.OAuthServiceEntity] is safe
2021-12-11 17:23:51,632 DEBUG No temp ClassLoader provided; using live ClassLoader for loading potentially unsafe class : com.peterphi.usermanager.db.entity.OAuthServiceEntity
2021-12-11 17:23:51,637 DEBUG Not known whether passed class name [com.peterphi.usermanager.db.entity.RoleEntity] is safe
2021-12-11 17:23:51,637 DEBUG No temp ClassLoader provided; using live ClassLoader for loading potentially unsafe class : com.peterphi.usermanager.db.entity.RoleEntity
2021-12-11 17:23:51,637 DEBUG Not known whether passed class name [com.peterphi.usermanager.db.entity.RoleEntity] is safe
2021-12-11 17:23:51,637 DEBUG No temp ClassLoader provided; using live ClassLoader for loading potentially unsafe class : com.peterphi.usermanager.db.entity.RoleEntity
2021-12-11 17:23:51,640 DEBUG Not known whether passed class name [com.peterphi.usermanager.db.entity.OAuthSessionEntity] is safe
2021-12-11 17:23:51,640 DEBUG No temp ClassLoader provided; using live ClassLoader for loading potentially unsafe class : com.peterphi.usermanager.db.entity.OAuthSessionEntity
2021-12-11 17:23:51,640 DEBUG Not known whether passed class name [com.peterphi.usermanager.db.entity.OAuthSessionEntity] is safe
2021-12-11 17:23:51,640 DEBUG No temp ClassLoader provided; using live ClassLoader for loading potentially unsafe class : com.peterphi.usermanager.db.entity.OAuthSessionEntity
2021-12-11 17:23:51,654 DEBUG Static SQL for collection: com.peterphi.usermanager.db.entity.UserEntity.roles
2021-12-11 17:23:51,654 DEBUG  Row insert: insert into user_has_role (user_id, role_id) values (?, ?)
2021-12-11 17:23:51,654 DEBUG  Row update: update user_has_role set role_id=? where user_id=? and role_id=?
2021-12-11 17:23:51,654 DEBUG  Row delete: delete from user_has_role where user_id=? and role_id=?
2021-12-11 17:23:51,654 DEBUG  One-shot delete: delete from user_has_role where user_id=?
2021-12-11 17:23:51,654 DEBUG Static SQL for collection: com.peterphi.usermanager.db.entity.RoleEntity.members
2021-12-11 17:23:51,654 DEBUG  Row insert: insert into user_has_role (role_id, user_id) values (?, ?)
2021-12-11 17:23:51,654 DEBUG  Row update: update user_has_role set user_id=? where role_id=? and user_id=?
2021-12-11 17:23:51,654 DEBUG  Row delete: delete from user_has_role where role_id=? and user_id=?
2021-12-11 17:23:51,654 DEBUG  One-shot delete: delete from user_has_role where role_id=?
2021-12-11 17:23:51,690 DEBUG Static SQL for entity: com.peterphi.usermanager.db.entity.UserEntity
2021-12-11 17:23:51,690 DEBUG  Version select: select id from user_account where id =?
2021-12-11 17:23:51,691 DEBUG  Snapshot select: select userentity_.id, userentity_.created_ts as created_2_4_, userentity_.date_format as date_for3_4_, userentity_.email as email4_4_, userentity_.last_login_ts as last_log5_4_, userentity_.is_local as is_local6_4_, userentity_.name as name7_4_, userentity_.password as password8_4_, userentity_.local_session_id as local_se9_4_, userentity_.date_timezone as date_ti10_4_ from user_account userentity_ where userentity_.id=?
2021-12-11 17:23:51,691 DEBUG  Insert 0: insert into user_account (created_ts, date_format, email, last_login_ts, is_local, name, password, local_session_id, date_timezone, id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2021-12-11 17:23:51,691 DEBUG  Update 0: update user_account set created_ts=?, date_format=?, email=?, last_login_ts=?, is_local=?, name=?, password=?, local_session_id=?, date_timezone=? where id=?
2021-12-11 17:23:51,691 DEBUG  Delete 0: delete from user_account where id=?
2021-12-11 17:23:51,711 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@4dcbae55]
2021-12-11 17:23:51,712 DEBUG Visiting attribute path : created
2021-12-11 17:23:51,712 DEBUG Visiting attribute path : dateFormat
2021-12-11 17:23:51,712 DEBUG Visiting attribute path : email
2021-12-11 17:23:51,712 DEBUG Visiting attribute path : lastLogin
2021-12-11 17:23:51,712 DEBUG Visiting attribute path : local
2021-12-11 17:23:51,712 DEBUG Visiting attribute path : name
2021-12-11 17:23:51,712 DEBUG Visiting attribute path : password
2021-12-11 17:23:51,712 DEBUG Visiting attribute path : roles
2021-12-11 17:23:51,716 DEBUG Adding QuerySpace : uid = <gen:1> -> org.hibernate.loader.plan.build.internal.spaces.CollectionQuerySpaceImpl@72543547]
2021-12-11 17:23:51,717 DEBUG Adding QuerySpace : uid = <gen:2> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@2173a742]
2021-12-11 17:23:51,718 DEBUG Visiting attribute path : sessionReconnectKey
2021-12-11 17:23:51,718 DEBUG Visiting attribute path : timeZone
2021-12-11 17:23:51,718 DEBUG Building LoadPlan...
2021-12-11 17:23:51,729 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:51,733 DEBUG LoadPlan(entity=com.peterphi.usermanager.db.entity.UserEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.usermanager.db.entity.UserEntity, querySpaceUid=<gen:0>, path=com.peterphi.usermanager.db.entity.UserEntity)
          - CollectionAttributeFetchImpl(collection=com.peterphi.usermanager.db.entity.UserEntity.roles, querySpaceUid=<gen:1>, path=com.peterphi.usermanager.db.entity.UserEntity.roles)
             - (collection element) CollectionFetchableElementEntityGraph(entity=com.peterphi.usermanager.db.entity.RoleEntity, querySpaceUid=<gen:2>, path=com.peterphi.usermanager.db.entity.UserEntity.roles.<elements>)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.usermanager.db.entity.UserEntity)
          - SQL table alias mapping - userentity0_
          - alias suffix - 0_
          - suffixed key columns - {id1_4_0_}

2021-12-11 17:23:51,735 DEBUG Static select for entity com.peterphi.usermanager.db.entity.UserEntity [NONE]: select userentity0_.id as id1_4_0_, userentity0_.created_ts as created_2_4_0_, userentity0_.date_format as date_for3_4_0_, userentity0_.email as email4_4_0_, userentity0_.last_login_ts as last_log5_4_0_, userentity0_.is_local as is_local6_4_0_, userentity0_.name as name7_4_0_, userentity0_.password as password8_4_0_, userentity0_.local_session_id as local_se9_4_0_, userentity0_.date_timezone as date_ti10_4_0_ from user_account userentity0_ where userentity0_.id=?
2021-12-11 17:23:51,735 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@21ae657b]
2021-12-11 17:23:51,735 DEBUG Visiting attribute path : created
2021-12-11 17:23:51,735 DEBUG Visiting attribute path : dateFormat
2021-12-11 17:23:51,735 DEBUG Visiting attribute path : email
2021-12-11 17:23:51,735 DEBUG Visiting attribute path : lastLogin
2021-12-11 17:23:51,735 DEBUG Visiting attribute path : local
2021-12-11 17:23:51,735 DEBUG Visiting attribute path : name
2021-12-11 17:23:51,735 DEBUG Visiting attribute path : password
2021-12-11 17:23:51,735 DEBUG Visiting attribute path : roles
2021-12-11 17:23:51,735 DEBUG Adding QuerySpace : uid = <gen:1> -> org.hibernate.loader.plan.build.internal.spaces.CollectionQuerySpaceImpl@576b7c74]
2021-12-11 17:23:51,735 DEBUG Adding QuerySpace : uid = <gen:2> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@21de60a7]
2021-12-11 17:23:51,735 DEBUG Visiting attribute path : sessionReconnectKey
2021-12-11 17:23:51,735 DEBUG Visiting attribute path : timeZone
2021-12-11 17:23:51,735 DEBUG Building LoadPlan...
2021-12-11 17:23:51,735 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:51,736 DEBUG LoadPlan(entity=com.peterphi.usermanager.db.entity.UserEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.usermanager.db.entity.UserEntity, querySpaceUid=<gen:0>, path=com.peterphi.usermanager.db.entity.UserEntity)
          - CollectionAttributeFetchImpl(collection=com.peterphi.usermanager.db.entity.UserEntity.roles, querySpaceUid=<gen:1>, path=com.peterphi.usermanager.db.entity.UserEntity.roles)
             - (collection element) CollectionFetchableElementEntityGraph(entity=com.peterphi.usermanager.db.entity.RoleEntity, querySpaceUid=<gen:2>, path=com.peterphi.usermanager.db.entity.UserEntity.roles.<elements>)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.usermanager.db.entity.UserEntity)
          - SQL table alias mapping - userentity0_
          - alias suffix - 0_
          - suffixed key columns - {id1_4_0_}

2021-12-11 17:23:51,736 DEBUG Static select for entity com.peterphi.usermanager.db.entity.UserEntity [READ]: select userentity0_.id as id1_4_0_, userentity0_.created_ts as created_2_4_0_, userentity0_.date_format as date_for3_4_0_, userentity0_.email as email4_4_0_, userentity0_.last_login_ts as last_log5_4_0_, userentity0_.is_local as is_local6_4_0_, userentity0_.name as name7_4_0_, userentity0_.password as password8_4_0_, userentity0_.local_session_id as local_se9_4_0_, userentity0_.date_timezone as date_ti10_4_0_ from user_account userentity0_ where userentity0_.id=?
2021-12-11 17:23:51,736 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@73894c5a]
2021-12-11 17:23:51,736 DEBUG Visiting attribute path : created
2021-12-11 17:23:51,736 DEBUG Visiting attribute path : dateFormat
2021-12-11 17:23:51,736 DEBUG Visiting attribute path : email
2021-12-11 17:23:51,736 DEBUG Visiting attribute path : lastLogin
2021-12-11 17:23:51,736 DEBUG Visiting attribute path : local
2021-12-11 17:23:51,736 DEBUG Visiting attribute path : name
2021-12-11 17:23:51,736 DEBUG Visiting attribute path : password
2021-12-11 17:23:51,736 DEBUG Visiting attribute path : roles
2021-12-11 17:23:51,736 DEBUG Adding QuerySpace : uid = <gen:1> -> org.hibernate.loader.plan.build.internal.spaces.CollectionQuerySpaceImpl@7a9ceddf]
2021-12-11 17:23:51,736 DEBUG Adding QuerySpace : uid = <gen:2> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@28157173]
2021-12-11 17:23:51,736 DEBUG Visiting attribute path : sessionReconnectKey
2021-12-11 17:23:51,736 DEBUG Visiting attribute path : timeZone
2021-12-11 17:23:51,736 DEBUG Building LoadPlan...
2021-12-11 17:23:51,736 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:51,736 DEBUG LoadPlan(entity=com.peterphi.usermanager.db.entity.UserEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.usermanager.db.entity.UserEntity, querySpaceUid=<gen:0>, path=com.peterphi.usermanager.db.entity.UserEntity)
          - CollectionAttributeFetchImpl(collection=com.peterphi.usermanager.db.entity.UserEntity.roles, querySpaceUid=<gen:1>, path=com.peterphi.usermanager.db.entity.UserEntity.roles)
             - (collection element) CollectionFetchableElementEntityGraph(entity=com.peterphi.usermanager.db.entity.RoleEntity, querySpaceUid=<gen:2>, path=com.peterphi.usermanager.db.entity.UserEntity.roles.<elements>)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.usermanager.db.entity.UserEntity)
          - SQL table alias mapping - userentity0_
          - alias suffix - 0_
          - suffixed key columns - {id1_4_0_}

2021-12-11 17:23:51,736 DEBUG Static select for entity com.peterphi.usermanager.db.entity.UserEntity [UPGRADE]: select userentity0_.id as id1_4_0_, userentity0_.created_ts as created_2_4_0_, userentity0_.date_format as date_for3_4_0_, userentity0_.email as email4_4_0_, userentity0_.last_login_ts as last_log5_4_0_, userentity0_.is_local as is_local6_4_0_, userentity0_.name as name7_4_0_, userentity0_.password as password8_4_0_, userentity0_.local_session_id as local_se9_4_0_, userentity0_.date_timezone as date_ti10_4_0_ from user_account userentity0_ where userentity0_.id=? for update
2021-12-11 17:23:51,736 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@11c713b7]
2021-12-11 17:23:51,737 DEBUG Visiting attribute path : created
2021-12-11 17:23:51,737 DEBUG Visiting attribute path : dateFormat
2021-12-11 17:23:51,737 DEBUG Visiting attribute path : email
2021-12-11 17:23:51,737 DEBUG Visiting attribute path : lastLogin
2021-12-11 17:23:51,737 DEBUG Visiting attribute path : local
2021-12-11 17:23:51,737 DEBUG Visiting attribute path : name
2021-12-11 17:23:51,737 DEBUG Visiting attribute path : password
2021-12-11 17:23:51,737 DEBUG Visiting attribute path : roles
2021-12-11 17:23:51,737 DEBUG Adding QuerySpace : uid = <gen:1> -> org.hibernate.loader.plan.build.internal.spaces.CollectionQuerySpaceImpl@3fbe503c]
2021-12-11 17:23:51,737 DEBUG Adding QuerySpace : uid = <gen:2> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@3c232051]
2021-12-11 17:23:51,737 DEBUG Visiting attribute path : sessionReconnectKey
2021-12-11 17:23:51,737 DEBUG Visiting attribute path : timeZone
2021-12-11 17:23:51,737 DEBUG Building LoadPlan...
2021-12-11 17:23:51,737 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:51,737 DEBUG LoadPlan(entity=com.peterphi.usermanager.db.entity.UserEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.usermanager.db.entity.UserEntity, querySpaceUid=<gen:0>, path=com.peterphi.usermanager.db.entity.UserEntity)
          - CollectionAttributeFetchImpl(collection=com.peterphi.usermanager.db.entity.UserEntity.roles, querySpaceUid=<gen:1>, path=com.peterphi.usermanager.db.entity.UserEntity.roles)
             - (collection element) CollectionFetchableElementEntityGraph(entity=com.peterphi.usermanager.db.entity.RoleEntity, querySpaceUid=<gen:2>, path=com.peterphi.usermanager.db.entity.UserEntity.roles.<elements>)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.usermanager.db.entity.UserEntity)
          - SQL table alias mapping - userentity0_
          - alias suffix - 0_
          - suffixed key columns - {id1_4_0_}

2021-12-11 17:23:51,737 DEBUG Static select for entity com.peterphi.usermanager.db.entity.UserEntity [UPGRADE_NOWAIT]: select userentity0_.id as id1_4_0_, userentity0_.created_ts as created_2_4_0_, userentity0_.date_format as date_for3_4_0_, userentity0_.email as email4_4_0_, userentity0_.last_login_ts as last_log5_4_0_, userentity0_.is_local as is_local6_4_0_, userentity0_.name as name7_4_0_, userentity0_.password as password8_4_0_, userentity0_.local_session_id as local_se9_4_0_, userentity0_.date_timezone as date_ti10_4_0_ from user_account userentity0_ where userentity0_.id=? for update
2021-12-11 17:23:51,737 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@15d0d6c9]
2021-12-11 17:23:51,737 DEBUG Visiting attribute path : created
2021-12-11 17:23:51,737 DEBUG Visiting attribute path : dateFormat
2021-12-11 17:23:51,737 DEBUG Visiting attribute path : email
2021-12-11 17:23:51,737 DEBUG Visiting attribute path : lastLogin
2021-12-11 17:23:51,737 DEBUG Visiting attribute path : local
2021-12-11 17:23:51,737 DEBUG Visiting attribute path : name
2021-12-11 17:23:51,737 DEBUG Visiting attribute path : password
2021-12-11 17:23:51,737 DEBUG Visiting attribute path : roles
2021-12-11 17:23:51,737 DEBUG Adding QuerySpace : uid = <gen:1> -> org.hibernate.loader.plan.build.internal.spaces.CollectionQuerySpaceImpl@7741d346]
2021-12-11 17:23:51,737 DEBUG Adding QuerySpace : uid = <gen:2> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@52454457]
2021-12-11 17:23:51,737 DEBUG Visiting attribute path : sessionReconnectKey
2021-12-11 17:23:51,737 DEBUG Visiting attribute path : timeZone
2021-12-11 17:23:51,737 DEBUG Building LoadPlan...
2021-12-11 17:23:51,738 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:51,738 DEBUG LoadPlan(entity=com.peterphi.usermanager.db.entity.UserEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.usermanager.db.entity.UserEntity, querySpaceUid=<gen:0>, path=com.peterphi.usermanager.db.entity.UserEntity)
          - CollectionAttributeFetchImpl(collection=com.peterphi.usermanager.db.entity.UserEntity.roles, querySpaceUid=<gen:1>, path=com.peterphi.usermanager.db.entity.UserEntity.roles)
             - (collection element) CollectionFetchableElementEntityGraph(entity=com.peterphi.usermanager.db.entity.RoleEntity, querySpaceUid=<gen:2>, path=com.peterphi.usermanager.db.entity.UserEntity.roles.<elements>)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.usermanager.db.entity.UserEntity)
          - SQL table alias mapping - userentity0_
          - alias suffix - 0_
          - suffixed key columns - {id1_4_0_}

2021-12-11 17:23:51,738 DEBUG Static select for entity com.peterphi.usermanager.db.entity.UserEntity [UPGRADE_SKIPLOCKED]: select userentity0_.id as id1_4_0_, userentity0_.created_ts as created_2_4_0_, userentity0_.date_format as date_for3_4_0_, userentity0_.email as email4_4_0_, userentity0_.last_login_ts as last_log5_4_0_, userentity0_.is_local as is_local6_4_0_, userentity0_.name as name7_4_0_, userentity0_.password as password8_4_0_, userentity0_.local_session_id as local_se9_4_0_, userentity0_.date_timezone as date_ti10_4_0_ from user_account userentity0_ where userentity0_.id=? for update
2021-12-11 17:23:51,738 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@4130a648]
2021-12-11 17:23:51,738 DEBUG Visiting attribute path : created
2021-12-11 17:23:51,738 DEBUG Visiting attribute path : dateFormat
2021-12-11 17:23:51,738 DEBUG Visiting attribute path : email
2021-12-11 17:23:51,738 DEBUG Visiting attribute path : lastLogin
2021-12-11 17:23:51,738 DEBUG Visiting attribute path : local
2021-12-11 17:23:51,738 DEBUG Visiting attribute path : name
2021-12-11 17:23:51,738 DEBUG Visiting attribute path : password
2021-12-11 17:23:51,738 DEBUG Visiting attribute path : roles
2021-12-11 17:23:51,738 DEBUG Adding QuerySpace : uid = <gen:1> -> org.hibernate.loader.plan.build.internal.spaces.CollectionQuerySpaceImpl@18dd5ed3]
2021-12-11 17:23:51,738 DEBUG Adding QuerySpace : uid = <gen:2> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@6042d663]
2021-12-11 17:23:51,738 DEBUG Visiting attribute path : sessionReconnectKey
2021-12-11 17:23:51,738 DEBUG Visiting attribute path : timeZone
2021-12-11 17:23:51,738 DEBUG Building LoadPlan...
2021-12-11 17:23:51,738 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:51,739 DEBUG LoadPlan(entity=com.peterphi.usermanager.db.entity.UserEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.usermanager.db.entity.UserEntity, querySpaceUid=<gen:0>, path=com.peterphi.usermanager.db.entity.UserEntity)
          - CollectionAttributeFetchImpl(collection=com.peterphi.usermanager.db.entity.UserEntity.roles, querySpaceUid=<gen:1>, path=com.peterphi.usermanager.db.entity.UserEntity.roles)
             - (collection element) CollectionFetchableElementEntityGraph(entity=com.peterphi.usermanager.db.entity.RoleEntity, querySpaceUid=<gen:2>, path=com.peterphi.usermanager.db.entity.UserEntity.roles.<elements>)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.usermanager.db.entity.UserEntity)
          - SQL table alias mapping - userentity0_
          - alias suffix - 0_
          - suffixed key columns - {id1_4_0_}

2021-12-11 17:23:51,739 DEBUG Static select for entity com.peterphi.usermanager.db.entity.UserEntity [FORCE]: select userentity0_.id as id1_4_0_, userentity0_.created_ts as created_2_4_0_, userentity0_.date_format as date_for3_4_0_, userentity0_.email as email4_4_0_, userentity0_.last_login_ts as last_log5_4_0_, userentity0_.is_local as is_local6_4_0_, userentity0_.name as name7_4_0_, userentity0_.password as password8_4_0_, userentity0_.local_session_id as local_se9_4_0_, userentity0_.date_timezone as date_ti10_4_0_ from user_account userentity0_ where userentity0_.id=? for update
2021-12-11 17:23:51,739 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@24043ec5]
2021-12-11 17:23:51,739 DEBUG Visiting attribute path : created
2021-12-11 17:23:51,739 DEBUG Visiting attribute path : dateFormat
2021-12-11 17:23:51,739 DEBUG Visiting attribute path : email
2021-12-11 17:23:51,739 DEBUG Visiting attribute path : lastLogin
2021-12-11 17:23:51,739 DEBUG Visiting attribute path : local
2021-12-11 17:23:51,739 DEBUG Visiting attribute path : name
2021-12-11 17:23:51,739 DEBUG Visiting attribute path : password
2021-12-11 17:23:51,739 DEBUG Visiting attribute path : roles
2021-12-11 17:23:51,739 DEBUG Adding QuerySpace : uid = <gen:1> -> org.hibernate.loader.plan.build.internal.spaces.CollectionQuerySpaceImpl@4c6a4ffd]
2021-12-11 17:23:51,739 DEBUG Adding QuerySpace : uid = <gen:2> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@3aed69dd]
2021-12-11 17:23:51,739 DEBUG Visiting attribute path : sessionReconnectKey
2021-12-11 17:23:51,739 DEBUG Visiting attribute path : timeZone
2021-12-11 17:23:51,739 DEBUG Building LoadPlan...
2021-12-11 17:23:51,739 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:51,739 DEBUG LoadPlan(entity=com.peterphi.usermanager.db.entity.UserEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.usermanager.db.entity.UserEntity, querySpaceUid=<gen:0>, path=com.peterphi.usermanager.db.entity.UserEntity)
          - CollectionAttributeFetchImpl(collection=com.peterphi.usermanager.db.entity.UserEntity.roles, querySpaceUid=<gen:1>, path=com.peterphi.usermanager.db.entity.UserEntity.roles)
             - (collection element) CollectionFetchableElementEntityGraph(entity=com.peterphi.usermanager.db.entity.RoleEntity, querySpaceUid=<gen:2>, path=com.peterphi.usermanager.db.entity.UserEntity.roles.<elements>)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.usermanager.db.entity.UserEntity)
          - SQL table alias mapping - userentity0_
          - alias suffix - 0_
          - suffixed key columns - {id1_4_0_}

2021-12-11 17:23:51,739 DEBUG Static select for entity com.peterphi.usermanager.db.entity.UserEntity [PESSIMISTIC_READ]: select userentity0_.id as id1_4_0_, userentity0_.created_ts as created_2_4_0_, userentity0_.date_format as date_for3_4_0_, userentity0_.email as email4_4_0_, userentity0_.last_login_ts as last_log5_4_0_, userentity0_.is_local as is_local6_4_0_, userentity0_.name as name7_4_0_, userentity0_.password as password8_4_0_, userentity0_.local_session_id as local_se9_4_0_, userentity0_.date_timezone as date_ti10_4_0_ from user_account userentity0_ where userentity0_.id=? for update
2021-12-11 17:23:51,739 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@3f1a9a53]
2021-12-11 17:23:51,739 DEBUG Visiting attribute path : created
2021-12-11 17:23:51,739 DEBUG Visiting attribute path : dateFormat
2021-12-11 17:23:51,739 DEBUG Visiting attribute path : email
2021-12-11 17:23:51,739 DEBUG Visiting attribute path : lastLogin
2021-12-11 17:23:51,739 DEBUG Visiting attribute path : local
2021-12-11 17:23:51,739 DEBUG Visiting attribute path : name
2021-12-11 17:23:51,739 DEBUG Visiting attribute path : password
2021-12-11 17:23:51,739 DEBUG Visiting attribute path : roles
2021-12-11 17:23:51,739 DEBUG Adding QuerySpace : uid = <gen:1> -> org.hibernate.loader.plan.build.internal.spaces.CollectionQuerySpaceImpl@2287395]
2021-12-11 17:23:51,740 DEBUG Adding QuerySpace : uid = <gen:2> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@535a518c]
2021-12-11 17:23:51,740 DEBUG Visiting attribute path : sessionReconnectKey
2021-12-11 17:23:51,740 DEBUG Visiting attribute path : timeZone
2021-12-11 17:23:51,740 DEBUG Building LoadPlan...
2021-12-11 17:23:51,740 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:51,740 DEBUG LoadPlan(entity=com.peterphi.usermanager.db.entity.UserEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.usermanager.db.entity.UserEntity, querySpaceUid=<gen:0>, path=com.peterphi.usermanager.db.entity.UserEntity)
          - CollectionAttributeFetchImpl(collection=com.peterphi.usermanager.db.entity.UserEntity.roles, querySpaceUid=<gen:1>, path=com.peterphi.usermanager.db.entity.UserEntity.roles)
             - (collection element) CollectionFetchableElementEntityGraph(entity=com.peterphi.usermanager.db.entity.RoleEntity, querySpaceUid=<gen:2>, path=com.peterphi.usermanager.db.entity.UserEntity.roles.<elements>)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.usermanager.db.entity.UserEntity)
          - SQL table alias mapping - userentity0_
          - alias suffix - 0_
          - suffixed key columns - {id1_4_0_}

2021-12-11 17:23:51,740 DEBUG Static select for entity com.peterphi.usermanager.db.entity.UserEntity [PESSIMISTIC_WRITE]: select userentity0_.id as id1_4_0_, userentity0_.created_ts as created_2_4_0_, userentity0_.date_format as date_for3_4_0_, userentity0_.email as email4_4_0_, userentity0_.last_login_ts as last_log5_4_0_, userentity0_.is_local as is_local6_4_0_, userentity0_.name as name7_4_0_, userentity0_.password as password8_4_0_, userentity0_.local_session_id as local_se9_4_0_, userentity0_.date_timezone as date_ti10_4_0_ from user_account userentity0_ where userentity0_.id=? for update
2021-12-11 17:23:51,740 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@38f981b6]
2021-12-11 17:23:51,740 DEBUG Visiting attribute path : created
2021-12-11 17:23:51,740 DEBUG Visiting attribute path : dateFormat
2021-12-11 17:23:51,740 DEBUG Visiting attribute path : email
2021-12-11 17:23:51,740 DEBUG Visiting attribute path : lastLogin
2021-12-11 17:23:51,740 DEBUG Visiting attribute path : local
2021-12-11 17:23:51,740 DEBUG Visiting attribute path : name
2021-12-11 17:23:51,740 DEBUG Visiting attribute path : password
2021-12-11 17:23:51,740 DEBUG Visiting attribute path : roles
2021-12-11 17:23:51,740 DEBUG Adding QuerySpace : uid = <gen:1> -> org.hibernate.loader.plan.build.internal.spaces.CollectionQuerySpaceImpl@7bbfc5ff]
2021-12-11 17:23:51,740 DEBUG Adding QuerySpace : uid = <gen:2> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@7a682d35]
2021-12-11 17:23:51,740 DEBUG Visiting attribute path : sessionReconnectKey
2021-12-11 17:23:51,740 DEBUG Visiting attribute path : timeZone
2021-12-11 17:23:51,740 DEBUG Building LoadPlan...
2021-12-11 17:23:51,740 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:51,741 DEBUG LoadPlan(entity=com.peterphi.usermanager.db.entity.UserEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.usermanager.db.entity.UserEntity, querySpaceUid=<gen:0>, path=com.peterphi.usermanager.db.entity.UserEntity)
          - CollectionAttributeFetchImpl(collection=com.peterphi.usermanager.db.entity.UserEntity.roles, querySpaceUid=<gen:1>, path=com.peterphi.usermanager.db.entity.UserEntity.roles)
             - (collection element) CollectionFetchableElementEntityGraph(entity=com.peterphi.usermanager.db.entity.RoleEntity, querySpaceUid=<gen:2>, path=com.peterphi.usermanager.db.entity.UserEntity.roles.<elements>)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.usermanager.db.entity.UserEntity)
          - SQL table alias mapping - userentity0_
          - alias suffix - 0_
          - suffixed key columns - {id1_4_0_}

2021-12-11 17:23:51,741 DEBUG Static select for entity com.peterphi.usermanager.db.entity.UserEntity [PESSIMISTIC_FORCE_INCREMENT]: select userentity0_.id as id1_4_0_, userentity0_.created_ts as created_2_4_0_, userentity0_.date_format as date_for3_4_0_, userentity0_.email as email4_4_0_, userentity0_.last_login_ts as last_log5_4_0_, userentity0_.is_local as is_local6_4_0_, userentity0_.name as name7_4_0_, userentity0_.password as password8_4_0_, userentity0_.local_session_id as local_se9_4_0_, userentity0_.date_timezone as date_ti10_4_0_ from user_account userentity0_ where userentity0_.id=? for update
2021-12-11 17:23:51,741 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@ee8e7ff]
2021-12-11 17:23:51,741 DEBUG Visiting attribute path : created
2021-12-11 17:23:51,741 DEBUG Visiting attribute path : dateFormat
2021-12-11 17:23:51,741 DEBUG Visiting attribute path : email
2021-12-11 17:23:51,741 DEBUG Visiting attribute path : lastLogin
2021-12-11 17:23:51,741 DEBUG Visiting attribute path : local
2021-12-11 17:23:51,741 DEBUG Visiting attribute path : name
2021-12-11 17:23:51,741 DEBUG Visiting attribute path : password
2021-12-11 17:23:51,741 DEBUG Visiting attribute path : roles
2021-12-11 17:23:51,741 DEBUG Adding QuerySpace : uid = <gen:1> -> org.hibernate.loader.plan.build.internal.spaces.CollectionQuerySpaceImpl@64b70f41]
2021-12-11 17:23:51,741 DEBUG Adding QuerySpace : uid = <gen:2> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@5f8d9767]
2021-12-11 17:23:51,741 DEBUG Visiting attribute path : sessionReconnectKey
2021-12-11 17:23:51,741 DEBUG Visiting attribute path : timeZone
2021-12-11 17:23:51,741 DEBUG Building LoadPlan...
2021-12-11 17:23:51,741 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:51,741 DEBUG LoadPlan(entity=com.peterphi.usermanager.db.entity.UserEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.usermanager.db.entity.UserEntity, querySpaceUid=<gen:0>, path=com.peterphi.usermanager.db.entity.UserEntity)
          - CollectionAttributeFetchImpl(collection=com.peterphi.usermanager.db.entity.UserEntity.roles, querySpaceUid=<gen:1>, path=com.peterphi.usermanager.db.entity.UserEntity.roles)
             - (collection element) CollectionFetchableElementEntityGraph(entity=com.peterphi.usermanager.db.entity.RoleEntity, querySpaceUid=<gen:2>, path=com.peterphi.usermanager.db.entity.UserEntity.roles.<elements>)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.usermanager.db.entity.UserEntity)
          - SQL table alias mapping - userentity0_
          - alias suffix - 0_
          - suffixed key columns - {id1_4_0_}

2021-12-11 17:23:51,741 DEBUG Static select for entity com.peterphi.usermanager.db.entity.UserEntity [OPTIMISTIC]: select userentity0_.id as id1_4_0_, userentity0_.created_ts as created_2_4_0_, userentity0_.date_format as date_for3_4_0_, userentity0_.email as email4_4_0_, userentity0_.last_login_ts as last_log5_4_0_, userentity0_.is_local as is_local6_4_0_, userentity0_.name as name7_4_0_, userentity0_.password as password8_4_0_, userentity0_.local_session_id as local_se9_4_0_, userentity0_.date_timezone as date_ti10_4_0_ from user_account userentity0_ where userentity0_.id=?
2021-12-11 17:23:51,741 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@16134476]
2021-12-11 17:23:51,742 DEBUG Visiting attribute path : created
2021-12-11 17:23:51,742 DEBUG Visiting attribute path : dateFormat
2021-12-11 17:23:51,742 DEBUG Visiting attribute path : email
2021-12-11 17:23:51,742 DEBUG Visiting attribute path : lastLogin
2021-12-11 17:23:51,742 DEBUG Visiting attribute path : local
2021-12-11 17:23:51,742 DEBUG Visiting attribute path : name
2021-12-11 17:23:51,742 DEBUG Visiting attribute path : password
2021-12-11 17:23:51,742 DEBUG Visiting attribute path : roles
2021-12-11 17:23:51,742 DEBUG Adding QuerySpace : uid = <gen:1> -> org.hibernate.loader.plan.build.internal.spaces.CollectionQuerySpaceImpl@3e214105]
2021-12-11 17:23:51,742 DEBUG Adding QuerySpace : uid = <gen:2> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@da4cf09]
2021-12-11 17:23:51,742 DEBUG Visiting attribute path : sessionReconnectKey
2021-12-11 17:23:51,742 DEBUG Visiting attribute path : timeZone
2021-12-11 17:23:51,742 DEBUG Building LoadPlan...
2021-12-11 17:23:51,742 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:51,742 DEBUG LoadPlan(entity=com.peterphi.usermanager.db.entity.UserEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.usermanager.db.entity.UserEntity, querySpaceUid=<gen:0>, path=com.peterphi.usermanager.db.entity.UserEntity)
          - CollectionAttributeFetchImpl(collection=com.peterphi.usermanager.db.entity.UserEntity.roles, querySpaceUid=<gen:1>, path=com.peterphi.usermanager.db.entity.UserEntity.roles)
             - (collection element) CollectionFetchableElementEntityGraph(entity=com.peterphi.usermanager.db.entity.RoleEntity, querySpaceUid=<gen:2>, path=com.peterphi.usermanager.db.entity.UserEntity.roles.<elements>)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.usermanager.db.entity.UserEntity)
          - SQL table alias mapping - userentity0_
          - alias suffix - 0_
          - suffixed key columns - {id1_4_0_}

2021-12-11 17:23:51,742 DEBUG Static select for entity com.peterphi.usermanager.db.entity.UserEntity [OPTIMISTIC_FORCE_INCREMENT]: select userentity0_.id as id1_4_0_, userentity0_.created_ts as created_2_4_0_, userentity0_.date_format as date_for3_4_0_, userentity0_.email as email4_4_0_, userentity0_.last_login_ts as last_log5_4_0_, userentity0_.is_local as is_local6_4_0_, userentity0_.name as name7_4_0_, userentity0_.password as password8_4_0_, userentity0_.local_session_id as local_se9_4_0_, userentity0_.date_timezone as date_ti10_4_0_ from user_account userentity0_ where userentity0_.id=?
2021-12-11 17:23:51,756 DEBUG Static select for action ACTION_MERGE on entity com.peterphi.usermanager.db.entity.UserEntity: select userentity0_.id as id1_4_0_, userentity0_.created_ts as created_2_4_0_, userentity0_.date_format as date_for3_4_0_, userentity0_.email as email4_4_0_, userentity0_.last_login_ts as last_log5_4_0_, userentity0_.is_local as is_local6_4_0_, userentity0_.name as name7_4_0_, userentity0_.password as password8_4_0_, userentity0_.local_session_id as local_se9_4_0_, userentity0_.date_timezone as date_ti10_4_0_ from user_account userentity0_ where userentity0_.id=?
2021-12-11 17:23:51,756 DEBUG Static select for action ACTION_REFRESH on entity com.peterphi.usermanager.db.entity.UserEntity: select userentity0_.id as id1_4_0_, userentity0_.created_ts as created_2_4_0_, userentity0_.date_format as date_for3_4_0_, userentity0_.email as email4_4_0_, userentity0_.last_login_ts as last_log5_4_0_, userentity0_.is_local as is_local6_4_0_, userentity0_.name as name7_4_0_, userentity0_.password as password8_4_0_, userentity0_.local_session_id as local_se9_4_0_, userentity0_.date_timezone as date_ti10_4_0_ from user_account userentity0_ where userentity0_.id=?
2021-12-11 17:23:51,756 DEBUG Static SQL for entity: com.peterphi.usermanager.db.entity.OAuthSessionContextEntity
2021-12-11 17:23:51,756 DEBUG  Version select: select updated_ts from oauth_session_context where id =?
2021-12-11 17:23:51,756 DEBUG  Snapshot select: select oauthsessi_.id, oauthsessi_.is_active as is_activ2_2_, oauthsessi_.created_ts as created_3_2_, oauthsessi_.approved_scope as approved4_2_, oauthsessi_.service_id as service_6_2_, oauthsessi_.updated_ts as updated_5_2_, oauthsessi_.user_id as user_id7_2_ from oauth_session_context oauthsessi_ where oauthsessi_.id=?
2021-12-11 17:23:51,756 DEBUG  Insert 0: insert into oauth_session_context (is_active, created_ts, approved_scope, service_id, updated_ts, user_id, id) values (?, ?, ?, ?, ?, ?, ?)
2021-12-11 17:23:51,756 DEBUG  Update 0: update oauth_session_context set is_active=?, created_ts=?, approved_scope=?, service_id=?, updated_ts=?, user_id=? where id=? and updated_ts=?
2021-12-11 17:23:51,756 DEBUG  Delete 0: delete from oauth_session_context where id=? and updated_ts=?
2021-12-11 17:23:51,756 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@64bebd55]
2021-12-11 17:23:51,756 DEBUG Visiting attribute path : active
2021-12-11 17:23:51,756 DEBUG Visiting attribute path : created
2021-12-11 17:23:51,756 DEBUG Visiting attribute path : scope
2021-12-11 17:23:51,756 DEBUG Visiting attribute path : service
2021-12-11 17:23:51,757 DEBUG Adding QuerySpace : uid = <gen:1> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@3730f716]
2021-12-11 17:23:51,757 DEBUG Visiting attribute path : updated
2021-12-11 17:23:51,757 DEBUG Visiting attribute path : user
2021-12-11 17:23:51,757 DEBUG Adding QuerySpace : uid = <gen:2> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@4e3f2908]
2021-12-11 17:23:51,757 DEBUG Building LoadPlan...
2021-12-11 17:23:51,757 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:51,758 DEBUG LoadPlan(entity=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity, querySpaceUid=<gen:0>, path=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity)
          - EntityAttributeFetchImpl(entity=com.peterphi.usermanager.db.entity.OAuthServiceEntity, querySpaceUid=<gen:1>, path=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity.service)
          - EntityAttributeFetchImpl(entity=com.peterphi.usermanager.db.entity.UserEntity, querySpaceUid=<gen:2>, path=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity.user)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity)
          - SQL table alias mapping - oauthsessi0_
          - alias suffix - 0_
          - suffixed key columns - {id1_2_0_}

2021-12-11 17:23:51,758 DEBUG Static select for entity com.peterphi.usermanager.db.entity.OAuthSessionContextEntity [NONE]: select oauthsessi0_.id as id1_2_0_, oauthsessi0_.is_active as is_activ2_2_0_, oauthsessi0_.created_ts as created_3_2_0_, oauthsessi0_.approved_scope as approved4_2_0_, oauthsessi0_.service_id as service_6_2_0_, oauthsessi0_.updated_ts as updated_5_2_0_, oauthsessi0_.user_id as user_id7_2_0_ from oauth_session_context oauthsessi0_ where oauthsessi0_.id=?
2021-12-11 17:23:51,758 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@7e87ef9e]
2021-12-11 17:23:51,758 DEBUG Visiting attribute path : active
2021-12-11 17:23:51,758 DEBUG Visiting attribute path : created
2021-12-11 17:23:51,758 DEBUG Visiting attribute path : scope
2021-12-11 17:23:51,758 DEBUG Visiting attribute path : service
2021-12-11 17:23:51,758 DEBUG Adding QuerySpace : uid = <gen:1> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@45843650]
2021-12-11 17:23:51,758 DEBUG Visiting attribute path : updated
2021-12-11 17:23:51,758 DEBUG Visiting attribute path : user
2021-12-11 17:23:51,758 DEBUG Adding QuerySpace : uid = <gen:2> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@72443081]
2021-12-11 17:23:51,758 DEBUG Building LoadPlan...
2021-12-11 17:23:51,758 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:51,758 DEBUG LoadPlan(entity=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity, querySpaceUid=<gen:0>, path=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity)
          - EntityAttributeFetchImpl(entity=com.peterphi.usermanager.db.entity.OAuthServiceEntity, querySpaceUid=<gen:1>, path=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity.service)
          - EntityAttributeFetchImpl(entity=com.peterphi.usermanager.db.entity.UserEntity, querySpaceUid=<gen:2>, path=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity.user)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity)
          - SQL table alias mapping - oauthsessi0_
          - alias suffix - 0_
          - suffixed key columns - {id1_2_0_}

2021-12-11 17:23:51,759 DEBUG Static select for entity com.peterphi.usermanager.db.entity.OAuthSessionContextEntity [READ]: select oauthsessi0_.id as id1_2_0_, oauthsessi0_.is_active as is_activ2_2_0_, oauthsessi0_.created_ts as created_3_2_0_, oauthsessi0_.approved_scope as approved4_2_0_, oauthsessi0_.service_id as service_6_2_0_, oauthsessi0_.updated_ts as updated_5_2_0_, oauthsessi0_.user_id as user_id7_2_0_ from oauth_session_context oauthsessi0_ where oauthsessi0_.id=?
2021-12-11 17:23:51,759 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@33feda48]
2021-12-11 17:23:51,759 DEBUG Visiting attribute path : active
2021-12-11 17:23:51,759 DEBUG Visiting attribute path : created
2021-12-11 17:23:51,759 DEBUG Visiting attribute path : scope
2021-12-11 17:23:51,759 DEBUG Visiting attribute path : service
2021-12-11 17:23:51,759 DEBUG Adding QuerySpace : uid = <gen:1> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@15a3b42]
2021-12-11 17:23:51,759 DEBUG Visiting attribute path : updated
2021-12-11 17:23:51,759 DEBUG Visiting attribute path : user
2021-12-11 17:23:51,759 DEBUG Adding QuerySpace : uid = <gen:2> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@52c9d3d0]
2021-12-11 17:23:51,759 DEBUG Building LoadPlan...
2021-12-11 17:23:51,759 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:51,759 DEBUG LoadPlan(entity=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity, querySpaceUid=<gen:0>, path=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity)
          - EntityAttributeFetchImpl(entity=com.peterphi.usermanager.db.entity.OAuthServiceEntity, querySpaceUid=<gen:1>, path=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity.service)
          - EntityAttributeFetchImpl(entity=com.peterphi.usermanager.db.entity.UserEntity, querySpaceUid=<gen:2>, path=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity.user)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity)
          - SQL table alias mapping - oauthsessi0_
          - alias suffix - 0_
          - suffixed key columns - {id1_2_0_}

2021-12-11 17:23:51,759 DEBUG Static select for entity com.peterphi.usermanager.db.entity.OAuthSessionContextEntity [UPGRADE]: select oauthsessi0_.id as id1_2_0_, oauthsessi0_.is_active as is_activ2_2_0_, oauthsessi0_.created_ts as created_3_2_0_, oauthsessi0_.approved_scope as approved4_2_0_, oauthsessi0_.service_id as service_6_2_0_, oauthsessi0_.updated_ts as updated_5_2_0_, oauthsessi0_.user_id as user_id7_2_0_ from oauth_session_context oauthsessi0_ where oauthsessi0_.id=? for update
2021-12-11 17:23:51,759 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@17207f5b]
2021-12-11 17:23:51,759 DEBUG Visiting attribute path : active
2021-12-11 17:23:51,759 DEBUG Visiting attribute path : created
2021-12-11 17:23:51,759 DEBUG Visiting attribute path : scope
2021-12-11 17:23:51,759 DEBUG Visiting attribute path : service
2021-12-11 17:23:51,759 DEBUG Adding QuerySpace : uid = <gen:1> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@67e0ff3a]
2021-12-11 17:23:51,759 DEBUG Visiting attribute path : updated
2021-12-11 17:23:51,759 DEBUG Visiting attribute path : user
2021-12-11 17:23:51,759 DEBUG Adding QuerySpace : uid = <gen:2> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@7b2bf745]
2021-12-11 17:23:51,760 DEBUG Building LoadPlan...
2021-12-11 17:23:51,760 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:51,760 DEBUG LoadPlan(entity=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity, querySpaceUid=<gen:0>, path=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity)
          - EntityAttributeFetchImpl(entity=com.peterphi.usermanager.db.entity.OAuthServiceEntity, querySpaceUid=<gen:1>, path=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity.service)
          - EntityAttributeFetchImpl(entity=com.peterphi.usermanager.db.entity.UserEntity, querySpaceUid=<gen:2>, path=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity.user)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity)
          - SQL table alias mapping - oauthsessi0_
          - alias suffix - 0_
          - suffixed key columns - {id1_2_0_}

2021-12-11 17:23:51,760 DEBUG Static select for entity com.peterphi.usermanager.db.entity.OAuthSessionContextEntity [UPGRADE_NOWAIT]: select oauthsessi0_.id as id1_2_0_, oauthsessi0_.is_active as is_activ2_2_0_, oauthsessi0_.created_ts as created_3_2_0_, oauthsessi0_.approved_scope as approved4_2_0_, oauthsessi0_.service_id as service_6_2_0_, oauthsessi0_.updated_ts as updated_5_2_0_, oauthsessi0_.user_id as user_id7_2_0_ from oauth_session_context oauthsessi0_ where oauthsessi0_.id=? for update
2021-12-11 17:23:51,760 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@6fe595dc]
2021-12-11 17:23:51,760 DEBUG Visiting attribute path : active
2021-12-11 17:23:51,760 DEBUG Visiting attribute path : created
2021-12-11 17:23:51,760 DEBUG Visiting attribute path : scope
2021-12-11 17:23:51,760 DEBUG Visiting attribute path : service
2021-12-11 17:23:51,760 DEBUG Adding QuerySpace : uid = <gen:1> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@3a8cea24]
2021-12-11 17:23:51,760 DEBUG Visiting attribute path : updated
2021-12-11 17:23:51,760 DEBUG Visiting attribute path : user
2021-12-11 17:23:51,760 DEBUG Adding QuerySpace : uid = <gen:2> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@1eb9a3ef]
2021-12-11 17:23:51,760 DEBUG Building LoadPlan...
2021-12-11 17:23:51,761 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:51,761 DEBUG LoadPlan(entity=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity, querySpaceUid=<gen:0>, path=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity)
          - EntityAttributeFetchImpl(entity=com.peterphi.usermanager.db.entity.OAuthServiceEntity, querySpaceUid=<gen:1>, path=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity.service)
          - EntityAttributeFetchImpl(entity=com.peterphi.usermanager.db.entity.UserEntity, querySpaceUid=<gen:2>, path=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity.user)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity)
          - SQL table alias mapping - oauthsessi0_
          - alias suffix - 0_
          - suffixed key columns - {id1_2_0_}

2021-12-11 17:23:51,761 DEBUG Static select for entity com.peterphi.usermanager.db.entity.OAuthSessionContextEntity [UPGRADE_SKIPLOCKED]: select oauthsessi0_.id as id1_2_0_, oauthsessi0_.is_active as is_activ2_2_0_, oauthsessi0_.created_ts as created_3_2_0_, oauthsessi0_.approved_scope as approved4_2_0_, oauthsessi0_.service_id as service_6_2_0_, oauthsessi0_.updated_ts as updated_5_2_0_, oauthsessi0_.user_id as user_id7_2_0_ from oauth_session_context oauthsessi0_ where oauthsessi0_.id=? for update
2021-12-11 17:23:51,761 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@298b64f7]
2021-12-11 17:23:51,761 DEBUG Visiting attribute path : active
2021-12-11 17:23:51,761 DEBUG Visiting attribute path : created
2021-12-11 17:23:51,761 DEBUG Visiting attribute path : scope
2021-12-11 17:23:51,761 DEBUG Visiting attribute path : service
2021-12-11 17:23:51,761 DEBUG Adding QuerySpace : uid = <gen:1> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@27fe059d]
2021-12-11 17:23:51,761 DEBUG Visiting attribute path : updated
2021-12-11 17:23:51,761 DEBUG Visiting attribute path : user
2021-12-11 17:23:51,761 DEBUG Adding QuerySpace : uid = <gen:2> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@766a52f5]
2021-12-11 17:23:51,761 DEBUG Building LoadPlan...
2021-12-11 17:23:51,761 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:51,761 DEBUG LoadPlan(entity=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity, querySpaceUid=<gen:0>, path=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity)
          - EntityAttributeFetchImpl(entity=com.peterphi.usermanager.db.entity.OAuthServiceEntity, querySpaceUid=<gen:1>, path=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity.service)
          - EntityAttributeFetchImpl(entity=com.peterphi.usermanager.db.entity.UserEntity, querySpaceUid=<gen:2>, path=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity.user)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity)
          - SQL table alias mapping - oauthsessi0_
          - alias suffix - 0_
          - suffixed key columns - {id1_2_0_}

2021-12-11 17:23:51,761 DEBUG Static select for entity com.peterphi.usermanager.db.entity.OAuthSessionContextEntity [FORCE]: select oauthsessi0_.id as id1_2_0_, oauthsessi0_.is_active as is_activ2_2_0_, oauthsessi0_.created_ts as created_3_2_0_, oauthsessi0_.approved_scope as approved4_2_0_, oauthsessi0_.service_id as service_6_2_0_, oauthsessi0_.updated_ts as updated_5_2_0_, oauthsessi0_.user_id as user_id7_2_0_ from oauth_session_context oauthsessi0_ where oauthsessi0_.id=? for update
2021-12-11 17:23:51,761 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@4342c13]
2021-12-11 17:23:51,761 DEBUG Visiting attribute path : active
2021-12-11 17:23:51,761 DEBUG Visiting attribute path : created
2021-12-11 17:23:51,761 DEBUG Visiting attribute path : scope
2021-12-11 17:23:51,761 DEBUG Visiting attribute path : service
2021-12-11 17:23:51,761 DEBUG Adding QuerySpace : uid = <gen:1> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@7c241a9f]
2021-12-11 17:23:51,761 DEBUG Visiting attribute path : updated
2021-12-11 17:23:51,761 DEBUG Visiting attribute path : user
2021-12-11 17:23:51,762 DEBUG Adding QuerySpace : uid = <gen:2> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@58fd1214]
2021-12-11 17:23:51,762 DEBUG Building LoadPlan...
2021-12-11 17:23:51,762 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:51,762 DEBUG LoadPlan(entity=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity, querySpaceUid=<gen:0>, path=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity)
          - EntityAttributeFetchImpl(entity=com.peterphi.usermanager.db.entity.OAuthServiceEntity, querySpaceUid=<gen:1>, path=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity.service)
          - EntityAttributeFetchImpl(entity=com.peterphi.usermanager.db.entity.UserEntity, querySpaceUid=<gen:2>, path=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity.user)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity)
          - SQL table alias mapping - oauthsessi0_
          - alias suffix - 0_
          - suffixed key columns - {id1_2_0_}

2021-12-11 17:23:51,762 DEBUG Static select for entity com.peterphi.usermanager.db.entity.OAuthSessionContextEntity [PESSIMISTIC_READ]: select oauthsessi0_.id as id1_2_0_, oauthsessi0_.is_active as is_activ2_2_0_, oauthsessi0_.created_ts as created_3_2_0_, oauthsessi0_.approved_scope as approved4_2_0_, oauthsessi0_.service_id as service_6_2_0_, oauthsessi0_.updated_ts as updated_5_2_0_, oauthsessi0_.user_id as user_id7_2_0_ from oauth_session_context oauthsessi0_ where oauthsessi0_.id=? for update
2021-12-11 17:23:51,762 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@7d8cf9ac]
2021-12-11 17:23:51,762 DEBUG Visiting attribute path : active
2021-12-11 17:23:51,762 DEBUG Visiting attribute path : created
2021-12-11 17:23:51,762 DEBUG Visiting attribute path : scope
2021-12-11 17:23:51,762 DEBUG Visiting attribute path : service
2021-12-11 17:23:51,762 DEBUG Adding QuerySpace : uid = <gen:1> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@3a7b2e2]
2021-12-11 17:23:51,762 DEBUG Visiting attribute path : updated
2021-12-11 17:23:51,762 DEBUG Visiting attribute path : user
2021-12-11 17:23:51,762 DEBUG Adding QuerySpace : uid = <gen:2> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@337a6d30]
2021-12-11 17:23:51,762 DEBUG Building LoadPlan...
2021-12-11 17:23:51,762 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:51,762 DEBUG LoadPlan(entity=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity, querySpaceUid=<gen:0>, path=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity)
          - EntityAttributeFetchImpl(entity=com.peterphi.usermanager.db.entity.OAuthServiceEntity, querySpaceUid=<gen:1>, path=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity.service)
          - EntityAttributeFetchImpl(entity=com.peterphi.usermanager.db.entity.UserEntity, querySpaceUid=<gen:2>, path=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity.user)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity)
          - SQL table alias mapping - oauthsessi0_
          - alias suffix - 0_
          - suffixed key columns - {id1_2_0_}

2021-12-11 17:23:51,762 DEBUG Static select for entity com.peterphi.usermanager.db.entity.OAuthSessionContextEntity [PESSIMISTIC_WRITE]: select oauthsessi0_.id as id1_2_0_, oauthsessi0_.is_active as is_activ2_2_0_, oauthsessi0_.created_ts as created_3_2_0_, oauthsessi0_.approved_scope as approved4_2_0_, oauthsessi0_.service_id as service_6_2_0_, oauthsessi0_.updated_ts as updated_5_2_0_, oauthsessi0_.user_id as user_id7_2_0_ from oauth_session_context oauthsessi0_ where oauthsessi0_.id=? for update
2021-12-11 17:23:51,762 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@2921a36a]
2021-12-11 17:23:51,763 DEBUG Visiting attribute path : active
2021-12-11 17:23:51,763 DEBUG Visiting attribute path : created
2021-12-11 17:23:51,763 DEBUG Visiting attribute path : scope
2021-12-11 17:23:51,763 DEBUG Visiting attribute path : service
2021-12-11 17:23:51,763 DEBUG Adding QuerySpace : uid = <gen:1> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@157d3a45]
2021-12-11 17:23:51,763 DEBUG Visiting attribute path : updated
2021-12-11 17:23:51,763 DEBUG Visiting attribute path : user
2021-12-11 17:23:51,763 DEBUG Adding QuerySpace : uid = <gen:2> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@750ed637]
2021-12-11 17:23:51,763 DEBUG Building LoadPlan...
2021-12-11 17:23:51,763 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:51,763 DEBUG LoadPlan(entity=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity, querySpaceUid=<gen:0>, path=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity)
          - EntityAttributeFetchImpl(entity=com.peterphi.usermanager.db.entity.OAuthServiceEntity, querySpaceUid=<gen:1>, path=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity.service)
          - EntityAttributeFetchImpl(entity=com.peterphi.usermanager.db.entity.UserEntity, querySpaceUid=<gen:2>, path=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity.user)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity)
          - SQL table alias mapping - oauthsessi0_
          - alias suffix - 0_
          - suffixed key columns - {id1_2_0_}

2021-12-11 17:23:51,763 DEBUG Static select for entity com.peterphi.usermanager.db.entity.OAuthSessionContextEntity [PESSIMISTIC_FORCE_INCREMENT]: select oauthsessi0_.id as id1_2_0_, oauthsessi0_.is_active as is_activ2_2_0_, oauthsessi0_.created_ts as created_3_2_0_, oauthsessi0_.approved_scope as approved4_2_0_, oauthsessi0_.service_id as service_6_2_0_, oauthsessi0_.updated_ts as updated_5_2_0_, oauthsessi0_.user_id as user_id7_2_0_ from oauth_session_context oauthsessi0_ where oauthsessi0_.id=? for update
2021-12-11 17:23:51,763 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@5190010f]
2021-12-11 17:23:51,763 DEBUG Visiting attribute path : active
2021-12-11 17:23:51,763 DEBUG Visiting attribute path : created
2021-12-11 17:23:51,763 DEBUG Visiting attribute path : scope
2021-12-11 17:23:51,763 DEBUG Visiting attribute path : service
2021-12-11 17:23:51,763 DEBUG Adding QuerySpace : uid = <gen:1> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@1bedc703]
2021-12-11 17:23:51,763 DEBUG Visiting attribute path : updated
2021-12-11 17:23:51,763 DEBUG Visiting attribute path : user
2021-12-11 17:23:51,763 DEBUG Adding QuerySpace : uid = <gen:2> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@18d11527]
2021-12-11 17:23:51,763 DEBUG Building LoadPlan...
2021-12-11 17:23:51,763 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:51,764 DEBUG LoadPlan(entity=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity, querySpaceUid=<gen:0>, path=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity)
          - EntityAttributeFetchImpl(entity=com.peterphi.usermanager.db.entity.OAuthServiceEntity, querySpaceUid=<gen:1>, path=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity.service)
          - EntityAttributeFetchImpl(entity=com.peterphi.usermanager.db.entity.UserEntity, querySpaceUid=<gen:2>, path=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity.user)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity)
          - SQL table alias mapping - oauthsessi0_
          - alias suffix - 0_
          - suffixed key columns - {id1_2_0_}

2021-12-11 17:23:51,764 DEBUG Static select for entity com.peterphi.usermanager.db.entity.OAuthSessionContextEntity [OPTIMISTIC]: select oauthsessi0_.id as id1_2_0_, oauthsessi0_.is_active as is_activ2_2_0_, oauthsessi0_.created_ts as created_3_2_0_, oauthsessi0_.approved_scope as approved4_2_0_, oauthsessi0_.service_id as service_6_2_0_, oauthsessi0_.updated_ts as updated_5_2_0_, oauthsessi0_.user_id as user_id7_2_0_ from oauth_session_context oauthsessi0_ where oauthsessi0_.id=?
2021-12-11 17:23:51,764 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@4998e74b]
2021-12-11 17:23:51,764 DEBUG Visiting attribute path : active
2021-12-11 17:23:51,764 DEBUG Visiting attribute path : created
2021-12-11 17:23:51,764 DEBUG Visiting attribute path : scope
2021-12-11 17:23:51,764 DEBUG Visiting attribute path : service
2021-12-11 17:23:51,764 DEBUG Adding QuerySpace : uid = <gen:1> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@28279a49]
2021-12-11 17:23:51,764 DEBUG Visiting attribute path : updated
2021-12-11 17:23:51,764 DEBUG Visiting attribute path : user
2021-12-11 17:23:51,764 DEBUG Adding QuerySpace : uid = <gen:2> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@384fda47]
2021-12-11 17:23:51,764 DEBUG Building LoadPlan...
2021-12-11 17:23:51,764 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:51,764 DEBUG LoadPlan(entity=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity, querySpaceUid=<gen:0>, path=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity)
          - EntityAttributeFetchImpl(entity=com.peterphi.usermanager.db.entity.OAuthServiceEntity, querySpaceUid=<gen:1>, path=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity.service)
          - EntityAttributeFetchImpl(entity=com.peterphi.usermanager.db.entity.UserEntity, querySpaceUid=<gen:2>, path=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity.user)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity)
          - SQL table alias mapping - oauthsessi0_
          - alias suffix - 0_
          - suffixed key columns - {id1_2_0_}

2021-12-11 17:23:51,764 DEBUG Static select for entity com.peterphi.usermanager.db.entity.OAuthSessionContextEntity [OPTIMISTIC_FORCE_INCREMENT]: select oauthsessi0_.id as id1_2_0_, oauthsessi0_.is_active as is_activ2_2_0_, oauthsessi0_.created_ts as created_3_2_0_, oauthsessi0_.approved_scope as approved4_2_0_, oauthsessi0_.service_id as service_6_2_0_, oauthsessi0_.updated_ts as updated_5_2_0_, oauthsessi0_.user_id as user_id7_2_0_ from oauth_session_context oauthsessi0_ where oauthsessi0_.id=?
2021-12-11 17:23:51,765 DEBUG Static select for action ACTION_MERGE on entity com.peterphi.usermanager.db.entity.OAuthSessionContextEntity: select oauthsessi0_.id as id1_2_0_, oauthsessi0_.is_active as is_activ2_2_0_, oauthsessi0_.created_ts as created_3_2_0_, oauthsessi0_.approved_scope as approved4_2_0_, oauthsessi0_.service_id as service_6_2_0_, oauthsessi0_.updated_ts as updated_5_2_0_, oauthsessi0_.user_id as user_id7_2_0_ from oauth_session_context oauthsessi0_ where oauthsessi0_.id=?
2021-12-11 17:23:51,765 DEBUG Static select for action ACTION_REFRESH on entity com.peterphi.usermanager.db.entity.OAuthSessionContextEntity: select oauthsessi0_.id as id1_2_0_, oauthsessi0_.is_active as is_activ2_2_0_, oauthsessi0_.created_ts as created_3_2_0_, oauthsessi0_.approved_scope as approved4_2_0_, oauthsessi0_.service_id as service_6_2_0_, oauthsessi0_.updated_ts as updated_5_2_0_, oauthsessi0_.user_id as user_id7_2_0_ from oauth_session_context oauthsessi0_ where oauthsessi0_.id=?
2021-12-11 17:23:51,765 DEBUG Static SQL for entity: com.peterphi.usermanager.db.entity.OAuthServiceEntity
2021-12-11 17:23:51,765 DEBUG  Version select: select updated_ts from oauth_service where id =?
2021-12-11 17:23:51,765 DEBUG  Snapshot select: select oauthservi_.id, oauthservi_.client_secret as client_s2_0_, oauthservi_.created_ts as created_3_0_, oauthservi_.is_enabled as is_enabl4_0_, oauthservi_.client_endpoints as client_e5_0_, oauthservi_.client_name as client_n6_0_, oauthservi_.owner_id as owner_id8_0_, oauthservi_.updated_ts as updated_7_0_ from oauth_service oauthservi_ where oauthservi_.id=?
2021-12-11 17:23:51,765 DEBUG  Insert 0: insert into oauth_service (client_secret, created_ts, is_enabled, client_endpoints, client_name, owner_id, updated_ts, id) values (?, ?, ?, ?, ?, ?, ?, ?)
2021-12-11 17:23:51,765 DEBUG  Update 0: update oauth_service set client_secret=?, created_ts=?, is_enabled=?, client_endpoints=?, client_name=?, owner_id=?, updated_ts=? where id=? and updated_ts=?
2021-12-11 17:23:51,765 DEBUG  Delete 0: delete from oauth_service where id=? and updated_ts=?
2021-12-11 17:23:51,766 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@3663d0ba]
2021-12-11 17:23:51,766 DEBUG Visiting attribute path : clientSecret
2021-12-11 17:23:51,766 DEBUG Visiting attribute path : created
2021-12-11 17:23:51,766 DEBUG Visiting attribute path : enabled
2021-12-11 17:23:51,766 DEBUG Visiting attribute path : endpoints
2021-12-11 17:23:51,766 DEBUG Visiting attribute path : name
2021-12-11 17:23:51,766 DEBUG Visiting attribute path : owner
2021-12-11 17:23:51,766 DEBUG Adding QuerySpace : uid = <gen:1> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@433d9680]
2021-12-11 17:23:51,766 DEBUG Visiting attribute path : updated
2021-12-11 17:23:51,766 DEBUG Building LoadPlan...
2021-12-11 17:23:51,766 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:51,767 DEBUG LoadPlan(entity=com.peterphi.usermanager.db.entity.OAuthServiceEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.usermanager.db.entity.OAuthServiceEntity, querySpaceUid=<gen:0>, path=com.peterphi.usermanager.db.entity.OAuthServiceEntity)
          - EntityAttributeFetchImpl(entity=com.peterphi.usermanager.db.entity.UserEntity, querySpaceUid=<gen:1>, path=com.peterphi.usermanager.db.entity.OAuthServiceEntity.owner)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.usermanager.db.entity.OAuthServiceEntity)
          - SQL table alias mapping - oauthservi0_
          - alias suffix - 0_
          - suffixed key columns - {id1_0_0_}

2021-12-11 17:23:51,767 DEBUG Static select for entity com.peterphi.usermanager.db.entity.OAuthServiceEntity [NONE]: select oauthservi0_.id as id1_0_0_, oauthservi0_.client_secret as client_s2_0_0_, oauthservi0_.created_ts as created_3_0_0_, oauthservi0_.is_enabled as is_enabl4_0_0_, oauthservi0_.client_endpoints as client_e5_0_0_, oauthservi0_.client_name as client_n6_0_0_, oauthservi0_.owner_id as owner_id8_0_0_, oauthservi0_.updated_ts as updated_7_0_0_ from oauth_service oauthservi0_ where oauthservi0_.id=?
2021-12-11 17:23:51,767 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@566e142]
2021-12-11 17:23:51,767 DEBUG Visiting attribute path : clientSecret
2021-12-11 17:23:51,767 DEBUG Visiting attribute path : created
2021-12-11 17:23:51,767 DEBUG Visiting attribute path : enabled
2021-12-11 17:23:51,767 DEBUG Visiting attribute path : endpoints
2021-12-11 17:23:51,767 DEBUG Visiting attribute path : name
2021-12-11 17:23:51,767 DEBUG Visiting attribute path : owner
2021-12-11 17:23:51,767 DEBUG Adding QuerySpace : uid = <gen:1> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@1f992a3a]
2021-12-11 17:23:51,767 DEBUG Visiting attribute path : updated
2021-12-11 17:23:51,767 DEBUG Building LoadPlan...
2021-12-11 17:23:51,768 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:51,768 DEBUG LoadPlan(entity=com.peterphi.usermanager.db.entity.OAuthServiceEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.usermanager.db.entity.OAuthServiceEntity, querySpaceUid=<gen:0>, path=com.peterphi.usermanager.db.entity.OAuthServiceEntity)
          - EntityAttributeFetchImpl(entity=com.peterphi.usermanager.db.entity.UserEntity, querySpaceUid=<gen:1>, path=com.peterphi.usermanager.db.entity.OAuthServiceEntity.owner)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.usermanager.db.entity.OAuthServiceEntity)
          - SQL table alias mapping - oauthservi0_
          - alias suffix - 0_
          - suffixed key columns - {id1_0_0_}

2021-12-11 17:23:51,768 DEBUG Static select for entity com.peterphi.usermanager.db.entity.OAuthServiceEntity [READ]: select oauthservi0_.id as id1_0_0_, oauthservi0_.client_secret as client_s2_0_0_, oauthservi0_.created_ts as created_3_0_0_, oauthservi0_.is_enabled as is_enabl4_0_0_, oauthservi0_.client_endpoints as client_e5_0_0_, oauthservi0_.client_name as client_n6_0_0_, oauthservi0_.owner_id as owner_id8_0_0_, oauthservi0_.updated_ts as updated_7_0_0_ from oauth_service oauthservi0_ where oauthservi0_.id=?
2021-12-11 17:23:51,768 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@30bf26df]
2021-12-11 17:23:51,768 DEBUG Visiting attribute path : clientSecret
2021-12-11 17:23:51,768 DEBUG Visiting attribute path : created
2021-12-11 17:23:51,768 DEBUG Visiting attribute path : enabled
2021-12-11 17:23:51,768 DEBUG Visiting attribute path : endpoints
2021-12-11 17:23:51,768 DEBUG Visiting attribute path : name
2021-12-11 17:23:51,768 DEBUG Visiting attribute path : owner
2021-12-11 17:23:51,769 DEBUG Adding QuerySpace : uid = <gen:1> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@6f9e08d4]
2021-12-11 17:23:51,769 DEBUG Visiting attribute path : updated
2021-12-11 17:23:51,769 DEBUG Building LoadPlan...
2021-12-11 17:23:51,769 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:51,769 DEBUG LoadPlan(entity=com.peterphi.usermanager.db.entity.OAuthServiceEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.usermanager.db.entity.OAuthServiceEntity, querySpaceUid=<gen:0>, path=com.peterphi.usermanager.db.entity.OAuthServiceEntity)
          - EntityAttributeFetchImpl(entity=com.peterphi.usermanager.db.entity.UserEntity, querySpaceUid=<gen:1>, path=com.peterphi.usermanager.db.entity.OAuthServiceEntity.owner)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.usermanager.db.entity.OAuthServiceEntity)
          - SQL table alias mapping - oauthservi0_
          - alias suffix - 0_
          - suffixed key columns - {id1_0_0_}

2021-12-11 17:23:51,769 DEBUG Static select for entity com.peterphi.usermanager.db.entity.OAuthServiceEntity [UPGRADE]: select oauthservi0_.id as id1_0_0_, oauthservi0_.client_secret as client_s2_0_0_, oauthservi0_.created_ts as created_3_0_0_, oauthservi0_.is_enabled as is_enabl4_0_0_, oauthservi0_.client_endpoints as client_e5_0_0_, oauthservi0_.client_name as client_n6_0_0_, oauthservi0_.owner_id as owner_id8_0_0_, oauthservi0_.updated_ts as updated_7_0_0_ from oauth_service oauthservi0_ where oauthservi0_.id=? for update
2021-12-11 17:23:51,770 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@390037e7]
2021-12-11 17:23:51,770 DEBUG Visiting attribute path : clientSecret
2021-12-11 17:23:51,770 DEBUG Visiting attribute path : created
2021-12-11 17:23:51,770 DEBUG Visiting attribute path : enabled
2021-12-11 17:23:51,770 DEBUG Visiting attribute path : endpoints
2021-12-11 17:23:51,770 DEBUG Visiting attribute path : name
2021-12-11 17:23:51,770 DEBUG Visiting attribute path : owner
2021-12-11 17:23:51,770 DEBUG Adding QuerySpace : uid = <gen:1> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@7f4596d0]
2021-12-11 17:23:51,770 DEBUG Visiting attribute path : updated
2021-12-11 17:23:51,770 DEBUG Building LoadPlan...
2021-12-11 17:23:51,770 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:51,771 DEBUG LoadPlan(entity=com.peterphi.usermanager.db.entity.OAuthServiceEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.usermanager.db.entity.OAuthServiceEntity, querySpaceUid=<gen:0>, path=com.peterphi.usermanager.db.entity.OAuthServiceEntity)
          - EntityAttributeFetchImpl(entity=com.peterphi.usermanager.db.entity.UserEntity, querySpaceUid=<gen:1>, path=com.peterphi.usermanager.db.entity.OAuthServiceEntity.owner)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.usermanager.db.entity.OAuthServiceEntity)
          - SQL table alias mapping - oauthservi0_
          - alias suffix - 0_
          - suffixed key columns - {id1_0_0_}

2021-12-11 17:23:51,771 DEBUG Static select for entity com.peterphi.usermanager.db.entity.OAuthServiceEntity [UPGRADE_NOWAIT]: select oauthservi0_.id as id1_0_0_, oauthservi0_.client_secret as client_s2_0_0_, oauthservi0_.created_ts as created_3_0_0_, oauthservi0_.is_enabled as is_enabl4_0_0_, oauthservi0_.client_endpoints as client_e5_0_0_, oauthservi0_.client_name as client_n6_0_0_, oauthservi0_.owner_id as owner_id8_0_0_, oauthservi0_.updated_ts as updated_7_0_0_ from oauth_service oauthservi0_ where oauthservi0_.id=? for update
2021-12-11 17:23:51,771 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@6002e944]
2021-12-11 17:23:51,771 DEBUG Visiting attribute path : clientSecret
2021-12-11 17:23:51,771 DEBUG Visiting attribute path : created
2021-12-11 17:23:51,771 DEBUG Visiting attribute path : enabled
2021-12-11 17:23:51,771 DEBUG Visiting attribute path : endpoints
2021-12-11 17:23:51,771 DEBUG Visiting attribute path : name
2021-12-11 17:23:51,771 DEBUG Visiting attribute path : owner
2021-12-11 17:23:51,771 DEBUG Adding QuerySpace : uid = <gen:1> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@2b08772d]
2021-12-11 17:23:51,771 DEBUG Visiting attribute path : updated
2021-12-11 17:23:51,771 DEBUG Building LoadPlan...
2021-12-11 17:23:51,771 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:51,772 DEBUG LoadPlan(entity=com.peterphi.usermanager.db.entity.OAuthServiceEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.usermanager.db.entity.OAuthServiceEntity, querySpaceUid=<gen:0>, path=com.peterphi.usermanager.db.entity.OAuthServiceEntity)
          - EntityAttributeFetchImpl(entity=com.peterphi.usermanager.db.entity.UserEntity, querySpaceUid=<gen:1>, path=com.peterphi.usermanager.db.entity.OAuthServiceEntity.owner)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.usermanager.db.entity.OAuthServiceEntity)
          - SQL table alias mapping - oauthservi0_
          - alias suffix - 0_
          - suffixed key columns - {id1_0_0_}

2021-12-11 17:23:51,772 DEBUG Static select for entity com.peterphi.usermanager.db.entity.OAuthServiceEntity [UPGRADE_SKIPLOCKED]: select oauthservi0_.id as id1_0_0_, oauthservi0_.client_secret as client_s2_0_0_, oauthservi0_.created_ts as created_3_0_0_, oauthservi0_.is_enabled as is_enabl4_0_0_, oauthservi0_.client_endpoints as client_e5_0_0_, oauthservi0_.client_name as client_n6_0_0_, oauthservi0_.owner_id as owner_id8_0_0_, oauthservi0_.updated_ts as updated_7_0_0_ from oauth_service oauthservi0_ where oauthservi0_.id=? for update
2021-12-11 17:23:51,772 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@78a8978a]
2021-12-11 17:23:51,772 DEBUG Visiting attribute path : clientSecret
2021-12-11 17:23:51,772 DEBUG Visiting attribute path : created
2021-12-11 17:23:51,772 DEBUG Visiting attribute path : enabled
2021-12-11 17:23:51,772 DEBUG Visiting attribute path : endpoints
2021-12-11 17:23:51,772 DEBUG Visiting attribute path : name
2021-12-11 17:23:51,772 DEBUG Visiting attribute path : owner
2021-12-11 17:23:51,772 DEBUG Adding QuerySpace : uid = <gen:1> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@7d4d8579]
2021-12-11 17:23:51,772 DEBUG Visiting attribute path : updated
2021-12-11 17:23:51,772 DEBUG Building LoadPlan...
2021-12-11 17:23:51,773 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:51,773 DEBUG LoadPlan(entity=com.peterphi.usermanager.db.entity.OAuthServiceEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.usermanager.db.entity.OAuthServiceEntity, querySpaceUid=<gen:0>, path=com.peterphi.usermanager.db.entity.OAuthServiceEntity)
          - EntityAttributeFetchImpl(entity=com.peterphi.usermanager.db.entity.UserEntity, querySpaceUid=<gen:1>, path=com.peterphi.usermanager.db.entity.OAuthServiceEntity.owner)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.usermanager.db.entity.OAuthServiceEntity)
          - SQL table alias mapping - oauthservi0_
          - alias suffix - 0_
          - suffixed key columns - {id1_0_0_}

2021-12-11 17:23:51,773 DEBUG Static select for entity com.peterphi.usermanager.db.entity.OAuthServiceEntity [FORCE]: select oauthservi0_.id as id1_0_0_, oauthservi0_.client_secret as client_s2_0_0_, oauthservi0_.created_ts as created_3_0_0_, oauthservi0_.is_enabled as is_enabl4_0_0_, oauthservi0_.client_endpoints as client_e5_0_0_, oauthservi0_.client_name as client_n6_0_0_, oauthservi0_.owner_id as owner_id8_0_0_, oauthservi0_.updated_ts as updated_7_0_0_ from oauth_service oauthservi0_ where oauthservi0_.id=? for update
2021-12-11 17:23:51,773 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@159424e2]
2021-12-11 17:23:51,773 DEBUG Visiting attribute path : clientSecret
2021-12-11 17:23:51,773 DEBUG Visiting attribute path : created
2021-12-11 17:23:51,773 DEBUG Visiting attribute path : enabled
2021-12-11 17:23:51,773 DEBUG Visiting attribute path : endpoints
2021-12-11 17:23:51,773 DEBUG Visiting attribute path : name
2021-12-11 17:23:51,773 DEBUG Visiting attribute path : owner
2021-12-11 17:23:51,773 DEBUG Adding QuerySpace : uid = <gen:1> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@1e54a6b1]
2021-12-11 17:23:51,773 DEBUG Visiting attribute path : updated
2021-12-11 17:23:51,774 DEBUG Building LoadPlan...
2021-12-11 17:23:51,774 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:51,774 DEBUG LoadPlan(entity=com.peterphi.usermanager.db.entity.OAuthServiceEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.usermanager.db.entity.OAuthServiceEntity, querySpaceUid=<gen:0>, path=com.peterphi.usermanager.db.entity.OAuthServiceEntity)
          - EntityAttributeFetchImpl(entity=com.peterphi.usermanager.db.entity.UserEntity, querySpaceUid=<gen:1>, path=com.peterphi.usermanager.db.entity.OAuthServiceEntity.owner)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.usermanager.db.entity.OAuthServiceEntity)
          - SQL table alias mapping - oauthservi0_
          - alias suffix - 0_
          - suffixed key columns - {id1_0_0_}

2021-12-11 17:23:51,774 DEBUG Static select for entity com.peterphi.usermanager.db.entity.OAuthServiceEntity [PESSIMISTIC_READ]: select oauthservi0_.id as id1_0_0_, oauthservi0_.client_secret as client_s2_0_0_, oauthservi0_.created_ts as created_3_0_0_, oauthservi0_.is_enabled as is_enabl4_0_0_, oauthservi0_.client_endpoints as client_e5_0_0_, oauthservi0_.client_name as client_n6_0_0_, oauthservi0_.owner_id as owner_id8_0_0_, oauthservi0_.updated_ts as updated_7_0_0_ from oauth_service oauthservi0_ where oauthservi0_.id=? for update
2021-12-11 17:23:51,774 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@f238e4f]
2021-12-11 17:23:51,775 DEBUG Visiting attribute path : clientSecret
2021-12-11 17:23:51,775 DEBUG Visiting attribute path : created
2021-12-11 17:23:51,775 DEBUG Visiting attribute path : enabled
2021-12-11 17:23:51,775 DEBUG Visiting attribute path : endpoints
2021-12-11 17:23:51,775 DEBUG Visiting attribute path : name
2021-12-11 17:23:51,775 DEBUG Visiting attribute path : owner
2021-12-11 17:23:51,775 DEBUG Adding QuerySpace : uid = <gen:1> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@75fe1619]
2021-12-11 17:23:51,775 DEBUG Visiting attribute path : updated
2021-12-11 17:23:51,775 DEBUG Building LoadPlan...
2021-12-11 17:23:51,775 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:51,776 DEBUG LoadPlan(entity=com.peterphi.usermanager.db.entity.OAuthServiceEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.usermanager.db.entity.OAuthServiceEntity, querySpaceUid=<gen:0>, path=com.peterphi.usermanager.db.entity.OAuthServiceEntity)
          - EntityAttributeFetchImpl(entity=com.peterphi.usermanager.db.entity.UserEntity, querySpaceUid=<gen:1>, path=com.peterphi.usermanager.db.entity.OAuthServiceEntity.owner)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.usermanager.db.entity.OAuthServiceEntity)
          - SQL table alias mapping - oauthservi0_
          - alias suffix - 0_
          - suffixed key columns - {id1_0_0_}

2021-12-11 17:23:51,776 DEBUG Static select for entity com.peterphi.usermanager.db.entity.OAuthServiceEntity [PESSIMISTIC_WRITE]: select oauthservi0_.id as id1_0_0_, oauthservi0_.client_secret as client_s2_0_0_, oauthservi0_.created_ts as created_3_0_0_, oauthservi0_.is_enabled as is_enabl4_0_0_, oauthservi0_.client_endpoints as client_e5_0_0_, oauthservi0_.client_name as client_n6_0_0_, oauthservi0_.owner_id as owner_id8_0_0_, oauthservi0_.updated_ts as updated_7_0_0_ from oauth_service oauthservi0_ where oauthservi0_.id=? for update
2021-12-11 17:23:51,776 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@4e245739]
2021-12-11 17:23:51,776 DEBUG Visiting attribute path : clientSecret
2021-12-11 17:23:51,776 DEBUG Visiting attribute path : created
2021-12-11 17:23:51,776 DEBUG Visiting attribute path : enabled
2021-12-11 17:23:51,776 DEBUG Visiting attribute path : endpoints
2021-12-11 17:23:51,776 DEBUG Visiting attribute path : name
2021-12-11 17:23:51,776 DEBUG Visiting attribute path : owner
2021-12-11 17:23:51,776 DEBUG Adding QuerySpace : uid = <gen:1> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@469a7575]
2021-12-11 17:23:51,776 DEBUG Visiting attribute path : updated
2021-12-11 17:23:51,776 DEBUG Building LoadPlan...
2021-12-11 17:23:51,777 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:51,777 DEBUG LoadPlan(entity=com.peterphi.usermanager.db.entity.OAuthServiceEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.usermanager.db.entity.OAuthServiceEntity, querySpaceUid=<gen:0>, path=com.peterphi.usermanager.db.entity.OAuthServiceEntity)
          - EntityAttributeFetchImpl(entity=com.peterphi.usermanager.db.entity.UserEntity, querySpaceUid=<gen:1>, path=com.peterphi.usermanager.db.entity.OAuthServiceEntity.owner)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.usermanager.db.entity.OAuthServiceEntity)
          - SQL table alias mapping - oauthservi0_
          - alias suffix - 0_
          - suffixed key columns - {id1_0_0_}

2021-12-11 17:23:51,777 DEBUG Static select for entity com.peterphi.usermanager.db.entity.OAuthServiceEntity [PESSIMISTIC_FORCE_INCREMENT]: select oauthservi0_.id as id1_0_0_, oauthservi0_.client_secret as client_s2_0_0_, oauthservi0_.created_ts as created_3_0_0_, oauthservi0_.is_enabled as is_enabl4_0_0_, oauthservi0_.client_endpoints as client_e5_0_0_, oauthservi0_.client_name as client_n6_0_0_, oauthservi0_.owner_id as owner_id8_0_0_, oauthservi0_.updated_ts as updated_7_0_0_ from oauth_service oauthservi0_ where oauthservi0_.id=? for update
2021-12-11 17:23:51,777 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@4351ed61]
2021-12-11 17:23:51,777 DEBUG Visiting attribute path : clientSecret
2021-12-11 17:23:51,777 DEBUG Visiting attribute path : created
2021-12-11 17:23:51,777 DEBUG Visiting attribute path : enabled
2021-12-11 17:23:51,777 DEBUG Visiting attribute path : endpoints
2021-12-11 17:23:51,777 DEBUG Visiting attribute path : name
2021-12-11 17:23:51,777 DEBUG Visiting attribute path : owner
2021-12-11 17:23:51,777 DEBUG Adding QuerySpace : uid = <gen:1> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@45e617c4]
2021-12-11 17:23:51,777 DEBUG Visiting attribute path : updated
2021-12-11 17:23:51,777 DEBUG Building LoadPlan...
2021-12-11 17:23:51,778 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:51,778 DEBUG LoadPlan(entity=com.peterphi.usermanager.db.entity.OAuthServiceEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.usermanager.db.entity.OAuthServiceEntity, querySpaceUid=<gen:0>, path=com.peterphi.usermanager.db.entity.OAuthServiceEntity)
          - EntityAttributeFetchImpl(entity=com.peterphi.usermanager.db.entity.UserEntity, querySpaceUid=<gen:1>, path=com.peterphi.usermanager.db.entity.OAuthServiceEntity.owner)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.usermanager.db.entity.OAuthServiceEntity)
          - SQL table alias mapping - oauthservi0_
          - alias suffix - 0_
          - suffixed key columns - {id1_0_0_}

2021-12-11 17:23:51,778 DEBUG Static select for entity com.peterphi.usermanager.db.entity.OAuthServiceEntity [OPTIMISTIC]: select oauthservi0_.id as id1_0_0_, oauthservi0_.client_secret as client_s2_0_0_, oauthservi0_.created_ts as created_3_0_0_, oauthservi0_.is_enabled as is_enabl4_0_0_, oauthservi0_.client_endpoints as client_e5_0_0_, oauthservi0_.client_name as client_n6_0_0_, oauthservi0_.owner_id as owner_id8_0_0_, oauthservi0_.updated_ts as updated_7_0_0_ from oauth_service oauthservi0_ where oauthservi0_.id=?
2021-12-11 17:23:51,778 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@5042e3d0]
2021-12-11 17:23:51,778 DEBUG Visiting attribute path : clientSecret
2021-12-11 17:23:51,778 DEBUG Visiting attribute path : created
2021-12-11 17:23:51,778 DEBUG Visiting attribute path : enabled
2021-12-11 17:23:51,778 DEBUG Visiting attribute path : endpoints
2021-12-11 17:23:51,778 DEBUG Visiting attribute path : name
2021-12-11 17:23:51,778 DEBUG Visiting attribute path : owner
2021-12-11 17:23:51,778 DEBUG Adding QuerySpace : uid = <gen:1> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@348137e8]
2021-12-11 17:23:51,778 DEBUG Visiting attribute path : updated
2021-12-11 17:23:51,778 DEBUG Building LoadPlan...
2021-12-11 17:23:51,778 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:51,778 DEBUG LoadPlan(entity=com.peterphi.usermanager.db.entity.OAuthServiceEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.usermanager.db.entity.OAuthServiceEntity, querySpaceUid=<gen:0>, path=com.peterphi.usermanager.db.entity.OAuthServiceEntity)
          - EntityAttributeFetchImpl(entity=com.peterphi.usermanager.db.entity.UserEntity, querySpaceUid=<gen:1>, path=com.peterphi.usermanager.db.entity.OAuthServiceEntity.owner)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.usermanager.db.entity.OAuthServiceEntity)
          - SQL table alias mapping - oauthservi0_
          - alias suffix - 0_
          - suffixed key columns - {id1_0_0_}

2021-12-11 17:23:51,778 DEBUG Static select for entity com.peterphi.usermanager.db.entity.OAuthServiceEntity [OPTIMISTIC_FORCE_INCREMENT]: select oauthservi0_.id as id1_0_0_, oauthservi0_.client_secret as client_s2_0_0_, oauthservi0_.created_ts as created_3_0_0_, oauthservi0_.is_enabled as is_enabl4_0_0_, oauthservi0_.client_endpoints as client_e5_0_0_, oauthservi0_.client_name as client_n6_0_0_, oauthservi0_.owner_id as owner_id8_0_0_, oauthservi0_.updated_ts as updated_7_0_0_ from oauth_service oauthservi0_ where oauthservi0_.id=?
2021-12-11 17:23:51,779 DEBUG Static select for action ACTION_MERGE on entity com.peterphi.usermanager.db.entity.OAuthServiceEntity: select oauthservi0_.id as id1_0_0_, oauthservi0_.client_secret as client_s2_0_0_, oauthservi0_.created_ts as created_3_0_0_, oauthservi0_.is_enabled as is_enabl4_0_0_, oauthservi0_.client_endpoints as client_e5_0_0_, oauthservi0_.client_name as client_n6_0_0_, oauthservi0_.owner_id as owner_id8_0_0_, oauthservi0_.updated_ts as updated_7_0_0_ from oauth_service oauthservi0_ where oauthservi0_.id=?
2021-12-11 17:23:51,779 DEBUG Static select for action ACTION_REFRESH on entity com.peterphi.usermanager.db.entity.OAuthServiceEntity: select oauthservi0_.id as id1_0_0_, oauthservi0_.client_secret as client_s2_0_0_, oauthservi0_.created_ts as created_3_0_0_, oauthservi0_.is_enabled as is_enabl4_0_0_, oauthservi0_.client_endpoints as client_e5_0_0_, oauthservi0_.client_name as client_n6_0_0_, oauthservi0_.owner_id as owner_id8_0_0_, oauthservi0_.updated_ts as updated_7_0_0_ from oauth_service oauthservi0_ where oauthservi0_.id=?
2021-12-11 17:23:51,779 DEBUG Static SQL for entity: com.peterphi.usermanager.db.entity.RoleEntity
2021-12-11 17:23:51,779 DEBUG  Version select: select id from role_definition where id =?
2021-12-11 17:23:51,779 DEBUG  Snapshot select: select roleentity_.id, roleentity_.caption as caption2_3_ from role_definition roleentity_ where roleentity_.id=?
2021-12-11 17:23:51,779 DEBUG  Insert 0: insert into role_definition (caption, id) values (?, ?)
2021-12-11 17:23:51,779 DEBUG  Update 0: update role_definition set caption=? where id=?
2021-12-11 17:23:51,779 DEBUG  Delete 0: delete from role_definition where id=?
2021-12-11 17:23:51,779 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@412c5e8b]
2021-12-11 17:23:51,779 DEBUG Visiting attribute path : caption
2021-12-11 17:23:51,779 DEBUG Visiting attribute path : members
2021-12-11 17:23:51,779 DEBUG Adding QuerySpace : uid = <gen:1> -> org.hibernate.loader.plan.build.internal.spaces.CollectionQuerySpaceImpl@3b0c3951]
2021-12-11 17:23:51,779 DEBUG Adding QuerySpace : uid = <gen:2> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@60f77af]
2021-12-11 17:23:51,779 DEBUG Building LoadPlan...
2021-12-11 17:23:51,780 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:51,780 DEBUG LoadPlan(entity=com.peterphi.usermanager.db.entity.RoleEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.usermanager.db.entity.RoleEntity, querySpaceUid=<gen:0>, path=com.peterphi.usermanager.db.entity.RoleEntity)
          - CollectionAttributeFetchImpl(collection=com.peterphi.usermanager.db.entity.RoleEntity.members, querySpaceUid=<gen:1>, path=com.peterphi.usermanager.db.entity.RoleEntity.members)
             - (collection element) CollectionFetchableElementEntityGraph(entity=com.peterphi.usermanager.db.entity.UserEntity, querySpaceUid=<gen:2>, path=com.peterphi.usermanager.db.entity.RoleEntity.members.<elements>)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.usermanager.db.entity.RoleEntity)
          - SQL table alias mapping - roleentity0_
          - alias suffix - 0_
          - suffixed key columns - {id1_3_0_}

2021-12-11 17:23:51,780 DEBUG Static select for entity com.peterphi.usermanager.db.entity.RoleEntity [NONE]: select roleentity0_.id as id1_3_0_, roleentity0_.caption as caption2_3_0_ from role_definition roleentity0_ where roleentity0_.id=?
2021-12-11 17:23:51,780 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@2574a9e3]
2021-12-11 17:23:51,780 DEBUG Visiting attribute path : caption
2021-12-11 17:23:51,780 DEBUG Visiting attribute path : members
2021-12-11 17:23:51,780 DEBUG Adding QuerySpace : uid = <gen:1> -> org.hibernate.loader.plan.build.internal.spaces.CollectionQuerySpaceImpl@422ab737]
2021-12-11 17:23:51,780 DEBUG Adding QuerySpace : uid = <gen:2> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@3fe512d2]
2021-12-11 17:23:51,780 DEBUG Building LoadPlan...
2021-12-11 17:23:51,780 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:51,781 DEBUG LoadPlan(entity=com.peterphi.usermanager.db.entity.RoleEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.usermanager.db.entity.RoleEntity, querySpaceUid=<gen:0>, path=com.peterphi.usermanager.db.entity.RoleEntity)
          - CollectionAttributeFetchImpl(collection=com.peterphi.usermanager.db.entity.RoleEntity.members, querySpaceUid=<gen:1>, path=com.peterphi.usermanager.db.entity.RoleEntity.members)
             - (collection element) CollectionFetchableElementEntityGraph(entity=com.peterphi.usermanager.db.entity.UserEntity, querySpaceUid=<gen:2>, path=com.peterphi.usermanager.db.entity.RoleEntity.members.<elements>)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.usermanager.db.entity.RoleEntity)
          - SQL table alias mapping - roleentity0_
          - alias suffix - 0_
          - suffixed key columns - {id1_3_0_}

2021-12-11 17:23:51,781 DEBUG Static select for entity com.peterphi.usermanager.db.entity.RoleEntity [READ]: select roleentity0_.id as id1_3_0_, roleentity0_.caption as caption2_3_0_ from role_definition roleentity0_ where roleentity0_.id=?
2021-12-11 17:23:51,781 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@3fde8f7c]
2021-12-11 17:23:51,781 DEBUG Visiting attribute path : caption
2021-12-11 17:23:51,781 DEBUG Visiting attribute path : members
2021-12-11 17:23:51,781 DEBUG Adding QuerySpace : uid = <gen:1> -> org.hibernate.loader.plan.build.internal.spaces.CollectionQuerySpaceImpl@6dce59e]
2021-12-11 17:23:51,781 DEBUG Adding QuerySpace : uid = <gen:2> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@11381415]
2021-12-11 17:23:51,781 DEBUG Building LoadPlan...
2021-12-11 17:23:51,781 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:51,781 DEBUG LoadPlan(entity=com.peterphi.usermanager.db.entity.RoleEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.usermanager.db.entity.RoleEntity, querySpaceUid=<gen:0>, path=com.peterphi.usermanager.db.entity.RoleEntity)
          - CollectionAttributeFetchImpl(collection=com.peterphi.usermanager.db.entity.RoleEntity.members, querySpaceUid=<gen:1>, path=com.peterphi.usermanager.db.entity.RoleEntity.members)
             - (collection element) CollectionFetchableElementEntityGraph(entity=com.peterphi.usermanager.db.entity.UserEntity, querySpaceUid=<gen:2>, path=com.peterphi.usermanager.db.entity.RoleEntity.members.<elements>)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.usermanager.db.entity.RoleEntity)
          - SQL table alias mapping - roleentity0_
          - alias suffix - 0_
          - suffixed key columns - {id1_3_0_}

2021-12-11 17:23:51,781 DEBUG Static select for entity com.peterphi.usermanager.db.entity.RoleEntity [UPGRADE]: select roleentity0_.id as id1_3_0_, roleentity0_.caption as caption2_3_0_ from role_definition roleentity0_ where roleentity0_.id=? for update
2021-12-11 17:23:51,781 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@5ad6cc21]
2021-12-11 17:23:51,781 DEBUG Visiting attribute path : caption
2021-12-11 17:23:51,781 DEBUG Visiting attribute path : members
2021-12-11 17:23:51,781 DEBUG Adding QuerySpace : uid = <gen:1> -> org.hibernate.loader.plan.build.internal.spaces.CollectionQuerySpaceImpl@691124ee]
2021-12-11 17:23:51,782 DEBUG Adding QuerySpace : uid = <gen:2> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@38d80d65]
2021-12-11 17:23:51,782 DEBUG Building LoadPlan...
2021-12-11 17:23:51,782 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:51,782 DEBUG LoadPlan(entity=com.peterphi.usermanager.db.entity.RoleEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.usermanager.db.entity.RoleEntity, querySpaceUid=<gen:0>, path=com.peterphi.usermanager.db.entity.RoleEntity)
          - CollectionAttributeFetchImpl(collection=com.peterphi.usermanager.db.entity.RoleEntity.members, querySpaceUid=<gen:1>, path=com.peterphi.usermanager.db.entity.RoleEntity.members)
             - (collection element) CollectionFetchableElementEntityGraph(entity=com.peterphi.usermanager.db.entity.UserEntity, querySpaceUid=<gen:2>, path=com.peterphi.usermanager.db.entity.RoleEntity.members.<elements>)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.usermanager.db.entity.RoleEntity)
          - SQL table alias mapping - roleentity0_
          - alias suffix - 0_
          - suffixed key columns - {id1_3_0_}

2021-12-11 17:23:51,782 DEBUG Static select for entity com.peterphi.usermanager.db.entity.RoleEntity [UPGRADE_NOWAIT]: select roleentity0_.id as id1_3_0_, roleentity0_.caption as caption2_3_0_ from role_definition roleentity0_ where roleentity0_.id=? for update
2021-12-11 17:23:51,782 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@5403799b]
2021-12-11 17:23:51,782 DEBUG Visiting attribute path : caption
2021-12-11 17:23:51,782 DEBUG Visiting attribute path : members
2021-12-11 17:23:51,782 DEBUG Adding QuerySpace : uid = <gen:1> -> org.hibernate.loader.plan.build.internal.spaces.CollectionQuerySpaceImpl@3ad8717d]
2021-12-11 17:23:51,782 DEBUG Adding QuerySpace : uid = <gen:2> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@4293e066]
2021-12-11 17:23:51,782 DEBUG Building LoadPlan...
2021-12-11 17:23:51,782 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:51,783 DEBUG LoadPlan(entity=com.peterphi.usermanager.db.entity.RoleEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.usermanager.db.entity.RoleEntity, querySpaceUid=<gen:0>, path=com.peterphi.usermanager.db.entity.RoleEntity)
          - CollectionAttributeFetchImpl(collection=com.peterphi.usermanager.db.entity.RoleEntity.members, querySpaceUid=<gen:1>, path=com.peterphi.usermanager.db.entity.RoleEntity.members)
             - (collection element) CollectionFetchableElementEntityGraph(entity=com.peterphi.usermanager.db.entity.UserEntity, querySpaceUid=<gen:2>, path=com.peterphi.usermanager.db.entity.RoleEntity.members.<elements>)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.usermanager.db.entity.RoleEntity)
          - SQL table alias mapping - roleentity0_
          - alias suffix - 0_
          - suffixed key columns - {id1_3_0_}

2021-12-11 17:23:51,783 DEBUG Static select for entity com.peterphi.usermanager.db.entity.RoleEntity [UPGRADE_SKIPLOCKED]: select roleentity0_.id as id1_3_0_, roleentity0_.caption as caption2_3_0_ from role_definition roleentity0_ where roleentity0_.id=? for update
2021-12-11 17:23:51,783 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@d13960e]
2021-12-11 17:23:51,783 DEBUG Visiting attribute path : caption
2021-12-11 17:23:51,783 DEBUG Visiting attribute path : members
2021-12-11 17:23:51,783 DEBUG Adding QuerySpace : uid = <gen:1> -> org.hibernate.loader.plan.build.internal.spaces.CollectionQuerySpaceImpl@5e593b08]
2021-12-11 17:23:51,783 DEBUG Adding QuerySpace : uid = <gen:2> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@3946075]
2021-12-11 17:23:51,783 DEBUG Building LoadPlan...
2021-12-11 17:23:51,783 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:51,783 DEBUG LoadPlan(entity=com.peterphi.usermanager.db.entity.RoleEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.usermanager.db.entity.RoleEntity, querySpaceUid=<gen:0>, path=com.peterphi.usermanager.db.entity.RoleEntity)
          - CollectionAttributeFetchImpl(collection=com.peterphi.usermanager.db.entity.RoleEntity.members, querySpaceUid=<gen:1>, path=com.peterphi.usermanager.db.entity.RoleEntity.members)
             - (collection element) CollectionFetchableElementEntityGraph(entity=com.peterphi.usermanager.db.entity.UserEntity, querySpaceUid=<gen:2>, path=com.peterphi.usermanager.db.entity.RoleEntity.members.<elements>)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.usermanager.db.entity.RoleEntity)
          - SQL table alias mapping - roleentity0_
          - alias suffix - 0_
          - suffixed key columns - {id1_3_0_}

2021-12-11 17:23:51,783 DEBUG Static select for entity com.peterphi.usermanager.db.entity.RoleEntity [FORCE]: select roleentity0_.id as id1_3_0_, roleentity0_.caption as caption2_3_0_ from role_definition roleentity0_ where roleentity0_.id=? for update
2021-12-11 17:23:51,783 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@122635ef]
2021-12-11 17:23:51,783 DEBUG Visiting attribute path : caption
2021-12-11 17:23:51,783 DEBUG Visiting attribute path : members
2021-12-11 17:23:51,783 DEBUG Adding QuerySpace : uid = <gen:1> -> org.hibernate.loader.plan.build.internal.spaces.CollectionQuerySpaceImpl@3d53e6f7]
2021-12-11 17:23:51,784 DEBUG Adding QuerySpace : uid = <gen:2> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@1de4bee0]
2021-12-11 17:23:51,784 DEBUG Building LoadPlan...
2021-12-11 17:23:51,784 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:51,784 DEBUG LoadPlan(entity=com.peterphi.usermanager.db.entity.RoleEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.usermanager.db.entity.RoleEntity, querySpaceUid=<gen:0>, path=com.peterphi.usermanager.db.entity.RoleEntity)
          - CollectionAttributeFetchImpl(collection=com.peterphi.usermanager.db.entity.RoleEntity.members, querySpaceUid=<gen:1>, path=com.peterphi.usermanager.db.entity.RoleEntity.members)
             - (collection element) CollectionFetchableElementEntityGraph(entity=com.peterphi.usermanager.db.entity.UserEntity, querySpaceUid=<gen:2>, path=com.peterphi.usermanager.db.entity.RoleEntity.members.<elements>)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.usermanager.db.entity.RoleEntity)
          - SQL table alias mapping - roleentity0_
          - alias suffix - 0_
          - suffixed key columns - {id1_3_0_}

2021-12-11 17:23:51,784 DEBUG Static select for entity com.peterphi.usermanager.db.entity.RoleEntity [PESSIMISTIC_READ]: select roleentity0_.id as id1_3_0_, roleentity0_.caption as caption2_3_0_ from role_definition roleentity0_ where roleentity0_.id=? for update
2021-12-11 17:23:51,784 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@3ece79fe]
2021-12-11 17:23:51,784 DEBUG Visiting attribute path : caption
2021-12-11 17:23:51,784 DEBUG Visiting attribute path : members
2021-12-11 17:23:51,784 DEBUG Adding QuerySpace : uid = <gen:1> -> org.hibernate.loader.plan.build.internal.spaces.CollectionQuerySpaceImpl@1e01b133]
2021-12-11 17:23:51,784 DEBUG Adding QuerySpace : uid = <gen:2> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@262a1fad]
2021-12-11 17:23:51,784 DEBUG Building LoadPlan...
2021-12-11 17:23:51,784 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:51,785 DEBUG LoadPlan(entity=com.peterphi.usermanager.db.entity.RoleEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.usermanager.db.entity.RoleEntity, querySpaceUid=<gen:0>, path=com.peterphi.usermanager.db.entity.RoleEntity)
          - CollectionAttributeFetchImpl(collection=com.peterphi.usermanager.db.entity.RoleEntity.members, querySpaceUid=<gen:1>, path=com.peterphi.usermanager.db.entity.RoleEntity.members)
             - (collection element) CollectionFetchableElementEntityGraph(entity=com.peterphi.usermanager.db.entity.UserEntity, querySpaceUid=<gen:2>, path=com.peterphi.usermanager.db.entity.RoleEntity.members.<elements>)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.usermanager.db.entity.RoleEntity)
          - SQL table alias mapping - roleentity0_
          - alias suffix - 0_
          - suffixed key columns - {id1_3_0_}

2021-12-11 17:23:51,785 DEBUG Static select for entity com.peterphi.usermanager.db.entity.RoleEntity [PESSIMISTIC_WRITE]: select roleentity0_.id as id1_3_0_, roleentity0_.caption as caption2_3_0_ from role_definition roleentity0_ where roleentity0_.id=? for update
2021-12-11 17:23:51,785 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@6be6931f]
2021-12-11 17:23:51,785 DEBUG Visiting attribute path : caption
2021-12-11 17:23:51,785 DEBUG Visiting attribute path : members
2021-12-11 17:23:51,785 DEBUG Adding QuerySpace : uid = <gen:1> -> org.hibernate.loader.plan.build.internal.spaces.CollectionQuerySpaceImpl@78da899f]
2021-12-11 17:23:51,785 DEBUG Adding QuerySpace : uid = <gen:2> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@e7b265e]
2021-12-11 17:23:51,785 DEBUG Building LoadPlan...
2021-12-11 17:23:51,785 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:51,785 DEBUG LoadPlan(entity=com.peterphi.usermanager.db.entity.RoleEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.usermanager.db.entity.RoleEntity, querySpaceUid=<gen:0>, path=com.peterphi.usermanager.db.entity.RoleEntity)
          - CollectionAttributeFetchImpl(collection=com.peterphi.usermanager.db.entity.RoleEntity.members, querySpaceUid=<gen:1>, path=com.peterphi.usermanager.db.entity.RoleEntity.members)
             - (collection element) CollectionFetchableElementEntityGraph(entity=com.peterphi.usermanager.db.entity.UserEntity, querySpaceUid=<gen:2>, path=com.peterphi.usermanager.db.entity.RoleEntity.members.<elements>)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.usermanager.db.entity.RoleEntity)
          - SQL table alias mapping - roleentity0_
          - alias suffix - 0_
          - suffixed key columns - {id1_3_0_}

2021-12-11 17:23:51,785 DEBUG Static select for entity com.peterphi.usermanager.db.entity.RoleEntity [PESSIMISTIC_FORCE_INCREMENT]: select roleentity0_.id as id1_3_0_, roleentity0_.caption as caption2_3_0_ from role_definition roleentity0_ where roleentity0_.id=? for update
2021-12-11 17:23:51,785 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@51da32e5]
2021-12-11 17:23:51,785 DEBUG Visiting attribute path : caption
2021-12-11 17:23:51,785 DEBUG Visiting attribute path : members
2021-12-11 17:23:51,786 DEBUG Adding QuerySpace : uid = <gen:1> -> org.hibernate.loader.plan.build.internal.spaces.CollectionQuerySpaceImpl@1fecfaea]
2021-12-11 17:23:51,786 DEBUG Adding QuerySpace : uid = <gen:2> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@4872669f]
2021-12-11 17:23:51,786 DEBUG Building LoadPlan...
2021-12-11 17:23:51,786 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:51,786 DEBUG LoadPlan(entity=com.peterphi.usermanager.db.entity.RoleEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.usermanager.db.entity.RoleEntity, querySpaceUid=<gen:0>, path=com.peterphi.usermanager.db.entity.RoleEntity)
          - CollectionAttributeFetchImpl(collection=com.peterphi.usermanager.db.entity.RoleEntity.members, querySpaceUid=<gen:1>, path=com.peterphi.usermanager.db.entity.RoleEntity.members)
             - (collection element) CollectionFetchableElementEntityGraph(entity=com.peterphi.usermanager.db.entity.UserEntity, querySpaceUid=<gen:2>, path=com.peterphi.usermanager.db.entity.RoleEntity.members.<elements>)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.usermanager.db.entity.RoleEntity)
          - SQL table alias mapping - roleentity0_
          - alias suffix - 0_
          - suffixed key columns - {id1_3_0_}

2021-12-11 17:23:51,786 DEBUG Static select for entity com.peterphi.usermanager.db.entity.RoleEntity [OPTIMISTIC]: select roleentity0_.id as id1_3_0_, roleentity0_.caption as caption2_3_0_ from role_definition roleentity0_ where roleentity0_.id=?
2021-12-11 17:23:51,786 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@483f286e]
2021-12-11 17:23:51,786 DEBUG Visiting attribute path : caption
2021-12-11 17:23:51,786 DEBUG Visiting attribute path : members
2021-12-11 17:23:51,786 DEBUG Adding QuerySpace : uid = <gen:1> -> org.hibernate.loader.plan.build.internal.spaces.CollectionQuerySpaceImpl@33f2cfda]
2021-12-11 17:23:51,786 DEBUG Adding QuerySpace : uid = <gen:2> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@68ef01a5]
2021-12-11 17:23:51,786 DEBUG Building LoadPlan...
2021-12-11 17:23:51,786 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:51,786 DEBUG LoadPlan(entity=com.peterphi.usermanager.db.entity.RoleEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.usermanager.db.entity.RoleEntity, querySpaceUid=<gen:0>, path=com.peterphi.usermanager.db.entity.RoleEntity)
          - CollectionAttributeFetchImpl(collection=com.peterphi.usermanager.db.entity.RoleEntity.members, querySpaceUid=<gen:1>, path=com.peterphi.usermanager.db.entity.RoleEntity.members)
             - (collection element) CollectionFetchableElementEntityGraph(entity=com.peterphi.usermanager.db.entity.UserEntity, querySpaceUid=<gen:2>, path=com.peterphi.usermanager.db.entity.RoleEntity.members.<elements>)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.usermanager.db.entity.RoleEntity)
          - SQL table alias mapping - roleentity0_
          - alias suffix - 0_
          - suffixed key columns - {id1_3_0_}

2021-12-11 17:23:51,787 DEBUG Static select for entity com.peterphi.usermanager.db.entity.RoleEntity [OPTIMISTIC_FORCE_INCREMENT]: select roleentity0_.id as id1_3_0_, roleentity0_.caption as caption2_3_0_ from role_definition roleentity0_ where roleentity0_.id=?
2021-12-11 17:23:51,790 DEBUG Static select for action ACTION_MERGE on entity com.peterphi.usermanager.db.entity.RoleEntity: select roleentity0_.id as id1_3_1_, roleentity0_.caption as caption2_3_1_, members1_.role_id as role_id1_5_3_, userentity2_.id as user_id2_5_3_, userentity2_.id as id1_4_0_, userentity2_.created_ts as created_2_4_0_, userentity2_.date_format as date_for3_4_0_, userentity2_.email as email4_4_0_, userentity2_.last_login_ts as last_log5_4_0_, userentity2_.is_local as is_local6_4_0_, userentity2_.name as name7_4_0_, userentity2_.password as password8_4_0_, userentity2_.local_session_id as local_se9_4_0_, userentity2_.date_timezone as date_ti10_4_0_ from role_definition roleentity0_ left outer join user_has_role members1_ on roleentity0_.id=members1_.role_id left outer join user_account userentity2_ on members1_.user_id=userentity2_.id where roleentity0_.id=? order by userentity2_.id desc
2021-12-11 17:23:51,790 DEBUG Static select for action ACTION_REFRESH on entity com.peterphi.usermanager.db.entity.RoleEntity: select roleentity0_.id as id1_3_1_, roleentity0_.caption as caption2_3_1_, members1_.role_id as role_id1_5_3_, userentity2_.id as user_id2_5_3_, userentity2_.id as id1_4_0_, userentity2_.created_ts as created_2_4_0_, userentity2_.date_format as date_for3_4_0_, userentity2_.email as email4_4_0_, userentity2_.last_login_ts as last_log5_4_0_, userentity2_.is_local as is_local6_4_0_, userentity2_.name as name7_4_0_, userentity2_.password as password8_4_0_, userentity2_.local_session_id as local_se9_4_0_, userentity2_.date_timezone as date_ti10_4_0_ from role_definition roleentity0_ left outer join user_has_role members1_ on roleentity0_.id=members1_.role_id left outer join user_account userentity2_ on members1_.user_id=userentity2_.id where roleentity0_.id=? order by userentity2_.id desc
2021-12-11 17:23:51,790 DEBUG Static SQL for entity: com.peterphi.usermanager.db.entity.OAuthSessionEntity
2021-12-11 17:23:51,790 DEBUG  Version select: select updated_ts from oauth_session where id =?
2021-12-11 17:23:51,790 DEBUG  Snapshot select: select oauthsessi_.id, oauthsessi_.is_active as is_activ2_1_, oauthsessi_.authorisation_code as authoris3_1_, oauthsessi_.context_id as context_9_1_, oauthsessi_.created_ts as created_4_1_, oauthsessi_.expires_ts as expires_5_1_, oauthsessi_.initiator_detail as initiato6_1_, oauthsessi_.current_token as current_7_1_, oauthsessi_.updated_ts as updated_8_1_ from oauth_session oauthsessi_ where oauthsessi_.id=?
2021-12-11 17:23:51,790 DEBUG  Insert 0: insert into oauth_session (is_active, authorisation_code, context_id, created_ts, expires_ts, initiator_detail, current_token, updated_ts, id) values (?, ?, ?, ?, ?, ?, ?, ?, ?)
2021-12-11 17:23:51,790 DEBUG  Update 0: update oauth_session set is_active=?, authorisation_code=?, context_id=?, created_ts=?, expires_ts=?, initiator_detail=?, current_token=?, updated_ts=? where id=? and updated_ts=?
2021-12-11 17:23:51,790 DEBUG  Delete 0: delete from oauth_session where id=? and updated_ts=?
2021-12-11 17:23:51,790 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@4aeb0e2b]
2021-12-11 17:23:51,791 DEBUG Visiting attribute path : alive
2021-12-11 17:23:51,791 DEBUG Visiting attribute path : authorisationCode
2021-12-11 17:23:51,791 DEBUG Visiting attribute path : context
2021-12-11 17:23:51,791 DEBUG Adding QuerySpace : uid = <gen:1> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@47b33e07]
2021-12-11 17:23:51,791 DEBUG Visiting attribute path : created
2021-12-11 17:23:51,791 DEBUG Visiting attribute path : expires
2021-12-11 17:23:51,791 DEBUG Visiting attribute path : initiator
2021-12-11 17:23:51,791 DEBUG Visiting attribute path : token
2021-12-11 17:23:51,791 DEBUG Visiting attribute path : updated
2021-12-11 17:23:51,791 DEBUG Building LoadPlan...
2021-12-11 17:23:51,791 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:51,791 DEBUG LoadPlan(entity=com.peterphi.usermanager.db.entity.OAuthSessionEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.usermanager.db.entity.OAuthSessionEntity, querySpaceUid=<gen:0>, path=com.peterphi.usermanager.db.entity.OAuthSessionEntity)
          - EntityAttributeFetchImpl(entity=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity, querySpaceUid=<gen:1>, path=com.peterphi.usermanager.db.entity.OAuthSessionEntity.context)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.usermanager.db.entity.OAuthSessionEntity)
          - SQL table alias mapping - oauthsessi0_
          - alias suffix - 0_
          - suffixed key columns - {id1_1_0_}

2021-12-11 17:23:51,791 DEBUG Static select for entity com.peterphi.usermanager.db.entity.OAuthSessionEntity [NONE]: select oauthsessi0_.id as id1_1_0_, oauthsessi0_.is_active as is_activ2_1_0_, oauthsessi0_.authorisation_code as authoris3_1_0_, oauthsessi0_.context_id as context_9_1_0_, oauthsessi0_.created_ts as created_4_1_0_, oauthsessi0_.expires_ts as expires_5_1_0_, oauthsessi0_.initiator_detail as initiato6_1_0_, oauthsessi0_.current_token as current_7_1_0_, oauthsessi0_.updated_ts as updated_8_1_0_ from oauth_session oauthsessi0_ where oauthsessi0_.id=?
2021-12-11 17:23:51,791 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@7126e26]
2021-12-11 17:23:51,791 DEBUG Visiting attribute path : alive
2021-12-11 17:23:51,791 DEBUG Visiting attribute path : authorisationCode
2021-12-11 17:23:51,791 DEBUG Visiting attribute path : context
2021-12-11 17:23:51,791 DEBUG Adding QuerySpace : uid = <gen:1> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@13ed066e]
2021-12-11 17:23:51,791 DEBUG Visiting attribute path : created
2021-12-11 17:23:51,791 DEBUG Visiting attribute path : expires
2021-12-11 17:23:51,791 DEBUG Visiting attribute path : initiator
2021-12-11 17:23:51,791 DEBUG Visiting attribute path : token
2021-12-11 17:23:51,791 DEBUG Visiting attribute path : updated
2021-12-11 17:23:51,791 DEBUG Building LoadPlan...
2021-12-11 17:23:51,792 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:51,792 DEBUG LoadPlan(entity=com.peterphi.usermanager.db.entity.OAuthSessionEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.usermanager.db.entity.OAuthSessionEntity, querySpaceUid=<gen:0>, path=com.peterphi.usermanager.db.entity.OAuthSessionEntity)
          - EntityAttributeFetchImpl(entity=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity, querySpaceUid=<gen:1>, path=com.peterphi.usermanager.db.entity.OAuthSessionEntity.context)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.usermanager.db.entity.OAuthSessionEntity)
          - SQL table alias mapping - oauthsessi0_
          - alias suffix - 0_
          - suffixed key columns - {id1_1_0_}

2021-12-11 17:23:51,792 DEBUG Static select for entity com.peterphi.usermanager.db.entity.OAuthSessionEntity [READ]: select oauthsessi0_.id as id1_1_0_, oauthsessi0_.is_active as is_activ2_1_0_, oauthsessi0_.authorisation_code as authoris3_1_0_, oauthsessi0_.context_id as context_9_1_0_, oauthsessi0_.created_ts as created_4_1_0_, oauthsessi0_.expires_ts as expires_5_1_0_, oauthsessi0_.initiator_detail as initiato6_1_0_, oauthsessi0_.current_token as current_7_1_0_, oauthsessi0_.updated_ts as updated_8_1_0_ from oauth_session oauthsessi0_ where oauthsessi0_.id=?
2021-12-11 17:23:51,792 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@4d705112]
2021-12-11 17:23:51,792 DEBUG Visiting attribute path : alive
2021-12-11 17:23:51,792 DEBUG Visiting attribute path : authorisationCode
2021-12-11 17:23:51,792 DEBUG Visiting attribute path : context
2021-12-11 17:23:51,792 DEBUG Adding QuerySpace : uid = <gen:1> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@19489b27]
2021-12-11 17:23:51,792 DEBUG Visiting attribute path : created
2021-12-11 17:23:51,792 DEBUG Visiting attribute path : expires
2021-12-11 17:23:51,792 DEBUG Visiting attribute path : initiator
2021-12-11 17:23:51,792 DEBUG Visiting attribute path : token
2021-12-11 17:23:51,792 DEBUG Visiting attribute path : updated
2021-12-11 17:23:51,792 DEBUG Building LoadPlan...
2021-12-11 17:23:51,792 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:51,792 DEBUG LoadPlan(entity=com.peterphi.usermanager.db.entity.OAuthSessionEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.usermanager.db.entity.OAuthSessionEntity, querySpaceUid=<gen:0>, path=com.peterphi.usermanager.db.entity.OAuthSessionEntity)
          - EntityAttributeFetchImpl(entity=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity, querySpaceUid=<gen:1>, path=com.peterphi.usermanager.db.entity.OAuthSessionEntity.context)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.usermanager.db.entity.OAuthSessionEntity)
          - SQL table alias mapping - oauthsessi0_
          - alias suffix - 0_
          - suffixed key columns - {id1_1_0_}

2021-12-11 17:23:51,792 DEBUG Static select for entity com.peterphi.usermanager.db.entity.OAuthSessionEntity [UPGRADE]: select oauthsessi0_.id as id1_1_0_, oauthsessi0_.is_active as is_activ2_1_0_, oauthsessi0_.authorisation_code as authoris3_1_0_, oauthsessi0_.context_id as context_9_1_0_, oauthsessi0_.created_ts as created_4_1_0_, oauthsessi0_.expires_ts as expires_5_1_0_, oauthsessi0_.initiator_detail as initiato6_1_0_, oauthsessi0_.current_token as current_7_1_0_, oauthsessi0_.updated_ts as updated_8_1_0_ from oauth_session oauthsessi0_ where oauthsessi0_.id=? for update
2021-12-11 17:23:51,792 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@626d2016]
2021-12-11 17:23:51,793 DEBUG Visiting attribute path : alive
2021-12-11 17:23:51,793 DEBUG Visiting attribute path : authorisationCode
2021-12-11 17:23:51,793 DEBUG Visiting attribute path : context
2021-12-11 17:23:51,793 DEBUG Adding QuerySpace : uid = <gen:1> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@4f116ca2]
2021-12-11 17:23:51,793 DEBUG Visiting attribute path : created
2021-12-11 17:23:51,793 DEBUG Visiting attribute path : expires
2021-12-11 17:23:51,793 DEBUG Visiting attribute path : initiator
2021-12-11 17:23:51,793 DEBUG Visiting attribute path : token
2021-12-11 17:23:51,793 DEBUG Visiting attribute path : updated
2021-12-11 17:23:51,793 DEBUG Building LoadPlan...
2021-12-11 17:23:51,793 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:51,793 DEBUG LoadPlan(entity=com.peterphi.usermanager.db.entity.OAuthSessionEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.usermanager.db.entity.OAuthSessionEntity, querySpaceUid=<gen:0>, path=com.peterphi.usermanager.db.entity.OAuthSessionEntity)
          - EntityAttributeFetchImpl(entity=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity, querySpaceUid=<gen:1>, path=com.peterphi.usermanager.db.entity.OAuthSessionEntity.context)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.usermanager.db.entity.OAuthSessionEntity)
          - SQL table alias mapping - oauthsessi0_
          - alias suffix - 0_
          - suffixed key columns - {id1_1_0_}

2021-12-11 17:23:51,793 DEBUG Static select for entity com.peterphi.usermanager.db.entity.OAuthSessionEntity [UPGRADE_NOWAIT]: select oauthsessi0_.id as id1_1_0_, oauthsessi0_.is_active as is_activ2_1_0_, oauthsessi0_.authorisation_code as authoris3_1_0_, oauthsessi0_.context_id as context_9_1_0_, oauthsessi0_.created_ts as created_4_1_0_, oauthsessi0_.expires_ts as expires_5_1_0_, oauthsessi0_.initiator_detail as initiato6_1_0_, oauthsessi0_.current_token as current_7_1_0_, oauthsessi0_.updated_ts as updated_8_1_0_ from oauth_session oauthsessi0_ where oauthsessi0_.id=? for update
2021-12-11 17:23:51,793 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@125d47c4]
2021-12-11 17:23:51,793 DEBUG Visiting attribute path : alive
2021-12-11 17:23:51,793 DEBUG Visiting attribute path : authorisationCode
2021-12-11 17:23:51,793 DEBUG Visiting attribute path : context
2021-12-11 17:23:51,793 DEBUG Adding QuerySpace : uid = <gen:1> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@64b018f3]
2021-12-11 17:23:51,793 DEBUG Visiting attribute path : created
2021-12-11 17:23:51,793 DEBUG Visiting attribute path : expires
2021-12-11 17:23:51,793 DEBUG Visiting attribute path : initiator
2021-12-11 17:23:51,793 DEBUG Visiting attribute path : token
2021-12-11 17:23:51,793 DEBUG Visiting attribute path : updated
2021-12-11 17:23:51,793 DEBUG Building LoadPlan...
2021-12-11 17:23:51,793 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:51,794 DEBUG LoadPlan(entity=com.peterphi.usermanager.db.entity.OAuthSessionEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.usermanager.db.entity.OAuthSessionEntity, querySpaceUid=<gen:0>, path=com.peterphi.usermanager.db.entity.OAuthSessionEntity)
          - EntityAttributeFetchImpl(entity=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity, querySpaceUid=<gen:1>, path=com.peterphi.usermanager.db.entity.OAuthSessionEntity.context)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.usermanager.db.entity.OAuthSessionEntity)
          - SQL table alias mapping - oauthsessi0_
          - alias suffix - 0_
          - suffixed key columns - {id1_1_0_}

2021-12-11 17:23:51,794 DEBUG Static select for entity com.peterphi.usermanager.db.entity.OAuthSessionEntity [UPGRADE_SKIPLOCKED]: select oauthsessi0_.id as id1_1_0_, oauthsessi0_.is_active as is_activ2_1_0_, oauthsessi0_.authorisation_code as authoris3_1_0_, oauthsessi0_.context_id as context_9_1_0_, oauthsessi0_.created_ts as created_4_1_0_, oauthsessi0_.expires_ts as expires_5_1_0_, oauthsessi0_.initiator_detail as initiato6_1_0_, oauthsessi0_.current_token as current_7_1_0_, oauthsessi0_.updated_ts as updated_8_1_0_ from oauth_session oauthsessi0_ where oauthsessi0_.id=? for update
2021-12-11 17:23:51,794 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@20801cbb]
2021-12-11 17:23:51,794 DEBUG Visiting attribute path : alive
2021-12-11 17:23:51,794 DEBUG Visiting attribute path : authorisationCode
2021-12-11 17:23:51,794 DEBUG Visiting attribute path : context
2021-12-11 17:23:51,794 DEBUG Adding QuerySpace : uid = <gen:1> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@1c240cf2]
2021-12-11 17:23:51,794 DEBUG Visiting attribute path : created
2021-12-11 17:23:51,794 DEBUG Visiting attribute path : expires
2021-12-11 17:23:51,794 DEBUG Visiting attribute path : initiator
2021-12-11 17:23:51,794 DEBUG Visiting attribute path : token
2021-12-11 17:23:51,794 DEBUG Visiting attribute path : updated
2021-12-11 17:23:51,794 DEBUG Building LoadPlan...
2021-12-11 17:23:51,794 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:51,794 DEBUG LoadPlan(entity=com.peterphi.usermanager.db.entity.OAuthSessionEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.usermanager.db.entity.OAuthSessionEntity, querySpaceUid=<gen:0>, path=com.peterphi.usermanager.db.entity.OAuthSessionEntity)
          - EntityAttributeFetchImpl(entity=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity, querySpaceUid=<gen:1>, path=com.peterphi.usermanager.db.entity.OAuthSessionEntity.context)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.usermanager.db.entity.OAuthSessionEntity)
          - SQL table alias mapping - oauthsessi0_
          - alias suffix - 0_
          - suffixed key columns - {id1_1_0_}

2021-12-11 17:23:51,794 DEBUG Static select for entity com.peterphi.usermanager.db.entity.OAuthSessionEntity [FORCE]: select oauthsessi0_.id as id1_1_0_, oauthsessi0_.is_active as is_activ2_1_0_, oauthsessi0_.authorisation_code as authoris3_1_0_, oauthsessi0_.context_id as context_9_1_0_, oauthsessi0_.created_ts as created_4_1_0_, oauthsessi0_.expires_ts as expires_5_1_0_, oauthsessi0_.initiator_detail as initiato6_1_0_, oauthsessi0_.current_token as current_7_1_0_, oauthsessi0_.updated_ts as updated_8_1_0_ from oauth_session oauthsessi0_ where oauthsessi0_.id=? for update
2021-12-11 17:23:51,794 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@78b7f805]
2021-12-11 17:23:51,794 DEBUG Visiting attribute path : alive
2021-12-11 17:23:51,794 DEBUG Visiting attribute path : authorisationCode
2021-12-11 17:23:51,794 DEBUG Visiting attribute path : context
2021-12-11 17:23:51,794 DEBUG Adding QuerySpace : uid = <gen:1> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@5809fa26]
2021-12-11 17:23:51,794 DEBUG Visiting attribute path : created
2021-12-11 17:23:51,794 DEBUG Visiting attribute path : expires
2021-12-11 17:23:51,794 DEBUG Visiting attribute path : initiator
2021-12-11 17:23:51,794 DEBUG Visiting attribute path : token
2021-12-11 17:23:51,794 DEBUG Visiting attribute path : updated
2021-12-11 17:23:51,794 DEBUG Building LoadPlan...
2021-12-11 17:23:51,794 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:51,795 DEBUG LoadPlan(entity=com.peterphi.usermanager.db.entity.OAuthSessionEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.usermanager.db.entity.OAuthSessionEntity, querySpaceUid=<gen:0>, path=com.peterphi.usermanager.db.entity.OAuthSessionEntity)
          - EntityAttributeFetchImpl(entity=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity, querySpaceUid=<gen:1>, path=com.peterphi.usermanager.db.entity.OAuthSessionEntity.context)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.usermanager.db.entity.OAuthSessionEntity)
          - SQL table alias mapping - oauthsessi0_
          - alias suffix - 0_
          - suffixed key columns - {id1_1_0_}

2021-12-11 17:23:51,795 DEBUG Static select for entity com.peterphi.usermanager.db.entity.OAuthSessionEntity [PESSIMISTIC_READ]: select oauthsessi0_.id as id1_1_0_, oauthsessi0_.is_active as is_activ2_1_0_, oauthsessi0_.authorisation_code as authoris3_1_0_, oauthsessi0_.context_id as context_9_1_0_, oauthsessi0_.created_ts as created_4_1_0_, oauthsessi0_.expires_ts as expires_5_1_0_, oauthsessi0_.initiator_detail as initiato6_1_0_, oauthsessi0_.current_token as current_7_1_0_, oauthsessi0_.updated_ts as updated_8_1_0_ from oauth_session oauthsessi0_ where oauthsessi0_.id=? for update
2021-12-11 17:23:51,795 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@64763e49]
2021-12-11 17:23:51,795 DEBUG Visiting attribute path : alive
2021-12-11 17:23:51,795 DEBUG Visiting attribute path : authorisationCode
2021-12-11 17:23:51,795 DEBUG Visiting attribute path : context
2021-12-11 17:23:51,795 DEBUG Adding QuerySpace : uid = <gen:1> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@69cd7630]
2021-12-11 17:23:51,795 DEBUG Visiting attribute path : created
2021-12-11 17:23:51,795 DEBUG Visiting attribute path : expires
2021-12-11 17:23:51,795 DEBUG Visiting attribute path : initiator
2021-12-11 17:23:51,795 DEBUG Visiting attribute path : token
2021-12-11 17:23:51,795 DEBUG Visiting attribute path : updated
2021-12-11 17:23:51,795 DEBUG Building LoadPlan...
2021-12-11 17:23:51,795 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:51,795 DEBUG LoadPlan(entity=com.peterphi.usermanager.db.entity.OAuthSessionEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.usermanager.db.entity.OAuthSessionEntity, querySpaceUid=<gen:0>, path=com.peterphi.usermanager.db.entity.OAuthSessionEntity)
          - EntityAttributeFetchImpl(entity=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity, querySpaceUid=<gen:1>, path=com.peterphi.usermanager.db.entity.OAuthSessionEntity.context)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.usermanager.db.entity.OAuthSessionEntity)
          - SQL table alias mapping - oauthsessi0_
          - alias suffix - 0_
          - suffixed key columns - {id1_1_0_}

2021-12-11 17:23:51,795 DEBUG Static select for entity com.peterphi.usermanager.db.entity.OAuthSessionEntity [PESSIMISTIC_WRITE]: select oauthsessi0_.id as id1_1_0_, oauthsessi0_.is_active as is_activ2_1_0_, oauthsessi0_.authorisation_code as authoris3_1_0_, oauthsessi0_.context_id as context_9_1_0_, oauthsessi0_.created_ts as created_4_1_0_, oauthsessi0_.expires_ts as expires_5_1_0_, oauthsessi0_.initiator_detail as initiato6_1_0_, oauthsessi0_.current_token as current_7_1_0_, oauthsessi0_.updated_ts as updated_8_1_0_ from oauth_session oauthsessi0_ where oauthsessi0_.id=? for update
2021-12-11 17:23:51,795 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@7e8279e5]
2021-12-11 17:23:51,795 DEBUG Visiting attribute path : alive
2021-12-11 17:23:51,795 DEBUG Visiting attribute path : authorisationCode
2021-12-11 17:23:51,795 DEBUG Visiting attribute path : context
2021-12-11 17:23:51,795 DEBUG Adding QuerySpace : uid = <gen:1> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@3caafa67]
2021-12-11 17:23:51,795 DEBUG Visiting attribute path : created
2021-12-11 17:23:51,795 DEBUG Visiting attribute path : expires
2021-12-11 17:23:51,795 DEBUG Visiting attribute path : initiator
2021-12-11 17:23:51,795 DEBUG Visiting attribute path : token
2021-12-11 17:23:51,795 DEBUG Visiting attribute path : updated
2021-12-11 17:23:51,795 DEBUG Building LoadPlan...
2021-12-11 17:23:51,795 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:51,796 DEBUG LoadPlan(entity=com.peterphi.usermanager.db.entity.OAuthSessionEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.usermanager.db.entity.OAuthSessionEntity, querySpaceUid=<gen:0>, path=com.peterphi.usermanager.db.entity.OAuthSessionEntity)
          - EntityAttributeFetchImpl(entity=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity, querySpaceUid=<gen:1>, path=com.peterphi.usermanager.db.entity.OAuthSessionEntity.context)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.usermanager.db.entity.OAuthSessionEntity)
          - SQL table alias mapping - oauthsessi0_
          - alias suffix - 0_
          - suffixed key columns - {id1_1_0_}

2021-12-11 17:23:51,796 DEBUG Static select for entity com.peterphi.usermanager.db.entity.OAuthSessionEntity [PESSIMISTIC_FORCE_INCREMENT]: select oauthsessi0_.id as id1_1_0_, oauthsessi0_.is_active as is_activ2_1_0_, oauthsessi0_.authorisation_code as authoris3_1_0_, oauthsessi0_.context_id as context_9_1_0_, oauthsessi0_.created_ts as created_4_1_0_, oauthsessi0_.expires_ts as expires_5_1_0_, oauthsessi0_.initiator_detail as initiato6_1_0_, oauthsessi0_.current_token as current_7_1_0_, oauthsessi0_.updated_ts as updated_8_1_0_ from oauth_session oauthsessi0_ where oauthsessi0_.id=? for update
2021-12-11 17:23:51,796 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@3e546734]
2021-12-11 17:23:51,796 DEBUG Visiting attribute path : alive
2021-12-11 17:23:51,796 DEBUG Visiting attribute path : authorisationCode
2021-12-11 17:23:51,796 DEBUG Visiting attribute path : context
2021-12-11 17:23:51,796 DEBUG Adding QuerySpace : uid = <gen:1> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@64b0d1fa]
2021-12-11 17:23:51,796 DEBUG Visiting attribute path : created
2021-12-11 17:23:51,796 DEBUG Visiting attribute path : expires
2021-12-11 17:23:51,796 DEBUG Visiting attribute path : initiator
2021-12-11 17:23:51,796 DEBUG Visiting attribute path : token
2021-12-11 17:23:51,796 DEBUG Visiting attribute path : updated
2021-12-11 17:23:51,796 DEBUG Building LoadPlan...
2021-12-11 17:23:51,796 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:51,796 DEBUG LoadPlan(entity=com.peterphi.usermanager.db.entity.OAuthSessionEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.usermanager.db.entity.OAuthSessionEntity, querySpaceUid=<gen:0>, path=com.peterphi.usermanager.db.entity.OAuthSessionEntity)
          - EntityAttributeFetchImpl(entity=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity, querySpaceUid=<gen:1>, path=com.peterphi.usermanager.db.entity.OAuthSessionEntity.context)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.usermanager.db.entity.OAuthSessionEntity)
          - SQL table alias mapping - oauthsessi0_
          - alias suffix - 0_
          - suffixed key columns - {id1_1_0_}

2021-12-11 17:23:51,796 DEBUG Static select for entity com.peterphi.usermanager.db.entity.OAuthSessionEntity [OPTIMISTIC]: select oauthsessi0_.id as id1_1_0_, oauthsessi0_.is_active as is_activ2_1_0_, oauthsessi0_.authorisation_code as authoris3_1_0_, oauthsessi0_.context_id as context_9_1_0_, oauthsessi0_.created_ts as created_4_1_0_, oauthsessi0_.expires_ts as expires_5_1_0_, oauthsessi0_.initiator_detail as initiato6_1_0_, oauthsessi0_.current_token as current_7_1_0_, oauthsessi0_.updated_ts as updated_8_1_0_ from oauth_session oauthsessi0_ where oauthsessi0_.id=?
2021-12-11 17:23:51,796 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@f2276c9]
2021-12-11 17:23:51,796 DEBUG Visiting attribute path : alive
2021-12-11 17:23:51,796 DEBUG Visiting attribute path : authorisationCode
2021-12-11 17:23:51,796 DEBUG Visiting attribute path : context
2021-12-11 17:23:51,796 DEBUG Adding QuerySpace : uid = <gen:1> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@62b475e2]
2021-12-11 17:23:51,796 DEBUG Visiting attribute path : created
2021-12-11 17:23:51,796 DEBUG Visiting attribute path : expires
2021-12-11 17:23:51,796 DEBUG Visiting attribute path : initiator
2021-12-11 17:23:51,796 DEBUG Visiting attribute path : token
2021-12-11 17:23:51,797 DEBUG Visiting attribute path : updated
2021-12-11 17:23:51,797 DEBUG Building LoadPlan...
2021-12-11 17:23:51,797 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:51,797 DEBUG LoadPlan(entity=com.peterphi.usermanager.db.entity.OAuthSessionEntity)
    - Returns
       - EntityReturnImpl(entity=com.peterphi.usermanager.db.entity.OAuthSessionEntity, querySpaceUid=<gen:0>, path=com.peterphi.usermanager.db.entity.OAuthSessionEntity)
          - EntityAttributeFetchImpl(entity=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity, querySpaceUid=<gen:1>, path=com.peterphi.usermanager.db.entity.OAuthSessionEntity.context)
    - QuerySpaces
       - EntityQuerySpaceImpl(uid=<gen:0>, entity=com.peterphi.usermanager.db.entity.OAuthSessionEntity)
          - SQL table alias mapping - oauthsessi0_
          - alias suffix - 0_
          - suffixed key columns - {id1_1_0_}

2021-12-11 17:23:51,797 DEBUG Static select for entity com.peterphi.usermanager.db.entity.OAuthSessionEntity [OPTIMISTIC_FORCE_INCREMENT]: select oauthsessi0_.id as id1_1_0_, oauthsessi0_.is_active as is_activ2_1_0_, oauthsessi0_.authorisation_code as authoris3_1_0_, oauthsessi0_.context_id as context_9_1_0_, oauthsessi0_.created_ts as created_4_1_0_, oauthsessi0_.expires_ts as expires_5_1_0_, oauthsessi0_.initiator_detail as initiato6_1_0_, oauthsessi0_.current_token as current_7_1_0_, oauthsessi0_.updated_ts as updated_8_1_0_ from oauth_session oauthsessi0_ where oauthsessi0_.id=?
2021-12-11 17:23:51,797 DEBUG Static select for action ACTION_MERGE on entity com.peterphi.usermanager.db.entity.OAuthSessionEntity: select oauthsessi0_.id as id1_1_0_, oauthsessi0_.is_active as is_activ2_1_0_, oauthsessi0_.authorisation_code as authoris3_1_0_, oauthsessi0_.context_id as context_9_1_0_, oauthsessi0_.created_ts as created_4_1_0_, oauthsessi0_.expires_ts as expires_5_1_0_, oauthsessi0_.initiator_detail as initiato6_1_0_, oauthsessi0_.current_token as current_7_1_0_, oauthsessi0_.updated_ts as updated_8_1_0_ from oauth_session oauthsessi0_ where oauthsessi0_.id=?
2021-12-11 17:23:51,797 DEBUG Static select for action ACTION_REFRESH on entity com.peterphi.usermanager.db.entity.OAuthSessionEntity: select oauthsessi0_.id as id1_1_0_, oauthsessi0_.is_active as is_activ2_1_0_, oauthsessi0_.authorisation_code as authoris3_1_0_, oauthsessi0_.context_id as context_9_1_0_, oauthsessi0_.created_ts as created_4_1_0_, oauthsessi0_.expires_ts as expires_5_1_0_, oauthsessi0_.initiator_detail as initiato6_1_0_, oauthsessi0_.current_token as current_7_1_0_, oauthsessi0_.updated_ts as updated_8_1_0_ from oauth_session oauthsessi0_ where oauthsessi0_.id=?
2021-12-11 17:23:51,802 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.CollectionQuerySpaceImpl@5382184b]
2021-12-11 17:23:51,802 DEBUG Adding QuerySpace : uid = <gen:1> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@77cb452c]
2021-12-11 17:23:51,804 DEBUG Visiting attribute path : caption
2021-12-11 17:23:51,804 DEBUG Visiting attribute path : members
2021-12-11 17:23:51,804 DEBUG Property path deemed to be circular : members
2021-12-11 17:23:51,804 DEBUG Building LoadPlan...
2021-12-11 17:23:51,806 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:51,807 DEBUG LoadPlan(collection=com.peterphi.usermanager.db.entity.UserEntity.roles)
    - Returns
       - CollectionReturnImpl(collection=com.peterphi.usermanager.db.entity.UserEntity.roles, querySpaceUid=<gen:0>, path=[com.peterphi.usermanager.db.entity.UserEntity.roles])
          - (collection element) CollectionFetchableElementEntityGraph(entity=com.peterphi.usermanager.db.entity.RoleEntity, querySpaceUid=<gen:1>, path=[com.peterphi.usermanager.db.entity.UserEntity.roles].<elements>)
    - QuerySpaces
       - CollectionQuerySpaceImpl(uid=<gen:0>, collection=com.peterphi.usermanager.db.entity.UserEntity.roles)
          - SQL table alias mapping - roles0_
          - alias suffix - 0_
          - suffixed key columns - {user_id2_5_0_}
          - entity-element alias suffix - 1_
          - 1_entity-element suffixed key columns - id1_3_1_
          - JOIN (JoinDefinedByMetadata(elements)) : <gen:0> -> <gen:1>
             - EntityQuerySpaceImpl(uid=<gen:1>, entity=com.peterphi.usermanager.db.entity.RoleEntity)
                - SQL table alias mapping - roleentity1_
                - alias suffix - 1_
                - suffixed key columns - {id1_3_1_}

2021-12-11 17:23:51,807 DEBUG Static select for collection com.peterphi.usermanager.db.entity.UserEntity.roles: select roles0_.user_id as user_id2_5_0_, roles0_.role_id as role_id1_5_0_, roleentity1_.id as id1_3_1_, roleentity1_.caption as caption2_3_1_ from user_has_role roles0_ inner join role_definition roleentity1_ on roles0_.role_id=roleentity1_.id where roles0_.user_id=?
2021-12-11 17:23:51,807 DEBUG Adding QuerySpace : uid = <gen:0> -> org.hibernate.loader.plan.build.internal.spaces.CollectionQuerySpaceImpl@2ad99cf3]
2021-12-11 17:23:51,808 DEBUG Adding QuerySpace : uid = <gen:1> -> org.hibernate.loader.plan.build.internal.spaces.EntityQuerySpaceImpl@6f31df32]
2021-12-11 17:23:51,808 DEBUG Visiting attribute path : created
2021-12-11 17:23:51,808 DEBUG Visiting attribute path : dateFormat
2021-12-11 17:23:51,808 DEBUG Visiting attribute path : email
2021-12-11 17:23:51,808 DEBUG Visiting attribute path : lastLogin
2021-12-11 17:23:51,808 DEBUG Visiting attribute path : local
2021-12-11 17:23:51,808 DEBUG Visiting attribute path : name
2021-12-11 17:23:51,808 DEBUG Visiting attribute path : password
2021-12-11 17:23:51,808 DEBUG Visiting attribute path : roles
2021-12-11 17:23:51,808 DEBUG Property path deemed to be circular : roles
2021-12-11 17:23:51,808 DEBUG Visiting attribute path : sessionReconnectKey
2021-12-11 17:23:51,808 DEBUG Visiting attribute path : timeZone
2021-12-11 17:23:51,808 DEBUG Building LoadPlan...
2021-12-11 17:23:51,808 DEBUG processing queryspace <gen:0>
2021-12-11 17:23:51,808 DEBUG LoadPlan(collection=com.peterphi.usermanager.db.entity.RoleEntity.members)
    - Returns
       - CollectionReturnImpl(collection=com.peterphi.usermanager.db.entity.RoleEntity.members, querySpaceUid=<gen:0>, path=[com.peterphi.usermanager.db.entity.RoleEntity.members])
          - (collection element) CollectionFetchableElementEntityGraph(entity=com.peterphi.usermanager.db.entity.UserEntity, querySpaceUid=<gen:1>, path=[com.peterphi.usermanager.db.entity.RoleEntity.members].<elements>)
    - QuerySpaces
       - CollectionQuerySpaceImpl(uid=<gen:0>, collection=com.peterphi.usermanager.db.entity.RoleEntity.members)
          - SQL table alias mapping - members0_
          - alias suffix - 0_
          - suffixed key columns - {role_id1_5_0_}
          - entity-element alias suffix - 1_
          - 1_entity-element suffixed key columns - id1_4_1_
          - JOIN (JoinDefinedByMetadata(elements)) : <gen:0> -> <gen:1>
             - EntityQuerySpaceImpl(uid=<gen:1>, entity=com.peterphi.usermanager.db.entity.UserEntity)
                - SQL table alias mapping - userentity1_
                - alias suffix - 1_
                - suffixed key columns - {id1_4_1_}

2021-12-11 17:23:51,808 DEBUG Static select for collection com.peterphi.usermanager.db.entity.RoleEntity.members: select members0_.role_id as role_id1_5_0_, members0_.user_id as user_id2_5_0_, userentity1_.id as id1_4_1_, userentity1_.created_ts as created_2_4_1_, userentity1_.date_format as date_for3_4_1_, userentity1_.email as email4_4_1_, userentity1_.last_login_ts as last_log5_4_1_, userentity1_.is_local as is_local6_4_1_, userentity1_.name as name7_4_1_, userentity1_.password as password8_4_1_, userentity1_.local_session_id as local_se9_4_1_, userentity1_.date_timezone as date_ti10_4_1_ from user_has_role members0_ inner join user_account userentity1_ on members0_.user_id=userentity1_.id where members0_.role_id=? order by userentity1_.id desc
2021-12-11 17:23:51,835 DEBUG No actions specified; doing nothing
2021-12-11 17:23:51,839 DEBUG Checking 0 named HQL queries
2021-12-11 17:23:51,839 DEBUG Checking 0 named SQL queries
2021-12-11 17:23:51,841 DEBUG Initializing SessionFactoryRegistry : org.hibernate.internal.SessionFactoryRegistry@245253d8
2021-12-11 17:23:51,842 DEBUG Registering SessionFactory: de8cde6c-111e-4b5d-8b79-8d7e1a5b9599 (<unnamed>)
2021-12-11 17:23:51,842 DEBUG Not binding SessionFactory to JNDI, no JNDI name configured
2021-12-11 17:23:51,847 DEBUG Known entities: [oauth_session_context, oauth_service, role_definition, user_account, oauth_session]
2021-12-11 17:23:51,847 DEBUG Begin create QEntity class com.peterphi.usermanager.db.entity.OAuthSessionContextEntity
2021-12-11 17:23:51,848 DEBUG Begin create QEntity class com.peterphi.usermanager.db.entity.OAuthServiceEntity
2021-12-11 17:23:51,849 DEBUG Begin create QEntity class com.peterphi.usermanager.db.entity.UserEntity
2021-12-11 17:23:51,849 DEBUG Begin create QEntity class com.peterphi.usermanager.db.entity.RoleEntity
2021-12-11 17:23:51,850 DEBUG End create QEntity class com.peterphi.usermanager.db.entity.RoleEntity
2021-12-11 17:23:51,850 DEBUG End create QEntity class com.peterphi.usermanager.db.entity.UserEntity
2021-12-11 17:23:51,850 DEBUG End create QEntity class com.peterphi.usermanager.db.entity.OAuthServiceEntity
2021-12-11 17:23:51,850 DEBUG End create QEntity class com.peterphi.usermanager.db.entity.OAuthSessionContextEntity
2021-12-11 17:23:51,850 DEBUG Begin create QEntity class com.peterphi.usermanager.db.entity.OAuthSessionEntity
2021-12-11 17:23:51,850 DEBUG End create QEntity class com.peterphi.usermanager.db.entity.OAuthSessionEntity
2021-12-11 17:23:51,916 DEBUG Statistics initialized [enabled=false]
2021-12-11 17:23:51,953 DEBUG begin
2021-12-11 17:23:51,997 DEBUG Rendered criteria query -> select generatedAlias0 from user_account as generatedAlias0 where 1=1
2021-12-11 17:23:52,003 DEBUG QueryTranslatorFactory : org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory@1f536481
2021-12-11 17:23:52,003  INFO HHH000397: Using ASTQueryTranslatorFactory
2021-12-11 17:23:52,018 DEBUG parse() - HQL: select generatedAlias0 from com.peterphi.usermanager.db.entity.UserEntity as generatedAlias0 where 1=1
2021-12-11 17:23:52,020 DEBUG throwQueryException() : no errors
2021-12-11 17:23:52,022 DEBUG --- HQL AST ---
 \-[QUERY] Node: 'query'
    +-[SELECT_FROM] Node: 'SELECT_FROM'
    |  +-[FROM] Node: 'from'
    |  |  \-[RANGE] Node: 'RANGE'
    |  |     +-[DOT] Node: '.'
    |  |     |  +-[DOT] Node: '.'
    |  |     |  |  +-[DOT] Node: '.'
    |  |     |  |  |  +-[DOT] Node: '.'
    |  |     |  |  |  |  +-[DOT] Node: '.'
    |  |     |  |  |  |  |  +-[IDENT] Node: 'com'
    |  |     |  |  |  |  |  \-[IDENT] Node: 'peterphi'
    |  |     |  |  |  |  \-[IDENT] Node: 'usermanager'
    |  |     |  |  |  \-[IDENT] Node: 'db'
    |  |     |  |  \-[IDENT] Node: 'entity'
    |  |     |  \-[IDENT] Node: 'UserEntity'
    |  |     \-[ALIAS] Node: 'generatedAlias0'
    |  \-[SELECT] Node: 'select'
    |     \-[IDENT] Node: 'generatedAlias0'
    \-[WHERE] Node: 'where'
       \-[EQ] Node: '='
          +-[NUM_INT] Node: '1'
          \-[NUM_INT] Node: '1'

2021-12-11 17:23:52,039 DEBUG select << begin [level=1, statement=select]
2021-12-11 17:23:52,050 DEBUG FromClause{level=1} : com.peterphi.usermanager.db.entity.UserEntity (generatedAlias0) -> userentity0_
2021-12-11 17:23:52,051 DEBUG Resolved : generatedAlias0 -> userentity0_.id
2021-12-11 17:23:52,054 DEBUG select : finishing up [level=1, statement=select]
2021-12-11 17:23:52,054 DEBUG processQuery() :  ( SELECT ( {select clause} userentity0_.id ) ( FromClause{level=1} user_account userentity0_ ) ( where ( = 1 1 ) ) )
2021-12-11 17:23:52,061 DEBUG Using FROM fragment [user_account userentity0_]
2021-12-11 17:23:52,061 DEBUG select >> end [level=1, statement=select]
2021-12-11 17:23:52,062 DEBUG --- SQL AST ---
 \-[SELECT] QueryNode: 'SELECT'  querySpaces (user_account)
    +-[SELECT_CLAUSE] SelectClause: '{select clause}'
    |  +-[ALIAS_REF] IdentNode: 'userentity0_.id as id1_4_' {alias=generatedAlias0, className=com.peterphi.usermanager.db.entity.UserEntity, tableAlias=userentity0_}
    |  \-[SQL_TOKEN] SqlFragment: 'userentity0_.created_ts as created_2_4_, userentity0_.date_format as date_for3_4_, userentity0_.email as email4_4_, userentity0_.last_login_ts as last_log5_4_, userentity0_.is_local as is_local6_4_, userentity0_.name as name7_4_, userentity0_.password as password8_4_, userentity0_.local_session_id as local_se9_4_, userentity0_.date_timezone as date_ti10_4_'
    +-[FROM] FromClause: 'from' FromClause{level=1, fromElementCounter=1, fromElements=1, fromElementByClassAlias=[generatedAlias0], fromElementByTableAlias=[userentity0_], fromElementsByPath=[], collectionJoinFromElementsByPath=[], impliedElements=[]}
    |  \-[FROM_FRAGMENT] FromElement: 'user_account userentity0_' FromElement{explicit,not a collection join,not a fetch join,fetch non-lazy properties,classAlias=generatedAlias0,role=null,tableName=user_account,tableAlias=userentity0_,origin=null,columns={,className=com.peterphi.usermanager.db.entity.UserEntity}}
    \-[WHERE] SqlNode: 'where'
       \-[EQ] BinaryLogicOperatorNode: '='
          +-[NUM_INT] LiteralNode: '1'
          \-[NUM_INT] LiteralNode: '1'

2021-12-11 17:23:52,062 DEBUG throwQueryException() : no errors
2021-12-11 17:23:52,068 DEBUG HQL: select generatedAlias0 from com.peterphi.usermanager.db.entity.UserEntity as generatedAlias0 where 1=1
2021-12-11 17:23:52,068 DEBUG SQL: select userentity0_.id as id1_4_, userentity0_.created_ts as created_2_4_, userentity0_.date_format as date_for3_4_, userentity0_.email as email4_4_, userentity0_.last_login_ts as last_log5_4_, userentity0_.is_local as is_local6_4_, userentity0_.name as name7_4_, userentity0_.password as password8_4_, userentity0_.local_session_id as local_se9_4_, userentity0_.date_timezone as date_ti10_4_ from user_account userentity0_ where 1=1
2021-12-11 17:23:52,068 DEBUG throwQueryException() : no errors
2021-12-11 17:23:52,081 DEBUG select userentity0_.id as id1_4_, userentity0_.created_ts as created_2_4_, userentity0_.date_format as date_for3_4_, userentity0_.email as email4_4_, userentity0_.last_login_ts as last_log5_4_, userentity0_.is_local as is_local6_4_, userentity0_.name as name7_4_, userentity0_.password as password8_4_, userentity0_.local_session_id as local_se9_4_, userentity0_.date_timezone as date_ti10_4_ from user_account userentity0_ where 1=1
2021-12-11 17:23:52,091 DEBUG Transformed: 0 rows to: 0 distinct results
2021-12-11 17:23:52,092 DEBUG rolling back
2021-12-11 17:23:52,092 DEBUG Initiating JDBC connection release from afterTransaction
2021-12-11 17:23:52,093 DEBUG Clearing local Synchronizations
2021-12-11 17:23:52,093 DEBUG Initiating JDBC connection release from afterTransaction
2021-12-11 17:23:52,095 DEBUG begin
2021-12-11 17:23:52,096 DEBUG Rendered criteria query -> select generatedAlias0 from role_definition as generatedAlias0 where 1=1
2021-12-11 17:23:52,096 DEBUG parse() - HQL: select generatedAlias0 from com.peterphi.usermanager.db.entity.RoleEntity as generatedAlias0 where 1=1
2021-12-11 17:23:52,097 DEBUG throwQueryException() : no errors
2021-12-11 17:23:52,097 DEBUG --- HQL AST ---
 \-[QUERY] Node: 'query'
    +-[SELECT_FROM] Node: 'SELECT_FROM'
    |  +-[FROM] Node: 'from'
    |  |  \-[RANGE] Node: 'RANGE'
    |  |     +-[DOT] Node: '.'
    |  |     |  +-[DOT] Node: '.'
    |  |     |  |  +-[DOT] Node: '.'
    |  |     |  |  |  +-[DOT] Node: '.'
    |  |     |  |  |  |  +-[DOT] Node: '.'
    |  |     |  |  |  |  |  +-[IDENT] Node: 'com'
    |  |     |  |  |  |  |  \-[IDENT] Node: 'peterphi'
    |  |     |  |  |  |  \-[IDENT] Node: 'usermanager'
    |  |     |  |  |  \-[IDENT] Node: 'db'
    |  |     |  |  \-[IDENT] Node: 'entity'
    |  |     |  \-[IDENT] Node: 'RoleEntity'
    |  |     \-[ALIAS] Node: 'generatedAlias0'
    |  \-[SELECT] Node: 'select'
    |     \-[IDENT] Node: 'generatedAlias0'
    \-[WHERE] Node: 'where'
       \-[EQ] Node: '='
          +-[NUM_INT] Node: '1'
          \-[NUM_INT] Node: '1'

2021-12-11 17:23:52,097 DEBUG select << begin [level=1, statement=select]
2021-12-11 17:23:52,098 DEBUG FromClause{level=1} : com.peterphi.usermanager.db.entity.RoleEntity (generatedAlias0) -> roleentity0_
2021-12-11 17:23:52,098 DEBUG Resolved : generatedAlias0 -> roleentity0_.id
2021-12-11 17:23:52,098 DEBUG select : finishing up [level=1, statement=select]
2021-12-11 17:23:52,098 DEBUG processQuery() :  ( SELECT ( {select clause} roleentity0_.id ) ( FromClause{level=1} role_definition roleentity0_ ) ( where ( = 1 1 ) ) )
2021-12-11 17:23:52,098 DEBUG Using FROM fragment [role_definition roleentity0_]
2021-12-11 17:23:52,098 DEBUG select >> end [level=1, statement=select]
2021-12-11 17:23:52,098 DEBUG --- SQL AST ---
 \-[SELECT] QueryNode: 'SELECT'  querySpaces (role_definition)
    +-[SELECT_CLAUSE] SelectClause: '{select clause}'
    |  +-[ALIAS_REF] IdentNode: 'roleentity0_.id as id1_3_' {alias=generatedAlias0, className=com.peterphi.usermanager.db.entity.RoleEntity, tableAlias=roleentity0_}
    |  \-[SQL_TOKEN] SqlFragment: 'roleentity0_.caption as caption2_3_'
    +-[FROM] FromClause: 'from' FromClause{level=1, fromElementCounter=1, fromElements=1, fromElementByClassAlias=[generatedAlias0], fromElementByTableAlias=[roleentity0_], fromElementsByPath=[], collectionJoinFromElementsByPath=[], impliedElements=[]}
    |  \-[FROM_FRAGMENT] FromElement: 'role_definition roleentity0_' FromElement{explicit,not a collection join,not a fetch join,fetch non-lazy properties,classAlias=generatedAlias0,role=null,tableName=role_definition,tableAlias=roleentity0_,origin=null,columns={,className=com.peterphi.usermanager.db.entity.RoleEntity}}
    \-[WHERE] SqlNode: 'where'
       \-[EQ] BinaryLogicOperatorNode: '='
          +-[NUM_INT] LiteralNode: '1'
          \-[NUM_INT] LiteralNode: '1'

2021-12-11 17:23:52,098 DEBUG throwQueryException() : no errors
2021-12-11 17:23:52,098 DEBUG HQL: select generatedAlias0 from com.peterphi.usermanager.db.entity.RoleEntity as generatedAlias0 where 1=1
2021-12-11 17:23:52,098 DEBUG SQL: select roleentity0_.id as id1_3_, roleentity0_.caption as caption2_3_ from role_definition roleentity0_ where 1=1
2021-12-11 17:23:52,098 DEBUG throwQueryException() : no errors
2021-12-11 17:23:52,099 DEBUG select roleentity0_.id as id1_3_, roleentity0_.caption as caption2_3_ from role_definition roleentity0_ where 1=1
2021-12-11 17:23:52,099 DEBUG Result set row: 0
2021-12-11 17:23:52,102 DEBUG Result row: EntityKey[com.peterphi.usermanager.db.entity.RoleEntity#admin]
2021-12-11 17:23:52,109 DEBUG Result set row: 1
2021-12-11 17:23:52,109 DEBUG Result row: EntityKey[com.peterphi.usermanager.db.entity.RoleEntity#framework-admin]
2021-12-11 17:23:52,109 DEBUG Result set row: 2
2021-12-11 17:23:52,109 DEBUG Result row: EntityKey[com.peterphi.usermanager.db.entity.RoleEntity#framework-info]
2021-12-11 17:23:52,109 DEBUG Result set row: 3
2021-12-11 17:23:52,109 DEBUG Result row: EntityKey[com.peterphi.usermanager.db.entity.RoleEntity#user-manager-admin]
2021-12-11 17:23:52,109 DEBUG Resolving associations for [com.peterphi.usermanager.db.entity.RoleEntity#admin]
2021-12-11 17:23:52,117 DEBUG Done materializing entity [com.peterphi.usermanager.db.entity.RoleEntity#admin]
2021-12-11 17:23:52,118 DEBUG Resolving associations for [com.peterphi.usermanager.db.entity.RoleEntity#framework-admin]
2021-12-11 17:23:52,118 DEBUG Done materializing entity [com.peterphi.usermanager.db.entity.RoleEntity#framework-admin]
2021-12-11 17:23:52,118 DEBUG Resolving associations for [com.peterphi.usermanager.db.entity.RoleEntity#framework-info]
2021-12-11 17:23:52,118 DEBUG Done materializing entity [com.peterphi.usermanager.db.entity.RoleEntity#framework-info]
2021-12-11 17:23:52,118 DEBUG Resolving associations for [com.peterphi.usermanager.db.entity.RoleEntity#user-manager-admin]
2021-12-11 17:23:52,118 DEBUG Done materializing entity [com.peterphi.usermanager.db.entity.RoleEntity#user-manager-admin]
2021-12-11 17:23:52,118 DEBUG Transformed: 4 rows to: 4 distinct results
2021-12-11 17:23:52,119 DEBUG rolling back
2021-12-11 17:23:52,119 DEBUG Initiating JDBC connection release from afterTransaction
2021-12-11 17:23:52,119 DEBUG Clearing local Synchronizations
2021-12-11 17:23:52,119 DEBUG Initiating JDBC connection release from afterTransaction
2021-12-11 17:23:52,120 DEBUG begin
2021-12-11 17:23:52,123 DEBUG Rendered criteria query -> select generatedAlias0 from oauth_service as generatedAlias0 left join fetch generatedAlias0.owner as generatedAlias1 where 1=1
2021-12-11 17:23:52,124 DEBUG parse() - HQL: select generatedAlias0 from com.peterphi.usermanager.db.entity.OAuthServiceEntity as generatedAlias0 left join fetch generatedAlias0.owner as generatedAlias1 where 1=1
2021-12-11 17:23:52,125 DEBUG throwQueryException() : no errors
2021-12-11 17:23:52,126 DEBUG --- HQL AST ---
 \-[QUERY] Node: 'query'
    +-[SELECT_FROM] Node: 'SELECT_FROM'
    |  +-[FROM] Node: 'from'
    |  |  +-[RANGE] Node: 'RANGE'
    |  |  |  +-[DOT] Node: '.'
    |  |  |  |  +-[DOT] Node: '.'
    |  |  |  |  |  +-[DOT] Node: '.'
    |  |  |  |  |  |  +-[DOT] Node: '.'
    |  |  |  |  |  |  |  +-[DOT] Node: '.'
    |  |  |  |  |  |  |  |  +-[IDENT] Node: 'com'
    |  |  |  |  |  |  |  |  \-[IDENT] Node: 'peterphi'
    |  |  |  |  |  |  |  \-[IDENT] Node: 'usermanager'
    |  |  |  |  |  |  \-[IDENT] Node: 'db'
    |  |  |  |  |  \-[IDENT] Node: 'entity'
    |  |  |  |  \-[IDENT] Node: 'OAuthServiceEntity'
    |  |  |  \-[ALIAS] Node: 'generatedAlias0'
    |  |  \-[JOIN] Node: 'join'
    |  |     +-[LEFT] Node: 'left'
    |  |     +-[FETCH] Node: 'fetch'
    |  |     +-[DOT] Node: '.'
    |  |     |  +-[IDENT] Node: 'generatedAlias0'
    |  |     |  \-[IDENT] Node: 'owner'
    |  |     \-[ALIAS] Node: 'generatedAlias1'
    |  \-[SELECT] Node: 'select'
    |     \-[IDENT] Node: 'generatedAlias0'
    \-[WHERE] Node: 'where'
       \-[EQ] Node: '='
          +-[NUM_INT] Node: '1'
          \-[NUM_INT] Node: '1'

2021-12-11 17:23:52,126 DEBUG select << begin [level=1, statement=select]
2021-12-11 17:23:52,127 DEBUG FromClause{level=1} : com.peterphi.usermanager.db.entity.OAuthServiceEntity (generatedAlias0) -> oauthservi0_
2021-12-11 17:23:52,128 DEBUG Resolved : generatedAlias0 -> oauthservi0_.id
2021-12-11 17:23:52,132 DEBUG getDataType() : owner -> org.hibernate.type.ManyToOneType(com.peterphi.usermanager.db.entity.UserEntity)
2021-12-11 17:23:52,132 DEBUG dereferenceEntityJoin() : generating join for owner in com.peterphi.usermanager.db.entity.OAuthServiceEntity (generatedAlias1) parent = [ {null} ]
2021-12-11 17:23:52,133 DEBUG FromClause{level=1} : com.peterphi.usermanager.db.entity.UserEntity (generatedAlias1) -> userentity1_
2021-12-11 17:23:52,133 DEBUG addJoinByPathMap() : generatedAlias0.owner -> FromElement{explicit,not a collection join,not a fetch join,fetch non-lazy properties,classAlias=generatedAlias1,role=null,tableName=user_account,tableAlias=userentity1_,origin=oauth_service oauthservi0_,columns={oauthservi0_.owner_id ,className=com.peterphi.usermanager.db.entity.UserEntity}}
2021-12-11 17:23:52,134 DEBUG Resolved : generatedAlias0.owner -> oauthservi0_.owner_id
2021-12-11 17:23:52,134 DEBUG createFromJoinElement() : -- join tree --
 \-[JOIN_FRAGMENT] FromElement: 'user_account userentity1_' FromElement{explicit,not a collection join,fetch join,fetch non-lazy properties,classAlias=generatedAlias1,role=com.peterphi.usermanager.db.entity.OAuthServiceEntity.owner,tableName=user_account,tableAlias=userentity1_,origin=oauth_service oauthservi0_,columns={oauthservi0_.owner_id ,className=com.peterphi.usermanager.db.entity.UserEntity}}

2021-12-11 17:23:52,134 DEBUG Resolved : generatedAlias0 -> oauthservi0_.id
2021-12-11 17:23:52,135 DEBUG select : finishing up [level=1, statement=select]
2021-12-11 17:23:52,135 DEBUG processQuery() :  ( SELECT ( {select clause} oauthservi0_.id ) ( FromClause{level=1} ( oauth_service oauthservi0_ user_account userentity1_ ) ) ( where ( = 1 1 ) ) )
2021-12-11 17:23:52,136 DEBUG Using FROM fragment [oauth_service oauthservi0_]
2021-12-11 17:23:52,137 DEBUG Using FROM fragment [left outer join user_account userentity1_ on oauthservi0_.owner_id=userentity1_.id]
2021-12-11 17:23:52,137 DEBUG select >> end [level=1, statement=select]
2021-12-11 17:23:52,137 DEBUG --- SQL AST ---
 \-[SELECT] QueryNode: 'SELECT'  querySpaces (oauth_service,user_account)
    +-[SELECT_CLAUSE] SelectClause: '{select clause}'
    |  +-[ALIAS_REF] IdentNode: 'oauthservi0_.id as id1_0_0_' {alias=generatedAlias0, className=com.peterphi.usermanager.db.entity.OAuthServiceEntity, tableAlias=oauthservi0_}
    |  +-[SELECT_EXPR] SelectExpressionImpl: 'userentity1_.id as id1_4_1_' {FromElement{explicit,not a collection join,fetch join,fetch non-lazy properties,classAlias=generatedAlias1,role=com.peterphi.usermanager.db.entity.OAuthServiceEntity.owner,tableName=user_account,tableAlias=userentity1_,origin=oauth_service oauthservi0_,columns={oauthservi0_.owner_id ,className=com.peterphi.usermanager.db.entity.UserEntity}}}
    |  +-[SQL_TOKEN] SqlFragment: 'oauthservi0_.client_secret as client_s2_0_0_, oauthservi0_.created_ts as created_3_0_0_, oauthservi0_.is_enabled as is_enabl4_0_0_, oauthservi0_.client_endpoints as client_e5_0_0_, oauthservi0_.client_name as client_n6_0_0_, oauthservi0_.owner_id as owner_id8_0_0_, oauthservi0_.updated_ts as updated_7_0_0_'
    |  \-[SQL_TOKEN] SqlFragment: 'userentity1_.created_ts as created_2_4_1_, userentity1_.date_format as date_for3_4_1_, userentity1_.email as email4_4_1_, userentity1_.last_login_ts as last_log5_4_1_, userentity1_.is_local as is_local6_4_1_, userentity1_.name as name7_4_1_, userentity1_.password as password8_4_1_, userentity1_.local_session_id as local_se9_4_1_, userentity1_.date_timezone as date_ti10_4_1_'
    +-[FROM] FromClause: 'from' FromClause{level=1, fromElementCounter=2, fromElements=2, fromElementByClassAlias=[generatedAlias0, generatedAlias1], fromElementByTableAlias=[oauthservi0_, userentity1_], fromElementsByPath=[generatedAlias0.owner], collectionJoinFromElementsByPath=[], impliedElements=[]}
    |  \-[FROM_FRAGMENT] FromElement: 'oauth_service oauthservi0_' FromElement{explicit,not a collection join,not a fetch join,fetch non-lazy properties,classAlias=generatedAlias0,role=null,tableName=oauth_service,tableAlias=oauthservi0_,origin=null,columns={,className=com.peterphi.usermanager.db.entity.OAuthServiceEntity}}
    |     \-[JOIN_FRAGMENT] FromElement: 'left outer join user_account userentity1_ on oauthservi0_.owner_id=userentity1_.id' FromElement{explicit,not a collection join,fetch join,fetch non-lazy properties,classAlias=generatedAlias1,role=com.peterphi.usermanager.db.entity.OAuthServiceEntity.owner,tableName=user_account,tableAlias=userentity1_,origin=oauth_service oauthservi0_,columns={oauthservi0_.owner_id ,className=com.peterphi.usermanager.db.entity.UserEntity}}
    \-[WHERE] SqlNode: 'where'
       \-[EQ] BinaryLogicOperatorNode: '='
          +-[NUM_INT] LiteralNode: '1'
          \-[NUM_INT] LiteralNode: '1'

2021-12-11 17:23:52,137 DEBUG throwQueryException() : no errors
2021-12-11 17:23:52,138 DEBUG HQL: select generatedAlias0 from com.peterphi.usermanager.db.entity.OAuthServiceEntity as generatedAlias0 left join fetch generatedAlias0.owner as generatedAlias1 where 1=1
2021-12-11 17:23:52,138 DEBUG SQL: select oauthservi0_.id as id1_0_0_, userentity1_.id as id1_4_1_, oauthservi0_.client_secret as client_s2_0_0_, oauthservi0_.created_ts as created_3_0_0_, oauthservi0_.is_enabled as is_enabl4_0_0_, oauthservi0_.client_endpoints as client_e5_0_0_, oauthservi0_.client_name as client_n6_0_0_, oauthservi0_.owner_id as owner_id8_0_0_, oauthservi0_.updated_ts as updated_7_0_0_, userentity1_.created_ts as created_2_4_1_, userentity1_.date_format as date_for3_4_1_, userentity1_.email as email4_4_1_, userentity1_.last_login_ts as last_log5_4_1_, userentity1_.is_local as is_local6_4_1_, userentity1_.name as name7_4_1_, userentity1_.password as password8_4_1_, userentity1_.local_session_id as local_se9_4_1_, userentity1_.date_timezone as date_ti10_4_1_ from oauth_service oauthservi0_ left outer join user_account userentity1_ on oauthservi0_.owner_id=userentity1_.id where 1=1
2021-12-11 17:23:52,138 DEBUG throwQueryException() : no errors
2021-12-11 17:23:52,139 DEBUG select oauthservi0_.id as id1_0_0_, userentity1_.id as id1_4_1_, oauthservi0_.client_secret as client_s2_0_0_, oauthservi0_.created_ts as created_3_0_0_, oauthservi0_.is_enabled as is_enabl4_0_0_, oauthservi0_.client_endpoints as client_e5_0_0_, oauthservi0_.client_name as client_n6_0_0_, oauthservi0_.owner_id as owner_id8_0_0_, oauthservi0_.updated_ts as updated_7_0_0_, userentity1_.created_ts as created_2_4_1_, userentity1_.date_format as date_for3_4_1_, userentity1_.email as email4_4_1_, userentity1_.last_login_ts as last_log5_4_1_, userentity1_.is_local as is_local6_4_1_, userentity1_.name as name7_4_1_, userentity1_.password as password8_4_1_, userentity1_.local_session_id as local_se9_4_1_, userentity1_.date_timezone as date_ti10_4_1_ from oauth_service oauthservi0_ left outer join user_account userentity1_ on oauthservi0_.owner_id=userentity1_.id where 1=1
2021-12-11 17:23:52,140 DEBUG Transformed: 0 rows to: 0 distinct results
2021-12-11 17:23:52,140 DEBUG rolling back
2021-12-11 17:23:52,140 DEBUG Initiating JDBC connection release from afterTransaction
2021-12-11 17:23:52,140 DEBUG Clearing local Synchronizations
2021-12-11 17:23:52,140 DEBUG Initiating JDBC connection release from afterTransaction
2021-12-11 17:23:52,140 DEBUG begin
2021-12-11 17:23:52,143 DEBUG Rendered criteria query -> select generatedAlias0 from oauth_session as generatedAlias0 left join fetch generatedAlias0.context as generatedAlias1 left join fetch generatedAlias1.service as generatedAlias2 left join fetch generatedAlias2.owner as generatedAlias3 left join fetch generatedAlias1.user as generatedAlias4 where 1=1
2021-12-11 17:23:52,145 DEBUG parse() - HQL: select generatedAlias0 from com.peterphi.usermanager.db.entity.OAuthSessionEntity as generatedAlias0 left join fetch generatedAlias0.context as generatedAlias1 left join fetch generatedAlias1.service as generatedAlias2 left join fetch generatedAlias2.owner as generatedAlias3 left join fetch generatedAlias1.user as generatedAlias4 where 1=1
2021-12-11 17:23:52,146 DEBUG throwQueryException() : no errors
2021-12-11 17:23:52,146 DEBUG --- HQL AST ---
 \-[QUERY] Node: 'query'
    +-[SELECT_FROM] Node: 'SELECT_FROM'
    |  +-[FROM] Node: 'from'
    |  |  +-[RANGE] Node: 'RANGE'
    |  |  |  +-[DOT] Node: '.'
    |  |  |  |  +-[DOT] Node: '.'
    |  |  |  |  |  +-[DOT] Node: '.'
    |  |  |  |  |  |  +-[DOT] Node: '.'
    |  |  |  |  |  |  |  +-[DOT] Node: '.'
    |  |  |  |  |  |  |  |  +-[IDENT] Node: 'com'
    |  |  |  |  |  |  |  |  \-[IDENT] Node: 'peterphi'
    |  |  |  |  |  |  |  \-[IDENT] Node: 'usermanager'
    |  |  |  |  |  |  \-[IDENT] Node: 'db'
    |  |  |  |  |  \-[IDENT] Node: 'entity'
    |  |  |  |  \-[IDENT] Node: 'OAuthSessionEntity'
    |  |  |  \-[ALIAS] Node: 'generatedAlias0'
    |  |  +-[JOIN] Node: 'join'
    |  |  |  +-[LEFT] Node: 'left'
    |  |  |  +-[FETCH] Node: 'fetch'
    |  |  |  +-[DOT] Node: '.'
    |  |  |  |  +-[IDENT] Node: 'generatedAlias0'
    |  |  |  |  \-[IDENT] Node: 'context'
    |  |  |  \-[ALIAS] Node: 'generatedAlias1'
    |  |  +-[JOIN] Node: 'join'
    |  |  |  +-[LEFT] Node: 'left'
    |  |  |  +-[FETCH] Node: 'fetch'
    |  |  |  +-[DOT] Node: '.'
    |  |  |  |  +-[IDENT] Node: 'generatedAlias1'
    |  |  |  |  \-[IDENT] Node: 'service'
    |  |  |  \-[ALIAS] Node: 'generatedAlias2'
    |  |  +-[JOIN] Node: 'join'
    |  |  |  +-[LEFT] Node: 'left'
    |  |  |  +-[FETCH] Node: 'fetch'
    |  |  |  +-[DOT] Node: '.'
    |  |  |  |  +-[IDENT] Node: 'generatedAlias2'
    |  |  |  |  \-[IDENT] Node: 'owner'
    |  |  |  \-[ALIAS] Node: 'generatedAlias3'
    |  |  \-[JOIN] Node: 'join'
    |  |     +-[LEFT] Node: 'left'
    |  |     +-[FETCH] Node: 'fetch'
    |  |     +-[DOT] Node: '.'
    |  |     |  +-[IDENT] Node: 'generatedAlias1'
    |  |     |  \-[IDENT] Node: 'user'
    |  |     \-[ALIAS] Node: 'generatedAlias4'
    |  \-[SELECT] Node: 'select'
    |     \-[IDENT] Node: 'generatedAlias0'
    \-[WHERE] Node: 'where'
       \-[EQ] Node: '='
          +-[NUM_INT] Node: '1'
          \-[NUM_INT] Node: '1'

2021-12-11 17:23:52,147 DEBUG select << begin [level=1, statement=select]
2021-12-11 17:23:52,147 DEBUG FromClause{level=1} : com.peterphi.usermanager.db.entity.OAuthSessionEntity (generatedAlias0) -> oauthsessi0_
2021-12-11 17:23:52,147 DEBUG Resolved : generatedAlias0 -> oauthsessi0_.id
2021-12-11 17:23:52,148 DEBUG getDataType() : context -> org.hibernate.type.ManyToOneType(com.peterphi.usermanager.db.entity.OAuthSessionContextEntity)
2021-12-11 17:23:52,148 DEBUG dereferenceEntityJoin() : generating join for context in com.peterphi.usermanager.db.entity.OAuthSessionEntity (generatedAlias1) parent = [ {null} ]
2021-12-11 17:23:52,148 DEBUG FromClause{level=1} : com.peterphi.usermanager.db.entity.OAuthSessionContextEntity (generatedAlias1) -> oauthsessi1_
2021-12-11 17:23:52,148 DEBUG addJoinByPathMap() : generatedAlias0.context -> FromElement{explicit,not a collection join,not a fetch join,fetch non-lazy properties,classAlias=generatedAlias1,role=null,tableName=oauth_session_context,tableAlias=oauthsessi1_,origin=oauth_session oauthsessi0_,columns={oauthsessi0_.context_id ,className=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity}}
2021-12-11 17:23:52,148 DEBUG Resolved : generatedAlias0.context -> oauthsessi0_.context_id
2021-12-11 17:23:52,148 DEBUG createFromJoinElement() : -- join tree --
 \-[JOIN_FRAGMENT] FromElement: 'oauth_session_context oauthsessi1_' FromElement{explicit,not a collection join,fetch join,fetch non-lazy properties,classAlias=generatedAlias1,role=com.peterphi.usermanager.db.entity.OAuthSessionEntity.context,tableName=oauth_session_context,tableAlias=oauthsessi1_,origin=oauth_session oauthsessi0_,columns={oauthsessi0_.context_id ,className=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity}}

2021-12-11 17:23:52,148 DEBUG Resolved : generatedAlias1 -> oauthsessi1_.id
2021-12-11 17:23:52,149 DEBUG getDataType() : service -> org.hibernate.type.ManyToOneType(com.peterphi.usermanager.db.entity.OAuthServiceEntity)
2021-12-11 17:23:52,149 DEBUG dereferenceEntityJoin() : generating join for service in com.peterphi.usermanager.db.entity.OAuthSessionContextEntity (generatedAlias2) parent = [ {null} ]
2021-12-11 17:23:52,149 DEBUG FromClause{level=1} : com.peterphi.usermanager.db.entity.OAuthServiceEntity (generatedAlias2) -> oauthservi2_
2021-12-11 17:23:52,149 DEBUG addJoinByPathMap() : generatedAlias1.service -> FromElement{explicit,not a collection join,not a fetch join,fetch non-lazy properties,classAlias=generatedAlias2,role=null,tableName=oauth_service,tableAlias=oauthservi2_,origin=oauth_session_context oauthsessi1_,columns={oauthsessi1_.service_id ,className=com.peterphi.usermanager.db.entity.OAuthServiceEntity}}
2021-12-11 17:23:52,149 DEBUG Resolved : generatedAlias1.service -> oauthsessi1_.service_id
2021-12-11 17:23:52,149 DEBUG createFromJoinElement() : -- join tree --
 \-[JOIN_FRAGMENT] FromElement: 'oauth_service oauthservi2_' FromElement{explicit,not a collection join,fetch join,fetch non-lazy properties,classAlias=generatedAlias2,role=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity.service,tableName=oauth_service,tableAlias=oauthservi2_,origin=oauth_session_context oauthsessi1_,columns={oauthsessi1_.service_id ,className=com.peterphi.usermanager.db.entity.OAuthServiceEntity}}

2021-12-11 17:23:52,149 DEBUG Resolved : generatedAlias2 -> oauthservi2_.id
2021-12-11 17:23:52,150 DEBUG getDataType() : owner -> org.hibernate.type.ManyToOneType(com.peterphi.usermanager.db.entity.UserEntity)
2021-12-11 17:23:52,150 DEBUG dereferenceEntityJoin() : generating join for owner in com.peterphi.usermanager.db.entity.OAuthServiceEntity (generatedAlias3) parent = [ {null} ]
2021-12-11 17:23:52,150 DEBUG FromClause{level=1} : com.peterphi.usermanager.db.entity.UserEntity (generatedAlias3) -> userentity3_
2021-12-11 17:23:52,150 DEBUG addJoinByPathMap() : generatedAlias2.owner -> FromElement{explicit,not a collection join,not a fetch join,fetch non-lazy properties,classAlias=generatedAlias3,role=null,tableName=user_account,tableAlias=userentity3_,origin=oauth_service oauthservi2_,columns={oauthservi2_.owner_id ,className=com.peterphi.usermanager.db.entity.UserEntity}}
2021-12-11 17:23:52,150 DEBUG Resolved : generatedAlias2.owner -> oauthservi2_.owner_id
2021-12-11 17:23:52,150 DEBUG createFromJoinElement() : -- join tree --
 \-[JOIN_FRAGMENT] FromElement: 'user_account userentity3_' FromElement{explicit,not a collection join,fetch join,fetch non-lazy properties,classAlias=generatedAlias3,role=com.peterphi.usermanager.db.entity.OAuthServiceEntity.owner,tableName=user_account,tableAlias=userentity3_,origin=oauth_service oauthservi2_,columns={oauthservi2_.owner_id ,className=com.peterphi.usermanager.db.entity.UserEntity}}

2021-12-11 17:23:52,150 DEBUG Resolved : generatedAlias1 -> oauthsessi1_.id
2021-12-11 17:23:52,151 DEBUG getDataType() : user -> org.hibernate.type.ManyToOneType(com.peterphi.usermanager.db.entity.UserEntity)
2021-12-11 17:23:52,151 DEBUG dereferenceEntityJoin() : generating join for user in com.peterphi.usermanager.db.entity.OAuthSessionContextEntity (generatedAlias4) parent = [ {null} ]
2021-12-11 17:23:52,151 DEBUG FromClause{level=1} : com.peterphi.usermanager.db.entity.UserEntity (generatedAlias4) -> userentity4_
2021-12-11 17:23:52,151 DEBUG addJoinByPathMap() : generatedAlias1.user -> FromElement{explicit,not a collection join,not a fetch join,fetch non-lazy properties,classAlias=generatedAlias4,role=null,tableName=user_account,tableAlias=userentity4_,origin=oauth_session_context oauthsessi1_,columns={oauthsessi1_.user_id ,className=com.peterphi.usermanager.db.entity.UserEntity}}
2021-12-11 17:23:52,151 DEBUG Resolved : generatedAlias1.user -> oauthsessi1_.user_id
2021-12-11 17:23:52,151 DEBUG createFromJoinElement() : -- join tree --
 \-[JOIN_FRAGMENT] FromElement: 'user_account userentity4_' FromElement{explicit,not a collection join,fetch join,fetch non-lazy properties,classAlias=generatedAlias4,role=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity.user,tableName=user_account,tableAlias=userentity4_,origin=oauth_session_context oauthsessi1_,columns={oauthsessi1_.user_id ,className=com.peterphi.usermanager.db.entity.UserEntity}}

2021-12-11 17:23:52,151 DEBUG Resolved : generatedAlias0 -> oauthsessi0_.id
2021-12-11 17:23:52,151 DEBUG select : finishing up [level=1, statement=select]
2021-12-11 17:23:52,151 DEBUG processQuery() :  ( SELECT ( {select clause} oauthsessi0_.id ) ( FromClause{level=1} ( oauth_session oauthsessi0_ ( oauth_session_context oauthsessi1_ ( oauth_service oauthservi2_ user_account userentity3_ ) user_account userentity4_ ) ) ) ( where ( = 1 1 ) ) )
2021-12-11 17:23:52,151 DEBUG Using FROM fragment [oauth_session oauthsessi0_]
2021-12-11 17:23:52,151 DEBUG Using FROM fragment [left outer join oauth_session_context oauthsessi1_ on oauthsessi0_.context_id=oauthsessi1_.id]
2021-12-11 17:23:52,152 DEBUG Using FROM fragment [left outer join oauth_service oauthservi2_ on oauthsessi1_.service_id=oauthservi2_.id]
2021-12-11 17:23:52,152 DEBUG Using FROM fragment [left outer join user_account userentity3_ on oauthservi2_.owner_id=userentity3_.id]
2021-12-11 17:23:52,152 DEBUG Using FROM fragment [left outer join user_account userentity4_ on oauthsessi1_.user_id=userentity4_.id]
2021-12-11 17:23:52,152 DEBUG select >> end [level=1, statement=select]
2021-12-11 17:23:52,152 DEBUG --- SQL AST ---
 \-[SELECT] QueryNode: 'SELECT'  querySpaces (oauth_session_context,oauth_service,oauth_session,user_account)
    +-[SELECT_CLAUSE] SelectClause: '{select clause}'
    |  +-[ALIAS_REF] IdentNode: 'oauthsessi0_.id as id1_1_0_' {alias=generatedAlias0, className=com.peterphi.usermanager.db.entity.OAuthSessionEntity, tableAlias=oauthsessi0_}
    |  +-[SELECT_EXPR] SelectExpressionImpl: 'oauthsessi1_.id as id1_2_1_' {FromElement{explicit,not a collection join,fetch join,fetch non-lazy properties,classAlias=generatedAlias1,role=com.peterphi.usermanager.db.entity.OAuthSessionEntity.context,tableName=oauth_session_context,tableAlias=oauthsessi1_,origin=oauth_session oauthsessi0_,columns={oauthsessi0_.context_id ,className=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity}}}
    |  +-[SELECT_EXPR] SelectExpressionImpl: 'oauthservi2_.id as id1_0_2_' {FromElement{explicit,not a collection join,fetch join,fetch non-lazy properties,classAlias=generatedAlias2,role=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity.service,tableName=oauth_service,tableAlias=oauthservi2_,origin=left outer join oauth_session_context oauthsessi1_ on oauthsessi0_.context_id=oauthsessi1_.id,columns={oauthsessi1_.service_id ,className=com.peterphi.usermanager.db.entity.OAuthServiceEntity}}}
    |  +-[SELECT_EXPR] SelectExpressionImpl: 'userentity3_.id as id1_4_3_' {FromElement{explicit,not a collection join,fetch join,fetch non-lazy properties,classAlias=generatedAlias3,role=com.peterphi.usermanager.db.entity.OAuthServiceEntity.owner,tableName=user_account,tableAlias=userentity3_,origin=left outer join oauth_service oauthservi2_ on oauthsessi1_.service_id=oauthservi2_.id,columns={oauthservi2_.owner_id ,className=com.peterphi.usermanager.db.entity.UserEntity}}}
    |  +-[SELECT_EXPR] SelectExpressionImpl: 'userentity4_.id as id1_4_4_' {FromElement{explicit,not a collection join,fetch join,fetch non-lazy properties,classAlias=generatedAlias4,role=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity.user,tableName=user_account,tableAlias=userentity4_,origin=left outer join oauth_session_context oauthsessi1_ on oauthsessi0_.context_id=oauthsessi1_.id,columns={oauthsessi1_.user_id ,className=com.peterphi.usermanager.db.entity.UserEntity}}}
    |  +-[SQL_TOKEN] SqlFragment: 'oauthsessi0_.is_active as is_activ2_1_0_, oauthsessi0_.authorisation_code as authoris3_1_0_, oauthsessi0_.context_id as context_9_1_0_, oauthsessi0_.created_ts as created_4_1_0_, oauthsessi0_.expires_ts as expires_5_1_0_, oauthsessi0_.initiator_detail as initiato6_1_0_, oauthsessi0_.current_token as current_7_1_0_, oauthsessi0_.updated_ts as updated_8_1_0_'
    |  +-[SQL_TOKEN] SqlFragment: 'oauthsessi1_.is_active as is_activ2_2_1_, oauthsessi1_.created_ts as created_3_2_1_, oauthsessi1_.approved_scope as approved4_2_1_, oauthsessi1_.service_id as service_6_2_1_, oauthsessi1_.updated_ts as updated_5_2_1_, oauthsessi1_.user_id as user_id7_2_1_'
    |  +-[SQL_TOKEN] SqlFragment: 'oauthservi2_.client_secret as client_s2_0_2_, oauthservi2_.created_ts as created_3_0_2_, oauthservi2_.is_enabled as is_enabl4_0_2_, oauthservi2_.client_endpoints as client_e5_0_2_, oauthservi2_.client_name as client_n6_0_2_, oauthservi2_.owner_id as owner_id8_0_2_, oauthservi2_.updated_ts as updated_7_0_2_'
    |  +-[SQL_TOKEN] SqlFragment: 'userentity3_.created_ts as created_2_4_3_, userentity3_.date_format as date_for3_4_3_, userentity3_.email as email4_4_3_, userentity3_.last_login_ts as last_log5_4_3_, userentity3_.is_local as is_local6_4_3_, userentity3_.name as name7_4_3_, userentity3_.password as password8_4_3_, userentity3_.local_session_id as local_se9_4_3_, userentity3_.date_timezone as date_ti10_4_3_'
    |  \-[SQL_TOKEN] SqlFragment: 'userentity4_.created_ts as created_2_4_4_, userentity4_.date_format as date_for3_4_4_, userentity4_.email as email4_4_4_, userentity4_.last_login_ts as last_log5_4_4_, userentity4_.is_local as is_local6_4_4_, userentity4_.name as name7_4_4_, userentity4_.password as password8_4_4_, userentity4_.local_session_id as local_se9_4_4_, userentity4_.date_timezone as date_ti10_4_4_'
    +-[FROM] FromClause: 'from' FromClause{level=1, fromElementCounter=5, fromElements=5, fromElementByClassAlias=[generatedAlias0, generatedAlias2, generatedAlias1, generatedAlias4, generatedAlias3], fromElementByTableAlias=[oauthsessi1_, oauthsessi0_, oauthservi2_, userentity4_, userentity3_], fromElementsByPath=[generatedAlias1.service, generatedAlias2.owner, generatedAlias0.context, generatedAlias1.user], collectionJoinFromElementsByPath=[], impliedElements=[]}
    |  \-[FROM_FRAGMENT] FromElement: 'oauth_session oauthsessi0_' FromElement{explicit,not a collection join,not a fetch join,fetch non-lazy properties,classAlias=generatedAlias0,role=null,tableName=oauth_session,tableAlias=oauthsessi0_,origin=null,columns={,className=com.peterphi.usermanager.db.entity.OAuthSessionEntity}}
    |     \-[JOIN_FRAGMENT] FromElement: 'left outer join oauth_session_context oauthsessi1_ on oauthsessi0_.context_id=oauthsessi1_.id' FromElement{explicit,not a collection join,fetch join,fetch non-lazy properties,classAlias=generatedAlias1,role=com.peterphi.usermanager.db.entity.OAuthSessionEntity.context,tableName=oauth_session_context,tableAlias=oauthsessi1_,origin=oauth_session oauthsessi0_,columns={oauthsessi0_.context_id ,className=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity}}
    |        +-[JOIN_FRAGMENT] FromElement: 'left outer join oauth_service oauthservi2_ on oauthsessi1_.service_id=oauthservi2_.id' FromElement{explicit,not a collection join,fetch join,fetch non-lazy properties,classAlias=generatedAlias2,role=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity.service,tableName=oauth_service,tableAlias=oauthservi2_,origin=left outer join oauth_session_context oauthsessi1_ on oauthsessi0_.context_id=oauthsessi1_.id,columns={oauthsessi1_.service_id ,className=com.peterphi.usermanager.db.entity.OAuthServiceEntity}}
    |        |  \-[JOIN_FRAGMENT] FromElement: 'left outer join user_account userentity3_ on oauthservi2_.owner_id=userentity3_.id' FromElement{explicit,not a collection join,fetch join,fetch non-lazy properties,classAlias=generatedAlias3,role=com.peterphi.usermanager.db.entity.OAuthServiceEntity.owner,tableName=user_account,tableAlias=userentity3_,origin=left outer join oauth_service oauthservi2_ on oauthsessi1_.service_id=oauthservi2_.id,columns={oauthservi2_.owner_id ,className=com.peterphi.usermanager.db.entity.UserEntity}}
    |        \-[JOIN_FRAGMENT] FromElement: 'left outer join user_account userentity4_ on oauthsessi1_.user_id=userentity4_.id' FromElement{explicit,not a collection join,fetch join,fetch non-lazy properties,classAlias=generatedAlias4,role=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity.user,tableName=user_account,tableAlias=userentity4_,origin=left outer join oauth_session_context oauthsessi1_ on oauthsessi0_.context_id=oauthsessi1_.id,columns={oauthsessi1_.user_id ,className=com.peterphi.usermanager.db.entity.UserEntity}}
    \-[WHERE] SqlNode: 'where'
       \-[EQ] BinaryLogicOperatorNode: '='
          +-[NUM_INT] LiteralNode: '1'
          \-[NUM_INT] LiteralNode: '1'

2021-12-11 17:23:52,152 DEBUG throwQueryException() : no errors
2021-12-11 17:23:52,152 DEBUG HQL: select generatedAlias0 from com.peterphi.usermanager.db.entity.OAuthSessionEntity as generatedAlias0 left join fetch generatedAlias0.context as generatedAlias1 left join fetch generatedAlias1.service as generatedAlias2 left join fetch generatedAlias2.owner as generatedAlias3 left join fetch generatedAlias1.user as generatedAlias4 where 1=1
2021-12-11 17:23:52,152 DEBUG SQL: select oauthsessi0_.id as id1_1_0_, oauthsessi1_.id as id1_2_1_, oauthservi2_.id as id1_0_2_, userentity3_.id as id1_4_3_, userentity4_.id as id1_4_4_, oauthsessi0_.is_active as is_activ2_1_0_, oauthsessi0_.authorisation_code as authoris3_1_0_, oauthsessi0_.context_id as context_9_1_0_, oauthsessi0_.created_ts as created_4_1_0_, oauthsessi0_.expires_ts as expires_5_1_0_, oauthsessi0_.initiator_detail as initiato6_1_0_, oauthsessi0_.current_token as current_7_1_0_, oauthsessi0_.updated_ts as updated_8_1_0_, oauthsessi1_.is_active as is_activ2_2_1_, oauthsessi1_.created_ts as created_3_2_1_, oauthsessi1_.approved_scope as approved4_2_1_, oauthsessi1_.service_id as service_6_2_1_, oauthsessi1_.updated_ts as updated_5_2_1_, oauthsessi1_.user_id as user_id7_2_1_, oauthservi2_.client_secret as client_s2_0_2_, oauthservi2_.created_ts as created_3_0_2_, oauthservi2_.is_enabled as is_enabl4_0_2_, oauthservi2_.client_endpoints as client_e5_0_2_, oauthservi2_.client_name as client_n6_0_2_, oauthservi2_.owner_id as owner_id8_0_2_, oauthservi2_.updated_ts as updated_7_0_2_, userentity3_.created_ts as created_2_4_3_, userentity3_.date_format as date_for3_4_3_, userentity3_.email as email4_4_3_, userentity3_.last_login_ts as last_log5_4_3_, userentity3_.is_local as is_local6_4_3_, userentity3_.name as name7_4_3_, userentity3_.password as password8_4_3_, userentity3_.local_session_id as local_se9_4_3_, userentity3_.date_timezone as date_ti10_4_3_, userentity4_.created_ts as created_2_4_4_, userentity4_.date_format as date_for3_4_4_, userentity4_.email as email4_4_4_, userentity4_.last_login_ts as last_log5_4_4_, userentity4_.is_local as is_local6_4_4_, userentity4_.name as name7_4_4_, userentity4_.password as password8_4_4_, userentity4_.local_session_id as local_se9_4_4_, userentity4_.date_timezone as date_ti10_4_4_ from oauth_session oauthsessi0_ left outer join oauth_session_context oauthsessi1_ on oauthsessi0_.context_id=oauthsessi1_.id left outer join oauth_service oauthservi2_ on oauthsessi1_.service_id=oauthservi2_.id left outer join user_account userentity3_ on oauthservi2_.owner_id=userentity3_.id left outer join user_account userentity4_ on oauthsessi1_.user_id=userentity4_.id where 1=1
2021-12-11 17:23:52,152 DEBUG throwQueryException() : no errors
2021-12-11 17:23:52,153 DEBUG select oauthsessi0_.id as id1_1_0_, oauthsessi1_.id as id1_2_1_, oauthservi2_.id as id1_0_2_, userentity3_.id as id1_4_3_, userentity4_.id as id1_4_4_, oauthsessi0_.is_active as is_activ2_1_0_, oauthsessi0_.authorisation_code as authoris3_1_0_, oauthsessi0_.context_id as context_9_1_0_, oauthsessi0_.created_ts as created_4_1_0_, oauthsessi0_.expires_ts as expires_5_1_0_, oauthsessi0_.initiator_detail as initiato6_1_0_, oauthsessi0_.current_token as current_7_1_0_, oauthsessi0_.updated_ts as updated_8_1_0_, oauthsessi1_.is_active as is_activ2_2_1_, oauthsessi1_.created_ts as created_3_2_1_, oauthsessi1_.approved_scope as approved4_2_1_, oauthsessi1_.service_id as service_6_2_1_, oauthsessi1_.updated_ts as updated_5_2_1_, oauthsessi1_.user_id as user_id7_2_1_, oauthservi2_.client_secret as client_s2_0_2_, oauthservi2_.created_ts as created_3_0_2_, oauthservi2_.is_enabled as is_enabl4_0_2_, oauthservi2_.client_endpoints as client_e5_0_2_, oauthservi2_.client_name as client_n6_0_2_, oauthservi2_.owner_id as owner_id8_0_2_, oauthservi2_.updated_ts as updated_7_0_2_, userentity3_.created_ts as created_2_4_3_, userentity3_.date_format as date_for3_4_3_, userentity3_.email as email4_4_3_, userentity3_.last_login_ts as last_log5_4_3_, userentity3_.is_local as is_local6_4_3_, userentity3_.name as name7_4_3_, userentity3_.password as password8_4_3_, userentity3_.local_session_id as local_se9_4_3_, userentity3_.date_timezone as date_ti10_4_3_, userentity4_.created_ts as created_2_4_4_, userentity4_.date_format as date_for3_4_4_, userentity4_.email as email4_4_4_, userentity4_.last_login_ts as last_log5_4_4_, userentity4_.is_local as is_local6_4_4_, userentity4_.name as name7_4_4_, userentity4_.password as password8_4_4_, userentity4_.local_session_id as local_se9_4_4_, userentity4_.date_timezone as date_ti10_4_4_ from oauth_session oauthsessi0_ left outer join oauth_session_context oauthsessi1_ on oauthsessi0_.context_id=oauthsessi1_.id left outer join oauth_service oauthservi2_ on oauthsessi1_.service_id=oauthservi2_.id left outer join user_account userentity3_ on oauthservi2_.owner_id=userentity3_.id left outer join user_account userentity4_ on oauthsessi1_.user_id=userentity4_.id where 1=1
2021-12-11 17:23:52,154 DEBUG Transformed: 0 rows to: 0 distinct results
2021-12-11 17:23:52,154 DEBUG rolling back
2021-12-11 17:23:52,154 DEBUG Initiating JDBC connection release from afterTransaction
2021-12-11 17:23:52,154 DEBUG Clearing local Synchronizations
2021-12-11 17:23:52,154 DEBUG Initiating JDBC connection release from afterTransaction
2021-12-11 17:23:52,155 DEBUG begin
2021-12-11 17:23:52,155 DEBUG Rendered criteria query -> select generatedAlias0 from oauth_session_context as generatedAlias0 left join fetch generatedAlias0.service as generatedAlias1 left join fetch generatedAlias1.owner as generatedAlias2 left join fetch generatedAlias0.user as generatedAlias3 where 1=1
2021-12-11 17:23:52,157 DEBUG parse() - HQL: select generatedAlias0 from com.peterphi.usermanager.db.entity.OAuthSessionContextEntity as generatedAlias0 left join fetch generatedAlias0.service as generatedAlias1 left join fetch generatedAlias1.owner as generatedAlias2 left join fetch generatedAlias0.user as generatedAlias3 where 1=1
2021-12-11 17:23:52,158 DEBUG throwQueryException() : no errors
2021-12-11 17:23:52,158 DEBUG --- HQL AST ---
 \-[QUERY] Node: 'query'
    +-[SELECT_FROM] Node: 'SELECT_FROM'
    |  +-[FROM] Node: 'from'
    |  |  +-[RANGE] Node: 'RANGE'
    |  |  |  +-[DOT] Node: '.'
    |  |  |  |  +-[DOT] Node: '.'
    |  |  |  |  |  +-[DOT] Node: '.'
    |  |  |  |  |  |  +-[DOT] Node: '.'
    |  |  |  |  |  |  |  +-[DOT] Node: '.'
    |  |  |  |  |  |  |  |  +-[IDENT] Node: 'com'
    |  |  |  |  |  |  |  |  \-[IDENT] Node: 'peterphi'
    |  |  |  |  |  |  |  \-[IDENT] Node: 'usermanager'
    |  |  |  |  |  |  \-[IDENT] Node: 'db'
    |  |  |  |  |  \-[IDENT] Node: 'entity'
    |  |  |  |  \-[IDENT] Node: 'OAuthSessionContextEntity'
    |  |  |  \-[ALIAS] Node: 'generatedAlias0'
    |  |  +-[JOIN] Node: 'join'
    |  |  |  +-[LEFT] Node: 'left'
    |  |  |  +-[FETCH] Node: 'fetch'
    |  |  |  +-[DOT] Node: '.'
    |  |  |  |  +-[IDENT] Node: 'generatedAlias0'
    |  |  |  |  \-[IDENT] Node: 'service'
    |  |  |  \-[ALIAS] Node: 'generatedAlias1'
    |  |  +-[JOIN] Node: 'join'
    |  |  |  +-[LEFT] Node: 'left'
    |  |  |  +-[FETCH] Node: 'fetch'
    |  |  |  +-[DOT] Node: '.'
    |  |  |  |  +-[IDENT] Node: 'generatedAlias1'
    |  |  |  |  \-[IDENT] Node: 'owner'
    |  |  |  \-[ALIAS] Node: 'generatedAlias2'
    |  |  \-[JOIN] Node: 'join'
    |  |     +-[LEFT] Node: 'left'
    |  |     +-[FETCH] Node: 'fetch'
    |  |     +-[DOT] Node: '.'
    |  |     |  +-[IDENT] Node: 'generatedAlias0'
    |  |     |  \-[IDENT] Node: 'user'
    |  |     \-[ALIAS] Node: 'generatedAlias3'
    |  \-[SELECT] Node: 'select'
    |     \-[IDENT] Node: 'generatedAlias0'
    \-[WHERE] Node: 'where'
       \-[EQ] Node: '='
          +-[NUM_INT] Node: '1'
          \-[NUM_INT] Node: '1'

2021-12-11 17:23:52,158 DEBUG select << begin [level=1, statement=select]
2021-12-11 17:23:52,158 DEBUG FromClause{level=1} : com.peterphi.usermanager.db.entity.OAuthSessionContextEntity (generatedAlias0) -> oauthsessi0_
2021-12-11 17:23:52,158 DEBUG Resolved : generatedAlias0 -> oauthsessi0_.id
2021-12-11 17:23:52,159 DEBUG getDataType() : service -> org.hibernate.type.ManyToOneType(com.peterphi.usermanager.db.entity.OAuthServiceEntity)
2021-12-11 17:23:52,159 DEBUG dereferenceEntityJoin() : generating join for service in com.peterphi.usermanager.db.entity.OAuthSessionContextEntity (generatedAlias1) parent = [ {null} ]
2021-12-11 17:23:52,159 DEBUG FromClause{level=1} : com.peterphi.usermanager.db.entity.OAuthServiceEntity (generatedAlias1) -> oauthservi1_
2021-12-11 17:23:52,159 DEBUG addJoinByPathMap() : generatedAlias0.service -> FromElement{explicit,not a collection join,not a fetch join,fetch non-lazy properties,classAlias=generatedAlias1,role=null,tableName=oauth_service,tableAlias=oauthservi1_,origin=oauth_session_context oauthsessi0_,columns={oauthsessi0_.service_id ,className=com.peterphi.usermanager.db.entity.OAuthServiceEntity}}
2021-12-11 17:23:52,159 DEBUG Resolved : generatedAlias0.service -> oauthsessi0_.service_id
2021-12-11 17:23:52,159 DEBUG createFromJoinElement() : -- join tree --
 \-[JOIN_FRAGMENT] FromElement: 'oauth_service oauthservi1_' FromElement{explicit,not a collection join,fetch join,fetch non-lazy properties,classAlias=generatedAlias1,role=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity.service,tableName=oauth_service,tableAlias=oauthservi1_,origin=oauth_session_context oauthsessi0_,columns={oauthsessi0_.service_id ,className=com.peterphi.usermanager.db.entity.OAuthServiceEntity}}

2021-12-11 17:23:52,159 DEBUG Resolved : generatedAlias1 -> oauthservi1_.id
2021-12-11 17:23:52,160 DEBUG getDataType() : owner -> org.hibernate.type.ManyToOneType(com.peterphi.usermanager.db.entity.UserEntity)
2021-12-11 17:23:52,160 DEBUG dereferenceEntityJoin() : generating join for owner in com.peterphi.usermanager.db.entity.OAuthServiceEntity (generatedAlias2) parent = [ {null} ]
2021-12-11 17:23:52,160 DEBUG FromClause{level=1} : com.peterphi.usermanager.db.entity.UserEntity (generatedAlias2) -> userentity2_
2021-12-11 17:23:52,160 DEBUG addJoinByPathMap() : generatedAlias1.owner -> FromElement{explicit,not a collection join,not a fetch join,fetch non-lazy properties,classAlias=generatedAlias2,role=null,tableName=user_account,tableAlias=userentity2_,origin=oauth_service oauthservi1_,columns={oauthservi1_.owner_id ,className=com.peterphi.usermanager.db.entity.UserEntity}}
2021-12-11 17:23:52,160 DEBUG Resolved : generatedAlias1.owner -> oauthservi1_.owner_id
2021-12-11 17:23:52,160 DEBUG createFromJoinElement() : -- join tree --
 \-[JOIN_FRAGMENT] FromElement: 'user_account userentity2_' FromElement{explicit,not a collection join,fetch join,fetch non-lazy properties,classAlias=generatedAlias2,role=com.peterphi.usermanager.db.entity.OAuthServiceEntity.owner,tableName=user_account,tableAlias=userentity2_,origin=oauth_service oauthservi1_,columns={oauthservi1_.owner_id ,className=com.peterphi.usermanager.db.entity.UserEntity}}

2021-12-11 17:23:52,160 DEBUG Resolved : generatedAlias0 -> oauthsessi0_.id
2021-12-11 17:23:52,161 DEBUG getDataType() : user -> org.hibernate.type.ManyToOneType(com.peterphi.usermanager.db.entity.UserEntity)
2021-12-11 17:23:52,161 DEBUG dereferenceEntityJoin() : generating join for user in com.peterphi.usermanager.db.entity.OAuthSessionContextEntity (generatedAlias3) parent = [ {null} ]
2021-12-11 17:23:52,161 DEBUG FromClause{level=1} : com.peterphi.usermanager.db.entity.UserEntity (generatedAlias3) -> userentity3_
2021-12-11 17:23:52,161 DEBUG addJoinByPathMap() : generatedAlias0.user -> FromElement{explicit,not a collection join,not a fetch join,fetch non-lazy properties,classAlias=generatedAlias3,role=null,tableName=user_account,tableAlias=userentity3_,origin=oauth_session_context oauthsessi0_,columns={oauthsessi0_.user_id ,className=com.peterphi.usermanager.db.entity.UserEntity}}
2021-12-11 17:23:52,161 DEBUG Resolved : generatedAlias0.user -> oauthsessi0_.user_id
2021-12-11 17:23:52,161 DEBUG createFromJoinElement() : -- join tree --
 \-[JOIN_FRAGMENT] FromElement: 'user_account userentity3_' FromElement{explicit,not a collection join,fetch join,fetch non-lazy properties,classAlias=generatedAlias3,role=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity.user,tableName=user_account,tableAlias=userentity3_,origin=oauth_session_context oauthsessi0_,columns={oauthsessi0_.user_id ,className=com.peterphi.usermanager.db.entity.UserEntity}}

2021-12-11 17:23:52,161 DEBUG Resolved : generatedAlias0 -> oauthsessi0_.id
2021-12-11 17:23:52,161 DEBUG select : finishing up [level=1, statement=select]
2021-12-11 17:23:52,161 DEBUG processQuery() :  ( SELECT ( {select clause} oauthsessi0_.id ) ( FromClause{level=1} ( oauth_session_context oauthsessi0_ ( oauth_service oauthservi1_ user_account userentity2_ ) user_account userentity3_ ) ) ( where ( = 1 1 ) ) )
2021-12-11 17:23:52,162 DEBUG Using FROM fragment [oauth_session_context oauthsessi0_]
2021-12-11 17:23:52,162 DEBUG Using FROM fragment [left outer join oauth_service oauthservi1_ on oauthsessi0_.service_id=oauthservi1_.id]
2021-12-11 17:23:52,162 DEBUG Using FROM fragment [left outer join user_account userentity2_ on oauthservi1_.owner_id=userentity2_.id]
2021-12-11 17:23:52,162 DEBUG Using FROM fragment [left outer join user_account userentity3_ on oauthsessi0_.user_id=userentity3_.id]
2021-12-11 17:23:52,162 DEBUG select >> end [level=1, statement=select]
2021-12-11 17:23:52,162 DEBUG --- SQL AST ---
 \-[SELECT] QueryNode: 'SELECT'  querySpaces (oauth_session_context,oauth_service,user_account)
    +-[SELECT_CLAUSE] SelectClause: '{select clause}'
    |  +-[ALIAS_REF] IdentNode: 'oauthsessi0_.id as id1_2_0_' {alias=generatedAlias0, className=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity, tableAlias=oauthsessi0_}
    |  +-[SELECT_EXPR] SelectExpressionImpl: 'oauthservi1_.id as id1_0_1_' {FromElement{explicit,not a collection join,fetch join,fetch non-lazy properties,classAlias=generatedAlias1,role=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity.service,tableName=oauth_service,tableAlias=oauthservi1_,origin=oauth_session_context oauthsessi0_,columns={oauthsessi0_.service_id ,className=com.peterphi.usermanager.db.entity.OAuthServiceEntity}}}
    |  +-[SELECT_EXPR] SelectExpressionImpl: 'userentity2_.id as id1_4_2_' {FromElement{explicit,not a collection join,fetch join,fetch non-lazy properties,classAlias=generatedAlias2,role=com.peterphi.usermanager.db.entity.OAuthServiceEntity.owner,tableName=user_account,tableAlias=userentity2_,origin=left outer join oauth_service oauthservi1_ on oauthsessi0_.service_id=oauthservi1_.id,columns={oauthservi1_.owner_id ,className=com.peterphi.usermanager.db.entity.UserEntity}}}
    |  +-[SELECT_EXPR] SelectExpressionImpl: 'userentity3_.id as id1_4_3_' {FromElement{explicit,not a collection join,fetch join,fetch non-lazy properties,classAlias=generatedAlias3,role=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity.user,tableName=user_account,tableAlias=userentity3_,origin=oauth_session_context oauthsessi0_,columns={oauthsessi0_.user_id ,className=com.peterphi.usermanager.db.entity.UserEntity}}}
    |  +-[SQL_TOKEN] SqlFragment: 'oauthsessi0_.is_active as is_activ2_2_0_, oauthsessi0_.created_ts as created_3_2_0_, oauthsessi0_.approved_scope as approved4_2_0_, oauthsessi0_.service_id as service_6_2_0_, oauthsessi0_.updated_ts as updated_5_2_0_, oauthsessi0_.user_id as user_id7_2_0_'
    |  +-[SQL_TOKEN] SqlFragment: 'oauthservi1_.client_secret as client_s2_0_1_, oauthservi1_.created_ts as created_3_0_1_, oauthservi1_.is_enabled as is_enabl4_0_1_, oauthservi1_.client_endpoints as client_e5_0_1_, oauthservi1_.client_name as client_n6_0_1_, oauthservi1_.owner_id as owner_id8_0_1_, oauthservi1_.updated_ts as updated_7_0_1_'
    |  +-[SQL_TOKEN] SqlFragment: 'userentity2_.created_ts as created_2_4_2_, userentity2_.date_format as date_for3_4_2_, userentity2_.email as email4_4_2_, userentity2_.last_login_ts as last_log5_4_2_, userentity2_.is_local as is_local6_4_2_, userentity2_.name as name7_4_2_, userentity2_.password as password8_4_2_, userentity2_.local_session_id as local_se9_4_2_, userentity2_.date_timezone as date_ti10_4_2_'
    |  \-[SQL_TOKEN] SqlFragment: 'userentity3_.created_ts as created_2_4_3_, userentity3_.date_format as date_for3_4_3_, userentity3_.email as email4_4_3_, userentity3_.last_login_ts as last_log5_4_3_, userentity3_.is_local as is_local6_4_3_, userentity3_.name as name7_4_3_, userentity3_.password as password8_4_3_, userentity3_.local_session_id as local_se9_4_3_, userentity3_.date_timezone as date_ti10_4_3_'
    +-[FROM] FromClause: 'from' FromClause{level=1, fromElementCounter=4, fromElements=4, fromElementByClassAlias=[generatedAlias0, generatedAlias2, generatedAlias1, generatedAlias3], fromElementByTableAlias=[oauthsessi0_, oauthservi1_, userentity3_, userentity2_], fromElementsByPath=[generatedAlias0.service, generatedAlias0.user, generatedAlias1.owner], collectionJoinFromElementsByPath=[], impliedElements=[]}
    |  \-[FROM_FRAGMENT] FromElement: 'oauth_session_context oauthsessi0_' FromElement{explicit,not a collection join,not a fetch join,fetch non-lazy properties,classAlias=generatedAlias0,role=null,tableName=oauth_session_context,tableAlias=oauthsessi0_,origin=null,columns={,className=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity}}
    |     +-[JOIN_FRAGMENT] FromElement: 'left outer join oauth_service oauthservi1_ on oauthsessi0_.service_id=oauthservi1_.id' FromElement{explicit,not a collection join,fetch join,fetch non-lazy properties,classAlias=generatedAlias1,role=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity.service,tableName=oauth_service,tableAlias=oauthservi1_,origin=oauth_session_context oauthsessi0_,columns={oauthsessi0_.service_id ,className=com.peterphi.usermanager.db.entity.OAuthServiceEntity}}
    |     |  \-[JOIN_FRAGMENT] FromElement: 'left outer join user_account userentity2_ on oauthservi1_.owner_id=userentity2_.id' FromElement{explicit,not a collection join,fetch join,fetch non-lazy properties,classAlias=generatedAlias2,role=com.peterphi.usermanager.db.entity.OAuthServiceEntity.owner,tableName=user_account,tableAlias=userentity2_,origin=left outer join oauth_service oauthservi1_ on oauthsessi0_.service_id=oauthservi1_.id,columns={oauthservi1_.owner_id ,className=com.peterphi.usermanager.db.entity.UserEntity}}
    |     \-[JOIN_FRAGMENT] FromElement: 'left outer join user_account userentity3_ on oauthsessi0_.user_id=userentity3_.id' FromElement{explicit,not a collection join,fetch join,fetch non-lazy properties,classAlias=generatedAlias3,role=com.peterphi.usermanager.db.entity.OAuthSessionContextEntity.user,tableName=user_account,tableAlias=userentity3_,origin=oauth_session_context oauthsessi0_,columns={oauthsessi0_.user_id ,className=com.peterphi.usermanager.db.entity.UserEntity}}
    \-[WHERE] SqlNode: 'where'
       \-[EQ] BinaryLogicOperatorNode: '='
          +-[NUM_INT] LiteralNode: '1'
          \-[NUM_INT] LiteralNode: '1'

2021-12-11 17:23:52,162 DEBUG throwQueryException() : no errors
2021-12-11 17:23:52,162 DEBUG HQL: select generatedAlias0 from com.peterphi.usermanager.db.entity.OAuthSessionContextEntity as generatedAlias0 left join fetch generatedAlias0.service as generatedAlias1 left join fetch generatedAlias1.owner as generatedAlias2 left join fetch generatedAlias0.user as generatedAlias3 where 1=1
2021-12-11 17:23:52,162 DEBUG SQL: select oauthsessi0_.id as id1_2_0_, oauthservi1_.id as id1_0_1_, userentity2_.id as id1_4_2_, userentity3_.id as id1_4_3_, oauthsessi0_.is_active as is_activ2_2_0_, oauthsessi0_.created_ts as created_3_2_0_, oauthsessi0_.approved_scope as approved4_2_0_, oauthsessi0_.service_id as service_6_2_0_, oauthsessi0_.updated_ts as updated_5_2_0_, oauthsessi0_.user_id as user_id7_2_0_, oauthservi1_.client_secret as client_s2_0_1_, oauthservi1_.created_ts as created_3_0_1_, oauthservi1_.is_enabled as is_enabl4_0_1_, oauthservi1_.client_endpoints as client_e5_0_1_, oauthservi1_.client_name as client_n6_0_1_, oauthservi1_.owner_id as owner_id8_0_1_, oauthservi1_.updated_ts as updated_7_0_1_, userentity2_.created_ts as created_2_4_2_, userentity2_.date_format as date_for3_4_2_, userentity2_.email as email4_4_2_, userentity2_.last_login_ts as last_log5_4_2_, userentity2_.is_local as is_local6_4_2_, userentity2_.name as name7_4_2_, userentity2_.password as password8_4_2_, userentity2_.local_session_id as local_se9_4_2_, userentity2_.date_timezone as date_ti10_4_2_, userentity3_.created_ts as created_2_4_3_, userentity3_.date_format as date_for3_4_3_, userentity3_.email as email4_4_3_, userentity3_.last_login_ts as last_log5_4_3_, userentity3_.is_local as is_local6_4_3_, userentity3_.name as name7_4_3_, userentity3_.password as password8_4_3_, userentity3_.local_session_id as local_se9_4_3_, userentity3_.date_timezone as date_ti10_4_3_ from oauth_session_context oauthsessi0_ left outer join oauth_service oauthservi1_ on oauthsessi0_.service_id=oauthservi1_.id left outer join user_account userentity2_ on oauthservi1_.owner_id=userentity2_.id left outer join user_account userentity3_ on oauthsessi0_.user_id=userentity3_.id where 1=1
2021-12-11 17:23:52,162 DEBUG throwQueryException() : no errors
2021-12-11 17:23:52,163 DEBUG select oauthsessi0_.id as id1_2_0_, oauthservi1_.id as id1_0_1_, userentity2_.id as id1_4_2_, userentity3_.id as id1_4_3_, oauthsessi0_.is_active as is_activ2_2_0_, oauthsessi0_.created_ts as created_3_2_0_, oauthsessi0_.approved_scope as approved4_2_0_, oauthsessi0_.service_id as service_6_2_0_, oauthsessi0_.updated_ts as updated_5_2_0_, oauthsessi0_.user_id as user_id7_2_0_, oauthservi1_.client_secret as client_s2_0_1_, oauthservi1_.created_ts as created_3_0_1_, oauthservi1_.is_enabled as is_enabl4_0_1_, oauthservi1_.client_endpoints as client_e5_0_1_, oauthservi1_.client_name as client_n6_0_1_, oauthservi1_.owner_id as owner_id8_0_1_, oauthservi1_.updated_ts as updated_7_0_1_, userentity2_.created_ts as created_2_4_2_, userentity2_.date_format as date_for3_4_2_, userentity2_.email as email4_4_2_, userentity2_.last_login_ts as last_log5_4_2_, userentity2_.is_local as is_local6_4_2_, userentity2_.name as name7_4_2_, userentity2_.password as password8_4_2_, userentity2_.local_session_id as local_se9_4_2_, userentity2_.date_timezone as date_ti10_4_2_, userentity3_.created_ts as created_2_4_3_, userentity3_.date_format as date_for3_4_3_, userentity3_.email as email4_4_3_, userentity3_.last_login_ts as last_log5_4_3_, userentity3_.is_local as is_local6_4_3_, userentity3_.name as name7_4_3_, userentity3_.password as password8_4_3_, userentity3_.local_session_id as local_se9_4_3_, userentity3_.date_timezone as date_ti10_4_3_ from oauth_session_context oauthsessi0_ left outer join oauth_service oauthservi1_ on oauthsessi0_.service_id=oauthservi1_.id left outer join user_account userentity2_ on oauthservi1_.owner_id=userentity2_.id left outer join user_account userentity3_ on oauthsessi0_.user_id=userentity3_.id where 1=1
2021-12-11 17:23:52,164 DEBUG Transformed: 0 rows to: 0 distinct results
2021-12-11 17:23:52,164 DEBUG rolling back
2021-12-11 17:23:52,164 DEBUG Initiating JDBC connection release from afterTransaction
2021-12-11 17:23:52,164 DEBUG Clearing local Synchronizations
2021-12-11 17:23:52,164 DEBUG Initiating JDBC connection release from afterTransaction
2021-12-11 17:23:52,165  INFO Shutting down 1 service(s)
2021-12-11 17:23:52,165 DEBUG Requesting shutdown of com.peterphi.std.guice.hibernate.module.HibernateSessionFactoryProvider$$EnhancerByGuice$$e9bc367e@3e104d4b
2021-12-11 17:23:52,165  INFO Shut down Hibernate SessionFactory...
2021-12-11 17:23:52,165 DEBUG begin
2021-12-11 17:23:52,167 DEBUG committing
2021-12-11 17:23:52,167 DEBUG Initiating JDBC connection release from afterTransaction
2021-12-11 17:23:52,168 DEBUG Clearing local Synchronizations
2021-12-11 17:23:52,168 DEBUG Initiating JDBC connection release from afterTransaction
2021-12-11 17:23:52,168 DEBUG HHH000031: Closing
2021-12-11 17:23:52,168 DEBUG Implicitly destroying ServiceRegistry on de-registration of all child ServiceRegistries
2021-12-11 17:23:52,168  INFO HHH10001008: Cleaning up connection pool [jdbc:hsqldb:mem:testdb]
2021-12-11 17:23:52,169 DEBUG Implicitly destroying Boot-strap registry on de-registration of all child ServiceRegistries
2021-12-11 17:23:52,169  INFO Shutdown complete
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 5.281 sec - in com.peterphi.usermanager.db.dao.CreateDatabaseSchemaTest

Results :

Tests run: 1, Failures: 0, Errors: 0, Skipped: 0

[INFO] ------------------------------------------------------------------------
[INFO] Reactor Summary:
[INFO] 
[INFO] application framework parent ....................... SUCCESS [  0.477 s]
[INFO] stdlib ............................................. SUCCESS [  2.254 s]
[INFO] application framework guice modules parent ......... SUCCESS [  0.026 s]
[INFO] stdlib guice common ................................ SUCCESS [  4.690 s]
[INFO] user-manager ....................................... SUCCESS [  0.008 s]
[INFO] user manager rest api .............................. SUCCESS [  0.034 s]
[INFO] stdlib guice webapp ................................ SUCCESS [  1.633 s]
[INFO] stdlib guice metrics ............................... SUCCESS [  0.077 s]
[INFO] stdlib guice freemarker webapp ..................... SUCCESS [  0.037 s]
[INFO] stdlib guice testing support ....................... SUCCESS [  1.908 s]
[INFO] stdlib guice hibernate ............................. SUCCESS [ 16.642 s]
[INFO] stdlib guice hibernate testing support ............. SUCCESS [  4.549 s]
[INFO] stdlib guice liquibase support ..................... SUCCESS [  5.897 s]
[INFO] carbon client ...................................... SUCCESS [  2.361 s]
[INFO] service-manager .................................... SUCCESS [  0.005 s]
[INFO] Configuration Service .............................. SUCCESS [  1.015 s]
[INFO] Service Manager API ................................ SUCCESS [  0.034 s]
[INFO] stdlib-rules ....................................... SUCCESS [  3.392 s]
[INFO] stdlib-azure ....................................... SUCCESS [  1.084 s]
[INFO] Service Manager Main ............................... SUCCESS [  9.658 s]
[INFO] Host Agent ......................................... SUCCESS [  0.038 s]
[INFO] user manager service ............................... SUCCESS [  6.268 s]
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 01:03 min
[INFO] Finished at: 2021-12-11T17:23:52Z
[INFO] Final Memory: 26M/767M
[INFO] ------------------------------------------------------------------------

travis_time:end:3acf0960:start=1639243368229764354,finish=1639243432880247596,duration=64650483242[0K
[32;1mThe command "mvn test -Dhttps.protocols=TLSv1.2 -Dhttps.protocols=TLSv1.2 -B" exited with 0.[0m
travis_fold:start:before_cache[0Ktravis_time:start:081a7fa4[0K$ rm -f $HOME/.m2/repository/com/peterphi

travis_time:end:081a7fa4:start=1639243432893924261,finish=1639243432906172497,duration=12248236[0Ktravis_fold:end:before_cache[0Ktravis_fold:start:cache.2[0Kstore build cache
travis_time:start:0a2b83b9[0K
travis_time:end:0a2b83b9:start=1639243432916971748,finish=1639243432926856017,duration=9884269[0Ktravis_time:start:1993837c[0K/home/travis/.casher/bin/casher:190: warning: Insecure world writable dir /usr/local/bin in PATH, mode 040757
[32;1mchanges detected, packing new archive[0m
/home/travis/.casher/bin/casher:213:in `cache_archive_name': undefined method `[]' for nil:NilClass (NoMethodError)
	from /home/travis/.casher/bin/casher:143:in `push'
	from /home/travis/.casher/bin/casher:53:in `block in run'
	from /home/travis/.rvm/rubies/ruby-2.2.7/lib/ruby/2.2.0/timeout.rb:88:in `block in timeout'
	from /home/travis/.rvm/rubies/ruby-2.2.7/lib/ruby/2.2.0/timeout.rb:32:in `block in catch'
	from /home/travis/.rvm/rubies/ruby-2.2.7/lib/ruby/2.2.0/timeout.rb:32:in `catch'
	from /home/travis/.rvm/rubies/ruby-2.2.7/lib/ruby/2.2.0/timeout.rb:32:in `catch'
	from /home/travis/.rvm/rubies/ruby-2.2.7/lib/ruby/2.2.0/timeout.rb:103:in `timeout'
	from /home/travis/.casher/bin/casher:53:in `run'
	from /home/travis/.casher/bin/casher:263:in `<main>'
.
.
.
.

travis_time:end:1993837c:start=1639243432938028052,finish=1639243454844667357,duration=21906639305[0Ktravis_fold:end:cache.2[0K
Done. Your build exited with 0.
