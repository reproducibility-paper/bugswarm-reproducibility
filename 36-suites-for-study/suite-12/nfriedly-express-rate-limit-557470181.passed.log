travis_time:start:08465ee0[0Ktravis_time:end:08465ee0:start=1599094003321064587,finish=1599094003623196004,duration=302131417,event=no_world_writable_dirs[0Ktravis_time:start:04451ddb[0Ktravis_time:end:04451ddb:start=1599094003629928755,finish=1599094003633851065,duration=3922310,event=check_unsupported[0Ktravis_time:start:159a03ee[0Ktravis_fold:start:system_info[0K[33;1mBuild system information[0m
Build language: node_js
Build group: stable
Build dist: xenial
Build id: ''
Job id: ''
Runtime kernel version: 4.15.0-109-generic
[34m[1mBuild image provisioning date and time[0m
Thu May 23 15:30:39 UTC 2019
[34m[1mOperating System Details[0m
Distributor ID:	Ubuntu
Description:	Ubuntu 16.04.6 LTS
Release:	16.04
Codename:	xenial
[34m[1mSystemd Version[0m
systemd 229
[34m[1mCookbooks Version[0m
5dab6d6 https://github.com/travis-ci/travis-cookbooks/tree/5dab6d6
[34m[1mgit version[0m
git version 2.21.0
[34m[1mbash version[0m
GNU bash, version 4.3.48(1)-release (x86_64-pc-linux-gnu)
[34m[1mgcc version[0m
gcc (Ubuntu 5.4.0-6ubuntu1~16.04.11) 5.4.0 20160609
[34m[1mdocker version[0m
Client:
 Version:           18.06.1-ce
 API version:       1.38
 Go version:        go1.10.3
 Git commit:        e68fc7a
 Built:             Tue Aug 21 17:20:43 2018
 OS/Arch:           linux/amd64
 Experimental:      false
[34m[1mclang version[0m
clang version 7.0.0 (tags/RELEASE_700/final)
[34m[1mjq version[0m
jq-1.5
[34m[1mbats version[0m
Bats 0.4.0
[34m[1mshellcheck version[0m
0.6.0
[34m[1mshfmt version[0m
v2.6.3
[34m[1mccache version[0m
3.2.4
[34m[1mcmake version[0m
cmake version 3.12.4
[34m[1mheroku version[0m
heroku/7.24.4 linux-x64 node-v11.14.0
[34m[1mimagemagick version[0m
Version: ImageMagick 6.8.9-9 Q16 x86_64 2018-09-28 http://www.imagemagick.org
[34m[1mmd5deep version[0m
4.4
[34m[1mmercurial version[0m
version 4.8
[34m[1mmysql version[0m
mysql  Ver 14.14 Distrib 5.7.26, for Linux (x86_64) using  EditLine wrapper
[34m[1mopenssl version[0m
OpenSSL 1.0.2g  1 Mar 2016
[34m[1mpacker version[0m
1.3.3
[34m[1mpostgresql client version[0m
psql (PostgreSQL) 10.8 (Ubuntu 10.8-1.pgdg16.04+1)
[34m[1mragel version[0m
Ragel State Machine Compiler version 6.8 Feb 2013
[34m[1msudo version[0m
1.8.16
[34m[1mgzip version[0m
gzip 1.6
[34m[1mzip version[0m
Zip 3.0
[34m[1mvim version[0m
VIM - Vi IMproved 7.4 (2013 Aug 10, compiled Nov 24 2016 16:44:48)
[34m[1miptables version[0m
iptables v1.6.0
[34m[1mcurl version[0m
curl 7.47.0 (x86_64-pc-linux-gnu) libcurl/7.47.0 GnuTLS/3.4.10 zlib/1.2.8 libidn/1.32 librtmp/2.3
[34m[1mwget version[0m
GNU Wget 1.17.1 built on linux-gnu.
[34m[1mrsync version[0m
rsync  version 3.1.1  protocol version 31
[34m[1mgimme version[0m
v1.5.3
[34m[1mnvm version[0m
0.34.0
[34m[1mperlbrew version[0m
/home/travis/perl5/perlbrew/bin/perlbrew  - App::perlbrew/0.86
[34m[1mphpenv version[0m
rbenv 1.1.2-2-g4e92322
[34m[1mrvm version[0m
rvm 1.29.8 (latest) by Michal Papis, Piotr Kuczynski, Wayne E. Seguin [https://rvm.io]
[34m[1mdefault ruby version[0m
ruby 2.5.3p105 (2018-10-18 revision 65156) [x86_64-linux]
[34m[1mCouchDB version[0m
couchdb 1.6.1
[34m[1mElasticSearch version[0m
5.5.0
[34m[1mInstalled Firefox version[0m
firefox 63.0.1
[34m[1mMongoDB version[0m
MongoDB 4.0.9
[34m[1mPhantomJS version[0m
2.1.1
[34m[1mPre-installed PostgreSQL versions[0m
9.4.22
9.5.17
9.6.13
[34m[1mRedis version[0m
redis-server 5.0.5
[34m[1mPre-installed Go versions[0m
1.11.1
[34m[1mmvn version[0m
Apache Maven 3.6.0 (97c98ec64a1fdfee7767ce5ffb20918da4f719f3; 2018-10-24T18:41:47Z)
[34m[1mgradle version[0m
Gradle 5.1.1!
[34m[1mlein version[0m
Leiningen 2.9.1 on Java 11.0.2 OpenJDK 64-Bit Server VM
[34m[1mPre-installed Node.js versions[0m
v10.15.3
v11.0.0
v4.9.1
v6.17.1
v8.12.0
v8.16.0
v8.9
[34m[1mphpenv versions[0m
  system
  5.6
  5.6.40
  7.1
  7.1.27
  7.2
* 7.2.15 (set by /home/travis/.phpenv/version)
  hhvm
  hhvm-stable
[34m[1mcomposer --version[0m
Composer version 1.8.4 2019-02-11 10:52:10
[34m[1mPre-installed Ruby versions[0m
ruby-2.3.8
ruby-2.4.5
ruby-2.5.3
travis_fold:end:system_info[0K
travis_time:end:159a03ee:start=1599094003640386526,finish=1599094003649505956,duration=9119430,event=show_system_info[0Ktravis_time:start:0e7cb572[0Ktravis_time:end:0e7cb572:start=1599094003656002364,finish=1599094003677128113,duration=21125749,event=rm_riak_source[0Ktravis_time:start:22aa87c0[0Ktravis_time:end:22aa87c0:start=1599094003685296723,finish=1599094003698093667,duration=12796944,event=fix_rwky_redis[0Ktravis_time:start:1ce5269b[0K[31;1mTimeout waiting for network availability.[0m
travis_time:end:1ce5269b:start=1599094003704156418,finish=1599094024458128319,duration=20753971901,event=wait_for_network[0Ktravis_time:start:2489b948[0Ktravis_time:end:2489b948:start=1599094024466878429,finish=1599094024802920968,duration=336042539,event=update_apt_keys[0Ktravis_time:start:0e097690[0Ktravis_time:end:0e097690:start=1599094024809896823,finish=1599094024900435465,duration=90538642,event=fix_hhvm_source[0Ktravis_time:start:0b5829d6[0Ktravis_time:end:0b5829d6:start=1599094024905540120,finish=1599094024909973344,duration=4433224,event=update_mongo_arch[0Ktravis_time:start:040cfec0[0Ktravis_time:end:040cfec0:start=1599094024915578742,finish=1599094024983497880,duration=67919138,event=fix_sudo_enabled_trusty[0Ktravis_time:start:004c2cb0[0Ktravis_time:end:004c2cb0:start=1599094024991016239,finish=1599094025010948635,duration=19932396,event=clean_up_path[0Ktravis_time:start:005b168d[0Ktravis_time:end:005b168d:start=1599094025019396259,finish=1599094025037446409,duration=18050150,event=fix_resolv_conf[0Ktravis_time:start:04e37288[0Ktravis_time:end:04e37288:start=1599094025044553630,finish=1599094025062759714,duration=18206084,event=fix_etc_hosts[0Ktravis_time:start:01e8fa48[0Ktravis_time:end:01e8fa48:start=1599094025068026906,finish=1599094025775554370,duration=707527464,event=fix_mvn_settings_xml[0Ktravis_time:start:144aab7b[0Ktravis_time:end:144aab7b:start=1599094025782041862,finish=1599094025796774453,duration=14732591,event=no_ipv6_localhost[0Ktravis_time:start:0f7e0f69[0Ktravis_time:end:0f7e0f69:start=1599094025804442326,finish=1599094025809317858,duration=4875532,event=fix_etc_mavenrc[0Ktravis_time:start:066d0c53[0Ktravis_time:end:066d0c53:start=1599094025816091175,finish=1599094025822446039,duration=6354864,event=fix_wwdr_certificate[0Ktravis_time:start:066fb8bd[0Ktravis_time:end:066fb8bd:start=1599094025829137155,finish=1599094025924722150,duration=95584995,event=put_localhost_first[0Ktravis_time:start:1591292e[0Ktravis_time:end:1591292e:start=1599094025931588633,finish=1599094025936808429,duration=5219796,event=home_paths[0Ktravis_time:start:0f23d852[0Ktravis_time:end:0f23d852:start=1599094025943876304,finish=1599094026956477874,duration=1012601570,event=disable_initramfs[0Ktravis_time:start:01d18508[0Ktravis_time:end:01d18508:start=1599094026965337279,finish=1599094027139710322,duration=174373043,event=disable_ssh_roaming[0Ktravis_time:start:0dab363e[0Ktravis_time:end:0dab363e:start=1599094027147019025,finish=1599094027153026732,duration=6007707,event=debug_tools[0Ktravis_time:start:2ac52d0a[0Ktravis_time:end:2ac52d0a:start=1599094027161308807,finish=1599094027170615943,duration=9307136,event=uninstall_oclint[0Ktravis_time:start:1716fcd5[0Ktravis_time:end:1716fcd5:start=1599094027179048325,finish=1599094027186224236,duration=7175911,event=rvm_use[0Ktravis_time:start:053ef3f3[0Ktravis_time:end:053ef3f3:start=1599094027194051478,finish=1599094027209984167,duration=15932689,event=rm_etc_boto_cfg[0Ktravis_time:start:1ec11362[0Ktravis_time:end:1ec11362:start=1599094027217929485,finish=1599094027223494835,duration=5565350,event=rm_oraclejdk8_symlink[0Ktravis_time:start:2242f668[0Ktravis_time:end:2242f668:start=1599094027231517286,finish=1599094027467989338,duration=236472052,event=enable_i386[0Ktravis_time:start:26489394[0Ktravis_time:end:26489394:start=1599094027475079215,finish=1599094027482265650,duration=7186435,event=update_rubygems[0Ktravis_time:start:03691209[0Ktravis_time:end:03691209:start=1599094027488995491,finish=1599094028495180504,duration=1006185013,event=ensure_path_components[0Ktravis_time:start:21ace3f8[0Ktravis_time:end:21ace3f8:start=1599094028504058526,finish=1599094028509592364,duration=5533838,event=redefine_curl[0Ktravis_time:start:311b5a7a[0Ktravis_time:end:311b5a7a:start=1599094028518072813,finish=1599094028523962926,duration=5890113,event=nonblock_pipe[0Ktravis_time:start:0b2c982e[0Ktravis_time:end:0b2c982e:start=1599094028531446592,finish=1599094041084327401,duration=12552880809,event=apt_get_update[0Ktravis_time:start:09caf070[0Ktravis_time:end:09caf070:start=1599094041093120970,finish=1599094041099050595,duration=5929625,event=deprecate_xcode_64[0Ktravis_time:start:01435b78[0Ktravis_time:end:01435b78:start=1599094041107069187,finish=1599094046350195420,duration=5243126233,event=update_heroku[0Ktravis_time:start:045860d8[0Ktravis_time:end:045860d8:start=1599094046358458169,finish=1599094046364354390,duration=5896221,event=shell_session_update[0Ktravis_time:start:26e8c480[0Ktravis_fold:start:docker_mtu[0Ktravis_fold:end:docker_mtu[0Ktravis_time:end:26e8c480:start=1599094046371352613,finish=1599094046410046443,duration=38693830,event=set_docker_mtu[0Ktravis_time:start:0dd89b0b[0Ktravis_time:end:0dd89b0b:start=1599094046416101455,finish=1599094046434726572,duration=18625117,event=resolvconf[0Ktravis_time:start:02ffe2b0[0Ktravis_time:end:02ffe2b0:start=1599094046442222998,finish=1599094046446897389,duration=4674391,event=fix_ps4[0Ktravis_time:start:077037b0[0K
$ cd passed/nfriedly/express-rate-limit

travis_time:end:077037b0:start=1599094046453605114,finish=1599094046458839142,duration=5234028,event=checkout[0Ktravis_time:start:11b369a2[0Ktravis_time:end:11b369a2:start=1599094046465454515,finish=1599094053769975487,duration=7304520972,event=env[0Ktravis_fold:start:nvm.install[0Ktravis_time:start:056ed1f9[0K$ nvm install node
Downloading and installing node v14.9.0...
Now using node v14.9.0 (npm v6.14.8)
travis_time:end:056ed1f9:start=1599094053784821317,finish=1599094060918779260,duration=7133957943,event=setup[0Ktravis_fold:end:nvm.install[0K
travis_fold:start:cache.1[0KSetting up build cache
$ export CASHER_DIR=${TRAVIS_HOME}/.casher
travis_time:start:02d5a98f[0K$ Installing caching utilities
travis_time:end:02d5a98f:start=1599094062612419987,finish=1599094074816845463,duration=12204425476,event=setup_casher[0Ktravis_time:start:001c5e9c[0K$ Installing caching utilities from the Travis CI server (https:///files/casher) failed, failing over to using GitHub (https://raw.githubusercontent.com/travis-ci/casher/bash/bin/casher)
travis_time:end:001c5e9c:start=1599094074826120575,finish=1599094075027012106,duration=200891531,event=setup_casher[0Ktravis_time:start:02be902a[0Ktravis_time:end:02be902a:start=1599094075039596836,finish=1599094075047149013,duration=7552177,event=setup_casher[0Ktravis_time:start:1c9e9a32[0Kattempting to download cache archive[0m
[31;1mcould not download cache[0m
travis_time:end:1c9e9a32:start=1599094075057145030,finish=1599094076693736096,duration=1636591066,event=setup_casher[0Ktravis_fold:end:cache.1[0K
travis_fold:start:cache.npm[0K
travis_time:start:030e65c0[0Ktravis_time:end:030e65c0:start=1599094076934486089,finish=1599094076940326909,duration=5840820,event=setup_cache[0Ktravis_time:start:01483f93[0Kadding /home/travis/.npm to cache[0m
travis_time:end:01483f93:start=1599094076948007404,finish=1599094078675893423,duration=1727886019,event=setup_cache[0Ktravis_fold:end:cache.npm[0K$ node --version
v14.9.0
$ npm --version
6.14.8
$ nvm --version
0.34.0

travis_fold:start:install.npm[0Ktravis_time:start:05cb5540[0K$ npm ci 

> husky@3.0.0 install /home/travis/build/passed/nfriedly/express-rate-limit/node_modules/husky
> node husky install

husky > Setting up git hooks
CI detected, skipping Git hooks installation.

> husky@3.0.0 postinstall /home/travis/build/passed/nfriedly/express-rate-limit/node_modules/husky
> opencollective-postinstall || true


> express-rate-limit@0.0.0-typescript-beta-6 prepublish /home/travis/build/passed/nfriedly/express-rate-limit
> npm run build


> express-rate-limit@0.0.0-typescript-beta-6 build /home/travis/build/passed/nfriedly/express-rate-limit
> tsc

added 350 packages in 12.368s
travis_time:end:05cb5540:start=1599094079085536685,finish=1599094091887678370,duration=12802141685,event=install[0Ktravis_fold:end:install.npm[0K
travis_time:start:21243fe4[0K$ npm test

> express-rate-limit@0.0.0-typescript-beta-6 pretest /home/travis/build/passed/nfriedly/express-rate-limit
> npm run build


> express-rate-limit@0.0.0-typescript-beta-6 build /home/travis/build/passed/nfriedly/express-rate-limit
> tsc


> express-rate-limit@0.0.0-typescript-beta-6 test /home/travis/build/passed/nfriedly/express-rate-limit
> eslint . && mocha --require ts-node/register test/*-test.*



  express-rate-limit node module
    âœ“ should not allow the use of a store that is not valid
    âœ“ should call incr on the store
    âœ“ should call resetKey on the store
    âœ“ should send correct x-ratelimit-limit and x-ratelimit-remaining
    âœ“ should refuse additional connections once IP has reached the max
    âœ“ should return the Retry-After header once IP has reached the max
    âœ“ should show the provided message instead of the default message when max connections are reached
    âœ“ should (eventually) accept new connections from a blocked IP (68ms)
    âœ“ should work repeatedly (issues #2 & #3) (136ms)
    âœ“ should allow the error statusCode to be customized
    âœ“ should allow individual IP's to be reset
    âœ“ should respond with JSON
    âœ“ should use the custom handler when specified
    âœ“ should allow custom key generators
    âœ“ should allow custom skip function
    âœ“ should pass current hits and limit hits to the next function
    âœ“ should allow max to be a function
    âœ“ should allow max to be a function that returns a promise
    âœ“ should calculate the remaining hits
    âœ“ should decrement hits with success response and skipSuccessfulRequests
    âœ“ should not decrement hits with failed response and skipSuccessfulRequests
    âœ“ should decrement hits with failed response and skipFailedRequests
    âœ“ should decrement hits with closed response and skipFailedRequests
    âœ“ should decrement hits with response emitting error and skipFailedRequests
    âœ“ should not decrement hits with success response and skipFailedRequests
    âœ“ should decrement hits with IP hits reached max and skipFailedRequests
    âœ“ should not modify the passed in options object

  MemoryStore store
    âœ“ sets the value to 1 on first incr
    âœ“ increments the key for the store each incr
    âœ“ resets the key for the store when used with resetKey
    âœ“ resets all keys for the store when used with resetAll
    âœ“ resets all keys for the store when the timeout is reached (60ms)
    âœ“ decrements the key for the store each decrement
    timeout
      âœ“ can run in electron where setInterval does not return a Timeout object with an unset function

  express-rate-limit typescript typings
    âœ“ should work with non-string messages


  35 passing (478ms)

travis_time:end:21243fe4:start=1599094091897138208,finish=1599094104139687502,duration=12242549294,event=[0K[32;1mThe command "npm test" exited with 0.[0m
travis_fold:start:cache.2[0Kstore build cache
travis_time:start:0a4788ec[0Ktravis_time:end:0a4788ec:start=1599094104147148198,finish=1599094104153018353,duration=5870155,event=cache[0Ktravis_time:start:15e8b8a4[0K[32;1mchanges detected, packing new archive[0m
[32;1muploading /[0m
[31;1mfailed to upload cache[0m
travis_time:end:15e8b8a4:start=1599094104160524718,finish=1599094107142861230,duration=2982336512,event=cache[0Ktravis_fold:end:cache.2[0K

Done. Your build exited with 0.
